const h_=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};h_();function qh(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const f_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",p_=qh(f_);function Dy(t){return!!t||t===""}function Ot(t){if(Qe(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Zt(i)?b_(i):Ot(i);if(s)for(const r in s)e[r]=s[r]}return e}else{if(Zt(t))return t;if(Jt(t))return t}}const m_=/;(?![^(]*\))/g,g_=/:(.+)/;function b_(t){const e={};return t.split(m_).forEach(n=>{if(n){const i=n.split(g_);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ie(t){let e="";if(Zt(t))e=t;else if(Qe(t))for(let n=0;n<t.length;n++){const i=Ie(t[n]);i&&(e+=i+" ")}else if(Jt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const it=t=>Zt(t)?t:t==null?"":Qe(t)||Jt(t)&&(t.toString===Ay||!ct(t.toString))?JSON.stringify(t,Py,2):String(t),Py=(t,e)=>e&&e.__v_isRef?Py(t,e.value):_o(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s])=>(n[`${i} =>`]=s,n),{})}:Ly(e)?{[`Set(${e.size})`]:[...e.values()]}:Jt(e)&&!Qe(e)&&!Iy(e)?String(e):e,At={},vo=[],Ei=()=>{},y_=()=>!1,x_=/^on[^a-z]/,Yc=t=>x_.test(t),Zh=t=>t.startsWith("onUpdate:"),yn=Object.assign,Jh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},v_=Object.prototype.hasOwnProperty,_t=(t,e)=>v_.call(t,e),Qe=Array.isArray,_o=t=>qc(t)==="[object Map]",Ly=t=>qc(t)==="[object Set]",ct=t=>typeof t=="function",Zt=t=>typeof t=="string",Qh=t=>typeof t=="symbol",Jt=t=>t!==null&&typeof t=="object",Ry=t=>Jt(t)&&ct(t.then)&&ct(t.catch),Ay=Object.prototype.toString,qc=t=>Ay.call(t),__=t=>qc(t).slice(8,-1),Iy=t=>qc(t)==="[object Object]",ef=t=>Zt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yc=qh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},w_=/-(\w)/g,Wi=Zc(t=>t.replace(w_,(e,n)=>n?n.toUpperCase():"")),S_=/\B([A-Z])/g,Vr=Zc(t=>t.replace(S_,"-$1").toLowerCase()),Jc=Zc(t=>t.charAt(0).toUpperCase()+t.slice(1)),xc=Zc(t=>t?`on${Jc(t)}`:""),Ua=(t,e)=>!Object.is(t,e),$u=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Tc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ky=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let mp;const M_=()=>mp||(mp=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ki;class C_{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ki&&(this.parent=ki,this.index=(ki.scopes||(ki.scopes=[])).push(this)-1)}run(e){if(this.active){const n=ki;try{return ki=this,e()}finally{ki=n}}}on(){ki=this}off(){ki=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function T_(t,e=ki){e&&e.active&&e.effects.push(t)}const tf=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Oy=t=>(t.w&js)>0,Fy=t=>(t.n&js)>0,E_=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=js},D_=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];Oy(s)&&!Fy(s)?s.delete(t):e[n++]=s,s.w&=~js,s.n&=~js}e.length=n}},Zd=new WeakMap;let ba=0,js=1;const Jd=30;let Si;const Er=Symbol(""),Qd=Symbol("");class nf{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,T_(this,i)}run(){if(!this.active)return this.fn();let e=Si,n=Ns;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Si,Si=this,Ns=!0,js=1<<++ba,ba<=Jd?E_(this):gp(this),this.fn()}finally{ba<=Jd&&D_(this),js=1<<--ba,Si=this.parent,Ns=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Si===this?this.deferStop=!0:this.active&&(gp(this),this.onStop&&this.onStop(),this.active=!1)}}function gp(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Ns=!0;const Ny=[];function Vo(){Ny.push(Ns),Ns=!1}function Uo(){const t=Ny.pop();Ns=t===void 0?!0:t}function Jn(t,e,n){if(Ns&&Si){let i=Zd.get(t);i||Zd.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=tf()),By(s)}}function By(t,e){let n=!1;ba<=Jd?Fy(t)||(t.n|=js,n=!Oy(t)):n=!t.has(Si),n&&(t.add(Si),Si.deps.push(t))}function fs(t,e,n,i,s,r){const o=Zd.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Qe(t))o.forEach((l,c)=>{(c==="length"||c>=i)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Qe(t)?ef(n)&&a.push(o.get("length")):(a.push(o.get(Er)),_o(t)&&a.push(o.get(Qd)));break;case"delete":Qe(t)||(a.push(o.get(Er)),_o(t)&&a.push(o.get(Qd)));break;case"set":_o(t)&&a.push(o.get(Er));break}if(a.length===1)a[0]&&eh(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);eh(tf(l))}}function eh(t,e){const n=Qe(t)?t:[...t];for(const i of n)i.computed&&bp(i);for(const i of n)i.computed||bp(i)}function bp(t,e){(t!==Si||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const P_=qh("__proto__,__v_isRef,__isVue"),zy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Qh)),L_=sf(),R_=sf(!1,!0),A_=sf(!0),yp=I_();function I_(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=vt(this);for(let r=0,o=this.length;r<o;r++)Jn(i,"get",r+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(vt)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Vo();const i=vt(this)[e].apply(this,n);return Uo(),i}}),t}function sf(t=!1,e=!1){return function(i,s,r){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(t?e?Y_:Gy:e?Wy:Hy).get(i))return i;const o=Qe(i);if(!t&&o&&_t(yp,s))return Reflect.get(yp,s,r);const a=Reflect.get(i,s,r);return(Qh(s)?zy.has(s):P_(s))||(t||Jn(i,"get",s),e)?a:ht(a)?o&&ef(s)?a:a.value:Jt(a)?t?jy(a):Ho(a):a}}const k_=Vy(),O_=Vy(!0);function Vy(t=!1){return function(n,i,s,r){let o=n[i];if(Ha(o)&&ht(o)&&!ht(s))return!1;if(!t&&!Ha(s)&&(th(s)||(s=vt(s),o=vt(o)),!Qe(n)&&ht(o)&&!ht(s)))return o.value=s,!0;const a=Qe(n)&&ef(i)?Number(i)<n.length:_t(n,i),l=Reflect.set(n,i,s,r);return n===vt(r)&&(a?Ua(s,o)&&fs(n,"set",i,s):fs(n,"add",i,s)),l}}function F_(t,e){const n=_t(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&fs(t,"delete",e,void 0),i}function N_(t,e){const n=Reflect.has(t,e);return(!Qh(e)||!zy.has(e))&&Jn(t,"has",e),n}function B_(t){return Jn(t,"iterate",Qe(t)?"length":Er),Reflect.ownKeys(t)}const Uy={get:L_,set:k_,deleteProperty:F_,has:N_,ownKeys:B_},z_={get:A_,set(t,e){return!0},deleteProperty(t,e){return!0}},V_=yn({},Uy,{get:R_,set:O_}),rf=t=>t,Qc=t=>Reflect.getPrototypeOf(t);function Pl(t,e,n=!1,i=!1){t=t.__v_raw;const s=vt(t),r=vt(e);n||(e!==r&&Jn(s,"get",e),Jn(s,"get",r));const{has:o}=Qc(s),a=i?rf:n?lf:Wa;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function Ll(t,e=!1){const n=this.__v_raw,i=vt(n),s=vt(t);return e||(t!==s&&Jn(i,"has",t),Jn(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Rl(t,e=!1){return t=t.__v_raw,!e&&Jn(vt(t),"iterate",Er),Reflect.get(t,"size",t)}function xp(t){t=vt(t);const e=vt(this);return Qc(e).has.call(e,t)||(e.add(t),fs(e,"add",t,t)),this}function vp(t,e){e=vt(e);const n=vt(this),{has:i,get:s}=Qc(n);let r=i.call(n,t);r||(t=vt(t),r=i.call(n,t));const o=s.call(n,t);return n.set(t,e),r?Ua(e,o)&&fs(n,"set",t,e):fs(n,"add",t,e),this}function _p(t){const e=vt(this),{has:n,get:i}=Qc(e);let s=n.call(e,t);s||(t=vt(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&fs(e,"delete",t,void 0),r}function wp(){const t=vt(this),e=t.size!==0,n=t.clear();return e&&fs(t,"clear",void 0,void 0),n}function Al(t,e){return function(i,s){const r=this,o=r.__v_raw,a=vt(o),l=e?rf:t?lf:Wa;return!t&&Jn(a,"iterate",Er),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function Il(t,e,n){return function(...i){const s=this.__v_raw,r=vt(s),o=_o(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...i),u=n?rf:e?lf:Wa;return!e&&Jn(r,"iterate",l?Qd:Er),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function ys(t){return function(...e){return t==="delete"?!1:this}}function U_(){const t={get(r){return Pl(this,r)},get size(){return Rl(this)},has:Ll,add:xp,set:vp,delete:_p,clear:wp,forEach:Al(!1,!1)},e={get(r){return Pl(this,r,!1,!0)},get size(){return Rl(this)},has:Ll,add:xp,set:vp,delete:_p,clear:wp,forEach:Al(!1,!0)},n={get(r){return Pl(this,r,!0)},get size(){return Rl(this,!0)},has(r){return Ll.call(this,r,!0)},add:ys("add"),set:ys("set"),delete:ys("delete"),clear:ys("clear"),forEach:Al(!0,!1)},i={get(r){return Pl(this,r,!0,!0)},get size(){return Rl(this,!0)},has(r){return Ll.call(this,r,!0)},add:ys("add"),set:ys("set"),delete:ys("delete"),clear:ys("clear"),forEach:Al(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=Il(r,!1,!1),n[r]=Il(r,!0,!1),e[r]=Il(r,!1,!0),i[r]=Il(r,!0,!0)}),[t,n,e,i]}const[H_,W_,G_,j_]=U_();function of(t,e){const n=e?t?j_:G_:t?W_:H_;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(_t(n,s)&&s in i?n:i,s,r)}const $_={get:of(!1,!1)},K_={get:of(!1,!0)},X_={get:of(!0,!1)},Hy=new WeakMap,Wy=new WeakMap,Gy=new WeakMap,Y_=new WeakMap;function q_(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Z_(t){return t.__v_skip||!Object.isExtensible(t)?0:q_(__(t))}function Ho(t){return Ha(t)?t:af(t,!1,Uy,$_,Hy)}function J_(t){return af(t,!1,V_,K_,Wy)}function jy(t){return af(t,!0,z_,X_,Gy)}function af(t,e,n,i,s){if(!Jt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=Z_(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return s.set(t,a),a}function wo(t){return Ha(t)?wo(t.__v_raw):!!(t&&t.__v_isReactive)}function Ha(t){return!!(t&&t.__v_isReadonly)}function th(t){return!!(t&&t.__v_isShallow)}function $y(t){return wo(t)||Ha(t)}function vt(t){const e=t&&t.__v_raw;return e?vt(e):t}function Ky(t){return Tc(t,"__v_skip",!0),t}const Wa=t=>Jt(t)?Ho(t):t,lf=t=>Jt(t)?jy(t):t;function Xy(t){Ns&&Si&&(t=vt(t),By(t.dep||(t.dep=tf())))}function Yy(t,e){t=vt(t),t.dep&&eh(t.dep)}function ht(t){return!!(t&&t.__v_isRef===!0)}function st(t){return Q_(t,!1)}function Q_(t,e){return ht(t)?t:new ew(t,e)}class ew{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:vt(e),this._value=n?e:Wa(e)}get value(){return Xy(this),this._value}set value(e){e=this.__v_isShallow?e:vt(e),Ua(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Wa(e),Yy(this))}}function ge(t){return ht(t)?t.value:t}const tw={get:(t,e,n)=>ge(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return ht(s)&&!ht(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function qy(t){return wo(t)?t:new Proxy(t,tw)}class nw{constructor(e,n,i,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new nf(e,()=>{this._dirty||(this._dirty=!0,Yy(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=vt(this);return Xy(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function iw(t,e,n=!1){let i,s;const r=ct(t);return r?(i=t,s=Ei):(i=t.get,s=t.set),new nw(i,s,r||!s,n)}function Bs(t,e,n,i){let s;try{s=i?t(...i):t()}catch(r){eu(r,e,n)}return s}function di(t,e,n,i){if(ct(t)){const r=Bs(t,e,n,i);return r&&Ry(r)&&r.catch(o=>{eu(o,e,n)}),r}const s=[];for(let r=0;r<t.length;r++)s.push(di(t[r],e,n,i));return s}function eu(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=n;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Bs(l,null,10,[t,o,a]);return}}sw(t,n,s,i)}function sw(t,e,n,i=!0){console.error(t)}let Ec=!1,nh=!1;const qn=[];let rs=0;const Ma=[];let ya=null,po=0;const Ca=[];let Ps=null,mo=0;const Zy=Promise.resolve();let cf=null,ih=null;function rw(t){const e=cf||Zy;return t?e.then(this?t.bind(this):t):e}function ow(t){let e=rs+1,n=qn.length;for(;e<n;){const i=e+n>>>1;Ga(qn[i])<t?e=i+1:n=i}return e}function Jy(t){(!qn.length||!qn.includes(t,Ec&&t.allowRecurse?rs+1:rs))&&t!==ih&&(t.id==null?qn.push(t):qn.splice(ow(t.id),0,t),Qy())}function Qy(){!Ec&&!nh&&(nh=!0,cf=Zy.then(n0))}function aw(t){const e=qn.indexOf(t);e>rs&&qn.splice(e,1)}function e0(t,e,n,i){Qe(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?i+1:i))&&n.push(t),Qy()}function lw(t){e0(t,ya,Ma,po)}function cw(t){e0(t,Ps,Ca,mo)}function tu(t,e=null){if(Ma.length){for(ih=e,ya=[...new Set(Ma)],Ma.length=0,po=0;po<ya.length;po++)ya[po]();ya=null,po=0,ih=null,tu(t,e)}}function t0(t){if(tu(),Ca.length){const e=[...new Set(Ca)];if(Ca.length=0,Ps){Ps.push(...e);return}for(Ps=e,Ps.sort((n,i)=>Ga(n)-Ga(i)),mo=0;mo<Ps.length;mo++)Ps[mo]();Ps=null,mo=0}}const Ga=t=>t.id==null?1/0:t.id;function n0(t){nh=!1,Ec=!0,tu(t),qn.sort((n,i)=>Ga(n)-Ga(i));const e=Ei;try{for(rs=0;rs<qn.length;rs++){const n=qn[rs];n&&n.active!==!1&&Bs(n,null,14)}}finally{rs=0,qn.length=0,t0(),Ec=!1,cf=null,(qn.length||Ma.length||Ca.length)&&n0(t)}}function uw(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||At;let s=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=i[u]||At;h&&(s=n.map(p=>p.trim())),d&&(s=n.map(ky))}let a,l=i[a=xc(e)]||i[a=xc(Wi(e))];!l&&r&&(l=i[a=xc(Vr(e))]),l&&di(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,di(c,t,6,s)}}function i0(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!ct(t)){const l=c=>{const u=i0(c,e,!0);u&&(a=!0,yn(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(i.set(t,null),null):(Qe(r)?r.forEach(l=>o[l]=null):yn(o,r),i.set(t,o),o)}function nu(t,e){return!t||!Yc(e)?!1:(e=e.slice(2).replace(/Once$/,""),_t(t,e[0].toLowerCase()+e.slice(1))||_t(t,Vr(e))||_t(t,e))}let Dn=null,iu=null;function Dc(t){const e=Dn;return Dn=t,iu=t&&t.type.__scopeId||null,e}function dw(t){iu=t}function hw(){iu=null}function Xe(t,e=Dn,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&kp(-1);const r=Dc(e),o=t(...s);return Dc(r),i._d&&kp(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function Ku(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:g,inheritAttrs:m}=t;let f,b;const x=Dc(t);try{if(n.shapeFlag&4){const y=s||i;f=Fi(u.call(y,y,d,r,p,h,g)),b=l}else{const y=e;f=Fi(y.length>1?y(r,{attrs:l,slots:a,emit:c}):y(r,null)),b=e.props?l:fw(l)}}catch(y){Pa.length=0,eu(y,t,1),f=he(hi)}let _=f;if(b&&m!==!1){const y=Object.keys(b),{shapeFlag:v}=_;y.length&&v&7&&(o&&y.some(Zh)&&(b=pw(b,o)),_=$s(_,b))}return n.dirs&&(_=$s(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),f=_,Dc(x),f}const fw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Yc(n))&&((e||(e={}))[n]=t[n]);return e},pw=(t,e)=>{const n={};for(const i in t)(!Zh(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function mw(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Sp(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!nu(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Sp(i,o,c):!0:!!o;return!1}function Sp(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!nu(n,r))return!0}return!1}function gw({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const bw=t=>t.__isSuspense;function yw(t,e){e&&e.pendingBranch?Qe(t)?e.effects.push(...t):e.effects.push(t):cw(t)}function xw(t,e){if(hn){let n=hn.provides;const i=hn.parent&&hn.parent.provides;i===n&&(n=hn.provides=Object.create(i)),n[t]=e}}function Ta(t,e,n=!1){const i=hn||Dn;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ct(e)?e.call(i.proxy):e}}const Mp={};function Rn(t,e,n){return s0(t,e,n)}function s0(t,e,{immediate:n,deep:i,flush:s,onTrack:r,onTrigger:o}=At){const a=hn;let l,c=!1,u=!1;if(ht(t)?(l=()=>t.value,c=th(t)):wo(t)?(l=()=>t,i=!0):Qe(t)?(u=!0,c=t.some(b=>wo(b)||th(b)),l=()=>t.map(b=>{if(ht(b))return b.value;if(wo(b))return wr(b);if(ct(b))return Bs(b,a,2)})):ct(t)?e?l=()=>Bs(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),di(t,a,3,[h])}:l=Ei,e&&i){const b=l;l=()=>wr(b())}let d,h=b=>{d=f.onStop=()=>{Bs(b,a,4)}};if(Ya)return h=Ei,e?n&&di(e,a,3,[l(),u?[]:void 0,h]):l(),Ei;let p=u?[]:Mp;const g=()=>{if(!!f.active)if(e){const b=f.run();(i||c||(u?b.some((x,_)=>Ua(x,p[_])):Ua(b,p)))&&(d&&d(),di(e,a,3,[b,p===Mp?void 0:p,h]),p=b)}else f.run()};g.allowRecurse=!!e;let m;s==="sync"?m=g:s==="post"?m=()=>Vn(g,a&&a.suspense):m=()=>lw(g);const f=new nf(l,m);return e?n?g():p=f.run():s==="post"?Vn(f.run.bind(f),a&&a.suspense):f.run(),()=>{f.stop(),a&&a.scope&&Jh(a.scope.effects,f)}}function vw(t,e,n){const i=this.proxy,s=Zt(t)?t.includes(".")?r0(i,t):()=>i[t]:t.bind(i,i);let r;ct(e)?r=e:(r=e.handler,n=e);const o=hn;To(this);const a=s0(s,r.bind(i),n);return o?To(o):Dr(),a}function r0(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function wr(t,e){if(!Jt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ht(t))wr(t.value,e);else if(Qe(t))for(let n=0;n<t.length;n++)wr(t[n],e);else if(Ly(t)||_o(t))t.forEach(n=>{wr(n,e)});else if(Iy(t))for(const n in t)wr(t[n],e);return t}function o0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wo(()=>{t.isMounted=!0}),h0(()=>{t.isUnmounting=!0}),t}const ii=[Function,Array],_w={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ii,onEnter:ii,onAfterEnter:ii,onEnterCancelled:ii,onBeforeLeave:ii,onLeave:ii,onAfterLeave:ii,onLeaveCancelled:ii,onBeforeAppear:ii,onAppear:ii,onAfterAppear:ii,onAppearCancelled:ii},setup(t,{slots:e}){const n=Ks(),i=o0();let s;return()=>{const r=e.default&&uf(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const m of r)if(m.type!==hi){o=m;break}}const a=vt(t),{mode:l}=a;if(i.isLeaving)return Xu(o);const c=Cp(o);if(!c)return Xu(o);const u=ja(c,a,i,n);$a(c,u);const d=n.subTree,h=d&&Cp(d);let p=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();s===void 0?s=m:m!==s&&(s=m,p=!0)}if(h&&h.type!==hi&&(!xr(c,h)||p)){const m=ja(h,a,i,n);if($a(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update()},Xu(o);l==="in-out"&&c.type!==hi&&(m.delayLeave=(f,b,x)=>{const _=l0(i,h);_[String(h.key)]=h,f._leaveCb=()=>{b(),f._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=x})}return o}}},a0=_w;function l0(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function ja(t,e,n,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:f,onAfterAppear:b,onAppearCancelled:x}=e,_=String(t.key),y=l0(n,t),v=(w,D)=>{w&&di(w,i,9,D)},C=(w,D)=>{const N=D[1];v(w,D),Qe(w)?w.every(V=>V.length<=1)&&N():w.length<=1&&N()},R={mode:r,persisted:o,beforeEnter(w){let D=a;if(!n.isMounted)if(s)D=m||a;else return;w._leaveCb&&w._leaveCb(!0);const N=y[_];N&&xr(t,N)&&N.el._leaveCb&&N.el._leaveCb(),v(D,[w])},enter(w){let D=l,N=c,V=u;if(!n.isMounted)if(s)D=f||l,N=b||c,V=x||u;else return;let j=!1;const se=w._enterCb=$=>{j||(j=!0,$?v(V,[w]):v(N,[w]),R.delayedLeave&&R.delayedLeave(),w._enterCb=void 0)};D?C(D,[w,se]):se()},leave(w,D){const N=String(t.key);if(w._enterCb&&w._enterCb(!0),n.isUnmounting)return D();v(d,[w]);let V=!1;const j=w._leaveCb=se=>{V||(V=!0,D(),se?v(g,[w]):v(p,[w]),w._leaveCb=void 0,y[N]===t&&delete y[N])};y[N]=t,h?C(h,[w,j]):j()},clone(w){return ja(w,e,n,i)}};return R}function Xu(t){if(su(t))return t=$s(t),t.children=null,t}function Cp(t){return su(t)?t.children?t.children[0]:void 0:t}function $a(t,e){t.shapeFlag&6&&t.component?$a(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function uf(t,e=!1,n){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===je?(o.patchFlag&128&&s++,i=i.concat(uf(o.children,e,a))):(e||o.type!==hi)&&i.push(a!=null?$s(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function c0(t){return ct(t)?{setup:t,name:t.name}:t}const Ea=t=>!!t.type.__asyncLoader,su=t=>t.type.__isKeepAlive;function ww(t,e){u0(t,"a",e)}function Sw(t,e){u0(t,"da",e)}function u0(t,e,n=hn){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(ru(e,i,n),n){let s=n.parent;for(;s&&s.parent;)su(s.parent.vnode)&&Mw(i,e,n,s),s=s.parent}}function Mw(t,e,n,i){const s=ru(e,t,i,!0);df(()=>{Jh(i[e],s)},n)}function ru(t,e,n=hn,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Vo(),To(n);const a=di(e,n,t,o);return Dr(),Uo(),a});return i?s.unshift(r):s.push(r),r}}const ps=t=>(e,n=hn)=>(!Ya||t==="sp")&&ru(t,e,n),Cw=ps("bm"),Wo=ps("m"),Tw=ps("bu"),d0=ps("u"),h0=ps("bum"),df=ps("um"),Ew=ps("sp"),Dw=ps("rtg"),Pw=ps("rtc");function Lw(t,e=hn){ru("ec",t,e)}function bt(t,e){const n=Dn;if(n===null)return t;const i=au(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,c=At]=e[r];ct(o)&&(o={mounted:o,updated:o}),o.deep&&wr(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c})}return t}function sr(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Vo(),di(l,n,8,[t.el,a,t,e]),Uo())}}const hf="components",Rw="directives";function Ke(t,e){return ff(hf,t,!0,e)||t}const f0=Symbol();function Yt(t){return Zt(t)?ff(hf,t,!1)||t:t||f0}function on(t){return ff(Rw,t)}function ff(t,e,n=!0,i=!1){const s=Dn||hn;if(s){const r=s.type;if(t===hf){const a=lS(r,!1);if(a&&(a===e||a===Wi(e)||a===Jc(Wi(e))))return r}const o=Tp(s[t]||r[t],e)||Tp(s.appContext[t],e);return!o&&i?r:o}}function Tp(t,e){return t&&(t[e]||t[Wi(e)]||t[Jc(Wi(e))])}function Vt(t,e,n,i){let s;const r=n&&n[i];if(Qe(t)||Zt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,r&&r[o])}else if(Jt(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,r&&r[a])}}else s=[];return n&&(n[i]=s),s}function sh(t,e){for(let n=0;n<e.length;n++){const i=e[n];if(Qe(i))for(let s=0;s<i.length;s++)t[i[s].name]=i[s].fn;else i&&(t[i.name]=i.fn)}return t}function gt(t,e,n={},i,s){if(Dn.isCE||Dn.parent&&Ea(Dn.parent)&&Dn.parent.isCE)return he("slot",e==="default"?null:{name:e},i&&i());let r=t[e];r&&r._c&&(r._d=!1),k();const o=r&&p0(r(n)),a=Ve(je,{key:n.key||`_${e}`},o||(i?i():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function p0(t){return t.some(e=>Rc(e)?!(e.type===hi||e.type===je&&!p0(e.children)):!0)?t:null}function ks(t){const e={};for(const n in t)e[xc(n)]=t[n];return e}const rh=t=>t?C0(t)?au(t)||t.proxy:rh(t.parent):null,Pc=yn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>rh(t.parent),$root:t=>rh(t.root),$emit:t=>t.emit,$options:t=>g0(t),$forceUpdate:t=>t.f||(t.f=()=>Jy(t.update)),$nextTick:t=>t.n||(t.n=rw.bind(t.proxy)),$watch:t=>vw.bind(t)}),Aw={get({_:t},e){const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(i!==At&&_t(i,e))return o[e]=1,i[e];if(s!==At&&_t(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&_t(c,e))return o[e]=3,r[e];if(n!==At&&_t(n,e))return o[e]=4,n[e];oh&&(o[e]=0)}}const u=Pc[e];let d,h;if(u)return e==="$attrs"&&Jn(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==At&&_t(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,_t(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return s!==At&&_t(s,e)?(s[e]=n,!0):i!==At&&_t(i,e)?(i[e]=n,!0):_t(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||t!==At&&_t(t,o)||e!==At&&_t(e,o)||(a=r[0])&&_t(a,o)||_t(i,o)||_t(Pc,o)||_t(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:_t(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let oh=!0;function Iw(t){const e=g0(t),n=t.proxy,i=t.ctx;oh=!1,e.beforeCreate&&Ep(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:g,activated:m,deactivated:f,beforeDestroy:b,beforeUnmount:x,destroyed:_,unmounted:y,render:v,renderTracked:C,renderTriggered:R,errorCaptured:w,serverPrefetch:D,expose:N,inheritAttrs:V,components:j,directives:se,filters:$}=e;if(c&&kw(c,i,null,t.appContext.config.unwrapInjectedRef),o)for(const ne in o){const te=o[ne];ct(te)&&(i[ne]=te.bind(n))}if(s){const ne=s.call(n,n);Jt(ne)&&(t.data=Ho(ne))}if(oh=!0,r)for(const ne in r){const te=r[ne],J=ct(te)?te.bind(n,n):ct(te.get)?te.get.bind(n,n):Ei,de=!ct(te)&&ct(te.set)?te.set.bind(n):Ei,ve=Is({get:J,set:de});Object.defineProperty(i,ne,{enumerable:!0,configurable:!0,get:()=>ve.value,set:me=>ve.value=me})}if(a)for(const ne in a)m0(a[ne],i,n,ne);if(l){const ne=ct(l)?l.call(n):l;Reflect.ownKeys(ne).forEach(te=>{xw(te,ne[te])})}u&&Ep(u,t,"c");function K(ne,te){Qe(te)?te.forEach(J=>ne(J.bind(n))):te&&ne(te.bind(n))}if(K(Cw,d),K(Wo,h),K(Tw,p),K(d0,g),K(ww,m),K(Sw,f),K(Lw,w),K(Pw,C),K(Dw,R),K(h0,x),K(df,y),K(Ew,D),Qe(N))if(N.length){const ne=t.exposed||(t.exposed={});N.forEach(te=>{Object.defineProperty(ne,te,{get:()=>n[te],set:J=>n[te]=J})})}else t.exposed||(t.exposed={});v&&t.render===Ei&&(t.render=v),V!=null&&(t.inheritAttrs=V),j&&(t.components=j),se&&(t.directives=se)}function kw(t,e,n=Ei,i=!1){Qe(t)&&(t=ah(t));for(const s in t){const r=t[s];let o;Jt(r)?"default"in r?o=Ta(r.from||s,r.default,!0):o=Ta(r.from||s):o=Ta(r),ht(o)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function Ep(t,e,n){di(Qe(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function m0(t,e,n,i){const s=i.includes(".")?r0(n,i):()=>n[i];if(Zt(t)){const r=e[t];ct(r)&&Rn(s,r)}else if(ct(t))Rn(s,t.bind(n));else if(Jt(t))if(Qe(t))t.forEach(r=>m0(r,e,n,i));else{const r=ct(t.handler)?t.handler.bind(n):e[t.handler];ct(r)&&Rn(s,r,t)}}function g0(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(c=>Lc(l,c,o,!0)),Lc(l,e,o)),r.set(e,l),l}function Lc(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Lc(t,r,n,!0),s&&s.forEach(o=>Lc(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=Ow[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ow={data:Dp,props:fr,emits:fr,methods:fr,computed:fr,beforeCreate:kn,created:kn,beforeMount:kn,mounted:kn,beforeUpdate:kn,updated:kn,beforeDestroy:kn,beforeUnmount:kn,destroyed:kn,unmounted:kn,activated:kn,deactivated:kn,errorCaptured:kn,serverPrefetch:kn,components:fr,directives:fr,watch:Nw,provide:Dp,inject:Fw};function Dp(t,e){return e?t?function(){return yn(ct(t)?t.call(this,this):t,ct(e)?e.call(this,this):e)}:e:t}function Fw(t,e){return fr(ah(t),ah(e))}function ah(t){if(Qe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function kn(t,e){return t?[...new Set([].concat(t,e))]:e}function fr(t,e){return t?yn(yn(Object.create(null),t),e):e}function Nw(t,e){if(!t)return e;if(!e)return t;const n=yn(Object.create(null),t);for(const i in e)n[i]=kn(t[i],e[i]);return n}function Bw(t,e,n,i=!1){const s={},r={};Tc(r,ou,1),t.propsDefaults=Object.create(null),b0(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:J_(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function zw(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=vt(s),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(nu(t.emitsOptions,h))continue;const p=e[h];if(l)if(_t(r,h))p!==r[h]&&(r[h]=p,c=!0);else{const g=Wi(h);s[g]=lh(l,a,g,p,t,!1)}else p!==r[h]&&(r[h]=p,c=!0)}}}else{b0(t,e,s,r)&&(c=!0);let u;for(const d in a)(!e||!_t(e,d)&&((u=Vr(d))===d||!_t(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=lh(l,a,d,void 0,t,!0)):delete s[d]);if(r!==a)for(const d in r)(!e||!_t(e,d)&&!0)&&(delete r[d],c=!0)}c&&fs(t,"set","$attrs")}function b0(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(yc(l))continue;const c=e[l];let u;s&&_t(s,u=Wi(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:nu(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=vt(n),c=a||At;for(let u=0;u<r.length;u++){const d=r[u];n[d]=lh(s,l,d,c[d],t,!_t(c,d))}}return o}function lh(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=_t(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&ct(l)){const{propsDefaults:c}=s;n in c?i=c[n]:(To(s),i=c[n]=l.call(null,e),Dr())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Vr(n))&&(i=!0))}return i}function y0(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!ct(t)){const u=d=>{l=!0;const[h,p]=y0(d,e,!0);yn(o,h),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return i.set(t,vo),vo;if(Qe(r))for(let u=0;u<r.length;u++){const d=Wi(r[u]);Pp(d)&&(o[d]=At)}else if(r)for(const u in r){const d=Wi(u);if(Pp(d)){const h=r[u],p=o[d]=Qe(h)||ct(h)?{type:h}:h;if(p){const g=Ap(Boolean,p.type),m=Ap(String,p.type);p[0]=g>-1,p[1]=m<0||g<m,(g>-1||_t(p,"default"))&&a.push(d)}}}const c=[o,a];return i.set(t,c),c}function Pp(t){return t[0]!=="$"}function Lp(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Rp(t,e){return Lp(t)===Lp(e)}function Ap(t,e){return Qe(e)?e.findIndex(n=>Rp(n,t)):ct(e)&&Rp(e,t)?0:-1}const x0=t=>t[0]==="_"||t==="$stable",pf=t=>Qe(t)?t.map(Fi):[Fi(t)],Vw=(t,e,n)=>{if(e._n)return e;const i=Xe((...s)=>pf(e(...s)),n);return i._c=!1,i},v0=(t,e,n)=>{const i=t._ctx;for(const s in t){if(x0(s))continue;const r=t[s];if(ct(r))e[s]=Vw(s,r,i);else if(r!=null){const o=pf(r);e[s]=()=>o}}},_0=(t,e)=>{const n=pf(e);t.slots.default=()=>n},Uw=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=vt(e),Tc(e,"_",n)):v0(e,t.slots={})}else t.slots={},e&&_0(t,e);Tc(t.slots,ou,1)},Hw=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=At;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(yn(s,e),!n&&a===1&&delete s._):(r=!e.$stable,v0(e,s)),o=e}else e&&(_0(t,e),o={default:1});if(r)for(const a in s)!x0(a)&&!(a in o)&&delete s[a]};function w0(){return{app:null,config:{isNativeTag:y_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ww=0;function Gw(t,e){return function(i,s=null){ct(i)||(i=Object.assign({},i)),s!=null&&!Jt(s)&&(s=null);const r=w0(),o=new Set;let a=!1;const l=r.app={_uid:Ww++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:uS,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&ct(c.install)?(o.add(c),c.install(l,...u)):ct(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const h=he(i,s);return h.appContext=r,u&&e?e(h,c):t(h,c,d),a=!0,l._container=c,c.__vue_app__=l,au(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l}};return l}}function ch(t,e,n,i,s=!1){if(Qe(t)){t.forEach((h,p)=>ch(h,e&&(Qe(e)?e[p]:e),n,i,s));return}if(Ea(i)&&!s)return;const r=i.shapeFlag&4?au(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===At?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Zt(c)?(u[c]=null,_t(d,c)&&(d[c]=null)):ht(c)&&(c.value=null)),ct(l))Bs(l,a,12,[o,u]);else{const h=Zt(l),p=ht(l);if(h||p){const g=()=>{if(t.f){const m=h?u[l]:l.value;s?Qe(m)&&Jh(m,r):Qe(m)?m.includes(r)||m.push(r):h?(u[l]=[r],_t(d,l)&&(d[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else h?(u[l]=o,_t(d,l)&&(d[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(g.id=-1,Vn(g,n)):g()}}}const Vn=yw;function jw(t){return $w(t)}function $w(t,e){const n=M_();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Ei,cloneNode:g,insertStaticContent:m}=t,f=(M,A,G,Y=null,re=null,fe=null,xe=!1,_e=null,U=!!A.dynamicChildren)=>{if(M===A)return;M&&!xr(M,A)&&(Y=$e(M),ye(M,re,fe,!0),M=null),A.patchFlag===-2&&(U=!1,A.dynamicChildren=null);const{type:S,ref:T,shapeFlag:W}=A;switch(S){case Ka:b(M,A,G,Y);break;case hi:x(M,A,G,Y);break;case Yu:M==null&&_(A,G,Y,xe);break;case je:se(M,A,G,Y,re,fe,xe,_e,U);break;default:W&1?C(M,A,G,Y,re,fe,xe,_e,U):W&6?$(M,A,G,Y,re,fe,xe,_e,U):(W&64||W&128)&&S.process(M,A,G,Y,re,fe,xe,_e,U,Te)}T!=null&&re&&ch(T,M&&M.ref,fe,A||M,!A)},b=(M,A,G,Y)=>{if(M==null)i(A.el=a(A.children),G,Y);else{const re=A.el=M.el;A.children!==M.children&&c(re,A.children)}},x=(M,A,G,Y)=>{M==null?i(A.el=l(A.children||""),G,Y):A.el=M.el},_=(M,A,G,Y)=>{[M.el,M.anchor]=m(M.children,A,G,Y,M.el,M.anchor)},y=({el:M,anchor:A},G,Y)=>{let re;for(;M&&M!==A;)re=h(M),i(M,G,Y),M=re;i(A,G,Y)},v=({el:M,anchor:A})=>{let G;for(;M&&M!==A;)G=h(M),s(M),M=G;s(A)},C=(M,A,G,Y,re,fe,xe,_e,U)=>{xe=xe||A.type==="svg",M==null?R(A,G,Y,re,fe,xe,_e,U):N(M,A,re,fe,xe,_e,U)},R=(M,A,G,Y,re,fe,xe,_e)=>{let U,S;const{type:T,props:W,shapeFlag:Q,transition:ae,patchFlag:pe,dirs:Ae}=M;if(M.el&&g!==void 0&&pe===-1)U=M.el=g(M.el);else{if(U=M.el=o(M.type,fe,W&&W.is,W),Q&8?u(U,M.children):Q&16&&D(M.children,U,null,Y,re,fe&&T!=="foreignObject",xe,_e),Ae&&sr(M,null,Y,"created"),W){for(const ce in W)ce!=="value"&&!yc(ce)&&r(U,ce,null,W[ce],fe,M.children,Y,re,Ye);"value"in W&&r(U,"value",null,W.value),(S=W.onVnodeBeforeMount)&&Ai(S,Y,M)}w(U,M,M.scopeId,xe,Y)}Ae&&sr(M,null,Y,"beforeMount");const L=(!re||re&&!re.pendingBranch)&&ae&&!ae.persisted;L&&ae.beforeEnter(U),i(U,A,G),((S=W&&W.onVnodeMounted)||L||Ae)&&Vn(()=>{S&&Ai(S,Y,M),L&&ae.enter(U),Ae&&sr(M,null,Y,"mounted")},re)},w=(M,A,G,Y,re)=>{if(G&&p(M,G),Y)for(let fe=0;fe<Y.length;fe++)p(M,Y[fe]);if(re){let fe=re.subTree;if(A===fe){const xe=re.vnode;w(M,xe,xe.scopeId,xe.slotScopeIds,re.parent)}}},D=(M,A,G,Y,re,fe,xe,_e,U=0)=>{for(let S=U;S<M.length;S++){const T=M[S]=_e?As(M[S]):Fi(M[S]);f(null,T,A,G,Y,re,fe,xe,_e)}},N=(M,A,G,Y,re,fe,xe)=>{const _e=A.el=M.el;let{patchFlag:U,dynamicChildren:S,dirs:T}=A;U|=M.patchFlag&16;const W=M.props||At,Q=A.props||At;let ae;G&&rr(G,!1),(ae=Q.onVnodeBeforeUpdate)&&Ai(ae,G,A,M),T&&sr(A,M,G,"beforeUpdate"),G&&rr(G,!0);const pe=re&&A.type!=="foreignObject";if(S?V(M.dynamicChildren,S,_e,G,Y,pe,fe):xe||J(M,A,_e,null,G,Y,pe,fe,!1),U>0){if(U&16)j(_e,A,W,Q,G,Y,re);else if(U&2&&W.class!==Q.class&&r(_e,"class",null,Q.class,re),U&4&&r(_e,"style",W.style,Q.style,re),U&8){const Ae=A.dynamicProps;for(let L=0;L<Ae.length;L++){const ce=Ae[L],Me=W[ce],Ee=Q[ce];(Ee!==Me||ce==="value")&&r(_e,ce,Me,Ee,re,M.children,G,Y,Ye)}}U&1&&M.children!==A.children&&u(_e,A.children)}else!xe&&S==null&&j(_e,A,W,Q,G,Y,re);((ae=Q.onVnodeUpdated)||T)&&Vn(()=>{ae&&Ai(ae,G,A,M),T&&sr(A,M,G,"updated")},Y)},V=(M,A,G,Y,re,fe,xe)=>{for(let _e=0;_e<A.length;_e++){const U=M[_e],S=A[_e],T=U.el&&(U.type===je||!xr(U,S)||U.shapeFlag&70)?d(U.el):G;f(U,S,T,null,Y,re,fe,xe,!0)}},j=(M,A,G,Y,re,fe,xe)=>{if(G!==Y){for(const _e in Y){if(yc(_e))continue;const U=Y[_e],S=G[_e];U!==S&&_e!=="value"&&r(M,_e,S,U,xe,A.children,re,fe,Ye)}if(G!==At)for(const _e in G)!yc(_e)&&!(_e in Y)&&r(M,_e,G[_e],null,xe,A.children,re,fe,Ye);"value"in Y&&r(M,"value",G.value,Y.value)}},se=(M,A,G,Y,re,fe,xe,_e,U)=>{const S=A.el=M?M.el:a(""),T=A.anchor=M?M.anchor:a("");let{patchFlag:W,dynamicChildren:Q,slotScopeIds:ae}=A;ae&&(_e=_e?_e.concat(ae):ae),M==null?(i(S,G,Y),i(T,G,Y),D(A.children,G,T,re,fe,xe,_e,U)):W>0&&W&64&&Q&&M.dynamicChildren?(V(M.dynamicChildren,Q,G,re,fe,xe,_e),(A.key!=null||re&&A===re.subTree)&&mf(M,A,!0)):J(M,A,G,T,re,fe,xe,_e,U)},$=(M,A,G,Y,re,fe,xe,_e,U)=>{A.slotScopeIds=_e,M==null?A.shapeFlag&512?re.ctx.activate(A,G,Y,xe,U):q(A,G,Y,re,fe,xe,U):K(M,A,U)},q=(M,A,G,Y,re,fe,xe)=>{const _e=M.component=iS(M,Y,re);if(su(M)&&(_e.ctx.renderer=Te),sS(_e),_e.asyncDep){if(re&&re.registerDep(_e,ne),!M.el){const U=_e.subTree=he(hi);x(null,U,A,G)}return}ne(_e,M,A,G,re,fe,xe)},K=(M,A,G)=>{const Y=A.component=M.component;if(mw(M,A,G))if(Y.asyncDep&&!Y.asyncResolved){te(Y,A,G);return}else Y.next=A,aw(Y.update),Y.update();else A.el=M.el,Y.vnode=A},ne=(M,A,G,Y,re,fe,xe)=>{const _e=()=>{if(M.isMounted){let{next:T,bu:W,u:Q,parent:ae,vnode:pe}=M,Ae=T,L;rr(M,!1),T?(T.el=pe.el,te(M,T,xe)):T=pe,W&&$u(W),(L=T.props&&T.props.onVnodeBeforeUpdate)&&Ai(L,ae,T,pe),rr(M,!0);const ce=Ku(M),Me=M.subTree;M.subTree=ce,f(Me,ce,d(Me.el),$e(Me),M,re,fe),T.el=ce.el,Ae===null&&gw(M,ce.el),Q&&Vn(Q,re),(L=T.props&&T.props.onVnodeUpdated)&&Vn(()=>Ai(L,ae,T,pe),re)}else{let T;const{el:W,props:Q}=A,{bm:ae,m:pe,parent:Ae}=M,L=Ea(A);if(rr(M,!1),ae&&$u(ae),!L&&(T=Q&&Q.onVnodeBeforeMount)&&Ai(T,Ae,A),rr(M,!0),W&&z){const ce=()=>{M.subTree=Ku(M),z(W,M.subTree,M,re,null)};L?A.type.__asyncLoader().then(()=>!M.isUnmounted&&ce()):ce()}else{const ce=M.subTree=Ku(M);f(null,ce,G,Y,M,re,fe),A.el=ce.el}if(pe&&Vn(pe,re),!L&&(T=Q&&Q.onVnodeMounted)){const ce=A;Vn(()=>Ai(T,Ae,ce),re)}(A.shapeFlag&256||Ae&&Ea(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&M.a&&Vn(M.a,re),M.isMounted=!0,A=G=Y=null}},U=M.effect=new nf(_e,()=>Jy(S),M.scope),S=M.update=()=>U.run();S.id=M.uid,rr(M,!0),S()},te=(M,A,G)=>{A.component=M;const Y=M.vnode.props;M.vnode=A,M.next=null,zw(M,A.props,Y,G),Hw(M,A.children,G),Vo(),tu(void 0,M.update),Uo()},J=(M,A,G,Y,re,fe,xe,_e,U=!1)=>{const S=M&&M.children,T=M?M.shapeFlag:0,W=A.children,{patchFlag:Q,shapeFlag:ae}=A;if(Q>0){if(Q&128){ve(S,W,G,Y,re,fe,xe,_e,U);return}else if(Q&256){de(S,W,G,Y,re,fe,xe,_e,U);return}}ae&8?(T&16&&Ye(S,re,fe),W!==S&&u(G,W)):T&16?ae&16?ve(S,W,G,Y,re,fe,xe,_e,U):Ye(S,re,fe,!0):(T&8&&u(G,""),ae&16&&D(W,G,Y,re,fe,xe,_e,U))},de=(M,A,G,Y,re,fe,xe,_e,U)=>{M=M||vo,A=A||vo;const S=M.length,T=A.length,W=Math.min(S,T);let Q;for(Q=0;Q<W;Q++){const ae=A[Q]=U?As(A[Q]):Fi(A[Q]);f(M[Q],ae,G,null,re,fe,xe,_e,U)}S>T?Ye(M,re,fe,!0,!1,W):D(A,G,Y,re,fe,xe,_e,U,W)},ve=(M,A,G,Y,re,fe,xe,_e,U)=>{let S=0;const T=A.length;let W=M.length-1,Q=T-1;for(;S<=W&&S<=Q;){const ae=M[S],pe=A[S]=U?As(A[S]):Fi(A[S]);if(xr(ae,pe))f(ae,pe,G,null,re,fe,xe,_e,U);else break;S++}for(;S<=W&&S<=Q;){const ae=M[W],pe=A[Q]=U?As(A[Q]):Fi(A[Q]);if(xr(ae,pe))f(ae,pe,G,null,re,fe,xe,_e,U);else break;W--,Q--}if(S>W){if(S<=Q){const ae=Q+1,pe=ae<T?A[ae].el:Y;for(;S<=Q;)f(null,A[S]=U?As(A[S]):Fi(A[S]),G,pe,re,fe,xe,_e,U),S++}}else if(S>Q)for(;S<=W;)ye(M[S],re,fe,!0),S++;else{const ae=S,pe=S,Ae=new Map;for(S=pe;S<=Q;S++){const He=A[S]=U?As(A[S]):Fi(A[S]);He.key!=null&&Ae.set(He.key,S)}let L,ce=0;const Me=Q-pe+1;let Ee=!1,B=0;const De=new Array(Me);for(S=0;S<Me;S++)De[S]=0;for(S=ae;S<=W;S++){const He=M[S];if(ce>=Me){ye(He,re,fe,!0);continue}let Le;if(He.key!=null)Le=Ae.get(He.key);else for(L=pe;L<=Q;L++)if(De[L-pe]===0&&xr(He,A[L])){Le=L;break}Le===void 0?ye(He,re,fe,!0):(De[Le-pe]=S+1,Le>=B?B=Le:Ee=!0,f(He,A[Le],G,null,re,fe,xe,_e,U),ce++)}const Pe=Ee?Kw(De):vo;for(L=Pe.length-1,S=Me-1;S>=0;S--){const He=pe+S,Le=A[He],Ge=He+1<T?A[He+1].el:Y;De[S]===0?f(null,Le,G,Ge,re,fe,xe,_e,U):Ee&&(L<0||S!==Pe[L]?me(Le,G,Ge,2):L--)}}},me=(M,A,G,Y,re=null)=>{const{el:fe,type:xe,transition:_e,children:U,shapeFlag:S}=M;if(S&6){me(M.component.subTree,A,G,Y);return}if(S&128){M.suspense.move(A,G,Y);return}if(S&64){xe.move(M,A,G,Te);return}if(xe===je){i(fe,A,G);for(let W=0;W<U.length;W++)me(U[W],A,G,Y);i(M.anchor,A,G);return}if(xe===Yu){y(M,A,G);return}if(Y!==2&&S&1&&_e)if(Y===0)_e.beforeEnter(fe),i(fe,A,G),Vn(()=>_e.enter(fe),re);else{const{leave:W,delayLeave:Q,afterLeave:ae}=_e,pe=()=>i(fe,A,G),Ae=()=>{W(fe,()=>{pe(),ae&&ae()})};Q?Q(fe,pe,Ae):Ae()}else i(fe,A,G)},ye=(M,A,G,Y=!1,re=!1)=>{const{type:fe,props:xe,ref:_e,children:U,dynamicChildren:S,shapeFlag:T,patchFlag:W,dirs:Q}=M;if(_e!=null&&ch(_e,null,G,M,!0),T&256){A.ctx.deactivate(M);return}const ae=T&1&&Q,pe=!Ea(M);let Ae;if(pe&&(Ae=xe&&xe.onVnodeBeforeUnmount)&&Ai(Ae,A,M),T&6)le(M.component,G,Y);else{if(T&128){M.suspense.unmount(G,Y);return}ae&&sr(M,null,A,"beforeUnmount"),T&64?M.type.remove(M,A,G,re,Te,Y):S&&(fe!==je||W>0&&W&64)?Ye(S,A,G,!1,!0):(fe===je&&W&384||!re&&T&16)&&Ye(U,A,G),Y&&ke(M)}(pe&&(Ae=xe&&xe.onVnodeUnmounted)||ae)&&Vn(()=>{Ae&&Ai(Ae,A,M),ae&&sr(M,null,A,"unmounted")},G)},ke=M=>{const{type:A,el:G,anchor:Y,transition:re}=M;if(A===je){Ue(G,Y);return}if(A===Yu){v(M);return}const fe=()=>{s(G),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(M.shapeFlag&1&&re&&!re.persisted){const{leave:xe,delayLeave:_e}=re,U=()=>xe(G,fe);_e?_e(M.el,fe,U):U()}else fe()},Ue=(M,A)=>{let G;for(;M!==A;)G=h(M),s(M),M=G;s(A)},le=(M,A,G)=>{const{bum:Y,scope:re,update:fe,subTree:xe,um:_e}=M;Y&&$u(Y),re.stop(),fe&&(fe.active=!1,ye(xe,M,A,G)),_e&&Vn(_e,A),Vn(()=>{M.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},Ye=(M,A,G,Y=!1,re=!1,fe=0)=>{for(let xe=fe;xe<M.length;xe++)ye(M[xe],A,G,Y,re)},$e=M=>M.shapeFlag&6?$e(M.component.subTree):M.shapeFlag&128?M.suspense.next():h(M.anchor||M.el),Ne=(M,A,G)=>{M==null?A._vnode&&ye(A._vnode,null,null,!0):f(A._vnode||null,M,A,null,null,null,G),t0(),A._vnode=M},Te={p:f,um:ye,m:me,r:ke,mt:q,mc:D,pc:J,pbc:V,n:$e,o:t};let O,z;return e&&([O,z]=e(Te)),{render:Ne,hydrate:O,createApp:Gw(Ne,O)}}function rr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function mf(t,e,n=!1){const i=t.children,s=e.children;if(Qe(i)&&Qe(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=As(s[r]),a.el=o.el),n||mf(o,a))}}function Kw(t){const e=t.slice(),n=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}const Xw=t=>t.__isTeleport,Da=t=>t&&(t.disabled||t.disabled===""),Ip=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,uh=(t,e)=>{const n=t&&t.to;return Zt(n)?e?e(n):null:n},Yw={__isTeleport:!0,process(t,e,n,i,s,r,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:g,createText:m,createComment:f}}=c,b=Da(e.props);let{shapeFlag:x,children:_,dynamicChildren:y}=e;if(t==null){const v=e.el=m(""),C=e.anchor=m("");p(v,n,i),p(C,n,i);const R=e.target=uh(e.props,g),w=e.targetAnchor=m("");R&&(p(w,R),o=o||Ip(R));const D=(N,V)=>{x&16&&u(_,N,V,s,r,o,a,l)};b?D(n,C):R&&D(R,w)}else{e.el=t.el;const v=e.anchor=t.anchor,C=e.target=t.target,R=e.targetAnchor=t.targetAnchor,w=Da(t.props),D=w?n:C,N=w?v:R;if(o=o||Ip(C),y?(h(t.dynamicChildren,y,D,s,r,o,a),mf(t,e,!0)):l||d(t,e,D,N,s,r,o,a,!1),b)w||kl(e,n,v,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const V=e.target=uh(e.props,g);V&&kl(e,V,null,c,0)}else w&&kl(e,C,R,c,1)}},remove(t,e,n,i,{um:s,o:{remove:r}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&r(u),(o||!Da(h))&&(r(c),a&16))for(let p=0;p<l.length;p++){const g=l[p];s(g,e,n,!0,!!g.dynamicChildren)}},move:kl,hydrate:qw};function kl(t,e,n,{o:{insert:i},m:s},r=2){r===0&&i(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=r===2;if(d&&i(o,e,n),(!d||Da(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,n,2);d&&i(a,e,n)}function qw(t,e,n,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=uh(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Da(e.props))e.anchor=c(o(t),e,a(t),n,i,s,r),e.targetAnchor=d;else{e.anchor=o(t);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,n,i,s,r)}}return e.anchor&&o(e.anchor)}const Zw=Yw,je=Symbol(void 0),Ka=Symbol(void 0),hi=Symbol(void 0),Yu=Symbol(void 0),Pa=[];let Ti=null;function k(t=!1){Pa.push(Ti=t?null:[])}function Jw(){Pa.pop(),Ti=Pa[Pa.length-1]||null}let Xa=1;function kp(t){Xa+=t}function S0(t){return t.dynamicChildren=Xa>0?Ti||vo:null,Jw(),Xa>0&&Ti&&Ti.push(t),t}function X(t,e,n,i,s,r){return S0(we(t,e,n,i,s,r,!0))}function Ve(t,e,n,i,s){return S0(he(t,e,n,i,s,!0))}function Rc(t){return t?t.__v_isVNode===!0:!1}function xr(t,e){return t.type===e.type&&t.key===e.key}const ou="__vInternal",M0=({key:t})=>t!=null?t:null,vc=({ref:t,ref_key:e,ref_for:n})=>t!=null?Zt(t)||ht(t)||ct(t)?{i:Dn,r:t,k:e,f:!!n}:t:null;function we(t,e=null,n=null,i=0,s=null,r=t===je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&M0(e),ref:e&&vc(e),scopeId:iu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(gf(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Zt(n)?8:16),Xa>0&&!o&&Ti&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Ti.push(l),l}const he=Qw;function Qw(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===f0)&&(t=hi),Rc(t)){const a=$s(t,e,!0);return n&&gf(a,n),Xa>0&&!r&&Ti&&(a.shapeFlag&6?Ti[Ti.indexOf(t)]=a:Ti.push(a)),a.patchFlag|=-2,a}if(cS(t)&&(t=t.__vccOpts),e){e=eS(e);let{class:a,style:l}=e;a&&!Zt(a)&&(e.class=Ie(a)),Jt(l)&&($y(l)&&!Qe(l)&&(l=yn({},l)),e.style=Ot(l))}const o=Zt(t)?1:bw(t)?128:Xw(t)?64:Jt(t)?4:ct(t)?2:0;return we(t,e,n,i,s,o,r,!0)}function eS(t){return t?$y(t)||ou in t?yn({},t):t:null}function $s(t,e,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=t,a=e?dn(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&M0(a),ref:e&&e.ref?n&&s?Qe(s)?s.concat(vc(e)):[s,vc(e)]:vc(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==je?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&$s(t.ssContent),ssFallback:t.ssFallback&&$s(t.ssFallback),el:t.el,anchor:t.anchor}}function vn(t=" ",e=0){return he(Ka,null,t,e)}function Ce(t="",e=!1){return e?(k(),Ve(hi,null,t)):he(hi,null,t)}function Fi(t){return t==null||typeof t=="boolean"?he(hi):Qe(t)?he(je,null,t.slice()):typeof t=="object"?As(t):he(Ka,null,String(t))}function As(t){return t.el===null||t.memo?t:$s(t)}function gf(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Qe(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),gf(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(ou in e)?e._ctx=Dn:s===3&&Dn&&(Dn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ct(e)?(e={default:e,_ctx:Dn},n=32):(e=String(e),i&64?(n=16,e=[vn(e)]):n=8);t.children=e,t.shapeFlag|=n}function dn(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Ie([e.class,i.class]));else if(s==="style")e.style=Ot([e.style,i.style]);else if(Yc(s)){const r=e[s],o=i[s];o&&r!==o&&!(Qe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function Ai(t,e,n,i=null){di(t,e,7,[n,i])}const tS=w0();let nS=0;function iS(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||tS,r={uid:nS++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new C_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:y0(i,s),emitsOptions:i0(i,s),emit:null,emitted:null,propsDefaults:At,inheritAttrs:i.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=uw.bind(null,r),t.ce&&t.ce(r),r}let hn=null;const Ks=()=>hn||Dn,To=t=>{hn=t,t.scope.on()},Dr=()=>{hn&&hn.scope.off(),hn=null};function C0(t){return t.vnode.shapeFlag&4}let Ya=!1;function sS(t,e=!1){Ya=e;const{props:n,children:i}=t.vnode,s=C0(t);Bw(t,n,s,e),Uw(t,i);const r=s?rS(t,e):void 0;return Ya=!1,r}function rS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ky(new Proxy(t.ctx,Aw));const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?aS(t):null;To(t),Vo();const r=Bs(i,t,0,[t.props,s]);if(Uo(),Dr(),Ry(r)){if(r.then(Dr,Dr),e)return r.then(o=>{Op(t,o,e)}).catch(o=>{eu(o,t,0)});t.asyncDep=r}else Op(t,r,e)}else T0(t,e)}function Op(t,e,n){ct(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Jt(e)&&(t.setupState=qy(e)),T0(t,n)}let Fp;function T0(t,e,n){const i=t.type;if(!t.render){if(!e&&Fp&&!i.render){const s=i.template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=yn(yn({isCustomElement:r,delimiters:a},o),l);i.render=Fp(s,c)}}t.render=i.render||Ei}To(t),Vo(),Iw(t),Uo(),Dr()}function oS(t){return new Proxy(t.attrs,{get(e,n){return Jn(t,"get","$attrs"),e[n]}})}function aS(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=oS(t))},slots:t.slots,emit:t.emit,expose:e}}function au(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(qy(Ky(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pc)return Pc[n](t)}}))}function lS(t,e=!0){return ct(t)?t.displayName||t.name:t.name||e&&t.__name}function cS(t){return ct(t)&&"__vccOpts"in t}const Is=(t,e)=>iw(t,e,Ya);function zs(t,e,n){const i=arguments.length;return i===2?Jt(e)&&!Qe(e)?Rc(e)?he(t,null,[e]):he(t,e):he(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Rc(n)&&(n=[n]),he(t,e,n))}const uS="3.2.37",dS="http://www.w3.org/2000/svg",vr=typeof document!="undefined"?document:null,Np=vr&&vr.createElement("template"),hS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?vr.createElementNS(dS,t):vr.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>vr.createTextNode(t),createComment:t=>vr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Np.innerHTML=i?`<svg>${t}</svg>`:t;const a=Np.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function fS(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function pS(t,e,n){const i=t.style,s=Zt(n);if(n&&!s){for(const r in n)dh(i,r,n[r]);if(e&&!Zt(e))for(const r in e)n[r]==null&&dh(i,r,"")}else{const r=i.display;s?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const Bp=/\s*!important$/;function dh(t,e,n){if(Qe(n))n.forEach(i=>dh(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=mS(t,e);Bp.test(n)?t.setProperty(Vr(i),n.replace(Bp,""),"important"):t[i]=n}}const zp=["Webkit","Moz","ms"],qu={};function mS(t,e){const n=qu[e];if(n)return n;let i=Wi(e);if(i!=="filter"&&i in t)return qu[e]=i;i=Jc(i);for(let s=0;s<zp.length;s++){const r=zp[s]+i;if(r in t)return qu[e]=r}return e}const Vp="http://www.w3.org/1999/xlink";function gS(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Vp,e.slice(6,e.length)):t.setAttributeNS(Vp,e,n);else{const r=p_(e);n==null||r&&!Dy(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function bS(t,e,n,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Dy(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[E0,yS]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let hh=0;const xS=Promise.resolve(),vS=()=>{hh=0},_S=()=>hh||(xS.then(vS),hh=E0());function wS(t,e,n,i){t.addEventListener(e,n,i)}function SS(t,e,n,i){t.removeEventListener(e,n,i)}function MS(t,e,n,i,s=null){const r=t._vei||(t._vei={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=CS(e);if(i){const c=r[e]=TS(i,s);wS(t,a,c,l)}else o&&(SS(t,a,o,l),r[e]=void 0)}}const Up=/(?:Once|Passive|Capture)$/;function CS(t){let e;if(Up.test(t)){e={};let n;for(;n=t.match(Up);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Vr(t.slice(2)),e]}function TS(t,e){const n=i=>{const s=i.timeStamp||E0();(yS||s>=n.attached-1)&&di(ES(i,n.value),e,5,[i])};return n.value=t,n.attached=_S(),n}function ES(t,e){if(Qe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Hp=/^on[a-z]/,DS=(t,e,n,i,s=!1,r,o,a,l)=>{e==="class"?fS(t,i,s):e==="style"?pS(t,n,i):Yc(e)?Zh(e)||MS(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):PS(t,e,i,s))?bS(t,e,i,r,o,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),gS(t,e,i,s))};function PS(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&Hp.test(e)&&ct(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||Hp.test(e)&&Zt(n)?!1:e in t}const xs="transition",Qo="animation",Ur=(t,{slots:e})=>zs(a0,P0(t),e);Ur.displayName="Transition";const D0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},LS=Ur.props=yn({},a0.props,D0),or=(t,e=[])=>{Qe(t)?t.forEach(n=>n(...e)):t&&t(...e)},Wp=t=>t?Qe(t)?t.some(e=>e.length>1):t.length>1:!1;function P0(t){const e={};for(const j in t)j in D0||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=RS(s),m=g&&g[0],f=g&&g[1],{onBeforeEnter:b,onEnter:x,onEnterCancelled:_,onLeave:y,onLeaveCancelled:v,onBeforeAppear:C=b,onAppear:R=x,onAppearCancelled:w=_}=e,D=(j,se,$)=>{Ls(j,se?u:a),Ls(j,se?c:o),$&&$()},N=(j,se)=>{j._isLeaving=!1,Ls(j,d),Ls(j,p),Ls(j,h),se&&se()},V=j=>(se,$)=>{const q=j?R:x,K=()=>D(se,j,$);or(q,[se,K]),Gp(()=>{Ls(se,j?l:r),Qi(se,j?u:a),Wp(q)||jp(se,i,m,K)})};return yn(e,{onBeforeEnter(j){or(b,[j]),Qi(j,r),Qi(j,o)},onBeforeAppear(j){or(C,[j]),Qi(j,l),Qi(j,c)},onEnter:V(!1),onAppear:V(!0),onLeave(j,se){j._isLeaving=!0;const $=()=>N(j,se);Qi(j,d),R0(),Qi(j,h),Gp(()=>{!j._isLeaving||(Ls(j,d),Qi(j,p),Wp(y)||jp(j,i,f,$))}),or(y,[j,$])},onEnterCancelled(j){D(j,!1),or(_,[j])},onAppearCancelled(j){D(j,!0),or(w,[j])},onLeaveCancelled(j){N(j),or(v,[j])}})}function RS(t){if(t==null)return null;if(Jt(t))return[Zu(t.enter),Zu(t.leave)];{const e=Zu(t);return[e,e]}}function Zu(t){return ky(t)}function Qi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Ls(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Gp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let AS=0;function jp(t,e,n,i){const s=t._endId=++AS,r=()=>{s===t._endId&&i()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=L0(t,e);if(!o)return i();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,h),r()},h=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,h)}function L0(t,e){const n=window.getComputedStyle(t),i=g=>(n[g]||"").split(", "),s=i(xs+"Delay"),r=i(xs+"Duration"),o=$p(s,r),a=i(Qo+"Delay"),l=i(Qo+"Duration"),c=$p(a,l);let u=null,d=0,h=0;e===xs?o>0&&(u=xs,d=o,h=r.length):e===Qo?c>0&&(u=Qo,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?xs:Qo:null,h=u?u===xs?r.length:l.length:0);const p=u===xs&&/\b(transform|all)(,|$)/.test(n[xs+"Property"]);return{type:u,timeout:d,propCount:h,hasTransform:p}}function $p(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>Kp(n)+Kp(t[i])))}function Kp(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function R0(){return document.body.offsetHeight}const A0=new WeakMap,I0=new WeakMap,IS={name:"TransitionGroup",props:yn({},LS,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ks(),i=o0();let s,r;return d0(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!BS(s[0].el,n.vnode.el,o))return;s.forEach(OS),s.forEach(FS);const a=s.filter(NS);R0(),a.forEach(l=>{const c=l.el,u=c.style;Qi(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,Ls(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=vt(t),a=P0(o);let l=o.tag||je;s=r,r=e.default?uf(e.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&$a(u,ja(u,a,i,n))}if(s)for(let c=0;c<s.length;c++){const u=s[c];$a(u,ja(u,a,i,n)),A0.set(u,u.el.getBoundingClientRect())}return he(l,null,r)}}},kS=IS;function OS(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function FS(t){I0.set(t,t.el.getBoundingClientRect())}function NS(t){const e=A0.get(t),n=I0.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",t}}function BS(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(i);const{hasTransform:r}=L0(i);return s.removeChild(i),r}const zS=["ctrl","shift","alt","meta"],VS={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>zS.some(n=>t[`${n}Key`]&&!e.includes(n))},Eo=(t,e)=>(n,...i)=>{for(let s=0;s<e.length;s++){const r=VS[e[s]];if(r&&r(n,e))return}return t(n,...i)},US={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pr=(t,e)=>n=>{if(!("key"in n))return;const i=Vr(n.key);if(e.some(s=>s===i||US[s]===i))return t(n)},HS={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ea(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),ea(t,!0),i.enter(t)):i.leave(t,()=>{ea(t,!1)}):ea(t,e))},beforeUnmount(t,{value:e}){ea(t,e)}};function ea(t,e){t.style.display=e?t._vod:"none"}const WS=yn({patchProp:DS},hS);let Xp;function GS(){return Xp||(Xp=jw(WS))}const jS=(...t)=>{const e=GS().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=$S(i);if(!s)return;const r=e._component;!ct(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function $S(t){return Zt(t)?document.querySelector(t):t}var oe={innerWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e+=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e},width(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e},getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)},getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)},getOuterWidth(t,e){if(t){let n=t.offsetWidth;if(e){let i=getComputedStyle(t);n+=parseFloat(i.marginLeft)+parseFloat(i.marginRight)}return n}else return 0},getOuterHeight(t,e){if(t){let n=t.offsetHeight;if(e){let i=getComputedStyle(t);n+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}else return 0},getClientHeight(t,e){if(t){let n=t.clientHeight;if(e){let i=getComputedStyle(t);n+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}else return 0},getViewport(){let t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0],s=t.innerWidth||n.clientWidth||i.clientWidth,r=t.innerHeight||n.clientHeight||i.clientHeight;return{width:s,height:r}},getOffset(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}},index(t){let e=t.parentNode.childNodes,n=0;for(var i=0;i<e.length;i++){if(e[i]===t)return n;e[i].nodeType===1&&n++}return-1},addMultipleClasses(t,e){if(t.classList){let n=e.split(" ");for(let i=0;i<n.length;i++)t.classList.add(n[i])}else{let n=e.split(" ");for(let i=0;i<n.length;i++)t.className+=" "+n[i]}},addClass(t,e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass(t,e){return t?t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className):!1},find(t,e){return t.querySelectorAll(e)},findSingle(t,e){return t.querySelector(e)},getHeight(t){let e=t.offsetHeight,n=getComputedStyle(t);return e-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),e},getWidth(t){let e=t.offsetWidth,n=getComputedStyle(t);return e-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),e},absolutePosition(t,e){let n=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),i=n.height,s=n.width,r=e.offsetHeight,o=e.offsetWidth,a=e.getBoundingClientRect(),l=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),u=this.getViewport(),d,h;a.top+r+i>u.height?(d=a.top+l-i,t.style.transformOrigin="bottom",d<0&&(d=l)):(d=r+a.top+l,t.style.transformOrigin="top"),a.left+s>u.width?h=Math.max(0,a.left+c+o-s):h=a.left+c,t.style.top=d+"px",t.style.left=h+"px"},relativePosition(t,e){let n=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t);const i=e.offsetHeight,s=e.getBoundingClientRect(),r=this.getViewport();let o,a;s.top+i+n.height>r.height?(o=-1*n.height,t.style.transformOrigin="bottom",s.top+o<0&&(o=-1*s.top)):(o=i,t.style.transformOrigin="top"),n.width>r.width?a=s.left*-1:s.left+n.width>r.width?a=(s.left+n.width-r.width)*-1:a=0,t.style.top=o+"px",t.style.left=a+"px"},getParents(t,e=[]){return t.parentNode===null?e:this.getParents(t.parentNode,e.concat([t.parentNode]))},getScrollableParents(t){let e=[];if(t){let n=this.getParents(t);const i=/(auto|scroll)/,s=r=>{let o=window.getComputedStyle(r,null);return i.test(o.getPropertyValue("overflow"))||i.test(o.getPropertyValue("overflowX"))||i.test(o.getPropertyValue("overflowY"))};for(let r of n){let o=r.nodeType===1&&r.dataset.scrollselectors;if(o){let a=o.split(",");for(let l of a){let c=this.findSingle(r,l);c&&s(c)&&e.push(c)}}r.nodeType!==9&&s(r)&&e.push(r)}}return e},getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",e},getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let e=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",e},getHiddenElementDimensions(t){var e={};return t.style.visibility="hidden",t.style.display="block",e.width=t.offsetWidth,e.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",e},fadeIn(t,e){t.style.opacity=0;var n=+new Date,i=0,s=function(){i=+t.style.opacity+(new Date().getTime()-n)/e,t.style.opacity=i,n=+new Date,+i<1&&(window.requestAnimationFrame&&requestAnimationFrame(s)||setTimeout(s,16))};s()},fadeOut(t,e){var n=1,i=50,s=e,r=i/s;let o=setInterval(()=>{n-=r,n<=0&&(n=0,clearInterval(o)),t.style.opacity=n},i)},getUserAgent(){return navigator.userAgent},appendChild(t,e){if(this.isElement(e))e.appendChild(t);else if(e.el&&e.elElement)e.elElement.appendChild(t);else throw new Error("Cannot append "+e+" to "+t)},scrollInView(t,e){let n=getComputedStyle(t).getPropertyValue("borderTopWidth"),i=n?parseFloat(n):0,s=getComputedStyle(t).getPropertyValue("paddingTop"),r=s?parseFloat(s):0,o=t.getBoundingClientRect(),l=e.getBoundingClientRect().top+document.body.scrollTop-(o.top+document.body.scrollTop)-i-r,c=t.scrollTop,u=t.clientHeight,d=this.getOuterHeight(e);l<0?t.scrollTop=c+l:l+d>u&&(t.scrollTop=c+l-u+d)},clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}},calculateScrollbarWidth(){if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.calculatedScrollbarWidth=e,e},getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser},resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),e=/(chrome)[ ]([\w.]+)/.exec(t)||/(webkit)[ ]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},isVisible(t){return t.offsetParent!=null},invokeElementMethod(t,e,n){t[e].apply(t,n)},isClient(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)},getFocusableElements(t){let e=this.find(t,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`),n=[];for(let i of e)getComputedStyle(i).display!="none"&&getComputedStyle(i).visibility!="hidden"&&n.push(i);return n},getFirstFocusableElement(t){const e=this.getFocusableElements(t);return e.length>0?e[0]:null},isClickable(t){const e=t.nodeName,n=t.parentElement&&t.parentElement.nodeName;return e=="INPUT"||e=="BUTTON"||e=="A"||n=="INPUT"||n=="BUTTON"||n=="A"||this.hasClass(t,"p-button")||this.hasClass(t.parentElement,"p-button")||this.hasClass(t.parentElement,"p-checkbox")||this.hasClass(t.parentElement,"p-radiobutton")},applyStyle(t,e){if(typeof e=="string")t.style.cssText=e;else for(let n in e)t.style[n]=e[n]},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroid(){return/(android)/i.test(navigator.userAgent)},isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},exportCSV(t,e){let n=new Blob([t],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,e+".csv");else{let i=document.createElement("a");i.download!==void 0?(i.setAttribute("href",URL.createObjectURL(n)),i.setAttribute("download",e+".csv"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)):(t="data:text/csv;charset=utf-8,"+t,window.open(encodeURI(t)))}}};class lu{constructor(e,n=()=>{}){this.element=e,this.listener=n}bindScrollListener(){this.scrollableParents=oe.getScrollableParents(this.element);for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var Fe={equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.deepEquals(t,e)},deepEquals(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),s,r,o;if(n&&i){if(r=t.length,r!=e.length)return!1;for(s=r;s--!==0;)if(!this.deepEquals(t[s],e[s]))return!1;return!0}if(n!=i)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var c=t instanceof RegExp,u=e instanceof RegExp;if(c!=u)return!1;if(c&&u)return t.toString()==e.toString();var d=Object.keys(t);if(r=d.length,r!==Object.keys(e).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,d[s]))return!1;for(s=r;s--!==0;)if(o=d[s],!this.deepEquals(t[o],e[o]))return!1;return!0}return t!==t&&e!==e},resolveFieldData(t,e){if(t&&Object.keys(t).length&&e){if(this.isFunction(e))return e(t);if(e.indexOf(".")===-1)return t[e];{let s=e.split("."),r=t;for(var n=0,i=s.length;n<i;++n){if(r==null)return null;r=r[s[n]]}return r}}else return null},isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},getItemValue(t,...e){return this.isFunction(t)?t(...e):t},filter(t,e,n){var i=[];if(t){for(let s of t)for(let r of e)if(String(this.resolveFieldData(s,r)).toLowerCase().indexOf(n.toLowerCase())>-1){i.push(s);break}}return i},reorderArray(t,e,n){let i;if(t&&e!==n){if(n>=t.length)for(i=n-t.length;i--+1;)t.push(void 0);t.splice(n,0,t.splice(e,1)[0])}},findIndexInList(t,e){let n=-1;if(e){for(let i=0;i<e.length;i++)if(e[i]===t){n=i;break}}return n},contains(t,e){if(t!=null&&e&&e.length){for(let n of e)if(this.equals(t,n))return!0}return!1},insertIntoOrderedArray(t,e,n,i){if(n.length>0){let s=!1;for(let r=0;r<n.length;r++)if(this.findIndexInList(n[r],i)>e){n.splice(r,0,t),s=!0;break}s||n.push(t)}else n.push(t)},removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t},getVNodeProp(t,e){let n=t.props;if(n){let i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=Object.prototype.hasOwnProperty.call(n,i)?i:e;return t.type.props[e].type===Boolean&&n[s]===""?!0:n[s]}return null},isEmpty(t){return t==null||t===""||Array.isArray(t)&&t.length===0||!(t instanceof Date)&&typeof t=="object"&&Object.keys(t).length===0},isNotEmpty(t){return!this.isEmpty(t)}};function KS(){let t=[];const e=(r,o)=>{let a=t.length>0?t[t.length-1]:{key:r,value:o},l=a.value+(a.key===r?0:o)+1;return t.push({key:r,value:l}),l},n=r=>{t=t.filter(o=>o.value!==r)},i=()=>t.length>0?t[t.length-1].value:0,s=r=>r&&parseInt(r.style.zIndex,10)||0;return{get:s,set:(r,o,a)=>{o&&(o.style.zIndex=String(e(r,a)))},clear:r=>{r&&(n(s(r)),r.style.zIndex="")},getCurrent:()=>i()}}var gn=KS(),Yp=0;function Do(t="pv_id_"){return Yp++,`${t}${Yp}`}function k0(){const t=new Map;return{on(e,n){let i=t.get(e);i?i.push(n):i=[n],t.set(e,i)},off(e,n){let i=t.get(e);i&&i.splice(i.indexOf(n)>>>0,1)},emit(e,n){let i=t.get(e);i&&i.slice().map(s=>{s(n)})}}}var kt=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n};const XS={name:"Accordion",emits:["tab-close","tab-open","update:activeIndex"],props:{multiple:{type:Boolean,default:!1},activeIndex:{type:[Number,Array],default:null},lazy:{type:Boolean,default:!1},expandIcon:{type:String,default:"pi-chevron-right"},collapseIcon:{type:String,default:"pi-chevron-down"}},data(){return{d_activeIndex:this.activeIndex}},watch:{activeIndex(t){this.d_activeIndex=t}},methods:{onTabClick(t,e,n){if(!this.isTabDisabled(e)){const i=this.isTabActive(n),s=i?"tab-close":"tab-open";this.multiple?i?this.d_activeIndex=this.d_activeIndex.filter(r=>r!==n):this.d_activeIndex?this.d_activeIndex.push(n):this.d_activeIndex=[n]:this.d_activeIndex=this.d_activeIndex===n?null:n,this.$emit("update:activeIndex",this.d_activeIndex),this.$emit(s,{originalEvent:t,index:n})}},onTabKeydown(t,e,n){t.which===13&&this.onTabClick(t,e,n)},isTabActive(t){return this.multiple?this.d_activeIndex&&this.d_activeIndex.includes(t):t===this.d_activeIndex},getKey(t,e){return t.props&&t.props.header?t.props.header:e},isTabDisabled(t){return t.props&&t.props.disabled},getTabClass(t){return["p-accordion-tab",{"p-accordion-tab-active":this.isTabActive(t)}]},getTabHeaderClass(t,e){return["p-accordion-header",{"p-highlight":this.isTabActive(e),"p-disabled":this.isTabDisabled(t)}]},getTabAriaId(t){return this.ariaId+"_"+t},getHeaderCollapseIcon(){return["p-accordion-toggle-icon pi",this.collapseIcon]},getHeaderExpandIcon(){return["p-accordion-toggle-icon pi",this.expandIcon]},isAccordionTab(t){return t.type.name==="AccordionTab"}},computed:{tabs(){const t=[];return this.$slots.default().forEach(e=>{this.isAccordionTab(e)?t.push(e):e.children&&e.children instanceof Array&&e.children.forEach(n=>{this.isAccordionTab(n)&&t.push(n)})}),t},ariaId(){return Do()}}},YS={class:"p-accordion p-component"},qS=["onClick","onKeydown","tabindex","aria-expanded","id","aria-controls"],ZS={key:0,class:"p-accordion-header-text"},JS=["id","aria-labelledby"],QS={class:"p-accordion-content"};function eM(t,e,n,i,s,r){return k(),X("div",YS,[(k(!0),X(je,null,Vt(r.tabs,(o,a)=>(k(),X("div",{key:r.getKey(o,a),class:Ie(r.getTabClass(a))},[we("div",{class:Ie(r.getTabHeaderClass(o,a))},[we("a",{role:"tab",class:"p-accordion-header-link",onClick:l=>r.onTabClick(l,o,a),onKeydown:l=>r.onTabKeydown(l,o,a),tabindex:r.isTabDisabled(o)?null:"0","aria-expanded":r.isTabActive(a),id:r.getTabAriaId(a)+"_header","aria-controls":r.getTabAriaId(a)+"_content"},[we("span",{class:Ie(r.isTabActive(a)?r.getHeaderCollapseIcon():r.getHeaderExpandIcon())},null,2),o.props&&o.props.header?(k(),X("span",ZS,it(o.props.header),1)):Ce("",!0),o.children&&o.children.header?(k(),Ve(Yt(o.children.header),{key:1})):Ce("",!0)],40,qS)],2),he(Ur,{name:"p-toggleable-content"},{default:Xe(()=>[!n.lazy||r.isTabActive(a)?bt((k(),X("div",{key:0,class:"p-toggleable-content",role:"region",id:r.getTabAriaId(a)+"_content","aria-labelledby":r.getTabAriaId(a)+"_header"},[we("div",QS,[(k(),Ve(Yt(o)))])],8,JS)),[[HS,n.lazy?!0:r.isTabActive(a)]]):Ce("",!0)]),_:2},1024)],2))),128))])}var bf=kt(XS,[["render",eM]]);const tM={name:"AccordionTab",props:{header:null,disabled:Boolean}};function nM(t,e,n,i,s,r){return gt(t.$slots,"default")}var yf=kt(tM,[["render",nM]]),is=k0();function iM(t){t.addEventListener("mousedown",O0)}function sM(t){t.removeEventListener("mousedown",O0)}function rM(t){let e=document.createElement("span");e.className="p-ink",t.appendChild(e),e.addEventListener("animationend",F0)}function oM(t){let e=N0(t);e&&(sM(t),e.removeEventListener("animationend",F0),e.remove())}function O0(t){let e=t.currentTarget,n=N0(e);if(!n||getComputedStyle(n,null).display==="none")return;if(oe.removeClass(n,"p-ink-active"),!oe.getHeight(n)&&!oe.getWidth(n)){let o=Math.max(oe.getOuterWidth(e),oe.getOuterHeight(e));n.style.height=o+"px",n.style.width=o+"px"}let i=oe.getOffset(e),s=t.pageX-i.left+document.body.scrollTop-oe.getWidth(n)/2,r=t.pageY-i.top+document.body.scrollLeft-oe.getHeight(n)/2;n.style.top=r+"px",n.style.left=s+"px",oe.addClass(n,"p-ink-active")}function F0(t){oe.removeClass(t.currentTarget,"p-ink-active")}function N0(t){for(let e=0;e<t.children.length;e++)if(typeof t.children[e].className=="string"&&t.children[e].className.indexOf("p-ink")!==-1)return t.children[e];return null}const mi={mounted(t,e){e.instance.$primevue&&e.instance.$primevue.config&&e.instance.$primevue.config.ripple&&(rM(t),iM(t))},unmounted(t){oM(t)}},aM={name:"ToastMessage",emits:["close"],props:{message:null,template:null},closeTimeout:null,mounted(){this.message.life&&(this.closeTimeout=setTimeout(()=>{this.close()},this.message.life))},beforeUnmount(){this.clearCloseTimeout()},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.clearCloseTimeout(),this.close()},clearCloseTimeout(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)}},computed:{containerClass(){return["p-toast-message",this.message.styleClass,{"p-toast-message-info":this.message.severity==="info","p-toast-message-warn":this.message.severity==="warn","p-toast-message-error":this.message.severity==="error","p-toast-message-success":this.message.severity==="success"}]},iconClass(){return["p-toast-message-icon pi",{"pi-info-circle":this.message.severity==="info","pi-exclamation-triangle":this.message.severity==="warn","pi-times":this.message.severity==="error","pi-check":this.message.severity==="success"}]}},directives:{ripple:mi}},lM={class:"p-toast-message-text"},cM={class:"p-toast-summary"},uM={class:"p-toast-detail"},dM=we("span",{class:"p-toast-icon-close-icon pi pi-times"},null,-1),hM=[dM];function fM(t,e,n,i,s,r){const o=on("ripple");return k(),X("div",{class:Ie(r.containerClass),role:"alert","aria-live":"assertive","aria-atomic":"true"},[we("div",{class:Ie(["p-toast-message-content",n.message.contentStyleClass])},[n.template?(k(),Ve(Yt(n.template),{key:1,message:n.message},null,8,["message"])):(k(),X(je,{key:0},[we("span",{class:Ie(r.iconClass)},null,2),we("div",lM,[we("span",cM,it(n.message.summary),1),we("div",uM,it(n.message.detail),1)])],64)),n.message.closable!==!1?bt((k(),X("button",{key:2,class:"p-toast-icon-close p-link",onClick:e[0]||(e[0]=(...a)=>r.onCloseClick&&r.onCloseClick(...a)),type:"button"},hM)),[[o]]):Ce("",!0)],2)],2)}var pM=kt(aM,[["render",fM]]),Go={name:"Portal",props:{appendTo:{type:String,default:"body"},disabled:{type:Boolean,default:!1}},data(){return{mounted:!1}},mounted(){this.mounted=oe.isClient()},computed:{inline(){return this.disabled||this.appendTo==="self"}}};function mM(t,e,n,i,s,r){return r.inline?gt(t.$slots,"default",{key:0}):s.mounted?(k(),Ve(Zw,{key:1,to:n.appendTo},[gt(t.$slots,"default")],8,["to"])):Ce("",!0)}Go.render=mM;var gM=0;const bM={name:"Toast",inheritAttrs:!1,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},breakpoints:{type:Object,default:null}},data(){return{messages:[]}},styleElement:null,mounted(){is.on("add",this.onAdd),is.on("remove-group",this.onRemoveGroup),is.on("remove-all-groups",this.onRemoveAllGroups),this.breakpoints&&this.createStyle()},beforeUnmount(){this.destroyStyle(),this.$refs.container&&this.autoZIndex&&gn.clear(this.$refs.container),is.off("add",this.onAdd),is.off("remove-group",this.onRemoveGroup),is.off("remove-all-groups",this.onRemoveAllGroups)},methods:{add(t){t.id==null&&(t.id=gM++),this.messages=[...this.messages,t]},remove(t){let e=-1;for(let n=0;n<this.messages.length;n++)if(this.messages[n]===t){e=n;break}this.messages.splice(e,1)},onAdd(t){this.group==t.group&&this.add(t)},onRemoveGroup(t){this.group===t&&(this.messages=[])},onRemoveAllGroups(){this.messages=[]},onEnter(){this.$refs.container.setAttribute(this.attributeSelector,""),this.autoZIndex&&gn.set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},onLeave(){this.$refs.container&&this.autoZIndex&&Fe.isEmpty(this.messages)&&gn.clear(this.$refs.container)},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let e in this.breakpoints){let n="";for(let i in this.breakpoints[e])n+=i+":"+this.breakpoints[e][i]+"!important;";t+=`
                        @media screen and (max-width: ${e}) {
                            .p-toast[${this.attributeSelector}] {
                                ${n}
                            }
                        }
                    `}this.styleElement.innerHTML=t}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}},components:{ToastMessage:pM,Portal:Go},computed:{containerClass(){return["p-toast p-component p-toast-"+this.position,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},attributeSelector(){return Do()}}};function yM(t,e,n,i,s,r){const o=Ke("ToastMessage"),a=Ke("Portal");return k(),Ve(a,null,{default:Xe(()=>[we("div",dn({ref:"container",class:r.containerClass},t.$attrs),[he(kS,{name:"p-toast-message",tag:"div",onEnter:r.onEnter,onLeave:r.onLeave},{default:Xe(()=>[(k(!0),X(je,null,Vt(s.messages,l=>(k(),Ve(o,{key:l.id,message:l,onClose:e[0]||(e[0]=c=>r.remove(c)),template:t.$slots.message},null,8,["message","template"]))),128))]),_:1},8,["onEnter","onLeave"])],16)]),_:1})}var xM=kt(bM,[["render",yM]]);const vM={name:"Button",props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},computed:{buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label}},iconClass(){return[this.loading?"p-button-loading-icon "+this.loadingIcon:this.icon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label}]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&String(this.badge).length===1}]},disabled(){return this.$attrs.disabled||this.loading}},directives:{ripple:mi}},_M=["disabled"],wM={class:"p-button-label"};function SM(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.buttonClass),type:"button",disabled:r.disabled},[gt(t.$slots,"default",{},()=>[n.loading&&!n.icon?(k(),X("span",{key:0,class:Ie(r.iconClass)},null,2)):Ce("",!0),n.icon?(k(),X("span",{key:1,class:Ie(r.iconClass)},null,2)):Ce("",!0),we("span",wM,it(n.label||"\xA0"),1),n.badge?(k(),X("span",{key:2,class:Ie(r.badgeStyleClass)},it(n.badge),3)):Ce("",!0)])],10,_M)),[[o]])}var Wn=kt(vM,[["render",SM]]),as=k0();const MM={name:"CascadeSelectSub",emits:["option-select","optiongroup-select"],props:{selectionPath:Array,level:Number,options:Array,optionLabel:String,optionValue:String,optionGroupLabel:String,optionGroupChildren:Array,parentActive:Boolean,dirty:Boolean,templates:null,root:Boolean},data(){return{activeOption:null}},mounted(){if(this.selectionPath&&this.options&&!this.dirty){for(let t of this.options)if(this.selectionPath.includes(t)){this.activeOption=t;break}}this.root||this.position()},watch:{parentActive(t){t||(this.activeOption=null)}},methods:{onOptionClick(t,e){this.isOptionGroup(e)?(this.activeOption=this.activeOption===e?null:e,this.$emit("optiongroup-select",{originalEvent:t,value:e})):this.$emit("option-select",{originalEvent:t,value:this.getOptionValue(e)})},onOptionSelect(t){this.$emit("option-select",t)},onOptionGroupSelect(t){this.$emit("optiongroup-select",t)},getOptionLabel(t){return this.optionLabel?Fe.resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?Fe.resolveFieldData(t,this.optionValue):t},getOptionGroupLabel(t){return this.optionGroupLabel?Fe.resolveFieldData(t,this.optionGroupLabel):null},getOptionGroupChildren(t){return Fe.resolveFieldData(t,this.optionGroupChildren[this.level])},isOptionGroup(t){return Object.prototype.hasOwnProperty.call(t,this.optionGroupChildren[this.level])},getOptionLabelToRender(t){return this.isOptionGroup(t)?this.getOptionGroupLabel(t):this.getOptionLabel(t)},getItemClass(t){return["p-cascadeselect-item",{"p-cascadeselect-item-group":this.isOptionGroup(t),"p-cascadeselect-item-active p-highlight":this.isOptionActive(t)}]},isOptionActive(t){return this.activeOption===t},onKeyDown(t,e,n){switch(t.key){case"Down":case"ArrowDown":var i=this.$el.children[n+1];i&&i.children[0].focus();break;case"Up":case"ArrowUp":var s=this.$el.children[n-1];s&&s.children[0].focus();break;case"Right":case"ArrowRight":this.isOptionGroup(e)&&(this.isOptionActive(e)?t.currentTarget.nextElementSibling.children[0].children[0].focus():this.activeOption=e);break;case"Left":case"ArrowLeft":this.activeOption=null;var r=t.currentTarget.parentElement.parentElement.previousElementSibling;r&&r.focus();break;case"Enter":this.onOptionClick(t,e);break}t.preventDefault()},position(){const t=this.$el.parentElement,e=oe.getOffset(t),n=oe.getViewport(),i=this.$el.offsetParent?this.$el.offsetWidth:oe.getHiddenElementOuterWidth(this.$el),s=oe.getOuterWidth(t.children[0]);parseInt(e.left,10)+s+i>n.width-oe.calculateScrollbarWidth()&&(this.$el.style.left="-100%")}},directives:{ripple:mi}},CM={class:"p-cascadeselect-panel p-cascadeselect-items",role:"listbox","aria-orientation":"horizontal"},TM=["onClick","onKeydown"],EM={key:1,class:"p-cascadeselect-item-text"},DM={key:2,class:"p-cascadeselect-group-icon pi pi-angle-right"};function PM(t,e,n,i,s,r){const o=Ke("CascadeSelectSub",!0),a=on("ripple");return k(),X("ul",CM,[(k(!0),X(je,null,Vt(n.options,(l,c)=>(k(),X("li",{key:r.getOptionLabelToRender(l),class:Ie(r.getItemClass(l)),role:"none"},[bt((k(),X("div",{class:"p-cascadeselect-item-content",onClick:u=>r.onOptionClick(u,l),tabindex:"0",onKeydown:u=>r.onKeyDown(u,l,c)},[n.templates.option?(k(),Ve(Yt(n.templates.option),{key:0,option:l},null,8,["option"])):(k(),X("span",EM,it(r.getOptionLabelToRender(l)),1)),r.isOptionGroup(l)?(k(),X("span",DM)):Ce("",!0)],40,TM)),[[a]]),r.isOptionGroup(l)&&r.isOptionActive(l)?(k(),Ve(o,{key:0,class:"p-cascadeselect-sublist",selectionPath:n.selectionPath,options:r.getOptionGroupChildren(l),optionLabel:n.optionLabel,optionValue:n.optionValue,level:n.level+1,onOptionSelect:r.onOptionSelect,onOptiongroupSelect:r.onOptionGroupSelect,optionGroupLabel:n.optionGroupLabel,optionGroupChildren:n.optionGroupChildren,parentActive:r.isOptionActive(l),dirty:n.dirty,templates:n.templates},null,8,["selectionPath","options","optionLabel","optionValue","level","onOptionSelect","onOptiongroupSelect","optionGroupLabel","optionGroupChildren","parentActive","dirty","templates"])):Ce("",!0)],2))),128))])}var LM=kt(MM,[["render",PM]]);const RM={name:"CascadeSelect",emits:["update:modelValue","change","group-change","before-show","before-hide","hide","show"],data(){return{selectionPath:null,focused:!1,overlayVisible:!1,dirty:!1}},props:{modelValue:null,options:Array,optionLabel:String,optionValue:String,optionGroupLabel:String,optionGroupChildren:Array,placeholder:String,disabled:Boolean,dataKey:null,inputId:String,tabindex:String,ariaLabelledBy:null,appendTo:{type:String,default:"body"},panelClass:null,loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},outsideClickListener:null,scrollHandler:null,resizeListener:null,overlay:null,beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(gn.clear(this.overlay),this.overlay=null)},mounted(){this.updateSelectionPath()},watch:{modelValue(){this.updateSelectionPath()}},methods:{onOptionSelect(t){this.$emit("update:modelValue",t.value),this.$emit("change",t),this.hide(),this.$refs.focusInput.focus()},onOptionGroupSelect(t){this.dirty=!0,this.$emit("group-change",t)},getOptionLabel(t){return this.optionLabel?Fe.resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?Fe.resolveFieldData(t,this.optionValue):t},getOptionGroupChildren(t,e){return Fe.resolveFieldData(t,this.optionGroupChildren[e])},isOptionGroup(t,e){return Object.prototype.hasOwnProperty.call(t,this.optionGroupChildren[e])},updateSelectionPath(){let t;if(this.modelValue!=null&&this.options){for(let e of this.options)if(t=this.findModelOptionInGroup(e,0),t)break}this.selectionPath=t},findModelOptionInGroup(t,e){if(this.isOptionGroup(t,e)){let n;for(let i of this.getOptionGroupChildren(t,e))if(n=this.findModelOptionInGroup(i,e+1),n)return n.unshift(t),n}else if(Fe.equals(this.modelValue,this.getOptionValue(t),this.dataKey))return[t];return null},show(){this.$emit("before-show"),this.overlayVisible=!0},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(){this.focused=!0},onBlur(){this.focused=!1},onClick(t){this.disabled||this.loading||(!this.overlay||!this.overlay.contains(t.target))&&(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onOverlayEnter(t){gn.set("overlay",t,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.overlay=null,this.dirty=!1},onOverlayAfterLeave(t){gn.clear(t)},alignOverlay(){this.appendTo==="self"?oe.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=oe.getOuterWidth(this.$el)+"px",oe.absolutePosition(this.overlay,this.$el))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.overlayVisible&&this.overlay&&!this.$el.contains(t.target)&&!this.overlay.contains(t.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lu(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!oe.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},overlayRef(t){this.overlay=t},onKeyDown(t){switch(t.key){case"Down":case"ArrowDown":this.overlayVisible?oe.findSingle(this.overlay,".p-cascadeselect-item").children[0].focus():t.altKey&&this.options&&this.options.length&&this.show(),t.preventDefault();break;case"Escape":this.overlayVisible&&(this.hide(),t.preventDefault());break;case"Tab":this.hide();break}},onOverlayClick(t){as.emit("overlay-click",{originalEvent:t,target:this.$el})}},computed:{containerClass(){return["p-cascadeselect p-component p-inputwrapper",{"p-disabled":this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-cascadeselect-label",{"p-placeholder":this.label===this.placeholder,"p-cascadeselect-label-empty":!this.$slots.value&&(this.label==="p-emptylabel"||this.label.length===0)}]},label(){return this.selectionPath?this.getOptionLabel(this.selectionPath[this.selectionPath.length-1]):this.placeholder||"p-emptylabel"},panelStyleClass(){return["p-cascadeselect-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},dropdownIconClass(){return["p-cascadeselect-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]}},components:{CascadeSelectSub:LM,Portal:Go}},AM={class:"p-hidden-accessible"},IM=["id","disabled","tabindex","aria-expanded","aria-labelledby"],kM=["aria-expanded"],OM={class:"p-cascadeselect-items-wrapper"};function FM(t,e,n,i,s,r){const o=Ke("CascadeSelectSub"),a=Ke("Portal");return k(),X("div",{ref:"container",class:Ie(r.containerClass),onClick:e[4]||(e[4]=l=>r.onClick(l))},[we("div",AM,[we("input",{ref:"focusInput",type:"text",id:n.inputId,readonly:"",disabled:n.disabled,onFocus:e[0]||(e[0]=(...l)=>r.onFocus&&r.onFocus(...l)),onBlur:e[1]||(e[1]=(...l)=>r.onBlur&&r.onBlur(...l)),onKeydown:e[2]||(e[2]=(...l)=>r.onKeyDown&&r.onKeyDown(...l)),tabindex:n.tabindex,"aria-haspopup":"listbox","aria-expanded":s.overlayVisible,"aria-labelledby":n.ariaLabelledBy},null,40,IM)]),we("span",{class:Ie(r.labelClass)},[gt(t.$slots,"value",{value:n.modelValue,placeholder:n.placeholder},()=>[vn(it(r.label),1)])],2),we("div",{class:"p-cascadeselect-trigger",role:"button","aria-haspopup":"listbox","aria-expanded":s.overlayVisible},[gt(t.$slots,"indicator",{},()=>[we("span",{class:Ie(r.dropdownIconClass)},null,2)])],8,kM),he(a,{appendTo:n.appendTo},{default:Xe(()=>[he(Ur,{name:"p-connected-overlay",onEnter:r.onOverlayEnter,onLeave:r.onOverlayLeave,onAfterLeave:r.onOverlayAfterLeave},{default:Xe(()=>[s.overlayVisible?(k(),X("div",{key:0,ref:r.overlayRef,class:Ie(r.panelStyleClass),onClick:e[3]||(e[3]=(...l)=>r.onOverlayClick&&r.onOverlayClick(...l))},[we("div",OM,[he(o,{options:n.options,selectionPath:s.selectionPath,optionLabel:n.optionLabel,optionValue:n.optionValue,level:0,templates:t.$slots,optionGroupLabel:n.optionGroupLabel,optionGroupChildren:n.optionGroupChildren,onOptionSelect:r.onOptionSelect,onOptiongroupSelect:r.onOptionGroupSelect,dirty:s.dirty,root:!0},null,8,["options","selectionPath","optionLabel","optionValue","templates","optionGroupLabel","optionGroupChildren","onOptionSelect","onOptiongroupSelect","dirty"])])],2)):Ce("",!0)]),_:1},8,["onEnter","onLeave","onAfterLeave"])]),_:1},8,["appendTo"])],2)}var B0=kt(RM,[["render",FM]]);/*!
  * @intlify/shared v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const NM=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ms=t=>NM?Symbol(t):t,BM=(t,e,n)=>zM({l:t,k:e,s:n}),zM=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),fn=t=>typeof t=="number"&&isFinite(t),VM=t=>xf(t)==="[object Date]",Po=t=>xf(t)==="[object RegExp]",cu=t=>lt(t)&&Object.keys(t).length===0;function UM(t,e){typeof console!="undefined"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const bn=Object.assign;let qp;const La=()=>qp||(qp=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function Zp(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const HM=Object.prototype.hasOwnProperty;function z0(t,e){return HM.call(t,e)}const jt=Array.isArray,wn=t=>typeof t=="function",We=t=>typeof t=="string",Lt=t=>typeof t=="boolean",Fn=t=>t!==null&&typeof t=="object",V0=Object.prototype.toString,xf=t=>V0.call(t),lt=t=>xf(t)==="[object Object]",WM=t=>t==null?"":jt(t)||lt(t)&&t.toString===V0?JSON.stringify(t,null,2):String(t);/*!
  * @intlify/message-resolver v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const GM=Object.prototype.hasOwnProperty;function jM(t,e){return GM.call(t,e)}const _c=t=>t!==null&&typeof t=="object",Js=[];Js[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Js[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Js[2]={w:[2],i:[3,0],[0]:[3,0]};Js[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Js[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Js[5]={["'"]:[4,0],o:8,l:[5,0]};Js[6]={['"']:[4,0],o:8,l:[6,0]};const $M=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function KM(t){return $M.test(t)}function XM(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function YM(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function qM(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:KM(e)?XM(e):"*"+e}function ZM(t){const e=[];let n=-1,i=0,s=0,r,o,a,l,c,u,d;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,i=4,h[0]();else{if(s=0,o===void 0||(o=qM(o),o===!1))return!1;h[1]()}};function p(){const g=t[n+1];if(i===5&&g==="'"||i===6&&g==='"')return n++,a="\\"+g,h[0](),!0}for(;i!==null;)if(n++,r=t[n],!(r==="\\"&&p())){if(l=YM(r),d=Js[i],c=d[l]||d.l||8,c===8||(i=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=r,u()===!1))))return;if(i===7)return e}}const Jp=new Map;function Ac(t,e){if(!_c(t))return null;let n=Jp.get(e);if(n||(n=ZM(e),n&&Jp.set(e,n)),!n)return null;const i=n.length;let s=t,r=0;for(;r<i;){const o=s[n[r]];if(o===void 0)return null;s=o,r++}return s}function fh(t){if(!_c(t))return t;for(const e in t)if(!!jM(t,e))if(!e.includes("."))_c(t[e])&&fh(t[e]);else{const n=e.split("."),i=n.length-1;let s=t;for(let r=0;r<i;r++)n[r]in s||(s[n[r]]={}),s=s[n[r]];s[n[i]]=t[e],delete t[e],_c(s[n[i]])&&fh(s[n[i]])}return t}/*!
  * @intlify/runtime v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const JM=t=>t,QM=t=>"",eC="text",tC=t=>t.length===0?"":t.join(""),nC=WM;function Qp(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function iC(t){const e=fn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(fn(t.named.count)||fn(t.named.n))?fn(t.named.count)?t.named.count:fn(t.named.n)?t.named.n:e:e}function sC(t,e){e.count||(e.count=t),e.n||(e.n=t)}function rC(t={}){const e=t.locale,n=iC(t),i=Fn(t.pluralRules)&&We(e)&&wn(t.pluralRules[e])?t.pluralRules[e]:Qp,s=Fn(t.pluralRules)&&We(e)&&wn(t.pluralRules[e])?Qp:void 0,r=f=>f[i(n,f.length,s)],o=t.list||[],a=f=>o[f],l=t.named||{};fn(t.pluralIndex)&&sC(n,l);const c=f=>l[f];function u(f){const b=wn(t.messages)?t.messages(f):Fn(t.messages)?t.messages[f]:!1;return b||(t.parent?t.parent.message(f):QM)}const d=f=>t.modifiers?t.modifiers[f]:JM,h=lt(t.processor)&&wn(t.processor.normalize)?t.processor.normalize:tC,p=lt(t.processor)&&wn(t.processor.interpolate)?t.processor.interpolate:nC,g=lt(t.processor)&&We(t.processor.type)?t.processor.type:eC,m={list:a,named:c,plural:r,linked:(f,b)=>{const x=u(f)(m);return We(b)?d(b)(x):x},message:u,type:g,interpolate:p,normalize:h};return m}/*!
  * @intlify/message-compiler v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */function uu(t,e,n={}){const{domain:i,messages:s,args:r}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=i,a}function oC(t){throw t}function aC(t,e,n){return{line:t,column:e,offset:n}}function ph(t,e,n){const i={start:t,end:e};return n!=null&&(i.source=n),i}const $i=" ",lC="\r",On=`
`,cC=String.fromCharCode(8232),uC=String.fromCharCode(8233);function dC(t){const e=t;let n=0,i=1,s=1,r=0;const o=R=>e[R]===lC&&e[R+1]===On,a=R=>e[R]===On,l=R=>e[R]===uC,c=R=>e[R]===cC,u=R=>o(R)||a(R)||l(R)||c(R),d=()=>n,h=()=>i,p=()=>s,g=()=>r,m=R=>o(R)||l(R)||c(R)?On:e[R],f=()=>m(n),b=()=>m(n+r);function x(){return r=0,u(n)&&(i++,s=0),o(n)&&n++,n++,s++,e[n]}function _(){return o(n+r)&&r++,r++,e[n+r]}function y(){n=0,i=1,s=1,r=0}function v(R=0){r=R}function C(){const R=n+r;for(;R!==n;)x();r=0}return{index:d,line:h,column:p,peekOffset:g,charAt:m,currentChar:f,currentPeek:b,next:x,peek:_,reset:y,resetPeek:v,skipToPeek:C}}const vs=void 0,em="'",hC="tokenizer";function fC(t,e={}){const n=e.location!==!1,i=dC(t),s=()=>i.index(),r=()=>aC(i.line(),i.column(),i.index()),o=r(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(O,z,M,...A){const G=c();if(z.column+=M,z.offset+=M,u){const Y=ph(G.startLoc,z),re=uu(O,Y,{domain:hC,args:A});u(re)}}function h(O,z,M){O.endLoc=r(),O.currentType=z;const A={type:z};return n&&(A.loc=ph(O.startLoc,O.endLoc)),M!=null&&(A.value=M),A}const p=O=>h(O,14);function g(O,z){return O.currentChar()===z?(O.next(),z):(d(0,r(),0,z),"")}function m(O){let z="";for(;O.currentPeek()===$i||O.currentPeek()===On;)z+=O.currentPeek(),O.peek();return z}function f(O){const z=m(O);return O.skipToPeek(),z}function b(O){if(O===vs)return!1;const z=O.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z===95}function x(O){if(O===vs)return!1;const z=O.charCodeAt(0);return z>=48&&z<=57}function _(O,z){const{currentType:M}=z;if(M!==2)return!1;m(O);const A=b(O.currentPeek());return O.resetPeek(),A}function y(O,z){const{currentType:M}=z;if(M!==2)return!1;m(O);const A=O.currentPeek()==="-"?O.peek():O.currentPeek(),G=x(A);return O.resetPeek(),G}function v(O,z){const{currentType:M}=z;if(M!==2)return!1;m(O);const A=O.currentPeek()===em;return O.resetPeek(),A}function C(O,z){const{currentType:M}=z;if(M!==8)return!1;m(O);const A=O.currentPeek()===".";return O.resetPeek(),A}function R(O,z){const{currentType:M}=z;if(M!==9)return!1;m(O);const A=b(O.currentPeek());return O.resetPeek(),A}function w(O,z){const{currentType:M}=z;if(!(M===8||M===12))return!1;m(O);const A=O.currentPeek()===":";return O.resetPeek(),A}function D(O,z){const{currentType:M}=z;if(M!==10)return!1;const A=()=>{const Y=O.currentPeek();return Y==="{"?b(O.peek()):Y==="@"||Y==="%"||Y==="|"||Y===":"||Y==="."||Y===$i||!Y?!1:Y===On?(O.peek(),A()):b(Y)},G=A();return O.resetPeek(),G}function N(O){m(O);const z=O.currentPeek()==="|";return O.resetPeek(),z}function V(O,z=!0){const M=(G=!1,Y="",re=!1)=>{const fe=O.currentPeek();return fe==="{"?Y==="%"?!1:G:fe==="@"||!fe?Y==="%"?!0:G:fe==="%"?(O.peek(),M(G,"%",!0)):fe==="|"?Y==="%"||re?!0:!(Y===$i||Y===On):fe===$i?(O.peek(),M(!0,$i,re)):fe===On?(O.peek(),M(!0,On,re)):!0},A=M();return z&&O.resetPeek(),A}function j(O,z){const M=O.currentChar();return M===vs?vs:z(M)?(O.next(),M):null}function se(O){return j(O,M=>{const A=M.charCodeAt(0);return A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57||A===95||A===36})}function $(O){return j(O,M=>{const A=M.charCodeAt(0);return A>=48&&A<=57})}function q(O){return j(O,M=>{const A=M.charCodeAt(0);return A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102})}function K(O){let z="",M="";for(;z=$(O);)M+=z;return M}function ne(O){let z="";for(;;){const M=O.currentChar();if(M==="{"||M==="}"||M==="@"||M==="|"||!M)break;if(M==="%")if(V(O))z+=M,O.next();else break;else if(M===$i||M===On)if(V(O))z+=M,O.next();else{if(N(O))break;z+=M,O.next()}else z+=M,O.next()}return z}function te(O){f(O);let z="",M="";for(;z=se(O);)M+=z;return O.currentChar()===vs&&d(6,r(),0),M}function J(O){f(O);let z="";return O.currentChar()==="-"?(O.next(),z+=`-${K(O)}`):z+=K(O),O.currentChar()===vs&&d(6,r(),0),z}function de(O){f(O),g(O,"'");let z="",M="";const A=Y=>Y!==em&&Y!==On;for(;z=j(O,A);)z==="\\"?M+=ve(O):M+=z;const G=O.currentChar();return G===On||G===vs?(d(2,r(),0),G===On&&(O.next(),g(O,"'")),M):(g(O,"'"),M)}function ve(O){const z=O.currentChar();switch(z){case"\\":case"'":return O.next(),`\\${z}`;case"u":return me(O,z,4);case"U":return me(O,z,6);default:return d(3,r(),0,z),""}}function me(O,z,M){g(O,z);let A="";for(let G=0;G<M;G++){const Y=q(O);if(!Y){d(4,r(),0,`\\${z}${A}${O.currentChar()}`);break}A+=Y}return`\\${z}${A}`}function ye(O){f(O);let z="",M="";const A=G=>G!=="{"&&G!=="}"&&G!==$i&&G!==On;for(;z=j(O,A);)M+=z;return M}function ke(O){let z="",M="";for(;z=se(O);)M+=z;return M}function Ue(O){const z=(M=!1,A)=>{const G=O.currentChar();return G==="{"||G==="%"||G==="@"||G==="|"||!G||G===$i?A:G===On?(A+=G,O.next(),z(M,A)):(A+=G,O.next(),z(!0,A))};return z(!1,"")}function le(O){f(O);const z=g(O,"|");return f(O),z}function Ye(O,z){let M=null;switch(O.currentChar()){case"{":return z.braceNest>=1&&d(8,r(),0),O.next(),M=h(z,2,"{"),f(O),z.braceNest++,M;case"}":return z.braceNest>0&&z.currentType===2&&d(7,r(),0),O.next(),M=h(z,3,"}"),z.braceNest--,z.braceNest>0&&f(O),z.inLinked&&z.braceNest===0&&(z.inLinked=!1),M;case"@":return z.braceNest>0&&d(6,r(),0),M=$e(O,z)||p(z),z.braceNest=0,M;default:let G=!0,Y=!0,re=!0;if(N(O))return z.braceNest>0&&d(6,r(),0),M=h(z,1,le(O)),z.braceNest=0,z.inLinked=!1,M;if(z.braceNest>0&&(z.currentType===5||z.currentType===6||z.currentType===7))return d(6,r(),0),z.braceNest=0,Ne(O,z);if(G=_(O,z))return M=h(z,5,te(O)),f(O),M;if(Y=y(O,z))return M=h(z,6,J(O)),f(O),M;if(re=v(O,z))return M=h(z,7,de(O)),f(O),M;if(!G&&!Y&&!re)return M=h(z,13,ye(O)),d(1,r(),0,M.value),f(O),M;break}return M}function $e(O,z){const{currentType:M}=z;let A=null;const G=O.currentChar();switch((M===8||M===9||M===12||M===10)&&(G===On||G===$i)&&d(9,r(),0),G){case"@":return O.next(),A=h(z,8,"@"),z.inLinked=!0,A;case".":return f(O),O.next(),h(z,9,".");case":":return f(O),O.next(),h(z,10,":");default:return N(O)?(A=h(z,1,le(O)),z.braceNest=0,z.inLinked=!1,A):C(O,z)||w(O,z)?(f(O),$e(O,z)):R(O,z)?(f(O),h(z,12,ke(O))):D(O,z)?(f(O),G==="{"?Ye(O,z)||A:h(z,11,Ue(O))):(M===8&&d(9,r(),0),z.braceNest=0,z.inLinked=!1,Ne(O,z))}}function Ne(O,z){let M={type:14};if(z.braceNest>0)return Ye(O,z)||p(z);if(z.inLinked)return $e(O,z)||p(z);const A=O.currentChar();switch(A){case"{":return Ye(O,z)||p(z);case"}":return d(5,r(),0),O.next(),h(z,3,"}");case"@":return $e(O,z)||p(z);default:if(N(O))return M=h(z,1,le(O)),z.braceNest=0,z.inLinked=!1,M;if(V(O))return h(z,0,ne(O));if(A==="%")return O.next(),h(z,4,"%");break}return M}function Te(){const{currentType:O,offset:z,startLoc:M,endLoc:A}=l;return l.lastType=O,l.lastOffset=z,l.lastStartLoc=M,l.lastEndLoc=A,l.offset=s(),l.startLoc=r(),i.currentChar()===vs?h(l,14):Ne(i,l)}return{nextToken:Te,currentOffset:s,currentPosition:r,context:c}}const pC="parser",mC=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function gC(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(e||n,16);return i<=55295||i>=57344?String.fromCodePoint(i):"\uFFFD"}}}function bC(t={}){const e=t.location!==!1,{onError:n}=t;function i(b,x,_,y,...v){const C=b.currentPosition();if(C.offset+=y,C.column+=y,n){const R=ph(_,C),w=uu(x,R,{domain:pC,args:v});n(w)}}function s(b,x,_){const y={type:b,start:x,end:x};return e&&(y.loc={start:_,end:_}),y}function r(b,x,_,y){b.end=x,y&&(b.type=y),e&&b.loc&&(b.loc.end=_)}function o(b,x){const _=b.context(),y=s(3,_.offset,_.startLoc);return y.value=x,r(y,b.currentOffset(),b.currentPosition()),y}function a(b,x){const _=b.context(),{lastOffset:y,lastStartLoc:v}=_,C=s(5,y,v);return C.index=parseInt(x,10),b.nextToken(),r(C,b.currentOffset(),b.currentPosition()),C}function l(b,x){const _=b.context(),{lastOffset:y,lastStartLoc:v}=_,C=s(4,y,v);return C.key=x,b.nextToken(),r(C,b.currentOffset(),b.currentPosition()),C}function c(b,x){const _=b.context(),{lastOffset:y,lastStartLoc:v}=_,C=s(9,y,v);return C.value=x.replace(mC,gC),b.nextToken(),r(C,b.currentOffset(),b.currentPosition()),C}function u(b){const x=b.nextToken(),_=b.context(),{lastOffset:y,lastStartLoc:v}=_,C=s(8,y,v);return x.type!==12?(i(b,11,_.lastStartLoc,0),C.value="",r(C,y,v),{nextConsumeToken:x,node:C}):(x.value==null&&i(b,13,_.lastStartLoc,0,Ii(x)),C.value=x.value||"",r(C,b.currentOffset(),b.currentPosition()),{node:C})}function d(b,x){const _=b.context(),y=s(7,_.offset,_.startLoc);return y.value=x,r(y,b.currentOffset(),b.currentPosition()),y}function h(b){const x=b.context(),_=s(6,x.offset,x.startLoc);let y=b.nextToken();if(y.type===9){const v=u(b);_.modifier=v.node,y=v.nextConsumeToken||b.nextToken()}switch(y.type!==10&&i(b,13,x.lastStartLoc,0,Ii(y)),y=b.nextToken(),y.type===2&&(y=b.nextToken()),y.type){case 11:y.value==null&&i(b,13,x.lastStartLoc,0,Ii(y)),_.key=d(b,y.value||"");break;case 5:y.value==null&&i(b,13,x.lastStartLoc,0,Ii(y)),_.key=l(b,y.value||"");break;case 6:y.value==null&&i(b,13,x.lastStartLoc,0,Ii(y)),_.key=a(b,y.value||"");break;case 7:y.value==null&&i(b,13,x.lastStartLoc,0,Ii(y)),_.key=c(b,y.value||"");break;default:i(b,12,x.lastStartLoc,0);const v=b.context(),C=s(7,v.offset,v.startLoc);return C.value="",r(C,v.offset,v.startLoc),_.key=C,r(_,v.offset,v.startLoc),{nextConsumeToken:y,node:_}}return r(_,b.currentOffset(),b.currentPosition()),{node:_}}function p(b){const x=b.context(),_=x.currentType===1?b.currentOffset():x.offset,y=x.currentType===1?x.endLoc:x.startLoc,v=s(2,_,y);v.items=[];let C=null;do{const D=C||b.nextToken();switch(C=null,D.type){case 0:D.value==null&&i(b,13,x.lastStartLoc,0,Ii(D)),v.items.push(o(b,D.value||""));break;case 6:D.value==null&&i(b,13,x.lastStartLoc,0,Ii(D)),v.items.push(a(b,D.value||""));break;case 5:D.value==null&&i(b,13,x.lastStartLoc,0,Ii(D)),v.items.push(l(b,D.value||""));break;case 7:D.value==null&&i(b,13,x.lastStartLoc,0,Ii(D)),v.items.push(c(b,D.value||""));break;case 8:const N=h(b);v.items.push(N.node),C=N.nextConsumeToken||null;break}}while(x.currentType!==14&&x.currentType!==1);const R=x.currentType===1?x.lastOffset:b.currentOffset(),w=x.currentType===1?x.lastEndLoc:b.currentPosition();return r(v,R,w),v}function g(b,x,_,y){const v=b.context();let C=y.items.length===0;const R=s(1,x,_);R.cases=[],R.cases.push(y);do{const w=p(b);C||(C=w.items.length===0),R.cases.push(w)}while(v.currentType!==14);return C&&i(b,10,_,0),r(R,b.currentOffset(),b.currentPosition()),R}function m(b){const x=b.context(),{offset:_,startLoc:y}=x,v=p(b);return x.currentType===14?v:g(b,_,y,v)}function f(b){const x=fC(b,bn({},t)),_=x.context(),y=s(0,_.offset,_.startLoc);return e&&y.loc&&(y.loc.source=b),y.body=m(x),_.currentType!==14&&i(x,13,_.lastStartLoc,0,b[_.offset]||""),r(y,x.currentOffset(),x.currentPosition()),y}return{parse:f}}function Ii(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"\u2026":e}function yC(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function tm(t,e){for(let n=0;n<t.length;n++)vf(t[n],e)}function vf(t,e){switch(t.type){case 1:tm(t.cases,e),e.helper("plural");break;case 2:tm(t.items,e);break;case 6:vf(t.key,e),e.helper("linked");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function xC(t,e={}){const n=yC(t);n.helper("normalize"),t.body&&vf(t.body,n);const i=n.context();t.helpers=Array.from(i.helpers)}function vC(t,e){const{sourceMap:n,filename:i,breakLineCode:s,needIndent:r}=e,o={source:t.loc.source,filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:r,indentLevel:0},a=()=>o;function l(m,f){o.code+=m}function c(m,f=!0){const b=f?s:"";l(r?b+"  ".repeat(m):b)}function u(m=!0){const f=++o.indentLevel;m&&c(f)}function d(m=!0){const f=--o.indentLevel;m&&c(f)}function h(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:h,helper:m=>`_${m}`,needIndent:()=>o.needIndent}}function _C(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Lo(t,e.key),e.modifier&&(t.push(", "),Lo(t,e.modifier)),t.push(")")}function wC(t,e){const{helper:n,needIndent:i}=t;t.push(`${n("normalize")}([`),t.indent(i());const s=e.items.length;for(let r=0;r<s&&(Lo(t,e.items[r]),r!==s-1);r++)t.push(", ");t.deindent(i()),t.push("])")}function SC(t,e){const{helper:n,needIndent:i}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(i());const s=e.cases.length;for(let r=0;r<s&&(Lo(t,e.cases[r]),r!==s-1);r++)t.push(", ");t.deindent(i()),t.push("])")}}function MC(t,e){e.body?Lo(t,e.body):t.push("null")}function Lo(t,e){const{helper:n}=t;switch(e.type){case 0:MC(t,e);break;case 1:SC(t,e);break;case 2:wC(t,e);break;case 6:_C(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const CC=(t,e={})=>{const n=We(e.mode)?e.mode:"normal",i=We(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,r=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=vC(t,{mode:n,filename:i,sourceMap:s,breakLineCode:r,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(d=>`${d}: _${d}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Lo(l,t),l.deindent(o),l.push("}");const{code:c,map:u}=l.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function TC(t,e={}){const n=bn({},e),s=bC(n).parse(t);return xC(s,n),CC(s,n)}/*!
  * @intlify/devtools-if v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const U0={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */let qa=null;function EC(t){qa=t}function DC(t,e,n){qa&&qa.emit(U0.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:n})}const PC=LC(U0.FunctionTranslate);function LC(t){return e=>qa&&qa.emit(t,e)}const RC="9.1.10",du=-1,nm="";function AC(){return{upper:t=>We(t)?t.toUpperCase():t,lower:t=>We(t)?t.toLowerCase():t,capitalize:t=>We(t)?`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`:t}}let H0;function IC(t){H0=t}let W0=null;const im=t=>{W0=t},kC=()=>W0;let sm=0;function OC(t={}){const e=We(t.version)?t.version:RC,n=We(t.locale)?t.locale:"en-US",i=jt(t.fallbackLocale)||lt(t.fallbackLocale)||We(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,s=lt(t.messages)?t.messages:{[n]:{}},r=lt(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},o=lt(t.numberFormats)?t.numberFormats:{[n]:{}},a=bn({},t.modifiers||{},AC()),l=t.pluralRules||{},c=wn(t.missing)?t.missing:null,u=Lt(t.missingWarn)||Po(t.missingWarn)?t.missingWarn:!0,d=Lt(t.fallbackWarn)||Po(t.fallbackWarn)?t.fallbackWarn:!0,h=!!t.fallbackFormat,p=!!t.unresolving,g=wn(t.postTranslation)?t.postTranslation:null,m=lt(t.processor)?t.processor:null,f=Lt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,b=!!t.escapeParameter,x=wn(t.messageCompiler)?t.messageCompiler:H0,_=wn(t.onWarn)?t.onWarn:UM,y=t,v=Fn(y.__datetimeFormatters)?y.__datetimeFormatters:new Map,C=Fn(y.__numberFormatters)?y.__numberFormatters:new Map,R=Fn(y.__meta)?y.__meta:{};sm++;const w={version:e,cid:sm,locale:n,fallbackLocale:i,messages:s,datetimeFormats:r,numberFormats:o,modifiers:a,pluralRules:l,missing:c,missingWarn:u,fallbackWarn:d,fallbackFormat:h,unresolving:p,postTranslation:g,processor:m,warnHtmlMessage:f,escapeParameter:b,messageCompiler:x,onWarn:_,__datetimeFormatters:v,__numberFormatters:C,__meta:R};return __INTLIFY_PROD_DEVTOOLS__&&DC(w,e,R),w}function _f(t,e,n,i,s){const{missing:r,onWarn:o}=t;if(r!==null){const a=r(t,n,e,s);return We(a)?a:e}else return e}function cl(t,e,n){const i=t;i.__localeChainCache||(i.__localeChainCache=new Map);let s=i.__localeChainCache.get(n);if(!s){s=[];let r=[n];for(;jt(r);)r=rm(s,r,e);const o=jt(e)?e:lt(e)?e.default?e.default:null:e;r=We(o)?[o]:o,jt(r)&&rm(s,r,!1),i.__localeChainCache.set(n,s)}return s}function rm(t,e,n){let i=!0;for(let s=0;s<e.length&&Lt(i);s++){const r=e[s];We(r)&&(i=FC(t,e[s],n))}return i}function FC(t,e,n){let i;const s=e.split("-");do{const r=s.join("-");i=NC(t,r,n),s.splice(-1,1)}while(s.length&&i===!0);return i}function NC(t,e,n){let i=!1;if(!t.includes(e)&&(i=!0,e)){i=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(jt(n)||lt(n))&&n[s]&&(i=n[s])}return i}function ta(t,e,n){const i=t;i.__localeChainCache=new Map,cl(t,n,e)}const BC=t=>t;let om=Object.create(null);function zC(t,e={}){{const i=(e.onCacheKey||BC)(t),s=om[i];if(s)return s;let r=!1;const o=e.onError||oC;e.onError=c=>{r=!0,o(c)};const{code:a}=TC(t,e),l=new Function(`return ${a}`)();return r?l:om[i]=l}}function bo(t){return uu(t,null,void 0)}const am=()=>"",Ni=t=>wn(t);function lm(t,...e){const{fallbackFormat:n,postTranslation:i,unresolving:s,fallbackLocale:r,messages:o}=t,[a,l]=mh(...e),c=Lt(l.missingWarn)?l.missingWarn:t.missingWarn,u=Lt(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,d=Lt(l.escapeParameter)?l.escapeParameter:t.escapeParameter,h=!!l.resolvedMessage,p=We(l.default)||Lt(l.default)?Lt(l.default)?a:l.default:n?a:"",g=n||p!=="",m=We(l.locale)?l.locale:t.locale;d&&VC(l);let[f,b,x]=h?[a,m,o[m]||{}]:UC(t,a,m,r,u,c),_=a;if(!h&&!(We(f)||Ni(f))&&g&&(f=p,_=f),!h&&(!(We(f)||Ni(f))||!We(b)))return s?du:a;let y=!1;const v=()=>{y=!0},C=Ni(f)?f:G0(t,a,b,f,_,v);if(y)return f;const R=GC(t,b,x,l),w=rC(R),D=HC(t,C,w),N=i?i(D):D;if(__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:We(a)?a:Ni(f)?f.key:"",locale:b||(Ni(f)?f.locale:""),format:We(f)?f:Ni(f)?f.source:"",message:N};V.meta=bn({},t.__meta,kC()||{}),PC(V)}return N}function VC(t){jt(t.list)?t.list=t.list.map(e=>We(e)?Zp(e):e):Fn(t.named)&&Object.keys(t.named).forEach(e=>{We(t.named[e])&&(t.named[e]=Zp(t.named[e]))})}function UC(t,e,n,i,s,r){const{messages:o,onWarn:a}=t,l=cl(t,i,n);let c={},u,d=null;const h="translate";for(let p=0;p<l.length&&(u=l[p],c=o[u]||{},(d=Ac(c,e))===null&&(d=c[e]),!(We(d)||wn(d)));p++){const g=_f(t,e,u,r,h);g!==e&&(d=g)}return[d,u,c]}function G0(t,e,n,i,s,r){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Ni(i)){const c=i;return c.locale=c.locale||n,c.key=c.key||e,c}const l=o(i,WC(t,n,s,i,a,r));return l.locale=n,l.key=e,l.source=i,l}function HC(t,e,n){return e(n)}function mh(...t){const[e,n,i]=t,s={};if(!We(e)&&!fn(e)&&!Ni(e))throw bo(14);const r=fn(e)?String(e):(Ni(e),e);return fn(n)?s.plural=n:We(n)?s.default=n:lt(n)&&!cu(n)?s.named=n:jt(n)&&(s.list=n),fn(i)?s.plural=i:We(i)?s.default=i:lt(i)&&bn(s,i),[r,s]}function WC(t,e,n,i,s,r){return{warnHtmlMessage:s,onError:o=>{throw r&&r(o),o},onCacheKey:o=>BM(e,n,o)}}function GC(t,e,n,i){const{modifiers:s,pluralRules:r}=t,a={locale:e,modifiers:s,pluralRules:r,messages:l=>{const c=Ac(n,l);if(We(c)){let u=!1;const h=G0(t,l,e,c,l,()=>{u=!0});return u?am:h}else return Ni(c)?c:am}};return t.processor&&(a.processor=t.processor),i.list&&(a.list=i.list),i.named&&(a.named=i.named),fn(i.plural)&&(a.pluralIndex=i.plural),a}function cm(t,...e){const{datetimeFormats:n,unresolving:i,fallbackLocale:s,onWarn:r}=t,{__datetimeFormatters:o}=t,[a,l,c,u]=gh(...e),d=Lt(c.missingWarn)?c.missingWarn:t.missingWarn;Lt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,p=We(c.locale)?c.locale:t.locale,g=cl(t,s,p);if(!We(a)||a==="")return new Intl.DateTimeFormat(p).format(l);let m={},f,b=null;const x="datetime format";for(let v=0;v<g.length&&(f=g[v],m=n[f]||{},b=m[a],!lt(b));v++)_f(t,a,f,d,x);if(!lt(b)||!We(f))return i?du:a;let _=`${f}__${a}`;cu(u)||(_=`${_}__${JSON.stringify(u)}`);let y=o.get(_);return y||(y=new Intl.DateTimeFormat(f,bn({},b,u)),o.set(_,y)),h?y.formatToParts(l):y.format(l)}function gh(...t){const[e,n,i,s]=t;let r={},o={},a;if(We(e)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(e))throw bo(16);a=new Date(e);try{a.toISOString()}catch{throw bo(16)}}else if(VM(e)){if(isNaN(e.getTime()))throw bo(15);a=e}else if(fn(e))a=e;else throw bo(14);return We(n)?r.key=n:lt(n)&&(r=n),We(i)?r.locale=i:lt(i)&&(o=i),lt(s)&&(o=s),[r.key||"",a,r,o]}function um(t,e,n){const i=t;for(const s in n){const r=`${e}__${s}`;!i.__datetimeFormatters.has(r)||i.__datetimeFormatters.delete(r)}}function dm(t,...e){const{numberFormats:n,unresolving:i,fallbackLocale:s,onWarn:r}=t,{__numberFormatters:o}=t,[a,l,c,u]=bh(...e),d=Lt(c.missingWarn)?c.missingWarn:t.missingWarn;Lt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,p=We(c.locale)?c.locale:t.locale,g=cl(t,s,p);if(!We(a)||a==="")return new Intl.NumberFormat(p).format(l);let m={},f,b=null;const x="number format";for(let v=0;v<g.length&&(f=g[v],m=n[f]||{},b=m[a],!lt(b));v++)_f(t,a,f,d,x);if(!lt(b)||!We(f))return i?du:a;let _=`${f}__${a}`;cu(u)||(_=`${_}__${JSON.stringify(u)}`);let y=o.get(_);return y||(y=new Intl.NumberFormat(f,bn({},b,u)),o.set(_,y)),h?y.formatToParts(l):y.format(l)}function bh(...t){const[e,n,i,s]=t;let r={},o={};if(!fn(e))throw bo(14);const a=e;return We(n)?r.key=n:lt(n)&&(r=n),We(i)?r.locale=i:lt(i)&&(o=i),lt(s)&&(o=s),[r.key||"",a,r,o]}function hm(t,e,n){const i=t;for(const s in n){const r=`${e}__${s}`;!i.__numberFormatters.has(r)||i.__numberFormatters.delete(r)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(La().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const jC="9.1.10";function $C(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(La().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(La().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(La().__INTLIFY_PROD_DEVTOOLS__=!1)}function Pn(t,...e){return uu(t,null,void 0)}const Ju="__INTLIFY_META__",yh=ms("__transrateVNode"),xh=ms("__datetimeParts"),vh=ms("__numberParts");ms("__enableEmitter");ms("__disableEmitter");const j0=ms("__setPluralRules");ms("__intlifyMeta");const $0=ms("__injectWithOption");let fm=0;function pm(t){return(e,n,i,s)=>t(n,i,Ks()||void 0,s)}function wf(t,e){const{messages:n,__i18n:i}=e,s=lt(n)?n:jt(i)?{}:{[t]:{}};if(jt(i)&&i.forEach(({locale:r,resource:o})=>{r?(s[r]=s[r]||{},Ic(o,s[r])):Ic(o,s)}),e.flatJson)for(const r in s)z0(s,r)&&fh(s[r]);return s}const Ol=t=>!Fn(t)||jt(t);function Ic(t,e){if(Ol(t)||Ol(e))throw Pn(20);for(const n in t)z0(t,n)&&(Ol(t[n])||Ol(e[n])?e[n]=t[n]:Ic(t[n],e[n]))}const KC=()=>{const t=Ks();return t&&t.type[Ju]?{[Ju]:t.type[Ju]}:null};function Sf(t={}){const{__root:e}=t,n=e===void 0;let i=Lt(t.inheritLocale)?t.inheritLocale:!0;const s=st(e&&i?e.locale.value:We(t.locale)?t.locale:"en-US"),r=st(e&&i?e.fallbackLocale.value:We(t.fallbackLocale)||jt(t.fallbackLocale)||lt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s.value),o=st(wf(s.value,t)),a=st(lt(t.datetimeFormats)?t.datetimeFormats:{[s.value]:{}}),l=st(lt(t.numberFormats)?t.numberFormats:{[s.value]:{}});let c=e?e.missingWarn:Lt(t.missingWarn)||Po(t.missingWarn)?t.missingWarn:!0,u=e?e.fallbackWarn:Lt(t.fallbackWarn)||Po(t.fallbackWarn)?t.fallbackWarn:!0,d=e?e.fallbackRoot:Lt(t.fallbackRoot)?t.fallbackRoot:!0,h=!!t.fallbackFormat,p=wn(t.missing)?t.missing:null,g=wn(t.missing)?pm(t.missing):null,m=wn(t.postTranslation)?t.postTranslation:null,f=Lt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,b=!!t.escapeParameter;const x=e?e.modifiers:lt(t.modifiers)?t.modifiers:{};let _=t.pluralRules||e&&e.pluralRules,y;function v(){return OC({version:jC,locale:s.value,fallbackLocale:r.value,messages:o.value,datetimeFormats:a.value,numberFormats:l.value,modifiers:x,pluralRules:_,missing:g===null?void 0:g,missingWarn:c,fallbackWarn:u,fallbackFormat:h,unresolving:!0,postTranslation:m===null?void 0:m,warnHtmlMessage:f,escapeParameter:b,__datetimeFormatters:lt(y)?y.__datetimeFormatters:void 0,__numberFormatters:lt(y)?y.__numberFormatters:void 0,__v_emitter:lt(y)?y.__v_emitter:void 0,__meta:{framework:"vue"}})}y=v(),ta(y,s.value,r.value);function C(){return[s.value,r.value,o.value,a.value,l.value]}const R=Is({get:()=>s.value,set:U=>{s.value=U,y.locale=s.value}}),w=Is({get:()=>r.value,set:U=>{r.value=U,y.fallbackLocale=r.value,ta(y,s.value,U)}}),D=Is(()=>o.value),N=Is(()=>a.value),V=Is(()=>l.value);function j(){return wn(m)?m:null}function se(U){m=U,y.postTranslation=U}function $(){return p}function q(U){U!==null&&(g=pm(U)),p=U,y.missing=g}function K(U,S,T,W,Q,ae){C();let pe;if(__INTLIFY_PROD_DEVTOOLS__)try{im(KC()),pe=U(y)}finally{im(null)}else pe=U(y);if(fn(pe)&&pe===du){const[Ae,L]=S();return e&&d?W(e):Q(Ae)}else{if(ae(pe))return pe;throw Pn(14)}}function ne(...U){return K(S=>lm(S,...U),()=>mh(...U),"translate",S=>S.t(...U),S=>S,S=>We(S))}function te(...U){const[S,T,W]=U;if(W&&!Fn(W))throw Pn(15);return ne(S,T,bn({resolvedMessage:!0},W||{}))}function J(...U){return K(S=>cm(S,...U),()=>gh(...U),"datetime format",S=>S.d(...U),()=>nm,S=>We(S))}function de(...U){return K(S=>dm(S,...U),()=>bh(...U),"number format",S=>S.n(...U),()=>nm,S=>We(S))}function ve(U){return U.map(S=>We(S)?he(Ka,null,S,0):S)}const ye={normalize:ve,interpolate:U=>U,type:"vnode"};function ke(...U){return K(S=>{let T;const W=S;try{W.processor=ye,T=lm(W,...U)}finally{W.processor=null}return T},()=>mh(...U),"translate",S=>S[yh](...U),S=>[he(Ka,null,S,0)],S=>jt(S))}function Ue(...U){return K(S=>dm(S,...U),()=>bh(...U),"number format",S=>S[vh](...U),()=>[],S=>We(S)||jt(S))}function le(...U){return K(S=>cm(S,...U),()=>gh(...U),"datetime format",S=>S[xh](...U),()=>[],S=>We(S)||jt(S))}function Ye(U){_=U,y.pluralRules=_}function $e(U,S){const T=We(S)?S:s.value,W=O(T);return Ac(W,U)!==null}function Ne(U){let S=null;const T=cl(y,r.value,s.value);for(let W=0;W<T.length;W++){const Q=o.value[T[W]]||{},ae=Ac(Q,U);if(ae!=null){S=ae;break}}return S}function Te(U){const S=Ne(U);return S!=null?S:e?e.tm(U)||{}:{}}function O(U){return o.value[U]||{}}function z(U,S){o.value[U]=S,y.messages=o.value}function M(U,S){o.value[U]=o.value[U]||{},Ic(S,o.value[U]),y.messages=o.value}function A(U){return a.value[U]||{}}function G(U,S){a.value[U]=S,y.datetimeFormats=a.value,um(y,U,S)}function Y(U,S){a.value[U]=bn(a.value[U]||{},S),y.datetimeFormats=a.value,um(y,U,S)}function re(U){return l.value[U]||{}}function fe(U,S){l.value[U]=S,y.numberFormats=l.value,hm(y,U,S)}function xe(U,S){l.value[U]=bn(l.value[U]||{},S),y.numberFormats=l.value,hm(y,U,S)}return fm++,e&&(Rn(e.locale,U=>{i&&(s.value=U,y.locale=U,ta(y,s.value,r.value))}),Rn(e.fallbackLocale,U=>{i&&(r.value=U,y.fallbackLocale=U,ta(y,s.value,r.value))})),{id:fm,locale:R,fallbackLocale:w,get inheritLocale(){return i},set inheritLocale(U){i=U,U&&e&&(s.value=e.locale.value,r.value=e.fallbackLocale.value,ta(y,s.value,r.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:D,datetimeFormats:N,numberFormats:V,get modifiers(){return x},get pluralRules(){return _||{}},get isGlobal(){return n},get missingWarn(){return c},set missingWarn(U){c=U,y.missingWarn=c},get fallbackWarn(){return u},set fallbackWarn(U){u=U,y.fallbackWarn=u},get fallbackRoot(){return d},set fallbackRoot(U){d=U},get fallbackFormat(){return h},set fallbackFormat(U){h=U,y.fallbackFormat=h},get warnHtmlMessage(){return f},set warnHtmlMessage(U){f=U,y.warnHtmlMessage=U},get escapeParameter(){return b},set escapeParameter(U){b=U,y.escapeParameter=U},t:ne,rt:te,d:J,n:de,te:$e,tm:Te,getLocaleMessage:O,setLocaleMessage:z,mergeLocaleMessage:M,getDateTimeFormat:A,setDateTimeFormat:G,mergeDateTimeFormat:Y,getNumberFormat:re,setNumberFormat:fe,mergeNumberFormat:xe,getPostTranslationHandler:j,setPostTranslationHandler:se,getMissingHandler:$,setMissingHandler:q,[yh]:ke,[vh]:Ue,[xh]:le,[j0]:Ye,[$0]:t.__injectWithOption}}function XC(t){const e=We(t.locale)?t.locale:"en-US",n=We(t.fallbackLocale)||jt(t.fallbackLocale)||lt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,i=wn(t.missing)?t.missing:void 0,s=Lt(t.silentTranslationWarn)||Po(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,r=Lt(t.silentFallbackWarn)||Po(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Lt(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=lt(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,u=wn(t.postTranslation)?t.postTranslation:void 0,d=We(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,p=Lt(t.sync)?t.sync:!0;let g=t.messages;if(lt(t.sharedMessages)){const v=t.sharedMessages;g=Object.keys(v).reduce((R,w)=>{const D=R[w]||(R[w]={});return bn(D,v[w]),R},g||{})}const{__i18n:m,__root:f,__injectWithOption:b}=t,x=t.datetimeFormats,_=t.numberFormats,y=t.flatJson;return{locale:e,fallbackLocale:n,messages:g,flatJson:y,datetimeFormats:x,numberFormats:_,missing:i,missingWarn:s,fallbackWarn:r,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:h,inheritLocale:p,__i18n:m,__root:f,__injectWithOption:b}}function _h(t={}){const e=Sf(XC(t)),n={id:e.id,get locale(){return e.locale.value},set locale(i){e.locale.value=i},get fallbackLocale(){return e.fallbackLocale.value},set fallbackLocale(i){e.fallbackLocale.value=i},get messages(){return e.messages.value},get datetimeFormats(){return e.datetimeFormats.value},get numberFormats(){return e.numberFormats.value},get availableLocales(){return e.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return e.getMissingHandler()},set missing(i){e.setMissingHandler(i)},get silentTranslationWarn(){return Lt(e.missingWarn)?!e.missingWarn:e.missingWarn},set silentTranslationWarn(i){e.missingWarn=Lt(i)?!i:i},get silentFallbackWarn(){return Lt(e.fallbackWarn)?!e.fallbackWarn:e.fallbackWarn},set silentFallbackWarn(i){e.fallbackWarn=Lt(i)?!i:i},get modifiers(){return e.modifiers},get formatFallbackMessages(){return e.fallbackFormat},set formatFallbackMessages(i){e.fallbackFormat=i},get postTranslation(){return e.getPostTranslationHandler()},set postTranslation(i){e.setPostTranslationHandler(i)},get sync(){return e.inheritLocale},set sync(i){e.inheritLocale=i},get warnHtmlInMessage(){return e.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){e.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return e.escapeParameter},set escapeParameterHtml(i){e.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return e.pluralRules||{}},__composer:e,t(...i){const[s,r,o]=i,a={};let l=null,c=null;if(!We(s))throw Pn(15);const u=s;return We(r)?a.locale=r:jt(r)?l=r:lt(r)&&(c=r),jt(o)?l=o:lt(o)&&(c=o),e.t(u,l||c||{},a)},rt(...i){return e.rt(...i)},tc(...i){const[s,r,o]=i,a={plural:1};let l=null,c=null;if(!We(s))throw Pn(15);const u=s;return We(r)?a.locale=r:fn(r)?a.plural=r:jt(r)?l=r:lt(r)&&(c=r),We(o)?a.locale=o:jt(o)?l=o:lt(o)&&(c=o),e.t(u,l||c||{},a)},te(i,s){return e.te(i,s)},tm(i){return e.tm(i)},getLocaleMessage(i){return e.getLocaleMessage(i)},setLocaleMessage(i,s){e.setLocaleMessage(i,s)},mergeLocaleMessage(i,s){e.mergeLocaleMessage(i,s)},d(...i){return e.d(...i)},getDateTimeFormat(i){return e.getDateTimeFormat(i)},setDateTimeFormat(i,s){e.setDateTimeFormat(i,s)},mergeDateTimeFormat(i,s){e.mergeDateTimeFormat(i,s)},n(...i){return e.n(...i)},getNumberFormat(i){return e.getNumberFormat(i)},setNumberFormat(i,s){e.setNumberFormat(i,s)},mergeNumberFormat(i,s){e.mergeNumberFormat(i,s)},getChoiceIndex(i,s){return-1},__onComponentInstanceCreated(i){const{componentInstanceCreatedListener:s}=t;s&&s(i,n)}};return n}const Mf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}},mm={name:"i18n-t",props:bn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>fn(t)||!isNaN(t)}},Mf),setup(t,e){const{slots:n,attrs:i}=e,s=t.i18n||Hr({useScope:t.scope,__useComponent:!0}),r=Object.keys(n).filter(o=>o!=="_");return()=>{const o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=We(t.plural)?+t.plural:t.plural);const a=YC(e,r),l=s[yh](t.keypath,a,o),c=bn({},i);return We(t.tag)||Fn(t.tag)?zs(t.tag,c,l):zs(je,c,l)}}};function YC({slots:t},e){return e.length===1&&e[0]==="default"?t.default?t.default():[]:e.reduce((n,i)=>{const s=t[i];return s&&(n[i]=s()),n},{})}function K0(t,e,n,i){const{slots:s,attrs:r}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),We(t.format)?o.key=t.format:Fn(t.format)&&(We(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((d,h)=>n.includes(h)?bn({},d,{[h]:t.format[h]}):d,{}));const l=i(t.value,o,a);let c=[o.key];jt(l)?c=l.map((d,h)=>{const p=s[d.type];return p?p({[d.type]:d.value,index:h,parts:l}):[d.value]}):We(l)&&(c=[l]);const u=bn({},r);return We(t.tag)||Fn(t.tag)?zs(t.tag,u,c):zs(je,u,c)}}const qC=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],gm={name:"i18n-n",props:bn({value:{type:Number,required:!0},format:{type:[String,Object]}},Mf),setup(t,e){const n=t.i18n||Hr({useScope:"parent",__useComponent:!0});return K0(t,e,qC,(...i)=>n[vh](...i))}},ZC=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],bm={name:"i18n-d",props:bn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Mf),setup(t,e){const n=t.i18n||Hr({useScope:"parent",__useComponent:!0});return K0(t,e,ZC,(...i)=>n[xh](...i))}};function JC(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const i=n.__getInstance(e);return i!=null?i.__composer:t.global.__composer}}function QC(t){const e=(n,{instance:i,value:s,modifiers:r})=>{if(!i||!i.$)throw Pn(22);const o=JC(t,i.$),a=e1(s);n.textContent=o.t(...t1(a))};return{beforeMount:e,beforeUpdate:e}}function e1(t){if(We(t))return{path:t};if(lt(t)){if(!("path"in t))throw Pn(19,"path");return t}else throw Pn(20)}function t1(t){const{path:e,locale:n,args:i,choice:s,plural:r}=t,o={},a=i||{};return We(n)&&(o.locale=n),fn(s)&&(o.plural=s),fn(r)&&(o.plural=r),[e,a,o]}function n1(t,e,...n){const i=lt(n[0])?n[0]:{},s=!!i.useI18nComponentName;(Lt(i.globalInstall)?i.globalInstall:!0)&&(t.component(s?"i18n":mm.name,mm),t.component(gm.name,gm),t.component(bm.name,bm)),t.directive("t",QC(e))}function i1(t,e,n){return{beforeCreate(){const i=Ks();if(!i)throw Pn(22);const s=this.$options;if(s.i18n){const r=s.i18n;s.__i18n&&(r.__i18n=s.__i18n),r.__root=e,this===this.$root?this.$i18n=ym(t,r):(r.__injectWithOption=!0,this.$i18n=_h(r))}else s.__i18n?this===this.$root?this.$i18n=ym(t,s):this.$i18n=_h({__i18n:s.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(i,this.$i18n),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,o)=>this.$i18n.te(r,o),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r)},mounted(){},beforeUnmount(){const i=Ks();if(!i)throw Pn(22);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(i),delete this.$i18n}}}function ym(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[j0](e.pluralizationRules||t.pluralizationRules);const n=wf(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(i=>t.mergeLocaleMessage(i,n[i])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(i=>t.mergeDateTimeFormat(i,e.datetimeFormats[i])),e.numberFormats&&Object.keys(e.numberFormats).forEach(i=>t.mergeNumberFormat(i,e.numberFormats[i])),t}function s1(t={}){const e=__VUE_I18N_LEGACY_API__&&Lt(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,n=!!t.globalInjection,i=new Map,s=__VUE_I18N_LEGACY_API__&&e?_h(t):Sf(t),r=ms(""),o={get mode(){return __VUE_I18N_LEGACY_API__&&e?"legacy":"composition"},async install(a,...l){a.__VUE_I18N_SYMBOL__=r,a.provide(a.__VUE_I18N_SYMBOL__,o),!e&&n&&c1(a,o.global),__VUE_I18N_FULL_INSTALL__&&n1(a,o,...l),__VUE_I18N_LEGACY_API__&&e&&a.mixin(i1(s,s.__composer,o))},get global(){return s},__instances:i,__getInstance(a){return i.get(a)||null},__setInstance(a,l){i.set(a,l)},__deleteInstance(a){i.delete(a)}};return o}function Hr(t={}){const e=Ks();if(e==null)throw Pn(16);if(!e.appContext.app.__VUE_I18N_SYMBOL__)throw Pn(17);const n=Ta(e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw Pn(22);const i=n.mode==="composition"?n.global:n.global.__composer,s=cu(t)?"__i18n"in e.type?"local":"global":t.useScope?t.useScope:"local";if(s==="global"){let a=Fn(t.messages)?t.messages:{};"__i18nGlobal"in e.type&&(a=wf(i.locale.value,{messages:a,__i18n:e.type.__i18nGlobal}));const l=Object.keys(a);if(l.length&&l.forEach(c=>{i.mergeLocaleMessage(c,a[c])}),Fn(t.datetimeFormats)){const c=Object.keys(t.datetimeFormats);c.length&&c.forEach(u=>{i.mergeDateTimeFormat(u,t.datetimeFormats[u])})}if(Fn(t.numberFormats)){const c=Object.keys(t.numberFormats);c.length&&c.forEach(u=>{i.mergeNumberFormat(u,t.numberFormats[u])})}return i}if(s==="parent"){let a=r1(n,e,t.__useComponent);return a==null&&(a=i),a}if(n.mode==="legacy")throw Pn(18);const r=n;let o=r.__getInstance(e);if(o==null){const a=e.type,l=bn({},t);a.__i18n&&(l.__i18n=a.__i18n),i&&(l.__root=i),o=Sf(l),o1(r,e),r.__setInstance(e,o)}return o}function r1(t,e,n=!1){let i=null;const s=e.root;let r=e.parent;for(;r!=null;){const o=t;if(t.mode==="composition")i=o.__getInstance(r);else{const a=o.__getInstance(r);a!=null&&(i=a.__composer),n&&i&&!i[$0]&&(i=null)}if(i!=null||s===r)break;r=r.parent}return i}function o1(t,e,n){Wo(()=>{},e),df(()=>{t.__deleteInstance(e)},e)}const a1=["locale","fallbackLocale","availableLocales"],l1=["t","rt","d","n","tm"];function c1(t,e){const n=Object.create(null);a1.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s)throw Pn(22);const r=ht(s.value)?{get(){return s.value.value},set(o){s.value.value=o}}:{get(){return s.get&&s.get()}};Object.defineProperty(n,i,r)}),t.config.globalProperties.$i18n=n,l1.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s||!s.value)throw Pn(22);Object.defineProperty(t.config.globalProperties,`$${i}`,s)})}IC(zC);$C();if(__INTLIFY_PROD_DEVTOOLS__){const t=La();t.__INTLIFY__=!0,EC(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const u1={class:"flex flex-wrap justify-center items-center m-2 space-y-2 sm:space-y-0"},d1={class:"flex"},h1={href:"https://github.com/hoiast/ExoplanetTransitSimulator",target:"_blank"},f1={__name:"UpperSection",props:{isRunning:Boolean,isMeasuringBrightness:Boolean,isTooltipDisabled:Boolean},setup(t){var a;const e=t,{t:n,locale:i}=Hr(),s=Is(()=>e.isTooltipDisabled?n("Enable interface hints"):n("Disable interface hints")),r=st([{name:"en",code:"en"},{name:"pt",code:"pt-BR"}]);let o=st((a=r.value.filter(l=>l.code===i.value)[0])!=null?a:{name:"en",code:"en"});return Rn(o,()=>{i.value=o.value.code}),(l,c)=>{const u=on("tooltip");return k(),X("div",u1,[we("div",null,[bt(he(ge(Wn),{icon:t.isRunning?"pi pi-pause":"pi pi-play",onClick:c[0]||(c[0]=d=>l.$emit("update:isRunning",!t.isRunning)),class:Ie([t.isRunning?"p-button-danger":"p-button-success","text-sm sm:text-base"])},null,8,["icon","class"]),[[u,{value:l.$t("Pause / Play"),disabled:t.isTooltipDisabled},void 0,{right:!0}]]),bt(he(ge(Wn),{label:t.isMeasuringBrightness?l.$t("Close Brightness Detector"):l.$t("Open Brightness Detector"),icon:t.isMeasuringBrightness?"pi pi-times":"pi pi-external-link",class:Ie([t.isMeasuringBrightness?"p-button-danger":"","ml-4 text-sm sm:text-base"]),onClick:c[1]||(c[1]=d=>l.$emit("update:isMeasuringBrightness",!t.isMeasuringBrightness))},null,8,["label","icon","class"]),[[u,{value:l.$t("Start brightness measurements"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])]),we("div",d1,[he(ge(B0),{class:"w-20 ml-4",modelValue:ge(o),"onUpdate:modelValue":c[2]||(c[2]=d=>ht(o)?o.value=d:o=d),options:r.value,optionLabel:"name",optionGroupChildren:[]},null,8,["modelValue","options"]),we("a",h1,[bt(he(ge(Wn),{icon:"pi pi-github",class:"p-button-rounded p-button-text ml-4"},null,512),[[u,{value:"GitHub"},void 0,{right:!0}]])]),bt(he(ge(Wn),{icon:"pi pi-question",class:Ie([t.isTooltipDisabled?"opacity-50 p-button-secondary":"p-button-success","p-button-rounded p-button-text ml-4 hidden sm:block"]),onClick:c[3]||(c[3]=d=>l.$emit("update:isTooltipDisabled",!t.isTooltipDisabled))},null,8,["class"]),[[u,{value:ge(s)},void 0,{bottom:!0}]])])])}}};const p1={name:"InputSwitch",inheritAttrs:!1,emits:["click","update:modelValue","change","input"],props:{modelValue:{type:null,default:!1},class:null,style:null,trueValue:{type:null,default:!0},falseValue:{type:null,default:!1}},data(){return{focused:!1}},methods:{onClick(t){if(!this.$attrs.disabled){const e=this.checked?this.falseValue:this.trueValue;this.$emit("click",t),this.$emit("update:modelValue",e),this.$emit("change",t),this.$emit("input",e),this.$refs.input.focus()}t.preventDefault()},onFocus(){this.focused=!0},onBlur(){this.focused=!1}},computed:{containerClass(){return["p-inputswitch p-component",this.class,{"p-inputswitch-checked":this.checked,"p-disabled":this.$attrs.disabled,"p-focus":this.focused}]},checked(){return this.modelValue===this.trueValue}}},m1={class:"p-hidden-accessible"},g1=["checked","aria-checked"],b1=we("span",{class:"p-inputswitch-slider"},null,-1);function y1(t,e,n,i,s,r){return k(),X("div",{class:Ie(r.containerClass),onClick:e[3]||(e[3]=o=>r.onClick(o)),style:Ot(n.style)},[we("div",m1,[we("input",dn({ref:"input",type:"checkbox",checked:r.checked},t.$attrs,{onFocus:e[0]||(e[0]=o=>r.onFocus(o)),onBlur:e[1]||(e[1]=o=>r.onBlur(o)),onKeydown:e[2]||(e[2]=Pr(Eo(o=>r.onClick(o),["prevent"]),["enter"])),role:"switch","aria-checked":r.checked}),null,16,g1)]),b1],6)}var x1=kt(p1,[["render",y1]]);const v1={class:"mt-2 px-2"},_1={class:"pb-4 text-white flex itens-center justify-between"},Sr={__name:"InputSwitchWithTitle",props:{modelValue:Boolean,label:String,tooltipText:String,isTooltipDisabled:Boolean},emits:["update:modelValue"],setup(t){const e=t;let n=st(e.modelValue);return Rn(e,()=>{n.value=e.modelValue}),(i,s)=>{const r=on("tooltip");return k(),X("div",v1,[we("h5",_1,[vn(it(t.label)+" ",1),bt(he(ge(x1),{class:"ml-2",modelValue:ge(n),"onUpdate:modelValue":s[0]||(s[0]=o=>ht(n)?n.value=o:n=o),onChange:s[1]||(s[1]=o=>i.$emit("update:modelValue",ge(n)))},null,8,["modelValue"]),[[r,{value:t.tooltipText,disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])])}}},w1={__name:"AdvancedModeSwitch",props:{isAdvancedSettingsActive:Boolean,isTooltipDisabled:Boolean},setup(t){const e=t;let n=st(e.isAdvancedSettingsActive);return Rn(e,()=>{n.value=e.isAdvancedSettingsActive}),(i,s)=>(k(),Ve(Sr,{modelValue:ge(n),"onUpdate:modelValue":[s[0]||(s[0]=r=>ht(n)?n.value=r:n=r),s[1]||(s[1]=r=>i.$emit("update:isAdvancedSettingsActive",ge(n)))],label:i.$t("Advanced Mode"),tooltipText:i.$t("Additional settings options"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"]))}},S1={__name:"DefaultSystems",props:{starSystemLibrary:Object,currentStarSystemName:String},setup(t){return(e,n)=>(k(),X("div",null,[(k(!0),X(je,null,Vt(t.starSystemLibrary,(i,s)=>(k(),Ve(ge(Wn),{key:i.name,label:e.$t(i.name),disabled:t.currentStarSystemName===i.name?"disabled":!1,class:"p-button-outlined",onClick:r=>e.$emit("updateStarSystem",s)},null,8,["label","disabled","onClick"]))),128))]))}};var Cf={name:"InputText",inheritAttrs:!1,emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(t){this.$emit("update:modelValue",t.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const M1=["value"];function C1(t,e,n,i,s,r){return k(),X("input",dn({class:["p-inputtext p-component",{"p-filled":r.filled}],value:n.modelValue,onInput:e[0]||(e[0]=(...o)=>r.onInput&&r.onInput(...o))},t.$attrs),null,16,M1)}Cf.render=C1;var hu={name:"Button",props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},computed:{buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label}},iconClass(){return[this.loading?"p-button-loading-icon "+this.loadingIcon:this.icon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label}]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&String(this.badge).length===1}]},disabled(){return this.$attrs.disabled||this.loading}},directives:{ripple:mi}};const T1=["disabled"],E1={class:"p-button-label"};function D1(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.buttonClass),type:"button",disabled:r.disabled},[gt(t.$slots,"default",{},()=>[n.loading&&!n.icon?(k(),X("span",{key:0,class:Ie(r.iconClass)},null,2)):Ce("",!0),n.icon?(k(),X("span",{key:1,class:Ie(r.iconClass)},null,2)):Ce("",!0),we("span",E1,it(n.label||"\xA0"),1),n.badge?(k(),X("span",{key:2,class:Ie(r.badgeStyleClass)},it(n.badge),3)):Ce("",!0)])],10,T1)),[[o]])}hu.render=D1;const P1={name:"InputNumber",inheritAttrs:!1,emits:["update:modelValue","input","focus","blur"],props:{modelValue:{type:Number,default:null},format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:"pi pi-angle-up"},decrementButtonIcon:{type:String,default:"pi pi-angle-down"},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},style:null,class:null,inputStyle:null,inputClass:null},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data(){return{d_modelValue:this.modelValue,focused:!1}},watch:{modelValue(t){this.d_modelValue=t},locale(t,e){this.updateConstructParser(t,e)},localeMatcher(t,e){this.updateConstructParser(t,e)},mode(t,e){this.updateConstructParser(t,e)},currency(t,e){this.updateConstructParser(t,e)},currencyDisplay(t,e){this.updateConstructParser(t,e)},useGrouping(t,e){this.updateConstructParser(t,e)},minFractionDigits(t,e){this.updateConstructParser(t,e)},maxFractionDigits(t,e){this.updateConstructParser(t,e)},suffix(t,e){this.updateConstructParser(t,e)},prefix(t,e){this.updateConstructParser(t,e)}},created(){this.constructParser()},methods:{getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}},constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),e=new Map(t.map((n,i)=>[n,i]));this._numeral=new RegExp(`[${t.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=n=>e.get(n)},updateConstructParser(t,e){t!==e&&this.constructParser()},escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression(){const t=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${t.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")},getGroupingExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=t.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")},getMinusSignExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${t.format(-1).trim().replace(this._numeral,"")}]`,"g")},getCurrencyExpression(){if(this.currency){const t=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${t.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")},getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=t.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")},getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=t.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")},formatValue(t){if(t!=null){if(t==="-")return t;if(this.format){let n=new Intl.NumberFormat(this.locale,this.getOptions()).format(t);return this.prefix&&(n=this.prefix+n),this.suffix&&(n=n+this.suffix),n}return t.toString()}return""},parseValue(t){let e=t.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(e){if(e==="-")return e;let n=+e;return isNaN(n)?null:n}return null},repeat(t,e,n){if(this.readonly)return;let i=e||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,40,n)},i),this.spin(t,n)},spin(t,e){if(this.$refs.input){let n=this.step*e,i=this.parseValue(this.$refs.input.$el.value)||0,s=this.validateValue(i+n);this.updateInput(s,null,"spin"),this.updateModel(t,s),this.handleOnInput(t,i,s)}},onUpButtonMouseDown(t){this.$attrs.disabled||(this.$refs.input.$el.focus(),this.repeat(t,null,1),t.preventDefault())},onUpButtonMouseUp(){this.$attrs.disabled||this.clearTimer()},onUpButtonMouseLeave(){this.$attrs.disabled||this.clearTimer()},onUpButtonKeyUp(){this.$attrs.disabled||this.clearTimer()},onUpButtonKeyDown(t){(t.keyCode===32||t.keyCode===13)&&this.repeat(t,null,1)},onDownButtonMouseDown(t){this.$attrs.disabled||(this.$refs.input.$el.focus(),this.repeat(t,null,-1),t.preventDefault())},onDownButtonMouseUp(){this.$attrs.disabled||this.clearTimer()},onDownButtonMouseLeave(){this.$attrs.disabled||this.clearTimer()},onDownButtonKeyUp(){this.$attrs.disabled||this.clearTimer()},onDownButtonKeyDown(t){(t.keyCode===32||t.keyCode===13)&&this.repeat(t,null,-1)},onUserInput(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown(t){if(this.readonly)return;if(this.lastValue=t.target.value,t.shiftKey||t.altKey){this.isSpecialChar=!0;return}let e=t.target.selectionStart,n=t.target.selectionEnd,i=t.target.value,s=null;switch(t.altKey&&t.preventDefault(),t.which){case 38:this.spin(t,1),t.preventDefault();break;case 40:this.spin(t,-1),t.preventDefault();break;case 37:this.isNumeralChar(i.charAt(e-1))||t.preventDefault();break;case 39:this.isNumeralChar(i.charAt(e))||t.preventDefault();break;case 9:case 13:s=this.validateValue(this.parseValue(i)),this.$refs.input.$el.value=this.formatValue(s),this.$refs.input.$el.setAttribute("aria-valuenow",s),this.updateModel(t,s);break;case 8:{if(t.preventDefault(),e===n){const r=i.charAt(e-1),{decimalCharIndex:o,decimalCharIndexWithoutPrefix:a}=this.getDecimalCharIndexes(i);if(this.isNumeralChar(r)){const l=this.getDecimalLength(i);if(this._group.test(r))this._group.lastIndex=0,s=i.slice(0,e-2)+i.slice(e-1);else if(this._decimal.test(r))this._decimal.lastIndex=0,l?this.$refs.input.$el.setSelectionRange(e-1,e-1):s=i.slice(0,e-1)+i.slice(e);else if(o>0&&e>o){const c=this.isDecimalMode()&&(this.minFractionDigits||0)<l?"":"0";s=i.slice(0,e-1)+c+i.slice(e)}else a===1?(s=i.slice(0,e-1)+"0"+i.slice(e),s=this.parseValue(s)>0?s:""):s=i.slice(0,e-1)+i.slice(e)}this.updateValue(t,s,null,"delete-single")}else s=this.deleteRange(i,e,n),this.updateValue(t,s,null,"delete-range");break}case 46:if(t.preventDefault(),e===n){const r=i.charAt(e),{decimalCharIndex:o,decimalCharIndexWithoutPrefix:a}=this.getDecimalCharIndexes(i);if(this.isNumeralChar(r)){const l=this.getDecimalLength(i);if(this._group.test(r))this._group.lastIndex=0,s=i.slice(0,e)+i.slice(e+2);else if(this._decimal.test(r))this._decimal.lastIndex=0,l?this.$refs.input.$el.setSelectionRange(e+1,e+1):s=i.slice(0,e)+i.slice(e+1);else if(o>0&&e>o){const c=this.isDecimalMode()&&(this.minFractionDigits||0)<l?"":"0";s=i.slice(0,e)+c+i.slice(e+1)}else a===1?(s=i.slice(0,e)+"0"+i.slice(e+1),s=this.parseValue(s)>0?s:""):s=i.slice(0,e)+i.slice(e+1)}this.updateValue(t,s,null,"delete-back-single")}else s=this.deleteRange(i,e,n),this.updateValue(t,s,null,"delete-range");break}},onInputKeyPress(t){if(this.readonly)return;t.preventDefault();let e=t.which||t.keyCode,n=String.fromCharCode(e);const i=this.isDecimalSign(n),s=this.isMinusSign(n);(48<=e&&e<=57||s||i)&&this.insert(t,n,{isDecimalSign:i,isMinusSign:s})},onPaste(t){t.preventDefault();let e=(t.clipboardData||window.clipboardData).getData("Text");if(e){let n=this.parseValue(e);n!=null&&this.insert(t,n.toString())}},allowMinusSign(){return this.min===null||this.min<0},isMinusSign(t){return this._minusSign.test(t)||t==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign(t){return this._decimal.test(t)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode(){return this.mode==="decimal"},getDecimalCharIndexes(t){let e=t.search(this._decimal);this._decimal.lastIndex=0;const i=t.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:e,decimalCharIndexWithoutPrefix:i}},getCharIndexes(t){const e=t.search(this._decimal);this._decimal.lastIndex=0;const n=t.search(this._minusSign);this._minusSign.lastIndex=0;const i=t.search(this._suffix);this._suffix.lastIndex=0;const s=t.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:e,minusCharIndex:n,suffixCharIndex:i,currencyCharIndex:s}},insert(t,e,n={isDecimalSign:!1,isMinusSign:!1}){const i=e.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&i!==-1)return;const s=this.$refs.input.$el.selectionStart,r=this.$refs.input.$el.selectionEnd;let o=this.$refs.input.$el.value.trim();const{decimalCharIndex:a,minusCharIndex:l,suffixCharIndex:c,currencyCharIndex:u}=this.getCharIndexes(o);let d;if(n.isMinusSign)s===0&&(d=o,(l===-1||r!==0)&&(d=this.insertText(o,e,0,r)),this.updateValue(t,d,e,"insert"));else if(n.isDecimalSign)a>0&&s===a?this.updateValue(t,o,e,"insert"):a>s&&a<r?(d=this.insertText(o,e,s,r),this.updateValue(t,d,e,"insert")):a===-1&&this.maxFractionDigits&&(d=this.insertText(o,e,s,r),this.updateValue(t,d,e,"insert"));else{const h=this.numberFormat.resolvedOptions().maximumFractionDigits,p=s!==r?"range-insert":"insert";if(a>0&&s>a){if(s+e.length-(a+1)<=h){const g=u>=s?u-1:c>=s?c:o.length;d=o.slice(0,s)+e+o.slice(s+e.length,g)+o.slice(g),this.updateValue(t,d,e,p)}}else d=this.insertText(o,e,s,r),this.updateValue(t,d,e,p)}},insertText(t,e,n,i){if((e==="."?e:e.split(".")).length===2){const r=t.slice(n,i).search(this._decimal);return this._decimal.lastIndex=0,r>0?t.slice(0,n)+this.formatValue(e)+t.slice(i):t||this.formatValue(e)}else return i-n===t.length?this.formatValue(e):n===0?e+t.slice(i):i===t.length?t.slice(0,n)+e:t.slice(0,n)+e+t.slice(i)},deleteRange(t,e,n){let i;return n-e===t.length?i="":e===0?i=t.slice(n):n===t.length?i=t.slice(0,e):i=t.slice(0,e)+t.slice(n),i},initCursor(){let t=this.$refs.input.$el.selectionStart,e=this.$refs.input.$el.value,n=e.length,i=null,s=(this.prefixChar||"").length;e=e.replace(this._prefix,""),t=t-s;let r=e.charAt(t);if(this.isNumeralChar(r))return t+s;let o=t-1;for(;o>=0;)if(r=e.charAt(o),this.isNumeralChar(r)){i=o+s;break}else o--;if(i!==null)this.$refs.input.$el.setSelectionRange(i+1,i+1);else{for(o=t;o<n;)if(r=e.charAt(o),this.isNumeralChar(r)){i=o+s;break}else o++;i!==null&&this.$refs.input.$el.setSelectionRange(i,i)}return i||0},onInputClick(){this.readonly||this.initCursor()},isNumeralChar(t){return t.length===1&&(this._numeral.test(t)||this._decimal.test(t)||this._group.test(t)||this._minusSign.test(t))?(this.resetRegex(),!0):!1},resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue(t,e,n,i){let s=this.$refs.input.$el.value,r=null;e!=null&&(r=this.parseValue(e),r=!r&&!this.allowEmpty?0:r,this.updateInput(r,n,i,e),this.handleOnInput(t,s,r))},handleOnInput(t,e,n){this.isValueChanged(e,n)&&this.$emit("input",{originalEvent:t,value:n})},isValueChanged(t,e){if(e===null&&t!==null)return!0;if(e!=null){let n=typeof t=="string"?this.parseValue(t):t;return e!==n}return!1},validateValue(t){return t==="-"||t==null?null:this.min!=null&&t<this.min?this.min:this.max!=null&&t>this.max?this.max:t},updateInput(t,e,n,i){e=e||"";let s=this.$refs.input.$el.value,r=this.formatValue(t),o=s.length;if(r!==i&&(r=this.concatValues(r,i)),o===0){this.$refs.input.$el.value=r,this.$refs.input.$el.setSelectionRange(0,0);const l=this.initCursor()+e.length;this.$refs.input.$el.setSelectionRange(l,l)}else{let a=this.$refs.input.$el.selectionStart,l=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=r;let c=r.length;if(n==="range-insert"){const u=this.parseValue((s||"").slice(0,a)),h=(u!==null?u.toString():"").split("").join(`(${this.groupChar})?`),p=new RegExp(h,"g");p.test(r);const g=e.split("").join(`(${this.groupChar})?`),m=new RegExp(g,"g");m.test(r.slice(p.lastIndex)),l=p.lastIndex+m.lastIndex,this.$refs.input.$el.setSelectionRange(l,l)}else if(c===o)n==="insert"||n==="delete-back-single"?this.$refs.input.$el.setSelectionRange(l+1,l+1):n==="delete-single"?this.$refs.input.$el.setSelectionRange(l-1,l-1):(n==="delete-range"||n==="spin")&&this.$refs.input.$el.setSelectionRange(l,l);else if(n==="delete-back-single"){let u=s.charAt(l-1),d=s.charAt(l),h=o-c,p=this._group.test(d);p&&h===1?l+=1:!p&&this.isNumeralChar(u)&&(l+=-1*h+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(l,l)}else if(s==="-"&&n==="insert"){this.$refs.input.$el.setSelectionRange(0,0);const d=this.initCursor()+e.length+1;this.$refs.input.$el.setSelectionRange(d,d)}else l=l+(c-o),this.$refs.input.$el.setSelectionRange(l,l)}this.$refs.input.$el.setAttribute("aria-valuenow",t)},concatValues(t,e){if(t&&e){let n=e.search(this._decimal);return this._decimal.lastIndex=0,n!==-1?t.split(this._decimal)[0]+e.slice(n):t}return t},getDecimalLength(t){if(t){const e=t.split(this._decimal);if(e.length===2)return e[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel(t,e){this.d_modelValue=e,this.$emit("update:modelValue",e)},onInputFocus(t){this.focused=!0,this.$emit("focus",t)},onInputBlur(t){this.focused=!1;let e=t.target,n=this.validateValue(this.parseValue(e.value));this.$emit("blur",{originalEvent:t,value:e.value}),e.value=this.formatValue(n),e.setAttribute("aria-valuenow",n),this.updateModel(t,n)},clearTimer(){this.timer&&clearInterval(this.timer)},maxBoundry(){return this.d_modelValue>=this.max},minBoundry(){return this.d_modelValue<=this.min}},computed:{containerClass(){return["p-inputnumber p-component p-inputwrapper",this.class,{"p-inputwrapper-filled":this.filled,"p-inputwrapper-focus":this.focused,"p-inputnumber-buttons-stacked":this.showButtons&&this.buttonLayout==="stacked","p-inputnumber-buttons-horizontal":this.showButtons&&this.buttonLayout==="horizontal","p-inputnumber-buttons-vertical":this.showButtons&&this.buttonLayout==="vertical"}]},upButtonClass(){return["p-inputnumber-button p-inputnumber-button-up",this.incrementButtonClass,{"p-disabled":this.showButtons&&this.max!==null&&this.maxBoundry()}]},downButtonClass(){return["p-inputnumber-button p-inputnumber-button-down",this.decrementButtonClass,{"p-disabled":this.showButtons&&this.min!==null&&this.minBoundry()}]},filled(){return this.modelValue!=null&&this.modelValue.toString().length>0},upButtonListeners(){return{mousedown:t=>this.onUpButtonMouseDown(t),mouseup:t=>this.onUpButtonMouseUp(t),mouseleave:t=>this.onUpButtonMouseLeave(t),keydown:t=>this.onUpButtonKeyDown(t),keyup:t=>this.onUpButtonKeyUp(t)}},downButtonListeners(){return{mousedown:t=>this.onDownButtonMouseDown(t),mouseup:t=>this.onDownButtonMouseUp(t),mouseleave:t=>this.onDownButtonMouseLeave(t),keydown:t=>this.onDownButtonKeyDown(t),keyup:t=>this.onDownButtonKeyUp(t)}},formattedValue(){const t=!this.modelValue&&!this.allowEmpty?0:this.modelValue;return this.formatValue(t)},getFormatter(){return this.numberFormat}},components:{INInputText:Cf,INButton:hu}},L1={key:0,class:"p-inputnumber-button-group"};function R1(t,e,n,i,s,r){const o=Ke("INInputText"),a=Ke("INButton");return k(),X("span",{class:Ie(r.containerClass),style:Ot(n.style)},[he(o,dn({ref:"input",class:["p-inputnumber-input",n.inputClass],style:n.inputStyle,value:r.formattedValue},t.$attrs,{"aria-valumin":n.min,"aria-valuemax":n.max,readonly:n.readonly,onInput:r.onUserInput,onKeydown:r.onInputKeyDown,onKeypress:r.onInputKeyPress,onPaste:r.onPaste,onClick:r.onInputClick,onFocus:r.onInputFocus,onBlur:r.onInputBlur}),null,16,["class","style","value","aria-valumin","aria-valuemax","readonly","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur"]),n.showButtons&&n.buttonLayout==="stacked"?(k(),X("span",L1,[he(a,dn({class:r.upButtonClass,icon:n.incrementButtonIcon},ks(r.upButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"]),he(a,dn({class:r.downButtonClass,icon:n.decrementButtonIcon},ks(r.downButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])])):Ce("",!0),n.showButtons&&n.buttonLayout!=="stacked"?(k(),Ve(a,dn({key:1,class:r.upButtonClass,icon:n.incrementButtonIcon},ks(r.upButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])):Ce("",!0),n.showButtons&&n.buttonLayout!=="stacked"?(k(),Ve(a,dn({key:2,class:r.downButtonClass,icon:n.decrementButtonIcon},ks(r.downButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])):Ce("",!0)],6)}var X0=kt(P1,[["render",R1]]);const A1={class:"p-field p-col-12 p-md-4"},I1={class:"p-float-label my-2 mx-auto align-middle",style:{width:"fit-content"}},k1={for:"randomSeedInput"},O1={class:"flex flex-col"},F1={__name:"RandomSystems",props:{isTooltipDisabled:Boolean},setup(t,{expose:e}){let n=st(null);const i=function(){n.value=Math.floor(Math.random()*Math.pow(10,8))};return e({generateRandomNumber:i,randomSeed:n}),(s,r)=>{const o=on("tooltip");return k(),X("div",null,[we("div",A1,[we("span",I1,[bt(he(ge(X0),{id:"randomSeedInput",modelValue:ge(n),"onUpdate:modelValue":r[0]||(r[0]=a=>ht(n)?n.value=a:n=a),useGrouping:!1,min:0,max:Math.pow(10,8)},null,8,["modelValue","max"]),[[o,{value:s.$t("Remember this number to rebuild the same star system"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),we("label",k1,it(s.$t("Seed")),1),bt(he(ge(Wn),{icon:"pi pi-sync",class:"p-button-rounded ml-2",onClick:i},null,512),[[o,{value:s.$t("Generate a random seed"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])]),we("div",O1,[bt(he(ge(Wn),{type:"submit",label:s.$t("Create Star System"),class:"p-button-outlined",onClick:r[1]||(r[1]=a=>s.$emit("updateStarSystem",ge(n)))},null,8,["label"]),[[o,{value:s.$t("Use a seed to create a new star system"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])])}}};const N1={name:"Divider",props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},computed:{containerClass(){return["p-divider p-component","p-divider-"+this.layout,"p-divider-"+this.type,{"p-divider-left":this.layout==="horizontal"&&(!this.align||this.align==="left")},{"p-divider-center":this.layout==="horizontal"&&this.align==="center"},{"p-divider-right":this.layout==="horizontal"&&this.align==="right"},{"p-divider-top":this.layout==="vertical"&&this.align==="top"},{"p-divider-center":this.layout==="vertical"&&(!this.align||this.align==="center")},{"p-divider-bottom":this.layout==="vertical"&&this.align==="bottom"}]}}},B1={key:0,class:"p-divider-content"};function z1(t,e,n,i,s,r){return k(),X("div",{class:Ie(r.containerClass),role:"separator"},[t.$slots.default?(k(),X("div",B1,[gt(t.$slots,"default")])):Ce("",!0)],2)}var Vs=kt(N1,[["render",z1]]);const V1={name:"InputText",inheritAttrs:!1,emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(t){this.$emit("update:modelValue",t.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}},U1=["value"];function H1(t,e,n,i,s,r){return k(),X("input",dn({class:["p-inputtext p-component",{"p-filled":r.filled}],value:n.modelValue,onInput:e[0]||(e[0]=(...o)=>r.onInput&&r.onInput(...o))},t.$attrs),null,16,U1)}var W1=kt(V1,[["render",H1]]);const Y0=Symbol();function G1(){const t=Ta(Y0);if(!t)throw new Error("No PrimeVue Toast provided!");return t}const j1={name:"Slider",emits:["update:modelValue","change","slideend"],props:{modelValue:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeUnmount(){this.unbindDragListeners()},methods:{updateDomData(){let t=this.$el.getBoundingClientRect();this.initX=t.left+oe.getWindowScrollLeft(),this.initY=t.top+oe.getWindowScrollTop(),this.barWidth=this.$el.offsetWidth,this.barHeight=this.$el.offsetHeight},setValue(t){let e,n=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY;this.orientation==="horizontal"?e=(n-this.initX)*100/this.barWidth:e=(this.initY+this.barHeight-i)*100/this.barHeight;let s=(this.max-this.min)*(e/100)+this.min;if(this.step){const r=this.range?this.modelValue[this.handleIndex]:this.modelValue,o=s-r;o<0?s=r+Math.ceil(s/this.step-r/this.step)*this.step:o>0&&(s=r+Math.floor(s/this.step-r/this.step)*this.step)}else s=Math.floor(s);this.updateModel(t,s)},updateModel(t,e){let n=parseFloat(e.toFixed(10)),i;if(this.range)if(i=this.modelValue?[...this.modelValue]:[],this.handleIndex==0){let s=this.modelValue?this.modelValue[1]:this.max;n<this.min?n=this.min:n>=s&&(n=s),i[0]=n,i[1]=i[1]||this.max}else{let s=this.modelValue?this.modelValue[0]:this.min;n>this.max?n=this.max:n<=s&&(n=s),i[0]=i[0]||this.min,i[1]=n}else n<this.min?n=this.min:n>this.max&&(n=this.max),i=n;this.$emit("update:modelValue",i),this.$emit("change",i)},onDragStart(t,e){this.disabled||(oe.addClass(this.$el,"p-slider-sliding"),this.dragging=!0,this.updateDomData(),this.range&&this.modelValue[0]===this.max?this.handleIndex=0:this.handleIndex=e,t.preventDefault())},onDrag(t){this.dragging&&(this.setValue(t),t.preventDefault())},onDragEnd(t){this.dragging&&(this.dragging=!1,oe.removeClass(this.$el,"p-slider-sliding"),this.$emit("slideend",{originalEvent:t,value:this.modelValue}))},onBarClick(t){this.disabled||oe.hasClass(t.target,"p-slider-handle")||(this.updateDomData(),this.setValue(t))},onMouseDown(t,e){this.bindDragListeners(),this.onDragStart(t,e)},onKeyDown(t,e){switch(this.handleIndex=e,t.which){case 40:this.vertical&&(this.decrementValue(t,e),t.preventDefault());break;case 38:this.vertical&&(this.incrementValue(t,e),t.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(t,e),t.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(t,e),t.preventDefault());break}},decrementValue(t,e){let n;this.range?this.step?n=this.modelValue[e]-this.step:n=this.modelValue[e]-1:this.step?n=this.modelValue-this.step:n=this.modelValue-1,this.updateModel(t,n),t.preventDefault()},incrementValue(t,e){let n;this.range?this.step?n=this.modelValue[e]+this.step:n=this.modelValue[e]+1:this.step?n=this.modelValue+this.step:n=this.modelValue+1,this.updateModel(t,n),t.preventDefault()},bindDragListeners(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{containerClass(){return["p-slider p-component",{"p-disabled":this.disabled,"p-slider-horizontal":this.orientation==="horizontal","p-slider-vertical":this.orientation==="vertical"}]},horizontal(){return this.orientation==="horizontal"},vertical(){return this.orientation==="vertical"},rangeStyle(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%"}:this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition(){return this.modelValue<this.min?0:this.modelValue>this.max?100:(this.modelValue-this.min)*100/(this.max-this.min)},rangeStartPosition(){return this.modelValue&&this.modelValue[0]?(this.modelValue[0]<this.min?0:this.modelValue[0]-this.min)*100/(this.max-this.min):0},rangeEndPosition(){return this.modelValue&&this.modelValue.length===2?(this.modelValue[1]>this.max?100:this.modelValue[1]-this.min)*100/(this.max-this.min):100},rangeStartHandleStyle(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},$1=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"],K1=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"],X1=["aria-valuemin","aria-valuenow","aria-valuemax","aria-labelledby"];function Y1(t,e,n,i,s,r){return k(),X("div",{class:Ie(r.containerClass),onClick:e[15]||(e[15]=(...o)=>r.onBarClick&&r.onBarClick(...o))},[we("span",{class:"p-slider-range",style:Ot(r.rangeStyle)},null,4),n.range?Ce("",!0):(k(),X("span",{key:0,class:"p-slider-handle",style:Ot(r.handleStyle),onTouchstart:e[0]||(e[0]=o=>r.onDragStart(o)),onTouchmove:e[1]||(e[1]=o=>r.onDrag(o)),onTouchend:e[2]||(e[2]=o=>r.onDragEnd(o)),onMousedown:e[3]||(e[3]=o=>r.onMouseDown(o)),onKeydown:e[4]||(e[4]=o=>r.onKeyDown(o)),tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.modelValue,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},null,44,$1)),n.range?(k(),X("span",{key:1,class:"p-slider-handle",style:Ot(r.rangeStartHandleStyle),onTouchstart:e[5]||(e[5]=o=>r.onDragStart(o,0)),onTouchmove:e[6]||(e[6]=o=>r.onDrag(o)),onTouchend:e[7]||(e[7]=o=>r.onDragEnd(o)),onMousedown:e[8]||(e[8]=o=>r.onMouseDown(o,0)),onKeydown:e[9]||(e[9]=o=>r.onKeyDown(o)),tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.modelValue?n.modelValue[0]:null,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},null,44,K1)):Ce("",!0),n.range?(k(),X("span",{key:2,class:"p-slider-handle",style:Ot(r.rangeEndHandleStyle),onTouchstart:e[10]||(e[10]=o=>r.onDragStart(o,1)),onTouchmove:e[11]||(e[11]=o=>r.onDrag(o)),onTouchend:e[12]||(e[12]=o=>r.onDragEnd(o)),onMousedown:e[13]||(e[13]=o=>r.onMouseDown(o,1)),onKeydown:e[14]||(e[14]=o=>r.onKeyDown(o,1)),tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.modelValue?n.modelValue[1]:null,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},null,44,X1)):Ce("",!0)],2)}var q1=kt(j1,[["render",Y1]]);const Z1={class:"mt-2 p-4 flex flex-col"},J1={class:"p-float-label"},Q1=["for"],En={__name:"InputNumberWithSlider",props:{inputId:String,label:String,min:Number,max:Number,step:Number,tooltipText:String,modelValue:Number,isTooltipDisabled:Boolean},emits:["update:modelValue"],setup(t){let n=st(t.modelValue);return(i,s)=>{const r=on("tooltip");return k(),X("div",Z1,[we("span",J1,[bt(he(ge(X0),{id:t.inputId,modelValue:ge(n),"onUpdate:modelValue":s[0]||(s[0]=o=>ht(n)?n.value=o:n=o),useGrouping:!1,min:t.min,max:t.max,step:t.step,style:{width:"100%"},onInput:s[1]||(s[1]=o=>i.$emit("update:modelValue",ge(n)))},null,8,["id","modelValue","min","max","step"]),[[r,{value:t.tooltipText,disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),we("label",{for:t.inputId},it(t.label),9,Q1),he(ge(q1),{modelValue:ge(n),"onUpdate:modelValue":s[2]||(s[2]=o=>ht(n)?n.value=o:n=o),min:t.min,max:t.max,step:t.step,onChange:s[3]||(s[3]=o=>i.$emit("update:modelValue",ge(n)))},null,8,["modelValue","min","max","step"])])])}}};class Zn{constructor(e){this.name=e,this.star,this.planets=[],this.satellites=[],this.cameraSettings,this.scales}setStar(...e){this.star=new eT(...e)}addPlanet(...e){this.planets.push(new pr(...e))}addSatellite(...e){this.satellites.push(new tT(...e))}setCameraSettings(...e){this.cameraSettings=new nT(...e)}setScales(...e){this.scales=new iT(...e)}calculateCameraSettings(){let e=20,n=2,i=.1,s=5e4,r=0;for(var o of this.planets)r=Math.max(r,o.semiMajor);let a=0,l=0,c=r*7,u={x:a,y:l,z:c},d=r*6;this.setCameraSettings(u,d,e,n,i,s)}calculateScales(){let e=0;for(var n of this.planets)e=Math.max(e,n.semiMajor);let i=e/50,s=e/2,r=s,o=e*6;this.setScales(i,s,r,1,50,o)}}class eT{constructor(e,n,i,s,r=2,o=!0){this.name=e,this.mass=n,this.radius=i,this.color=s,this.glowLayers=r,this.visible=o}}class pr{constructor(e,n,i,s,r,o,a,l=null,c=0,u=0,d=null,h=!0,p=!0){this.name=e,this.mass=d,this.radius=n,this.semiMajor=i,this.semiMinor=i*Math.sqrt(1-Math.pow(s,2)),this.eccentricity=s,this.longitudePerihelion=r,this.orbitInclination=o,this.color=a,this.texture=l,this.visible=h,this.tilted=p,this.rotationSpeed=c,this.obliquity=u}}class tT{constructor(e,n,i,s,r,o,a,l,c=null,u=0,d=0,h=!1,p=!0){this.name=e,this.hostPlanet=n,this.radius=i,this.semiMajor=s,this.semiMinor=s*Math.sqrt(1-Math.pow(r,2)),this.eccentricity=r,this.longitudePerihelion=o,this.orbitInclination=a,this.color=l,this.texture=c,this.visible=h,this.tilted=p,this.rotationSpeed=u,this.obliquity=d}}class nT{constructor(e,n,i,s,r,o){this.position=e,this.measurementDistance=n,this.fov=i,this.aspect=s,this.near=r,this.far=o}}class iT{constructor(e,n,i,s,r,o){this.starScale=e,this.planetScale=n,this.satelliteScale=i,this.planetDistanceScale=s,this.satelliteDistanceScale=r,this.measurementDistance=o}}const sT={class:"flex justify-center mt-4"},rT={class:"p-float-label"},oT={for:"customStarColorSelect"},aT={class:"p-tag"},lT={class:"p-field p-col-12 p-md-4"},cT={class:"pb-4 -white text-center"},uT={class:"text-yellow-300 uppercase"},dT={class:"p-float-label my-2 mx-auto align-middle",style:{width:"fit-content"}},hT={for:"customJSON"},fT={class:"flex flex-col"},pT={__name:"CustomSystems",props:{isTooltipDisabled:Boolean,isAdvancedSettingsActive:Boolean},emits:["updateStarSystem"],setup(t,{emit:e}){const{t:n}=Hr(),i=G1(),s=window.document;let r=Ho({starMass:1.5*Math.pow(10,30),starColorList:[{name:"White",code:16777215},{name:"Yellow",code:16776960},{name:"Blue",code:5609881},{name:"Orange",code:16737081},{name:"Red",code:16711680}],JSONCode:"",starColor:{name:"White",code:16777215},starRadius:2,planetNumber:1,planetDetails:[new pr("Planet 1",.02,200,0,0,0,255),new pr("Planet 2",.02,400,0,0,0,255),new pr("Planet 3",.02,600,0,0,0,255),new pr("Planet 4",.02,800,0,0,0,255),new pr("Planet 5",.02,1e3,0,0,0,255)]});const o=function(){let m=new Zn("Custom");m.setStar("Custom Star",r.starMass,r.starRadius,r.starColor.code);let f="a";for(var b=0;b<r.planetNumber;b++)f=String.fromCharCode(f.charCodeAt(f.length-1)+1),m.addPlanet(f,r.planetDetails[b].radius,r.planetDetails[b].semiMajor,r.planetDetails[b].eccentricity,r.planetDetails[b].longitudePerihelion,r.planetDetails[b].orbitInclination,16777215);m.setCameraSettings({x:0,y:0,z:2e3*7},2e3*6,20,2,.1,5e4),m.setScales(30,300,300,1,50,3500),r.JSONCode=JSON.stringify(m)},a=function(){let m=JSON.parse(r.JSONCode);r.starMass=m.star.mass,r.starRadius=m.star.radius,r.starColor=r.starColorList.filter(f=>f.code===m.star.color)[0],r.planetNumber=m.planets.length,m.planets.forEach(f=>{r.planetDetails.push(new pr(f.name,f.radius,f.semiMajor,f.eccentricity,f.longitudePerihelion,f.orbitInclination,f.color))})},l=function(){o(),e("updateStarSystem",r.JSONCode)},c=function(){a(),e("updateStarSystem",r.JSONCode)};let u=st(""),d=st("");const h=function(){var m=s.getElementById("customJSON");m.select(),navigator.clipboard.writeText(m.value),i.add({severity:"success",summary:u,detail:d,life:3e3})},p=function(){s.querySelector("#customStarColorSelect .p-cascadeselect-label").innerText=n(r.starColor.name)},g=function(){u=n("Success"),d=n("Code copied to clipboard")};return Wo(()=>{g(),p()}),(m,f)=>{const b=on("tooltip");return k(),X("div",null,[bt((k(),X("div",sT,[we("span",rT,[he(ge(B0),{id:"customStarColorSelect",modelValue:ge(r).starColor,"onUpdate:modelValue":f[0]||(f[0]=x=>ge(r).starColor=x),options:ge(r).starColorList,optionLabel:"name",optionGroupLabel:"name",optionGroupChildren:[],style:{minwidth:"14rem",width:"fit-content"},onChange:f[1]||(f[1]=()=>{l(),p()})},{option:Xe(x=>[we("span",null,it(m.$t(x.option.name)),1)]),_:1},8,["modelValue","options"]),we("label",oT,it(m.$t("Star Color")),1)])])),[[b,{value:m.$t("Select a star color"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),he(En,{inputId:"customStarRadiusInput",label:m.$t("Star Radius"),min:2,max:5,step:.1,tooltipText:m.$t("Define a star radius"),modelValue:ge(r).starRadius,"onUpdate:modelValue":[f[2]||(f[2]=x=>ge(r).starRadius=x),l],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","step","tooltipText","modelValue","isTooltipDisabled"]),he(En,{inputId:"customPlanetNumberInput",label:m.$t("Number of planets"),min:1,max:5,step:1,tooltipText:m.$t("Define how many planets compose the star system"),modelValue:ge(r).planetNumber,"onUpdate:modelValue":[f[3]||(f[3]=x=>ge(r).planetNumber=x),l],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),he(ge(bf),null,{default:Xe(()=>[(k(!0),X(je,null,Vt(ge(r).planetNumber,x=>(k(),Ve(ge(yf),{header:`${m.$t("Planet")} ${x}`,key:x},{default:Xe(()=>[he(En,{inputId:`customPlanetRadiusInput${x}`,label:m.$t("Planet Radius"),min:.01,max:1,step:.01,tooltipText:m.$t("Define planet radius"),modelValue:ge(r).planetDetails[x-1].radius,"onUpdate:modelValue":[_=>ge(r).planetDetails[x-1].radius=_,l],isTooltipDisabled:t.isTooltipDisabled},null,8,["inputId","label","min","step","tooltipText","modelValue","onUpdate:modelValue","isTooltipDisabled"]),he(En,{inputId:`customPlanetSemiMajorInput${x}`,label:m.$t("Orbit semi-major axis"),min:200,max:2e3,step:1,tooltipText:m.$t("Define the planet orbit radius"),modelValue:ge(r).planetDetails[x-1].semiMajor,"onUpdate:modelValue":[_=>ge(r).planetDetails[x-1].semiMajor=_,l],isTooltipDisabled:t.isTooltipDisabled},null,8,["inputId","label","tooltipText","modelValue","onUpdate:modelValue","isTooltipDisabled"]),t.isAdvancedSettingsActive?(k(),X(je,{key:0},[he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",aT,it(m.$t("Advanced Parameters")),1)]),_:1}),he(En,{inputId:`customPlanetEccentricityInput${x}`,label:m.$t("Orbit Eccentricity"),min:0,max:.75,step:.01,tooltipText:m.$t("Define the planet orbit eccentricity"),modelValue:ge(r).planetDetails[x-1].eccentricity,"onUpdate:modelValue":[_=>ge(r).planetDetails[x-1].eccentricity=_,l],isTooltipDisabled:t.isTooltipDisabled},null,8,["inputId","label","max","step","tooltipText","modelValue","onUpdate:modelValue","isTooltipDisabled"]),he(En,{inputId:`customPlanetPerihelionLongitudeInput${x}`,label:m.$t("Orbit Perihelion Longitude"),min:0,max:180,step:1,tooltipText:m.$t("Define the perihelion longitude of the planet orbit. It changes the relative orientation between planet orbits"),modelValue:ge(r).planetDetails[x-1].longitudePerihelion,"onUpdate:modelValue":[_=>ge(r).planetDetails[x-1].longitudePerihelion=_,l],isTooltipDisabled:t.isTooltipDisabled},null,8,["inputId","label","tooltipText","modelValue","onUpdate:modelValue","isTooltipDisabled"]),he(En,{inputId:`customPlanetOrbitInclinationInput${x}`,label:m.$t("Orbit Inclination"),min:0,max:90,step:1,tooltipText:m.$t("Define the planet orbit inclination relative to plane of reference of the star system"),modelValue:ge(r).planetDetails[x-1].orbitInclination,"onUpdate:modelValue":[_=>ge(r).planetDetails[x-1].orbitInclination=_,l],isTooltipDisabled:t.isTooltipDisabled},null,8,["inputId","label","tooltipText","modelValue","onUpdate:modelValue","isTooltipDisabled"])],64)):Ce("",!0)]),_:2},1032,["header"]))),128))]),_:1}),he(ge(Vs),{align:"center"}),we("div",lT,[we("h5",cT,[vn(it(m.$t("Use the code below"))+" ",1),we("span",uT,it(m.$t("or")),1),vn(" "+it(m.$t("insert another code to recover previous configurations")),1)]),we("span",dT,[bt(he(ge(W1),{id:"customJSON",modelValue:ge(r).JSONCode,"onUpdate:modelValue":f[4]||(f[4]=x=>ge(r).JSONCode=x),class:"p-inputtext-sm"},null,8,["modelValue"]),[[b,{value:m.$t("This code represent the customized star system. Save this code to reproduce this star system later"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),we("label",hT,it(m.$t("JSON Code")),1),bt(he(ge(Wn),{icon:"pi pi-copy",class:"p-button ml-2",onClick:f[5]||(f[5]=()=>h())},null,512),[[b,{value:m.$t("Copy the current code to clipboard"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])]),we("div",fT,[bt(he(ge(Wn),{label:m.$t("Create Star System"),class:"p-button-outlined",onClick:c},null,8,["label"]),[[b,{value:m.$t("Use the JSON code to create a star system"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])])}}};var mT=kt(pT,[["__scopeId","data-v-0630ba1b"]]);const gT={class:"p-tag"},bT={__name:"ScalesSection",props:{isAdvancedSettingsActive:Boolean,isTooltipDisabled:Boolean,starSize:Number,planetSize:Number,satelliteSize:Number,planetDistance:Number,satelliteDistance:Number},setup(t){const e=t;let n=st(e.starSize),i=st(e.planetSize),s=st(e.satelliteSize),r=st(e.planetDistance),o=st(e.satelliteDistance);return Rn(e,()=>{n=e.starSize,i=e.planetSize,s=e.satelliteSize,r=e.planetDistance,o=e.satelliteDistance}),(a,l)=>(k(),X("div",null,[he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",null,it(a.$t("Size")),1)]),_:1}),he(En,{inputId:"starSize",label:a.$t("Star"),min:1,max:100,step:1,tooltipText:a.$t("Scale apparent size of the star"),modelValue:ge(n),"onUpdate:modelValue":[l[0]||(l[0]=c=>ht(n)?n.value=c:n=c),l[1]||(l[1]=c=>a.$emit("update:starSize",ge(n)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),he(En,{inputId:"planetSize",label:a.$t("Planets"),min:5,max:2e3,step:1,tooltipText:a.$t("Scale apparent size of planets"),modelValue:ge(i),"onUpdate:modelValue":[l[2]||(l[2]=c=>ht(i)?i.value=c:i=c),l[3]||(l[3]=c=>a.$emit("update:planetSize",ge(i)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),t.isAdvancedSettingsActive?(k(),X(je,{key:0},[he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",gT,it(a.$t("Advanced Parameters")),1)]),_:1}),he(En,{inputId:"satelliteSize",label:a.$t("Satellites"),min:5,max:2e3,step:1,tooltipText:a.$t("Scale apparent size of satellites"),modelValue:ge(s),"onUpdate:modelValue":[l[4]||(l[4]=c=>ht(s)?s.value=c:s=c),l[5]||(l[5]=c=>a.$emit("update:satelliteSize",ge(s)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",null,it(a.$t("Distance")),1)]),_:1}),he(En,{inputId:"planetDistance",label:a.$t("Planets"),min:.5,max:5,step:.1,tooltipText:a.$t("Scale apparent orbit radius of planets"),modelValue:ge(r),"onUpdate:modelValue":[l[6]||(l[6]=c=>ht(r)?r.value=c:r=c),l[7]||(l[7]=c=>a.$emit("update:planetDistance",ge(r)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","min","step","tooltipText","modelValue","isTooltipDisabled"]),he(En,{inputId:"satelliteDistance",label:a.$t("Satellites"),min:25,max:250,step:1,tooltipText:a.$t("Scale apparent orbit radius of satellites"),modelValue:ge(o),"onUpdate:modelValue":[l[8]||(l[8]=c=>ht(o)?o.value=c:o=c),l[9]||(l[9]=c=>a.$emit("update:satelliteDistance",ge(o)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"])],64)):Ce("",!0)]))}},yT={class:"p-tag"},xT={__name:"VisibilitySection",props:{isAdvancedSettingsActive:Boolean,isTooltipDisabled:Boolean,areOrbitsVisible:Boolean,isStarVisible:Boolean,arePlanetsVisible:Boolean,areSatellitesVisible:Boolean},setup(t){const e=t;let n=st(e.areOrbitsVisible),i=st(e.isStarVisible),s=st(e.arePlanetsVisible),r=st(e.areSatellitesVisible);return Rn(e,()=>{n.value=e.areOrbitsVisible,i.value=e.isStarVisible,s.value=e.arePlanetsVisible,r.value=e.areSatellitesVisible}),(o,a)=>(k(),X("div",null,[he(Sr,{modelValue:ge(n),"onUpdate:modelValue":[a[0]||(a[0]=l=>ht(n)?n.value=l:n=l),a[1]||(a[1]=l=>o.$emit("update:areOrbitsVisible",ge(n)))],label:o.$t("Orbits"),tooltipText:o.$t("Hide / Show orbit lines"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"]),he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",null,it(o.$t("Celestial Bodies")),1)]),_:1}),he(Sr,{modelValue:ge(i),"onUpdate:modelValue":[a[2]||(a[2]=l=>ht(i)?i.value=l:i=l),a[3]||(a[3]=l=>o.$emit("update:isStarVisible",ge(i)))],label:o.$t("Star"),tooltipText:o.$t("Hide / Show star"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"]),he(Sr,{modelValue:ge(s),"onUpdate:modelValue":[a[4]||(a[4]=l=>ht(s)?s.value=l:s=l),a[5]||(a[5]=l=>o.$emit("update:arePlanetsVisible",ge(s)))],label:o.$t("Planets"),tooltipText:o.$t("Hide / Show planets"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"]),t.isAdvancedSettingsActive?(k(),X(je,{key:0},[he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",yT,it(o.$t("Advanced Parameters")),1)]),_:1}),he(Sr,{modelValue:ge(r),"onUpdate:modelValue":[a[6]||(a[6]=l=>ht(r)?r.value=l:r=l),a[7]||(a[7]=l=>o.$emit("update:areSatellitesVisible",ge(r)))],label:o.$t("Satellites"),tooltipText:o.$t("Hide / Show satellites"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"])],64)):Ce("",!0)]))}},vT={class:"p-tag"},_T={__name:"SimulationParameters",props:{isAdvancedSettingsActive:Boolean,isTooltipDisabled:Boolean,simulationSpeed:Number,simulationStep:Number,areOrbitsTilted:Boolean,isRotationEnabled:Boolean},setup(t){const e=t;let n=st(e.simulationSpeed),i=st(e.simulationStep),s=st(e.areOrbitsTilted),r=st(e.isRotationEnabled);return Rn(e,()=>{n.value=e.simulationSpeed,i.value=e.simulationStep,s.value=e.areOrbitsTilted,r.value=e.isRotationEnabled}),(o,a)=>(k(),X("div",null,[he(En,{inputId:"simulationSpeed",label:o.$t("Simulation Speed"),min:1,max:100,step:1,tooltipText:o.$t("Define how many simulations steps are performed for each new frame. Larger numbers speed up the simulation, but may degrade computational performance"),modelValue:ge(n),"onUpdate:modelValue":[a[0]||(a[0]=l=>ht(n)?n.value=l:n=l),a[1]||(a[1]=l=>o.$emit("update:simulationSpeed",ge(n)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),t.isAdvancedSettingsActive?(k(),X(je,{key:0},[he(ge(Vs),{align:"center"},{default:Xe(()=>[we("span",vT,it(o.$t("Advanced Parameters")),1)]),_:1}),he(En,{inputId:"simulationStep",label:o.$t("Simulation Step (earth days)"),min:.005,max:.1,step:.005,tooltipText:o.$t("Define the size of simulation (integration) steps used by the motion equations integrator. Larger numbers speed up the simulation without degrading computational performance, but also end up accumulating more errors at every new simulation step"),modelValue:ge(i),"onUpdate:modelValue":[a[2]||(a[2]=l=>ht(i)?i.value=l:i=l),a[3]||(a[3]=l=>o.$emit("update:simulationStep",ge(i)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","min","max","step","tooltipText","modelValue","isTooltipDisabled"]),he(Sr,{class:Ie("mt-12"),modelValue:ge(s),"onUpdate:modelValue":[a[4]||(a[4]=l=>ht(s)?s.value=l:s=l),a[5]||(a[5]=l=>o.$emit("update:areOrbitsTilted",ge(s)))],label:o.$t("Orbital Inclination"),tooltipText:o.$t("Define if orbital inclination of planets and satellites is applied"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"]),he(Sr,{modelValue:ge(r),"onUpdate:modelValue":[a[6]||(a[6]=l=>ht(r)?r.value=l:r=l),a[7]||(a[7]=l=>o.$emit("update:isRotationEnabled",ge(r)))],label:o.$t("Rotation"),tooltipText:o.$t("Define if celestial bodies rotate around their own axis of rotation. This simulation ignores rotation obliquity"),isTooltipDisabled:t.isTooltipDisabled},null,8,["modelValue","label","tooltipText","isTooltipDisabled"])],64)):Ce("",!0)]))}},wT={__name:"BrightnessDetectionParameters",props:{plotSizeLimit:Number,pointsPerSecond:Number,isTooltipDisabled:Boolean},setup(t){const e=t;let n=st(e.plotSizeLimit),i=st(e.pointsPerSecond);return Rn(e,()=>{n=e.plotSizeLimit,i=e.pointsPerSecond}),(s,r)=>(k(),X("div",null,[he(En,{inputId:"plotSizeLimit",label:s.$t("Max number of points per plot"),min:250,max:1e3,step:1,tooltipText:s.$t("Define the maximum number of points which plots for real-time measurements or collected data may hold. Larger numbers produce more informative plots, but may degrade computational performance"),modelValue:ge(n),"onUpdate:modelValue":[r[0]||(r[0]=o=>ht(n)?n.value=o:n=o),r[1]||(r[1]=o=>s.$emit("update:plotSizeLimit",ge(n)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"]),he(En,{inputId:"pointsPerSecond",label:s.$t("Measured points per second"),min:1,max:10,step:1,tooltipText:s.$t("Define how many brightness points are measured per second. Larger number increase the temporal resolution of light curves, but may degrade computational performance"),modelValue:ge(i),"onUpdate:modelValue":[r[2]||(r[2]=o=>ht(i)?i.value=o:i=o),r[3]||(r[3]=o=>s.$emit("update:pointsPerSecond",ge(i)))],isTooltipDisabled:t.isTooltipDisabled},null,8,["label","tooltipText","modelValue","isTooltipDisabled"])]))}},na={name:"Column",props:{columnKey:{type:null,default:null},field:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},filterField:{type:[String,Function],default:null},dataType:{type:String,default:"text"},sortable:{type:Boolean,default:!1},header:{type:null,default:null},footer:{type:null,default:null},style:{type:null,default:null},class:{type:String,default:null},headerStyle:{type:null,default:null},headerClass:{type:String,default:null},bodyStyle:{type:null,default:null},bodyClass:{type:String,default:null},footerStyle:{type:null,default:null},footerClass:{type:String,default:null},showFilterMenu:{type:Boolean,default:!0},showFilterOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showFilterMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},filterMatchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},excludeGlobalFilter:{type:Boolean,default:!1},filterHeaderClass:{type:String,default:null},filterHeaderStyle:{type:null,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null},selectionMode:{type:String,default:null},expander:{type:Boolean,default:!1},colspan:{type:Number,default:null},rowspan:{type:Number,default:null},rowReorder:{type:Boolean,default:!1},rowReorderIcon:{type:String,default:"pi pi-bars"},reorderableColumn:{type:Boolean,default:!0},rowEditor:{type:Boolean,default:!1},frozen:{type:Boolean,default:!1},alignFrozen:{type:String,default:"left"},exportable:{type:Boolean,default:!0},exportHeader:{type:String,default:null},filterMatchMode:{type:String,default:null},hidden:{type:Boolean,default:!1}},render(){return null}},un={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},kc={AND:"and",OR:"or"},Oc={filter(t,e,n,i,s){let r=[];if(t)for(let o of t)for(let a of e){let l=Fe.resolveFieldData(o,a);if(this.filters[i](l,n,s)){r.push(o);break}}return r},filters:{startsWith(t,e,n){if(e==null||e.trim()==="")return!0;if(t==null)return!1;let i=Fe.removeAccents(e.toString()).toLocaleLowerCase(n);return Fe.removeAccents(t.toString()).toLocaleLowerCase(n).slice(0,i.length)===i},contains(t,e,n){if(e==null||typeof e=="string"&&e.trim()==="")return!0;if(t==null)return!1;let i=Fe.removeAccents(e.toString()).toLocaleLowerCase(n);return Fe.removeAccents(t.toString()).toLocaleLowerCase(n).indexOf(i)!==-1},notContains(t,e,n){if(e==null||typeof e=="string"&&e.trim()==="")return!0;if(t==null)return!1;let i=Fe.removeAccents(e.toString()).toLocaleLowerCase(n);return Fe.removeAccents(t.toString()).toLocaleLowerCase(n).indexOf(i)===-1},endsWith(t,e,n){if(e==null||e.trim()==="")return!0;if(t==null)return!1;let i=Fe.removeAccents(e.toString()).toLocaleLowerCase(n),s=Fe.removeAccents(t.toString()).toLocaleLowerCase(n);return s.indexOf(i,s.length-i.length)!==-1},equals(t,e,n){return e==null||typeof e=="string"&&e.trim()===""?!0:t==null?!1:t.getTime&&e.getTime?t.getTime()===e.getTime():Fe.removeAccents(t.toString()).toLocaleLowerCase(n)==Fe.removeAccents(e.toString()).toLocaleLowerCase(n)},notEquals(t,e,n){return e==null||typeof e=="string"&&e.trim()===""?!1:t==null?!0:t.getTime&&e.getTime?t.getTime()!==e.getTime():Fe.removeAccents(t.toString()).toLocaleLowerCase(n)!=Fe.removeAccents(e.toString()).toLocaleLowerCase(n)},in(t,e){if(e==null||e.length===0)return!0;for(let n=0;n<e.length;n++)if(Fe.equals(t,e[n]))return!0;return!1},between(t,e){return e==null||e[0]==null||e[1]==null?!0:t==null?!1:t.getTime?e[0].getTime()<=t.getTime()&&t.getTime()<=e[1].getTime():e[0]<=t&&t<=e[1]},lt(t,e){return e==null?!0:t==null?!1:t.getTime&&e.getTime?t.getTime()<e.getTime():t<e},lte(t,e){return e==null?!0:t==null?!1:t.getTime&&e.getTime?t.getTime()<=e.getTime():t<=e},gt(t,e){return e==null?!0:t==null?!1:t.getTime&&e.getTime?t.getTime()>e.getTime():t>e},gte(t,e){return e==null?!0:t==null?!1:t.getTime&&e.getTime?t.getTime()>=e.getTime():t>=e},dateIs(t,e){return e==null?!0:t==null?!1:t.toDateString()===e.toDateString()},dateIsNot(t,e){return e==null?!0:t==null?!1:t.toDateString()!==e.toDateString()},dateBefore(t,e){return e==null?!0:t==null?!1:t.getTime()<e.getTime()},dateAfter(t,e){return e==null?!0:t==null?!1:t.getTime()>e.getTime()}},register(t,e){this.filters[t]=e}};var Tf={name:"VirtualScroller",emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1}},data(){return{first:this.isBoth()?{rows:0,cols:0}:0,last:this.isBoth()?{rows:0,cols:0}:0,numItemsInViewport:this.isBoth()?{rows:0,cols:0}:0,lastScrollPos:this.isBoth()?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,mounted(){this.init(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},watch:{numToleratedItems(t){this.d_numToleratedItems=t},loading(t){this.d_loading=t},items(t,e){(!e||e.length!==(t||[]).length)&&this.init()},orientation(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0}},methods:{init(){this.setSize(),this.calculateOptions(),this.setSpacerSize()},isVertical(){return this.orientation==="vertical"},isHorizontal(){return this.orientation==="horizontal"},isBoth(){return this.orientation==="both"},scrollTo(t){this.element&&this.element.scrollTo(t)},scrollToIndex(t,e="auto"){const n=this.isBoth(),i=this.isHorizontal(),s=this.first,{numToleratedItems:r}=this.calculateNumItems(),o=this.itemSize,a=this.getContentPosition(),l=(d=0,h)=>d<=h?0:d,c=(d,h,p)=>d*h+p,u=(d=0,h=0)=>this.scrollTo({left:d,top:h,behavior:e});if(n){const d={rows:l(t[0],r[0]),cols:l(t[1],r[1])};(d.rows!==s.rows||d.cols!==s.cols)&&(u(c(d.cols,o[1],a.left),c(d.rows,o[0],a.top)),this.first=d)}else{const d=l(t,r);d!==s&&(i?u(c(d,o,a.left),0):u(0,c(d,o,a.top)),this.first=d)}},scrollInView(t,e,n="auto"){if(e){const i=this.isBoth(),s=this.isHorizontal(),{first:r,viewport:o}=this.getRenderedRange(),a=(u=0,d=0)=>this.scrollTo({left:u,top:d,behavior:n}),l=e==="to-start",c=e==="to-end";if(l){if(i)o.first.rows-r.rows>t[0]?a(o.first.cols*this.itemSize[1],(o.first.rows-1)*this.itemSize[0]):o.first.cols-r.cols>t[1]&&a((o.first.cols-1)*this.itemSize[1],o.first.rows*this.itemSize[0]);else if(o.first-r>t){const u=(o.first-1)*this.itemSize;s?a(u,0):a(0,u)}}else if(c){if(i)o.last.rows-r.rows<=t[0]+1?a(o.first.cols*this.itemSize[1],(o.first.rows+1)*this.itemSize[0]):o.last.cols-r.cols<=t[1]+1&&a((o.first.cols+1)*this.itemSize[1],o.first.rows*this.itemSize[0]);else if(o.last-r<=t+1){const u=(o.first+1)*this.itemSize;s?a(u,0):a(0,u)}}}else this.scrollToIndex(t,n)},getRenderedRange(){const t=(i,s)=>Math.floor(i/(s||i));let e=this.first,n=0;if(this.element){const i=this.isBoth(),s=this.isHorizontal(),r=this.element.scrollTop,o=this.element.scrollLeft;i?(e={rows:t(r,this.itemSize[0]),cols:t(o,this.itemSize[1])},n={rows:e.rows+this.numItemsInViewport.rows,cols:e.cols+this.numItemsInViewport.cols}):(e=t(s?o:r,this.itemSize),n=e+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:e,last:n}}},calculateNumItems(){const t=this.isBoth(),e=this.isHorizontal(),n=this.itemSize,i=this.getContentPosition(),s=this.element?this.element.offsetWidth-i.left:0,r=this.element?this.element.offsetHeight-i.top:0,o=(u,d)=>Math.ceil(u/(d||u)),a=u=>Math.ceil(u/2),l=t?{rows:o(r,n[0]),cols:o(s,n[1])}:o(e?s:r,n),c=this.d_numToleratedItems||(t?[a(l.rows),a(l.cols)]:a(l));return{numItemsInViewport:l,numToleratedItems:c}},calculateOptions(){const t=this.isBoth(),e=this.first,{numItemsInViewport:n,numToleratedItems:i}=this.calculateNumItems(),s=(o,a,l,c)=>this.getLast(o+a+(o<l?2:3)*l,c),r=t?{rows:s(e.rows,n.rows,i[0]),cols:s(e.cols,n.cols,i[1],!0)}:s(e,n,i);this.last=r,this.numItemsInViewport=n,this.d_numToleratedItems=i,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=t?Array.from({length:n.rows}).map(()=>Array.from({length:n.cols})):Array.from({length:n})),this.lazy&&this.$emit("lazy-load",{first:e,last:r})},getLast(t=0,e){return this.items?Math.min(e?(this.columns||this.items[0]).length:this.items.length,t):0},getContentPosition(){if(this.content){const t=getComputedStyle(this.content),e=parseInt(t.paddingLeft,10)+Math.max(parseInt(t.left,10),0),n=parseInt(t.paddingRight,10)+Math.max(parseInt(t.right,10),0),i=parseInt(t.paddingTop,10)+Math.max(parseInt(t.top,10),0),s=parseInt(t.paddingBottom,10)+Math.max(parseInt(t.bottom,10),0);return{left:e,right:n,top:i,bottom:s,x:e+n,y:i+s}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize(){if(this.element){const t=this.isBoth(),e=this.isHorizontal(),n=this.element.parentElement,i=this.scrollWidth||`${this.element.offsetWidth||n.offsetWidth}px`,s=this.scrollHeight||`${this.element.offsetHeight||n.offsetHeight}px`,r=(o,a)=>this.element.style[o]=a;t||e?(r("height",s),r("width",i)):r("height",s)}},setSpacerSize(){const t=this.items;if(t){const e=this.isBoth(),n=this.isHorizontal(),i=this.getContentPosition(),s=(r,o,a,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(o||[]).length*a+l+"px"};e?(s("height",t,this.itemSize[0],i.y),s("width",this.columns||t[1],this.itemSize[1],i.x)):n?s("width",this.columns||t,this.itemSize,i.x):s("height",t,this.itemSize,i.y)}},setContentPosition(t){if(this.content){const e=this.isBoth(),n=this.isHorizontal(),i=t?t.first:this.first,s=(o,a)=>o*a,r=(o=0,a=0)=>{this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${a}px, 0)`}};if(e)r(s(i.cols,this.itemSize[1]),s(i.rows,this.itemSize[0]));else{const o=s(i,this.itemSize);n?r(o,0):r(0,o)}}},onScrollPositionChange(t){const e=t.target,n=this.isBoth(),i=this.isHorizontal(),s=this.getContentPosition(),r=(m,f)=>m?m>f?m-f:m:0,o=(m,f)=>Math.floor(m/(f||m)),a=(m,f,b,x,_,y)=>m<=_?_:y?b-x-_:f+_-1,l=(m,f,b,x,_,y,v)=>m<=y?0:Math.max(0,v?m<f?b:m-y:m>f?b:m-2*y),c=(m,f,b,x,_,y)=>{let v=f+x+2*_;return m>=_&&(v+=_+1),this.getLast(v,y)},u=r(e.scrollTop,s.top),d=r(e.scrollLeft,s.left);let h=0,p=this.last,g=!1;if(n){const m=this.lastScrollPos.top<=u,f=this.lastScrollPos.left<=d,b={rows:o(u,this.itemSize[0]),cols:o(d,this.itemSize[1])},x={rows:a(b.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],m),cols:a(b.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],f)};h={rows:l(b.rows,x.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],m),cols:l(b.cols,x.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],f)},p={rows:c(b.rows,h.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:c(b.cols,h.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},g=h.rows!==this.first.rows&&p.rows!==this.last.rows||h.cols!==this.first.cols&&p.cols!==this.last.cols,this.lastScrollPos={top:u,left:d}}else{const m=i?d:u,f=this.lastScrollPos<=m,b=o(m,this.itemSize),x=a(b,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,f);h=l(b,x,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,f),p=c(b,h,this.last,this.numItemsInViewport,this.d_numToleratedItems),g=h!==this.first&&p!==this.last,this.lastScrollPos=m}return{first:h,last:p,isRangeChanged:g}},onScrollChange(t){const{first:e,last:n,isRangeChanged:i}=this.onScrollPositionChange(t);if(i){const s={first:e,last:n};this.setContentPosition(s),this.first=e,this.last=n,this.$emit("scroll-index-change",s),this.lazy&&this.$emit("lazy-load",s)}},onScroll(t){if(this.$emit("scroll",t),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:e}=this.onScrollPositionChange(t);e&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(t),this.d_loading&&this.showLoader&&!this.lazy&&(this.d_loading=!1)},this.delay)}else this.onScrollChange(t)},getOptions(t){const e=(this.items||[]).length,n=this.isBoth()?this.first.rows+t:this.first+t;return{index:n,count:e,first:n===0,last:n===e-1,even:n%2===0,odd:n%2!==0}},getLoaderOptions(t,e){let n=this.loaderArr.length;return{index:t,count:n,first:t===0,last:t===n-1,even:t%2===0,odd:t%2!==0,...e}},elementRef(t){this.element=t},contentRef(t){this.content=t}},computed:{containerClass(){return["p-virtualscroller",{"p-both-scroll":this.isBoth(),"p-horizontal-scroll":this.isHorizontal()},this.class]},contentClass(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass(){return["p-virtualscroller-loader",{"p-component-overlay":!this.$slots.loader}]},loadedItems(){const t=this.items;return t&&!this.d_loading?this.isBoth()?t.slice(this.first.rows,this.last.rows).map(e=>this.columns?e:e.slice(this.first.cols,this.last.cols)):this.isHorizontal()&&this.columns?t:t.slice(this.first,this.last):[]},loadedRows(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns(){if(this.columns){const t=this.isBoth(),e=this.isHorizontal();if(t||e)return this.d_loading&&this.loaderDisabled?t?this.loaderArr[0]:this.loaderArr:this.columns.slice(t?this.first.cols:this.first,t?this.last.cols:this.last)}return this.columns}}};const ST={key:1,class:"p-virtualscroller-loading-icon pi pi-spinner pi-spin"};function MT(t,e,n,i,s,r){return n.disabled?(k(),X(je,{key:1},[gt(t.$slots,"default"),gt(t.$slots,"content",{items:n.items,rows:n.items,columns:r.loadedColumns})],64)):(k(),X("div",{key:0,ref:r.elementRef,class:Ie(r.containerClass),tabindex:0,style:Ot(n.style),onScroll:e[0]||(e[0]=(...o)=>r.onScroll&&r.onScroll(...o))},[gt(t.$slots,"content",{styleClass:r.contentClass,items:r.loadedItems,getItemOptions:r.getOptions,loading:s.d_loading,getLoaderOptions:r.getLoaderOptions,itemSize:n.itemSize,rows:r.loadedRows,columns:r.loadedColumns,contentRef:r.contentRef,spacerStyle:s.spacerStyle,contentStyle:s.contentStyle,vertical:r.isVertical(),horizontal:r.isHorizontal(),both:r.isBoth()},()=>[we("div",{ref:r.contentRef,class:Ie(r.contentClass),style:Ot(s.contentStyle)},[(k(!0),X(je,null,Vt(r.loadedItems,(o,a)=>gt(t.$slots,"item",{key:a,item:o,options:r.getOptions(a)})),128))],6)]),n.showSpacer?(k(),X("div",{key:0,class:"p-virtualscroller-spacer",style:Ot(s.spacerStyle)},null,4)):Ce("",!0),!n.loaderDisabled&&n.showLoader&&s.d_loading?(k(),X("div",{key:1,class:Ie(r.loaderClass)},[t.$slots&&t.$slots.loader?(k(!0),X(je,{key:0},Vt(s.loaderArr,(o,a)=>gt(t.$slots,"loader",{key:a,options:r.getLoaderOptions(a,r.isBoth()&&{numCols:t.d_numItemsInViewport.cols})})),128)):(k(),X("i",ST))],2)):Ce("",!0)],38))}function CT(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var TT=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}
.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    contain: content;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}
.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    -webkit-transform-origin: 0 0;
            transform-origin: 0 0;
    pointer-events: none;
}
.p-virtualscroller .p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.p-virtualscroller-loader.p-component-overlay {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
}
`;CT(TT);Tf.render=MT;var fu={name:"Dropdown",emits:["update:modelValue","before-show","before-hide","show","hide","change","filter","focus","blur"],props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,optionGroupLabel:null,optionGroupChildren:null,scrollHeight:{type:String,default:"200px"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:String,disabled:Boolean,dataKey:null,showClear:Boolean,inputId:String,tabindex:String,ariaLabelledBy:null,appendTo:{type:String,default:"body"},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},panelClass:null,loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"},virtualScrollerOptions:{type:Object,default:null}},data(){return{focused:!1,filterValue:null,overlayVisible:!1}},watch:{modelValue(){this.isModelValueChanged=!0}},outsideClickListener:null,scrollHandler:null,resizeListener:null,searchTimeout:null,currentSearchChar:null,previousSearchChar:null,searchValue:null,overlay:null,itemsWrapper:null,virtualScroller:null,isModelValueChanged:!1,updated(){this.overlayVisible&&this.isModelValueChanged&&this.scrollValueInView(),this.isModelValueChanged=!1},beforeUnmount(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.itemsWrapper=null,this.overlay&&(gn.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex(t,e){return this.virtualScrollerDisabled?t:e&&e(t).index},getOptionLabel(t){return this.optionLabel?Fe.resolveFieldData(t,this.optionLabel):t},getOptionValue(t){return this.optionValue?Fe.resolveFieldData(t,this.optionValue):t},getOptionRenderKey(t,e){return this.dataKey?Fe.resolveFieldData(t,this.dataKey):this.getOptionLabel(t)+"_"+e.toString()},isOptionDisabled(t){return this.optionDisabled?Fe.resolveFieldData(t,this.optionDisabled):!1},getOptionGroupRenderKey(t){return Fe.resolveFieldData(t,this.optionGroupLabel)},getOptionGroupLabel(t){return Fe.resolveFieldData(t,this.optionGroupLabel)},getOptionGroupChildren(t){return Fe.resolveFieldData(t,this.optionGroupChildren)},getSelectedOption(){let t=this.getSelectedOptionIndex();return t!==-1?this.optionGroupLabel?this.getOptionGroupChildren(this.visibleOptions[t.group])[t.option]:this.visibleOptions[t]:null},getSelectedOptionIndex(){if(this.modelValue!=null&&this.visibleOptions)if(this.optionGroupLabel)for(let t=0;t<this.visibleOptions.length;t++){let e=this.findOptionIndexInList(this.modelValue,this.getOptionGroupChildren(this.visibleOptions[t]));if(e!==-1)return{group:t,option:e}}else return this.findOptionIndexInList(this.modelValue,this.visibleOptions);return-1},findOptionIndexInList(t,e){for(let n=0;n<e.length;n++)if(Fe.equals(t,this.getOptionValue(e[n]),this.equalityKey))return n;return-1},isSelected(t){return Fe.equals(this.modelValue,this.getOptionValue(t),this.equalityKey)},show(t){this.$emit("before-show"),this.overlayVisible=!0,t&&this.$refs.focusInput.focus()},hide(){this.$emit("before-hide"),this.overlayVisible=!1},onFocus(t){this.focused=!0,this.$emit("focus",t)},onBlur(t){this.focused=!1,this.$emit("blur",t)},onKeyDown(t){switch(t.which){case 40:this.onDownKey(t);break;case 38:this.onUpKey(t);break;case 32:this.overlayVisible||(this.show(),t.preventDefault());break;case 13:case 27:this.overlayVisible&&(this.hide(),t.preventDefault());break;case 9:this.hide();break;default:this.search(t);break}},onFilterKeyDown(t){switch(t.which){case 40:this.onDownKey(t);break;case 38:this.onUpKey(t);break;case 13:case 27:this.overlayVisible=!1,t.preventDefault();break}},onDownKey(t){if(this.visibleOptions)if(!this.overlayVisible&&t.altKey)this.show();else{let e=this.visibleOptions&&this.visibleOptions.length>0?this.findNextOption(this.getSelectedOptionIndex()):null;e&&this.updateModel(t,this.getOptionValue(e))}t.preventDefault()},onUpKey(t){if(this.visibleOptions){let e=this.findPrevOption(this.getSelectedOptionIndex());e&&this.updateModel(t,this.getOptionValue(e))}t.preventDefault()},findNextOption(t){if(this.optionGroupLabel){let e=t===-1?0:t.group,n=t===-1?-1:t.option,i=this.findNextOptionInList(this.getOptionGroupChildren(this.visibleOptions[e]),n);return i||(e+1!==this.visibleOptions.length?this.findNextOption({group:e+1,option:-1}):null)}else return this.findNextOptionInList(this.visibleOptions,t)},findNextOptionInList(t,e){let n=e+1;if(n===t.length)return null;let i=t[n];return this.isOptionDisabled(i)?this.findNextOptionInList(n):i},findPrevOption(t){if(t===-1)return null;if(this.optionGroupLabel){let e=t.group,n=t.option,i=this.findPrevOptionInList(this.getOptionGroupChildren(this.visibleOptions[e]),n);return i||(e>0?this.findPrevOption({group:e-1,option:this.getOptionGroupChildren(this.visibleOptions[e-1]).length}):null)}else return this.findPrevOptionInList(this.visibleOptions,t)},findPrevOptionInList(t,e){let n=e-1;if(n<0)return null;let i=t[n];return this.isOptionDisabled(i)?this.findPrevOption(n):i},onClearClick(t){this.updateModel(t,null)},onClick(t){this.disabled||this.loading||oe.hasClass(t.target,"p-dropdown-clear-icon")||t.target.tagName==="INPUT"||(!this.overlay||!this.overlay.contains(t.target))&&(this.overlayVisible?this.hide():this.show(),this.$refs.focusInput.focus())},onOptionSelect(t,e){let n=this.getOptionValue(e);this.updateModel(t,n),this.$refs.focusInput.focus(),setTimeout(()=>{this.hide()},200)},onEditableInput(t){this.$emit("update:modelValue",t.target.value)},onOverlayEnter(t){if(gn.set("overlay",t,this.$primevue.config.zIndex.overlay),this.alignOverlay(),this.scrollValueInView(),!this.virtualScrollerDisabled){const e=this.getSelectedOptionIndex();e!==-1&&setTimeout(()=>{this.virtualScroller&&this.virtualScroller.scrollToIndex(e)},0)}},onOverlayAfterEnter(){this.filter&&this.$refs.filterInput.focus(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.itemsWrapper=null,this.overlay=null},onOverlayAfterLeave(t){gn.clear(t)},alignOverlay(){this.appendTo==="self"?oe.relativePosition(this.overlay,this.$el):(this.overlay.style.minWidth=oe.getOuterWidth(this.$el)+"px",oe.absolutePosition(this.overlay,this.$el))},updateModel(t,e){this.$emit("update:modelValue",e),this.$emit("change",{originalEvent:t,value:e})},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.overlayVisible&&this.overlay&&!this.$el.contains(t.target)&&!this.overlay.contains(t.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lu(this.$refs.container,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!oe.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},search(t){if(!this.visibleOptions)return;this.searchTimeout&&clearTimeout(this.searchTimeout);const e=t.key;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=e,this.previousSearchChar===this.currentSearchChar?this.searchValue=this.currentSearchChar:this.searchValue=this.searchValue?this.searchValue+e:e,this.searchValue){let n=this.getSelectedOptionIndex(),i=this.optionGroupLabel?this.searchOptionInGroup(n):this.searchOption(++n);i&&this.updateModel(t,this.getOptionValue(i))}this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)},searchOption(t){let e;return this.searchValue&&(e=this.searchOptionInRange(t,this.visibleOptions.length),e||(e=this.searchOptionInRange(0,t))),e},searchOptionInRange(t,e){for(let n=t;n<e;n++){let i=this.visibleOptions[n];if(this.matchesSearchValue(i))return i}return null},searchOptionInGroup(t){let e=t===-1?{group:0,option:-1}:t;for(let n=e.group;n<this.visibleOptions.length;n++){let i=this.getOptionGroupChildren(this.visibleOptions[n]);for(let s=e.group===n?e.option+1:0;s<i.length;s++)if(this.matchesSearchValue(i[s]))return i[s]}for(let n=0;n<=e.group;n++){let i=this.getOptionGroupChildren(this.visibleOptions[n]);for(let s=0;s<(e.group===n?e.option:i.length);s++)if(this.matchesSearchValue(i[s]))return i[s]}return null},matchesSearchValue(t){return this.getOptionLabel(t).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))},onFilterChange(t){this.filterValue=t.target.value,this.$emit("filter",{originalEvent:t,value:t.target.value})},onFilterUpdated(){this.overlayVisible&&this.alignOverlay()},overlayRef(t){this.overlay=t},itemsWrapperRef(t){this.itemsWrapper=t},virtualScrollerRef(t){this.virtualScroller=t},scrollValueInView(){if(this.overlay){let t=oe.findSingle(this.overlay,"li.p-highlight");t&&t.scrollIntoView({block:"nearest",inline:"start"})}},onOverlayClick(t){as.emit("overlay-click",{originalEvent:t,target:this.$el})}},computed:{visibleOptions(){if(this.filterValue)if(this.optionGroupLabel){let t=[];for(let e of this.options){let n=Oc.filter(this.getOptionGroupChildren(e),this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(n&&n.length){let i={...e};i[this.optionGroupChildren]=n,t.push(i)}}return t}else return Oc.filter(this.options,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);else return this.options},containerClass(){return["p-dropdown p-component p-inputwrapper",{"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue,"p-inputwrapper-focus":this.focused||this.overlayVisible}]},labelClass(){return["p-dropdown-label p-inputtext",{"p-placeholder":this.label===this.placeholder,"p-dropdown-label-empty":!this.$slots.value&&(this.label==="p-emptylabel"||this.label.length===0)}]},panelStyleClass(){return["p-dropdown-panel p-component",this.panelClass,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},label(){let t=this.getSelectedOption();return t!==null?this.getOptionLabel(t):this.placeholder||"p-emptylabel"},editableInputValue(){let t=this.getSelectedOption();return t?this.getOptionLabel(t):this.modelValue},equalityKey(){return this.optionValue?null:this.dataKey},searchFields(){return this.filterFields||[this.optionLabel]},emptyFilterMessageText(){return this.emptyFilterMessage||this.$primevue.config.locale.emptyFilterMessage},emptyMessageText(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage},virtualScrollerDisabled(){return!this.virtualScrollerOptions},dropdownIconClass(){return["p-dropdown-trigger-icon",this.loading?this.loadingIcon:"pi pi-chevron-down"]}},directives:{ripple:mi},components:{VirtualScroller:Tf,Portal:Go}};const ET={class:"p-hidden-accessible"},DT=["id","disabled","tabindex","aria-expanded","aria-labelledby"],PT=["disabled","placeholder","value","aria-expanded"],LT=["aria-expanded"],RT={key:0,class:"p-dropdown-header"},AT={class:"p-dropdown-filter-container"},IT=["value","placeholder"],kT=we("span",{class:"p-dropdown-filter-icon pi pi-search"},null,-1),OT=["onClick","aria-label","aria-selected"],FT={class:"p-dropdown-item-group"},NT=["onClick","aria-label","aria-selected"],BT={key:2,class:"p-dropdown-empty-message"},zT={key:3,class:"p-dropdown-empty-message"};function VT(t,e,n,i,s,r){const o=Ke("VirtualScroller"),a=Ke("Portal"),l=on("ripple");return k(),X("div",{ref:"container",class:Ie(r.containerClass),onClick:e[11]||(e[11]=c=>r.onClick(c))},[we("div",ET,[we("input",{ref:"focusInput",type:"text",id:n.inputId,readonly:"",disabled:n.disabled,onFocus:e[0]||(e[0]=(...c)=>r.onFocus&&r.onFocus(...c)),onBlur:e[1]||(e[1]=(...c)=>r.onBlur&&r.onBlur(...c)),onKeydown:e[2]||(e[2]=(...c)=>r.onKeyDown&&r.onKeyDown(...c)),tabindex:n.tabindex,"aria-haspopup":"true","aria-expanded":s.overlayVisible,"aria-labelledby":n.ariaLabelledBy},null,40,DT)]),n.editable?(k(),X("input",{key:0,type:"text",class:"p-dropdown-label p-inputtext",disabled:n.disabled,onFocus:e[3]||(e[3]=(...c)=>r.onFocus&&r.onFocus(...c)),onBlur:e[4]||(e[4]=(...c)=>r.onBlur&&r.onBlur(...c)),placeholder:n.placeholder,value:r.editableInputValue,onInput:e[5]||(e[5]=(...c)=>r.onEditableInput&&r.onEditableInput(...c)),"aria-haspopup":"listbox","aria-expanded":s.overlayVisible},null,40,PT)):Ce("",!0),n.editable?Ce("",!0):(k(),X("span",{key:1,class:Ie(r.labelClass)},[gt(t.$slots,"value",{value:n.modelValue,placeholder:n.placeholder},()=>[vn(it(r.label||"empty"),1)])],2)),n.showClear&&n.modelValue!=null?(k(),X("i",{key:2,class:"p-dropdown-clear-icon pi pi-times",onClick:e[6]||(e[6]=c=>r.onClearClick(c))})):Ce("",!0),we("div",{class:"p-dropdown-trigger",role:"button","aria-haspopup":"listbox","aria-expanded":s.overlayVisible},[gt(t.$slots,"indicator",{},()=>[we("span",{class:Ie(r.dropdownIconClass)},null,2)])],8,LT),he(a,{appendTo:n.appendTo},{default:Xe(()=>[he(Ur,{name:"p-connected-overlay",onEnter:r.onOverlayEnter,onAfterEnter:r.onOverlayAfterEnter,onLeave:r.onOverlayLeave,onAfterLeave:r.onOverlayAfterLeave},{default:Xe(()=>[s.overlayVisible?(k(),X("div",{key:0,ref:r.overlayRef,class:Ie(r.panelStyleClass),onClick:e[10]||(e[10]=(...c)=>r.onOverlayClick&&r.onOverlayClick(...c))},[gt(t.$slots,"header",{value:n.modelValue,options:r.visibleOptions}),n.filter?(k(),X("div",RT,[we("div",AT,[we("input",{type:"text",ref:"filterInput",value:s.filterValue,onVnodeUpdated:e[7]||(e[7]=(...c)=>r.onFilterUpdated&&r.onFilterUpdated(...c)),autoComplete:"off",class:"p-dropdown-filter p-inputtext p-component",placeholder:n.filterPlaceholder,onKeydown:e[8]||(e[8]=(...c)=>r.onFilterKeyDown&&r.onFilterKeyDown(...c)),onInput:e[9]||(e[9]=(...c)=>r.onFilterChange&&r.onFilterChange(...c))},null,40,IT),kT])])):Ce("",!0),we("div",{ref:r.itemsWrapperRef,class:"p-dropdown-items-wrapper",style:Ot({"max-height":r.virtualScrollerDisabled?n.scrollHeight:""})},[he(o,dn({ref:r.virtualScrollerRef},n.virtualScrollerOptions,{items:r.visibleOptions,style:{height:n.scrollHeight},disabled:r.virtualScrollerDisabled}),sh({content:Xe(({styleClass:c,contentRef:u,items:d,getItemOptions:h,contentStyle:p})=>[we("ul",{ref:u,class:Ie(["p-dropdown-items",c]),style:Ot(p),role:"listbox"},[n.optionGroupLabel?(k(!0),X(je,{key:1},Vt(d,(g,m)=>(k(),X(je,{key:r.getOptionGroupRenderKey(g)},[we("li",FT,[gt(t.$slots,"optiongroup",{option:g,index:r.getOptionIndex(m,h)},()=>[vn(it(r.getOptionGroupLabel(g)),1)])]),(k(!0),X(je,null,Vt(r.getOptionGroupChildren(g),(f,b)=>bt((k(),X("li",{class:Ie(["p-dropdown-item",{"p-highlight":r.isSelected(f),"p-disabled":r.isOptionDisabled(f)}]),key:r.getOptionRenderKey(f,b),onClick:x=>r.onOptionSelect(x,f),role:"option","aria-label":r.getOptionLabel(f),"aria-selected":r.isSelected(f)},[gt(t.$slots,"option",{option:f,index:r.getOptionIndex(b,h)},()=>[vn(it(r.getOptionLabel(f)),1)])],10,NT)),[[l]])),128))],64))),128)):(k(!0),X(je,{key:0},Vt(d,(g,m)=>bt((k(),X("li",{class:Ie(["p-dropdown-item",{"p-highlight":r.isSelected(g),"p-disabled":r.isOptionDisabled(g)}]),key:r.getOptionRenderKey(g,m),onClick:f=>r.onOptionSelect(f,g),role:"option","aria-label":r.getOptionLabel(g),"aria-selected":r.isSelected(g)},[gt(t.$slots,"option",{option:g,index:r.getOptionIndex(m,h)},()=>[vn(it(r.getOptionLabel(g)),1)])],10,OT)),[[l]])),128)),s.filterValue&&(!d||d&&d.length===0)?(k(),X("li",BT,[gt(t.$slots,"emptyfilter",{},()=>[vn(it(r.emptyFilterMessageText),1)])])):!n.options||n.options&&n.options.length===0?(k(),X("li",zT,[gt(t.$slots,"empty",{},()=>[vn(it(r.emptyMessageText),1)])])):Ce("",!0)],6)]),_:2},[t.$slots.loader?{name:"loader",fn:Xe(({options:c})=>[gt(t.$slots,"loader",{options:c})])}:void 0]),1040,["items","style","disabled"])],4),gt(t.$slots,"footer",{value:n.modelValue,options:r.visibleOptions})],2)):Ce("",!0)]),_:3},8,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]),_:3},8,["appendTo"])],2)}function UT(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var HT=`
.p-dropdown {
    display: -webkit-inline-box;
    display: -ms-inline-flexbox;
    display: inline-flex;
    cursor: pointer;
    position: relative;
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
}
.p-dropdown-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -.5rem;
}
.p-dropdown-trigger {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    -ms-flex-negative: 0;
        flex-shrink: 0;
}
.p-dropdown-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    -webkit-box-flex: 1;
        -ms-flex: 1 1 auto;
            flex: 1 1 auto;
    width: 1%;
    text-overflow: ellipsis;
    cursor: pointer;
}
.p-dropdown-label-empty {
    overflow: hidden;
    visibility: hidden;
}
input.p-dropdown-label  {
    cursor: default;
}
.p-dropdown .p-dropdown-panel {
    min-width: 100%;
}
.p-dropdown-panel {
    position: absolute;
    top: 0;
    left: 0;
}
.p-dropdown-items-wrapper {
    overflow: auto;
}
.p-dropdown-item {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
}
.p-dropdown-item-group {
    cursor: auto;
}
.p-dropdown-items {
    margin: 0;
    padding: 0;
    list-style-type: none;
}
.p-dropdown-filter {
    width: 100%;
}
.p-dropdown-filter-container {
    position: relative;
}
.p-dropdown-filter-icon {
    position: absolute;
    top: 50%;
    margin-top: -.5rem;
}
.p-fluid .p-dropdown {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
}
.p-fluid .p-dropdown .p-dropdown-label {
    width: 1%;
}
`;UT(HT);fu.render=VT;var q0={name:"InputNumber",inheritAttrs:!1,emits:["update:modelValue","input","focus","blur"],props:{modelValue:{type:Number,default:null},format:{type:Boolean,default:!0},showButtons:{type:Boolean,default:!1},buttonLayout:{type:String,default:"stacked"},incrementButtonClass:{type:String,default:null},decrementButtonClass:{type:String,default:null},incrementButtonIcon:{type:String,default:"pi pi-angle-up"},decrementButtonIcon:{type:String,default:"pi pi-angle-down"},locale:{type:String,default:void 0},localeMatcher:{type:String,default:void 0},mode:{type:String,default:"decimal"},prefix:{type:String,default:null},suffix:{type:String,default:null},currency:{type:String,default:void 0},currencyDisplay:{type:String,default:void 0},useGrouping:{type:Boolean,default:!0},minFractionDigits:{type:Number,default:void 0},maxFractionDigits:{type:Number,default:void 0},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:1},allowEmpty:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},style:null,class:null,inputStyle:null,inputClass:null},numberFormat:null,_numeral:null,_decimal:null,_group:null,_minusSign:null,_currency:null,_suffix:null,_prefix:null,_index:null,groupChar:"",isSpecialChar:null,prefixChar:null,suffixChar:null,timer:null,data(){return{d_modelValue:this.modelValue,focused:!1}},watch:{modelValue(t){this.d_modelValue=t},locale(t,e){this.updateConstructParser(t,e)},localeMatcher(t,e){this.updateConstructParser(t,e)},mode(t,e){this.updateConstructParser(t,e)},currency(t,e){this.updateConstructParser(t,e)},currencyDisplay(t,e){this.updateConstructParser(t,e)},useGrouping(t,e){this.updateConstructParser(t,e)},minFractionDigits(t,e){this.updateConstructParser(t,e)},maxFractionDigits(t,e){this.updateConstructParser(t,e)},suffix(t,e){this.updateConstructParser(t,e)},prefix(t,e){this.updateConstructParser(t,e)}},created(){this.constructParser()},methods:{getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}},constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),e=new Map(t.map((n,i)=>[n,i]));this._numeral=new RegExp(`[${t.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=n=>e.get(n)},updateConstructParser(t,e){t!==e&&this.constructParser()},escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},getDecimalExpression(){const t=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${t.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")},getGroupingExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=t.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")},getMinusSignExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${t.format(-1).trim().replace(this._numeral,"")}]`,"g")},getCurrencyExpression(){if(this.currency){const t=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${t.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")},getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=t.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")},getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=t.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")},formatValue(t){if(t!=null){if(t==="-")return t;if(this.format){let n=new Intl.NumberFormat(this.locale,this.getOptions()).format(t);return this.prefix&&(n=this.prefix+n),this.suffix&&(n=n+this.suffix),n}return t.toString()}return""},parseValue(t){let e=t.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(e){if(e==="-")return e;let n=+e;return isNaN(n)?null:n}return null},repeat(t,e,n){if(this.readonly)return;let i=e||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,40,n)},i),this.spin(t,n)},spin(t,e){if(this.$refs.input){let n=this.step*e,i=this.parseValue(this.$refs.input.$el.value)||0,s=this.validateValue(i+n);this.updateInput(s,null,"spin"),this.updateModel(t,s),this.handleOnInput(t,i,s)}},onUpButtonMouseDown(t){this.$attrs.disabled||(this.$refs.input.$el.focus(),this.repeat(t,null,1),t.preventDefault())},onUpButtonMouseUp(){this.$attrs.disabled||this.clearTimer()},onUpButtonMouseLeave(){this.$attrs.disabled||this.clearTimer()},onUpButtonKeyUp(){this.$attrs.disabled||this.clearTimer()},onUpButtonKeyDown(t){(t.keyCode===32||t.keyCode===13)&&this.repeat(t,null,1)},onDownButtonMouseDown(t){this.$attrs.disabled||(this.$refs.input.$el.focus(),this.repeat(t,null,-1),t.preventDefault())},onDownButtonMouseUp(){this.$attrs.disabled||this.clearTimer()},onDownButtonMouseLeave(){this.$attrs.disabled||this.clearTimer()},onDownButtonKeyUp(){this.$attrs.disabled||this.clearTimer()},onDownButtonKeyDown(t){(t.keyCode===32||t.keyCode===13)&&this.repeat(t,null,-1)},onUserInput(){this.isSpecialChar&&(this.$refs.input.$el.value=this.lastValue),this.isSpecialChar=!1},onInputKeyDown(t){if(this.readonly)return;if(this.lastValue=t.target.value,t.shiftKey||t.altKey){this.isSpecialChar=!0;return}let e=t.target.selectionStart,n=t.target.selectionEnd,i=t.target.value,s=null;switch(t.altKey&&t.preventDefault(),t.which){case 38:this.spin(t,1),t.preventDefault();break;case 40:this.spin(t,-1),t.preventDefault();break;case 37:this.isNumeralChar(i.charAt(e-1))||t.preventDefault();break;case 39:this.isNumeralChar(i.charAt(e))||t.preventDefault();break;case 9:case 13:s=this.validateValue(this.parseValue(i)),this.$refs.input.$el.value=this.formatValue(s),this.$refs.input.$el.setAttribute("aria-valuenow",s),this.updateModel(t,s);break;case 8:{if(t.preventDefault(),e===n){const r=i.charAt(e-1),{decimalCharIndex:o,decimalCharIndexWithoutPrefix:a}=this.getDecimalCharIndexes(i);if(this.isNumeralChar(r)){const l=this.getDecimalLength(i);if(this._group.test(r))this._group.lastIndex=0,s=i.slice(0,e-2)+i.slice(e-1);else if(this._decimal.test(r))this._decimal.lastIndex=0,l?this.$refs.input.$el.setSelectionRange(e-1,e-1):s=i.slice(0,e-1)+i.slice(e);else if(o>0&&e>o){const c=this.isDecimalMode()&&(this.minFractionDigits||0)<l?"":"0";s=i.slice(0,e-1)+c+i.slice(e)}else a===1?(s=i.slice(0,e-1)+"0"+i.slice(e),s=this.parseValue(s)>0?s:""):s=i.slice(0,e-1)+i.slice(e)}this.updateValue(t,s,null,"delete-single")}else s=this.deleteRange(i,e,n),this.updateValue(t,s,null,"delete-range");break}case 46:if(t.preventDefault(),e===n){const r=i.charAt(e),{decimalCharIndex:o,decimalCharIndexWithoutPrefix:a}=this.getDecimalCharIndexes(i);if(this.isNumeralChar(r)){const l=this.getDecimalLength(i);if(this._group.test(r))this._group.lastIndex=0,s=i.slice(0,e)+i.slice(e+2);else if(this._decimal.test(r))this._decimal.lastIndex=0,l?this.$refs.input.$el.setSelectionRange(e+1,e+1):s=i.slice(0,e)+i.slice(e+1);else if(o>0&&e>o){const c=this.isDecimalMode()&&(this.minFractionDigits||0)<l?"":"0";s=i.slice(0,e)+c+i.slice(e+1)}else a===1?(s=i.slice(0,e)+"0"+i.slice(e+1),s=this.parseValue(s)>0?s:""):s=i.slice(0,e)+i.slice(e+1)}this.updateValue(t,s,null,"delete-back-single")}else s=this.deleteRange(i,e,n),this.updateValue(t,s,null,"delete-range");break}},onInputKeyPress(t){if(this.readonly)return;t.preventDefault();let e=t.which||t.keyCode,n=String.fromCharCode(e);const i=this.isDecimalSign(n),s=this.isMinusSign(n);(48<=e&&e<=57||s||i)&&this.insert(t,n,{isDecimalSign:i,isMinusSign:s})},onPaste(t){t.preventDefault();let e=(t.clipboardData||window.clipboardData).getData("Text");if(e){let n=this.parseValue(e);n!=null&&this.insert(t,n.toString())}},allowMinusSign(){return this.min===null||this.min<0},isMinusSign(t){return this._minusSign.test(t)||t==="-"?(this._minusSign.lastIndex=0,!0):!1},isDecimalSign(t){return this._decimal.test(t)?(this._decimal.lastIndex=0,!0):!1},isDecimalMode(){return this.mode==="decimal"},getDecimalCharIndexes(t){let e=t.search(this._decimal);this._decimal.lastIndex=0;const i=t.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:e,decimalCharIndexWithoutPrefix:i}},getCharIndexes(t){const e=t.search(this._decimal);this._decimal.lastIndex=0;const n=t.search(this._minusSign);this._minusSign.lastIndex=0;const i=t.search(this._suffix);this._suffix.lastIndex=0;const s=t.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:e,minusCharIndex:n,suffixCharIndex:i,currencyCharIndex:s}},insert(t,e,n={isDecimalSign:!1,isMinusSign:!1}){const i=e.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&i!==-1)return;const s=this.$refs.input.$el.selectionStart,r=this.$refs.input.$el.selectionEnd;let o=this.$refs.input.$el.value.trim();const{decimalCharIndex:a,minusCharIndex:l,suffixCharIndex:c,currencyCharIndex:u}=this.getCharIndexes(o);let d;if(n.isMinusSign)s===0&&(d=o,(l===-1||r!==0)&&(d=this.insertText(o,e,0,r)),this.updateValue(t,d,e,"insert"));else if(n.isDecimalSign)a>0&&s===a?this.updateValue(t,o,e,"insert"):a>s&&a<r?(d=this.insertText(o,e,s,r),this.updateValue(t,d,e,"insert")):a===-1&&this.maxFractionDigits&&(d=this.insertText(o,e,s,r),this.updateValue(t,d,e,"insert"));else{const h=this.numberFormat.resolvedOptions().maximumFractionDigits,p=s!==r?"range-insert":"insert";if(a>0&&s>a){if(s+e.length-(a+1)<=h){const g=u>=s?u-1:c>=s?c:o.length;d=o.slice(0,s)+e+o.slice(s+e.length,g)+o.slice(g),this.updateValue(t,d,e,p)}}else d=this.insertText(o,e,s,r),this.updateValue(t,d,e,p)}},insertText(t,e,n,i){if((e==="."?e:e.split(".")).length===2){const r=t.slice(n,i).search(this._decimal);return this._decimal.lastIndex=0,r>0?t.slice(0,n)+this.formatValue(e)+t.slice(i):t||this.formatValue(e)}else return i-n===t.length?this.formatValue(e):n===0?e+t.slice(i):i===t.length?t.slice(0,n)+e:t.slice(0,n)+e+t.slice(i)},deleteRange(t,e,n){let i;return n-e===t.length?i="":e===0?i=t.slice(n):n===t.length?i=t.slice(0,e):i=t.slice(0,e)+t.slice(n),i},initCursor(){let t=this.$refs.input.$el.selectionStart,e=this.$refs.input.$el.value,n=e.length,i=null,s=(this.prefixChar||"").length;e=e.replace(this._prefix,""),t=t-s;let r=e.charAt(t);if(this.isNumeralChar(r))return t+s;let o=t-1;for(;o>=0;)if(r=e.charAt(o),this.isNumeralChar(r)){i=o+s;break}else o--;if(i!==null)this.$refs.input.$el.setSelectionRange(i+1,i+1);else{for(o=t;o<n;)if(r=e.charAt(o),this.isNumeralChar(r)){i=o+s;break}else o++;i!==null&&this.$refs.input.$el.setSelectionRange(i,i)}return i||0},onInputClick(){this.readonly||this.initCursor()},isNumeralChar(t){return t.length===1&&(this._numeral.test(t)||this._decimal.test(t)||this._group.test(t)||this._minusSign.test(t))?(this.resetRegex(),!0):!1},resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0},updateValue(t,e,n,i){let s=this.$refs.input.$el.value,r=null;e!=null&&(r=this.parseValue(e),r=!r&&!this.allowEmpty?0:r,this.updateInput(r,n,i,e),this.handleOnInput(t,s,r))},handleOnInput(t,e,n){this.isValueChanged(e,n)&&this.$emit("input",{originalEvent:t,value:n})},isValueChanged(t,e){if(e===null&&t!==null)return!0;if(e!=null){let n=typeof t=="string"?this.parseValue(t):t;return e!==n}return!1},validateValue(t){return t==="-"||t==null?null:this.min!=null&&t<this.min?this.min:this.max!=null&&t>this.max?this.max:t},updateInput(t,e,n,i){e=e||"";let s=this.$refs.input.$el.value,r=this.formatValue(t),o=s.length;if(r!==i&&(r=this.concatValues(r,i)),o===0){this.$refs.input.$el.value=r,this.$refs.input.$el.setSelectionRange(0,0);const l=this.initCursor()+e.length;this.$refs.input.$el.setSelectionRange(l,l)}else{let a=this.$refs.input.$el.selectionStart,l=this.$refs.input.$el.selectionEnd;this.$refs.input.$el.value=r;let c=r.length;if(n==="range-insert"){const u=this.parseValue((s||"").slice(0,a)),h=(u!==null?u.toString():"").split("").join(`(${this.groupChar})?`),p=new RegExp(h,"g");p.test(r);const g=e.split("").join(`(${this.groupChar})?`),m=new RegExp(g,"g");m.test(r.slice(p.lastIndex)),l=p.lastIndex+m.lastIndex,this.$refs.input.$el.setSelectionRange(l,l)}else if(c===o)n==="insert"||n==="delete-back-single"?this.$refs.input.$el.setSelectionRange(l+1,l+1):n==="delete-single"?this.$refs.input.$el.setSelectionRange(l-1,l-1):(n==="delete-range"||n==="spin")&&this.$refs.input.$el.setSelectionRange(l,l);else if(n==="delete-back-single"){let u=s.charAt(l-1),d=s.charAt(l),h=o-c,p=this._group.test(d);p&&h===1?l+=1:!p&&this.isNumeralChar(u)&&(l+=-1*h+1),this._group.lastIndex=0,this.$refs.input.$el.setSelectionRange(l,l)}else if(s==="-"&&n==="insert"){this.$refs.input.$el.setSelectionRange(0,0);const d=this.initCursor()+e.length+1;this.$refs.input.$el.setSelectionRange(d,d)}else l=l+(c-o),this.$refs.input.$el.setSelectionRange(l,l)}this.$refs.input.$el.setAttribute("aria-valuenow",t)},concatValues(t,e){if(t&&e){let n=e.search(this._decimal);return this._decimal.lastIndex=0,n!==-1?t.split(this._decimal)[0]+e.slice(n):t}return t},getDecimalLength(t){if(t){const e=t.split(this._decimal);if(e.length===2)return e[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0},updateModel(t,e){this.d_modelValue=e,this.$emit("update:modelValue",e)},onInputFocus(t){this.focused=!0,this.$emit("focus",t)},onInputBlur(t){this.focused=!1;let e=t.target,n=this.validateValue(this.parseValue(e.value));this.$emit("blur",{originalEvent:t,value:e.value}),e.value=this.formatValue(n),e.setAttribute("aria-valuenow",n),this.updateModel(t,n)},clearTimer(){this.timer&&clearInterval(this.timer)},maxBoundry(){return this.d_modelValue>=this.max},minBoundry(){return this.d_modelValue<=this.min}},computed:{containerClass(){return["p-inputnumber p-component p-inputwrapper",this.class,{"p-inputwrapper-filled":this.filled,"p-inputwrapper-focus":this.focused,"p-inputnumber-buttons-stacked":this.showButtons&&this.buttonLayout==="stacked","p-inputnumber-buttons-horizontal":this.showButtons&&this.buttonLayout==="horizontal","p-inputnumber-buttons-vertical":this.showButtons&&this.buttonLayout==="vertical"}]},upButtonClass(){return["p-inputnumber-button p-inputnumber-button-up",this.incrementButtonClass,{"p-disabled":this.showButtons&&this.max!==null&&this.maxBoundry()}]},downButtonClass(){return["p-inputnumber-button p-inputnumber-button-down",this.decrementButtonClass,{"p-disabled":this.showButtons&&this.min!==null&&this.minBoundry()}]},filled(){return this.modelValue!=null&&this.modelValue.toString().length>0},upButtonListeners(){return{mousedown:t=>this.onUpButtonMouseDown(t),mouseup:t=>this.onUpButtonMouseUp(t),mouseleave:t=>this.onUpButtonMouseLeave(t),keydown:t=>this.onUpButtonKeyDown(t),keyup:t=>this.onUpButtonKeyUp(t)}},downButtonListeners(){return{mousedown:t=>this.onDownButtonMouseDown(t),mouseup:t=>this.onDownButtonMouseUp(t),mouseleave:t=>this.onDownButtonMouseLeave(t),keydown:t=>this.onDownButtonKeyDown(t),keyup:t=>this.onDownButtonKeyUp(t)}},formattedValue(){const t=!this.modelValue&&!this.allowEmpty?0:this.modelValue;return this.formatValue(t)},getFormatter(){return this.numberFormat}},components:{INInputText:Cf,INButton:hu}};const WT={key:0,class:"p-inputnumber-button-group"};function GT(t,e,n,i,s,r){const o=Ke("INInputText"),a=Ke("INButton");return k(),X("span",{class:Ie(r.containerClass),style:Ot(n.style)},[he(o,dn({ref:"input",class:["p-inputnumber-input",n.inputClass],style:n.inputStyle,value:r.formattedValue},t.$attrs,{"aria-valumin":n.min,"aria-valuemax":n.max,readonly:n.readonly,onInput:r.onUserInput,onKeydown:r.onInputKeyDown,onKeypress:r.onInputKeyPress,onPaste:r.onPaste,onClick:r.onInputClick,onFocus:r.onInputFocus,onBlur:r.onInputBlur}),null,16,["class","style","value","aria-valumin","aria-valuemax","readonly","onInput","onKeydown","onKeypress","onPaste","onClick","onFocus","onBlur"]),n.showButtons&&n.buttonLayout==="stacked"?(k(),X("span",WT,[he(a,dn({class:r.upButtonClass,icon:n.incrementButtonIcon},ks(r.upButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"]),he(a,dn({class:r.downButtonClass,icon:n.decrementButtonIcon},ks(r.downButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])])):Ce("",!0),n.showButtons&&n.buttonLayout!=="stacked"?(k(),Ve(a,dn({key:1,class:r.upButtonClass,icon:n.incrementButtonIcon},ks(r.upButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])):Ce("",!0),n.showButtons&&n.buttonLayout!=="stacked"?(k(),Ve(a,dn({key:2,class:r.downButtonClass,icon:n.decrementButtonIcon},ks(r.downButtonListeners),{disabled:t.$attrs.disabled}),null,16,["class","icon","disabled"])):Ce("",!0)],6)}function jT(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var $T=`
.p-inputnumber {
    display: -webkit-inline-box;
    display: -ms-inline-flexbox;
    display: inline-flex;
}
.p-inputnumber-button {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    -webkit-box-flex: 0;
        -ms-flex: 0 0 auto;
            flex: 0 0 auto;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label {
    display: none;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    padding: 0;
}
.p-inputnumber-buttons-stacked .p-inputnumber-input {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    border-bottom-left-radius: 0;
    padding: 0;
}
.p-inputnumber-buttons-stacked .p-inputnumber-button-group {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}
.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button {
    -webkit-box-flex: 1;
        -ms-flex: 1 1 auto;
            flex: 1 1 auto;
}
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up {
    -webkit-box-ordinal-group: 4;
        -ms-flex-order: 3;
            order: 3;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
.p-inputnumber-buttons-horizontal .p-inputnumber-input {
    -webkit-box-ordinal-group: 3;
        -ms-flex-order: 2;
            order: 2;
    border-radius: 0;
}
.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down {
    -webkit-box-ordinal-group: 2;
        -ms-flex-order: 1;
            order: 1;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.p-inputnumber-buttons-vertical {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}
.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up {
    -webkit-box-ordinal-group: 2;
        -ms-flex-order: 1;
            order: 1;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    width: 100%;
}
.p-inputnumber-buttons-vertical .p-inputnumber-input {
    -webkit-box-ordinal-group: 3;
        -ms-flex-order: 2;
            order: 2;
    border-radius: 0;
    text-align: center;
}
.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down {
    -webkit-box-ordinal-group: 4;
        -ms-flex-order: 3;
            order: 3;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    width: 100%;
}
.p-inputnumber-input {
    -webkit-box-flex: 1;
        -ms-flex: 1 1 auto;
            flex: 1 1 auto;
}
.p-fluid .p-inputnumber {
    width: 100%;
}
.p-fluid .p-inputnumber .p-inputnumber-input {
    width: 1%;
}
.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input {
    width: 100%;
}
`;jT($T);q0.render=GT;var Z0={name:"CurrentPageReport",inheritAttrs:!1,props:{pageCount:{type:Number,default:0},currentPage:{type:Number,default:0},page:{type:Number,default:0},first:{type:Number,default:0},rows:{type:Number,default:0},totalRecords:{type:Number,default:0},template:{type:String,default:"({currentPage} of {totalPages})"}},computed:{text(){return this.template.replace("{currentPage}",this.currentPage).replace("{totalPages}",this.pageCount).replace("{first}",this.pageCount>0?this.first+1:0).replace("{last}",Math.min(this.first+this.rows,this.totalRecords)).replace("{rows}",this.rows).replace("{totalRecords}",this.totalRecords)}}};const KT={class:"p-paginator-current"};function XT(t,e,n,i,s,r){return k(),X("span",KT,it(r.text),1)}Z0.render=XT;var J0={name:"FirstPageLink",computed:{containerClass(){return["p-paginator-first p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},directives:{ripple:mi}};const YT=we("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1),qT=[YT];function ZT(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.containerClass),type:"button"},qT,2)),[[o]])}J0.render=ZT;var Q0={name:"LastPageLink",computed:{containerClass(){return["p-paginator-last p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},directives:{ripple:mi}};const JT=we("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1),QT=[JT];function eE(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.containerClass),type:"button"},QT,2)),[[o]])}Q0.render=eE;var ex={name:"NextPageLink",computed:{containerClass(){return["p-paginator-next p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},directives:{ripple:mi}};const tE=we("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1),nE=[tE];function iE(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.containerClass),type:"button"},nE,2)),[[o]])}ex.render=iE;var tx={name:"PageLinks",inheritAttrs:!1,emits:["click"],props:{value:Array,page:Number},methods:{onPageLinkClick(t,e){this.$emit("click",{originalEvent:t,value:e})}},directives:{ripple:mi}};const sE={class:"p-paginator-pages"},rE=["onClick"];function oE(t,e,n,i,s,r){const o=on("ripple");return k(),X("span",sE,[(k(!0),X(je,null,Vt(n.value,a=>bt((k(),X("button",{key:a,class:Ie(["p-paginator-page p-paginator-element p-link",{"p-highlight":a-1===n.page}]),type:"button",onClick:l=>r.onPageLinkClick(l,a)},[vn(it(a),1)],10,rE)),[[o]])),128))])}tx.render=oE;var nx={name:"PrevPageLink",computed:{containerClass(){return["p-paginator-prev p-paginator-element p-link",{"p-disabled":this.$attrs.disabled}]}},directives:{ripple:mi}};const aE=we("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1),lE=[aE];function cE(t,e,n,i,s,r){const o=on("ripple");return bt((k(),X("button",{class:Ie(r.containerClass),type:"button"},lE,2)),[[o]])}nx.render=cE;var ix={name:"RowsPerPageDropdown",inheritAttrs:!1,emits:["rows-change"],props:{options:Array,rows:Number,disabled:Boolean},methods:{onChange(t){this.$emit("rows-change",t)}},computed:{rowsOptions(){let t=[];if(this.options)for(let e=0;e<this.options.length;e++)t.push({label:String(this.options[e]),value:this.options[e]});return t}},components:{RPPDropdown:fu}};function uE(t,e,n,i,s,r){const o=Ke("RPPDropdown");return k(),Ve(o,{modelValue:n.rows,options:r.rowsOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=a=>r.onChange(a)),class:"p-paginator-rpp-options",disabled:n.disabled},null,8,["modelValue","options","disabled"])}ix.render=uE;var sx={name:"JumpToPageDropdown",inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},methods:{onChange(t){this.$emit("page-change",t)}},computed:{pageOptions(){let t=[];for(let e=0;e<this.pageCount;e++)t.push({label:String(e+1),value:e});return t}},components:{JTPDropdown:fu}};function dE(t,e,n,i,s,r){const o=Ke("JTPDropdown");return k(),Ve(o,{modelValue:n.page,options:r.pageOptions,optionLabel:"label",optionValue:"value","onUpdate:modelValue":e[0]||(e[0]=a=>r.onChange(a)),class:"p-paginator-page-options",disabled:n.disabled},null,8,["modelValue","options","disabled"])}sx.render=dE;var rx={name:"JumpToPageInput",inheritAttrs:!1,emits:["page-change"],props:{page:Number,pageCount:Number,disabled:Boolean},methods:{onChange(t){this.$emit("page-change",t-1)}},components:{JTPInput:q0}};function hE(t,e,n,i,s,r){const o=Ke("JTPInput");return k(),Ve(o,{modelValue:n.page,"onUpdate:modelValue":e[0]||(e[0]=a=>r.onChange(a)),class:"p-paginator-page-input",disabled:n.disabled},null,8,["modelValue","disabled"])}rx.render=hE;var ox={name:"Paginator",emits:["update:first","update:rows","page"],props:{totalRecords:{type:Number,default:0},rows:{type:Number,default:0},first:{type:Number,default:0},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},template:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},currentPageReportTemplate:{type:null,default:"({currentPage} of {totalPages})"},alwaysShow:{type:Boolean,default:!0}},data(){return{d_first:this.first,d_rows:this.rows}},watch:{first(t){this.d_first=t},rows(t){this.d_rows=t},totalRecords(t){this.page>0&&t&&this.d_first>=t&&this.changePage(this.pageCount-1)}},methods:{changePage(t){const e=this.pageCount;if(t>=0&&t<e){this.d_first=this.d_rows*t;const n={page:t,first:this.d_first,rows:this.d_rows,pageCount:e};this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",n)}},changePageToFirst(t){this.isFirstPage||this.changePage(0),t.preventDefault()},changePageToPrev(t){this.changePage(this.page-1),t.preventDefault()},changePageLink(t){this.changePage(t.value-1),t.originalEvent.preventDefault()},changePageToNext(t){this.changePage(this.page+1),t.preventDefault()},changePageToLast(t){this.isLastPage||this.changePage(this.pageCount-1),t.preventDefault()},onRowChange(t){this.d_rows=t,this.changePage(this.page)}},computed:{templateItems(){let t=[];return this.template.split(" ").map(e=>{t.push(e.trim())}),t},page(){return Math.floor(this.d_first/this.d_rows)},pageCount(){return Math.ceil(this.totalRecords/this.d_rows)},isFirstPage(){return this.page===0},isLastPage(){return this.page===this.pageCount-1},calculatePageLinkBoundaries(){const t=this.pageCount,e=Math.min(this.pageLinkSize,t);let n=Math.max(0,Math.ceil(this.page-e/2)),i=Math.min(t-1,n+e-1);const s=this.pageLinkSize-(i-n+1);return n=Math.max(0,n-s),[n,i]},pageLinks(){let t=[],e=this.calculatePageLinkBoundaries,n=e[0],i=e[1];for(var s=n;s<=i;s++)t.push(s+1);return t},currentState(){return{page:this.page,first:this.d_first,rows:this.d_rows}},empty(){return this.pageCount===0},currentPage(){return this.pageCount>0?this.page+1:0}},components:{CurrentPageReport:Z0,FirstPageLink:J0,LastPageLink:Q0,NextPageLink:ex,PageLinks:tx,PrevPageLink:nx,RowsPerPageDropdown:ix,JumpToPageDropdown:sx,JumpToPageInput:rx}};const fE={key:0,class:"p-paginator p-component"},pE={key:0,class:"p-paginator-left-content"},mE={key:1,class:"p-paginator-right-content"};function gE(t,e,n,i,s,r){const o=Ke("FirstPageLink"),a=Ke("PrevPageLink"),l=Ke("NextPageLink"),c=Ke("LastPageLink"),u=Ke("PageLinks"),d=Ke("CurrentPageReport"),h=Ke("RowsPerPageDropdown"),p=Ke("JumpToPageDropdown"),g=Ke("JumpToPageInput");return n.alwaysShow||r.pageLinks&&r.pageLinks.length>1?(k(),X("div",fE,[t.$slots.start?(k(),X("div",pE,[gt(t.$slots,"start",{state:r.currentState})])):Ce("",!0),(k(!0),X(je,null,Vt(r.templateItems,m=>(k(),X(je,{key:m},[m==="FirstPageLink"?(k(),Ve(o,{key:0,onClick:e[0]||(e[0]=f=>r.changePageToFirst(f)),disabled:r.isFirstPage||r.empty},null,8,["disabled"])):m==="PrevPageLink"?(k(),Ve(a,{key:1,onClick:e[1]||(e[1]=f=>r.changePageToPrev(f)),disabled:r.isFirstPage||r.empty},null,8,["disabled"])):m==="NextPageLink"?(k(),Ve(l,{key:2,onClick:e[2]||(e[2]=f=>r.changePageToNext(f)),disabled:r.isLastPage||r.empty},null,8,["disabled"])):m==="LastPageLink"?(k(),Ve(c,{key:3,onClick:e[3]||(e[3]=f=>r.changePageToLast(f)),disabled:r.isLastPage||r.empty},null,8,["disabled"])):m==="PageLinks"?(k(),Ve(u,{key:4,value:r.pageLinks,page:r.page,onClick:e[4]||(e[4]=f=>r.changePageLink(f))},null,8,["value","page"])):m==="CurrentPageReport"?(k(),Ve(d,{key:5,template:n.currentPageReportTemplate,currentPage:r.currentPage,page:r.page,pageCount:r.pageCount,first:s.d_first,rows:s.d_rows,totalRecords:n.totalRecords},null,8,["template","currentPage","page","pageCount","first","rows","totalRecords"])):m==="RowsPerPageDropdown"&&n.rowsPerPageOptions?(k(),Ve(h,{key:6,rows:s.d_rows,options:n.rowsPerPageOptions,onRowsChange:e[5]||(e[5]=f=>r.onRowChange(f)),disabled:r.empty},null,8,["rows","options","disabled"])):m==="JumpToPageDropdown"?(k(),Ve(p,{key:7,page:r.page,pageCount:r.pageCount,onPageChange:e[6]||(e[6]=f=>r.changePage(f)),disabled:r.empty},null,8,["page","pageCount","disabled"])):m==="JumpToPageInput"?(k(),Ve(g,{key:8,page:r.currentPage,onPageChange:e[7]||(e[7]=f=>r.changePage(f)),disabled:r.empty},null,8,["page","disabled"])):Ce("",!0)],64))),128)),t.$slots.end?(k(),X("div",mE,[gt(t.$slots,"end",{state:r.currentState})])):Ce("",!0)])):Ce("",!0)}function bE(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var yE=`
.p-paginator {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    -ms-flex-wrap: wrap;
        flex-wrap: wrap;
}
.p-paginator-left-content {
	margin-right: auto;
}
.p-paginator-right-content {
	margin-left: auto;
}
.p-paginator-page,
.p-paginator-next,
.p-paginator-last,
.p-paginator-first,
.p-paginator-prev,
.p-paginator-current {
    cursor: pointer;
    display: -webkit-inline-box;
    display: -ms-inline-flexbox;
    display: inline-flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    line-height: 1;
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
    overflow: hidden;
    position: relative;
}
.p-paginator-element:focus {
    z-index: 1;
    position: relative;
}
`;bE(yE);ox.render=gE;const xE={name:"HeaderCheckbox",inheritAttrs:!1,emits:["change"],props:{checked:null},data(){return{focused:!1}},methods:{onClick(t){this.$attrs.disabled||(this.focused=!0,this.$emit("change",{originalEvent:t,checked:!this.checked}))},onFocus(){this.focused=!0},onBlur(){this.focused=!1}}},vE=["aria-checked","tabindex"];function _E(t,e,n,i,s,r){return k(),X("div",{class:Ie(["p-checkbox p-component",{"p-checkbox-focused":s.focused,"p-disabled":t.$attrs.disabled}]),onClick:e[2]||(e[2]=(...o)=>r.onClick&&r.onClick(...o)),onKeydown:e[3]||(e[3]=Pr(Eo((...o)=>r.onClick&&r.onClick(...o),["prevent"]),["space"]))},[we("div",{ref:"box",class:Ie(["p-checkbox-box p-component",{"p-highlight":n.checked,"p-disabled":t.$attrs.disabled,"p-focus":s.focused}]),role:"checkbox","aria-checked":n.checked,tabindex:t.$attrs.disabled?null:"0",onFocus:e[0]||(e[0]=o=>r.onFocus(o)),onBlur:e[1]||(e[1]=o=>r.onBlur(o))},[we("span",{class:Ie(["p-checkbox-icon",{"pi pi-check":n.checked}])},null,2)],42,vE)],34)}var ax=kt(xE,[["render",_E]]);const wE={name:"ColumnFilter",emits:["filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{field:{type:String,default:null},type:{type:String,default:"text"},display:{type:String,default:null},showMenu:{type:Boolean,default:!0},matchMode:{type:String,default:null},showOperator:{type:Boolean,default:!0},showClearButton:{type:Boolean,default:!0},showApplyButton:{type:Boolean,default:!0},showMatchModes:{type:Boolean,default:!0},showAddButton:{type:Boolean,default:!0},matchModeOptions:{type:Array,default:null},maxConstraints:{type:Number,default:2},filterElement:null,filterHeaderTemplate:null,filterFooterTemplate:null,filterClearTemplate:null,filterApplyTemplate:null,filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterMenuClass:{type:String,default:null},filterMenuStyle:{type:null,default:null}},data(){return{overlayVisible:!1,defaultMatchMode:null,defaultOperator:null}},overlay:null,selfClick:!1,overlayEventListener:null,beforeUnmount(){this.overlayEventListener&&(as.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.overlay&&(gn.clear(this.overlay),this.onOverlayHide())},mounted(){if(this.filters&&this.filters[this.field]){let t=this.filters[this.field];t.operator?(this.defaultMatchMode=t.constraints[0].matchMode,this.defaultOperator=t.operator):this.defaultMatchMode=this.filters[this.field].matchMode}},methods:{clearFilter(){let t={...this.filters};t[this.field].operator?(t[this.field].constraints.splice(1),t[this.field].operator=this.defaultOperator,t[this.field].constraints[0]={value:null,matchMode:this.defaultMatchMode}):(t[this.field].value=null,t[this.field].matchMode=this.defaultMatchMode),this.$emit("filter-clear"),this.$emit("filter-change",t),this.$emit("filter-apply"),this.hide()},applyFilter(){this.$emit("apply-click",{field:this.field,constraints:this.filters[this.field]}),this.$emit("filter-apply"),this.hide()},hasFilter(){if(this.filtersStore){let t=this.filtersStore[this.field];if(t)return t.operator?!this.isFilterBlank(t.constraints[0].value):!this.isFilterBlank(t.value)}return!1},hasRowFilter(){return this.filters[this.field]&&!this.isFilterBlank(this.filters[this.field].value)},isFilterBlank(t){return t!=null?typeof t=="string"&&t.trim().length==0||t instanceof Array&&t.length==0:!0},toggleMenu(){this.overlayVisible=!this.overlayVisible},onToggleButtonKeyDown(t){switch(t.key){case"Escape":case"Tab":this.overlayVisible=!1;break;case"ArrowDown":if(this.overlayVisible){let e=oe.getFocusableElements(this.overlay);e&&e[0].focus(),t.preventDefault()}else t.altKey&&(this.overlayVisible=!0,t.preventDefault());break}},onEscape(){this.overlayVisible=!1,this.$refs.icon&&this.$refs.icon.focus()},onRowMatchModeChange(t){let e={...this.filters};e[this.field].matchMode=t,this.$emit("matchmode-change",{field:this.field,matchMode:t}),this.$emit("filter-change",e),this.$emit("filter-apply"),this.hide()},onRowMatchModeKeyDown(t){let e=t.target;switch(t.key){case"ArrowDown":var n=this.findNextItem(e);n&&(e.removeAttribute("tabindex"),n.tabIndex="0",n.focus()),t.preventDefault();break;case"ArrowUp":var i=this.findPrevItem(e);i&&(e.removeAttribute("tabindex"),i.tabIndex="0",i.focus()),t.preventDefault();break}},isRowMatchModeSelected(t){return this.filters[this.field].matchMode===t},onOperatorChange(t){let e={...this.filters};e[this.field].operator=t,this.$emit("filter-change",e),this.$emit("operator-change",{field:this.field,operator:t}),this.showApplyButton||this.$emit("filter-apply")},onMenuMatchModeChange(t,e){let n={...this.filters};n[this.field].constraints[e].matchMode=t,this.$emit("matchmode-change",{field:this.field,matchMode:t,index:e}),this.showApplyButton||this.$emit("filter-apply")},addConstraint(){let t={...this.filters},e={value:null,matchMode:this.defaultMatchMode};t[this.field].constraints.push(e),this.$emit("constraint-add",{field:this.field,constraing:e}),this.$emit("filter-change",t),this.showApplyButton||this.$emit("filter-apply")},removeConstraint(t){let e={...this.filters},n=e[this.field].constraints.splice(t,1);this.$emit("constraint-remove",{field:this.field,constraing:n}),this.$emit("filter-change",e),this.showApplyButton||this.$emit("filter-apply")},filterCallback(){this.$emit("filter-apply")},findNextItem(t){let e=t.nextElementSibling;return e?oe.hasClass(e,"p-column-filter-separator")?this.findNextItem(e):e:t.parentElement.firstElementChild},findPrevItem(t){let e=t.previousElementSibling;if(e)oe.hasClass(e,"p-column-filter-separator")&&this.findPrevItem(e);else return t.parentElement.lastElementChild},hide(){this.overlayVisible=!1},onContentClick(t){this.selfClick=!0,as.emit("overlay-click",{originalEvent:t,target:this.overlay})},onContentMouseDown(){this.selfClick=!0},onOverlayEnter(t){this.filterMenuStyle&&oe.applyStyle(this.overlay,this.filterMenuStyle),gn.set("overlay",t,this.$primevue.config.zIndex.overlay),oe.absolutePosition(this.overlay,this.$refs.icon),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.overlayEventListener=e=>{this.isOutsideClicked(e.target)||(this.selfClick=!0)},as.on("overlay-click",this.overlayEventListener)},onOverlayLeave(){this.onOverlayHide()},onOverlayAfterLeave(t){gn.clear(t)},onOverlayHide(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.overlay=null,as.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},overlayRef(t){this.overlay=t},isOutsideClicked(t){return!this.isTargetClicked(t)&&this.overlay&&!(this.overlay.isSameNode(t)||this.overlay.contains(t))},isTargetClicked(t){return this.$refs.icon&&(this.$refs.icon.isSameNode(t)||this.$refs.icon.contains(t))},bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.overlayVisible&&!this.selfClick&&this.isOutsideClicked(t.target)&&(this.overlayVisible=!1),this.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener(){this.scrollHandler||(this.scrollHandler=new lu(this.$refs.icon,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!oe.isTouchDevice()&&this.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}},computed:{containerClass(){return["p-column-filter p-fluid",{"p-column-filter-row":this.display==="row","p-column-filter-menu":this.display==="menu"}]},overlayClass(){return[this.filterMenuClass,{"p-column-filter-overlay p-component p-fluid":!0,"p-column-filter-overlay-menu":this.display==="menu","p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},showMenuButton(){return this.showMenu&&(this.display==="row"?this.type!=="boolean":!0)},matchModes(){return this.matchModeOptions||this.$primevue.config.filterMatchModeOptions[this.type].map(t=>({label:this.$primevue.config.locale[t],value:t}))},isShowMatchModes(){return this.type!=="boolean"&&this.showMatchModes&&this.matchModes},operatorOptions(){return[{label:this.$primevue.config.locale.matchAll,value:kc.AND},{label:this.$primevue.config.locale.matchAny,value:kc.OR}]},noFilterLabel(){return this.$primevue.config.locale.noFilter},isShowOperator(){return this.showOperator&&this.filters[this.field].operator},operator(){return this.filters[this.field].operator},fieldConstraints(){return this.filters[this.field].constraints||[this.filters[this.field]]},showRemoveIcon(){return this.fieldConstraints.length>1},removeRuleButtonLabel(){return this.$primevue.config.locale.removeRule},addRuleButtonLabel(){return this.$primevue.config.locale.addRule},isShowAddConstraint(){return this.showAddButton&&this.filters[this.field].operator&&this.fieldConstraints&&this.fieldConstraints.length<this.maxConstraints},clearButtonLabel(){return this.$primevue.config.locale.clear},applyButtonLabel(){return this.$primevue.config.locale.apply}},components:{CFDropdown:fu,CFButton:hu,Portal:Go}},SE={key:0,class:"p-fluid p-column-filter-element"},ME=["aria-expanded"],CE=we("span",{class:"pi pi-filter-icon pi-filter"},null,-1),TE=[CE],EE=we("span",{class:"pi pi-filter-slash"},null,-1),DE=[EE],PE={key:0,class:"p-column-filter-row-items"},LE=["onClick","onKeydown","tabindex"],RE=we("li",{class:"p-column-filter-separator"},null,-1),AE={key:0,class:"p-column-filter-operator"},IE={class:"p-column-filter-constraints"},kE={key:1,class:"p-column-filter-add-rule"},OE={class:"p-column-filter-buttonbar"};function FE(t,e,n,i,s,r){const o=Ke("CFDropdown"),a=Ke("CFButton"),l=Ke("Portal");return k(),X("div",{class:Ie(r.containerClass)},[n.display==="row"?(k(),X("div",SE,[(k(),Ve(Yt(n.filterElement),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"]))])):Ce("",!0),r.showMenuButton?(k(),X("button",{key:1,ref:"icon",type:"button",class:Ie(["p-column-filter-menu-button p-link",{"p-column-filter-menu-button-open":s.overlayVisible,"p-column-filter-menu-button-active":r.hasFilter()}]),"aria-haspopup":"true","aria-expanded":s.overlayVisible,onClick:e[0]||(e[0]=c=>r.toggleMenu()),onKeydown:e[1]||(e[1]=c=>r.onToggleButtonKeyDown(c))},TE,42,ME)):Ce("",!0),n.showClearButton&&n.display==="row"?(k(),X("button",{key:2,class:Ie([{"p-hidden-space":!r.hasRowFilter()},"p-column-filter-clear-button p-link"]),type:"button",onClick:e[2]||(e[2]=c=>r.clearFilter())},DE,2)):Ce("",!0),he(l,null,{default:Xe(()=>[he(Ur,{name:"p-connected-overlay",onEnter:r.onOverlayEnter,onLeave:r.onOverlayLeave,onAfterLeave:r.onOverlayAfterLeave},{default:Xe(()=>[s.overlayVisible?(k(),X("div",{key:0,ref:r.overlayRef,class:Ie(r.overlayClass),onKeydown:e[11]||(e[11]=Pr((...c)=>r.onEscape&&r.onEscape(...c),["escape"])),onClick:e[12]||(e[12]=(...c)=>r.onContentClick&&r.onContentClick(...c)),onMousedown:e[13]||(e[13]=(...c)=>r.onContentMouseDown&&r.onContentMouseDown(...c))},[(k(),Ve(Yt(n.filterHeaderTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"])),n.display==="row"?(k(),X("ul",PE,[(k(!0),X(je,null,Vt(r.matchModes,(c,u)=>(k(),X("li",{class:Ie(["p-column-filter-row-item",{"p-highlight":r.isRowMatchModeSelected(c.value)}]),key:c.label,onClick:d=>r.onRowMatchModeChange(c.value),onKeydown:[e[3]||(e[3]=d=>r.onRowMatchModeKeyDown(d)),Pr(Eo(d=>r.onRowMatchModeChange(c.value),["prevent"]),["enter"])],tabindex:u===0?"0":null},it(c.label),43,LE))),128)),RE,we("li",{class:"p-column-filter-row-item",onClick:e[4]||(e[4]=c=>r.clearFilter()),onKeydown:[e[5]||(e[5]=c=>r.onRowMatchModeKeyDown(c)),e[6]||(e[6]=Pr(c=>t.onRowClearItemClick(),["enter"]))]},it(r.noFilterLabel),33)])):(k(),X(je,{key:1},[r.isShowOperator?(k(),X("div",AE,[he(o,{options:r.operatorOptions,modelValue:r.operator,"onUpdate:modelValue":e[7]||(e[7]=c=>r.onOperatorChange(c)),class:"p-column-filter-operator-dropdown",optionLabel:"label",optionValue:"value"},null,8,["options","modelValue"])])):Ce("",!0),we("div",IE,[(k(!0),X(je,null,Vt(r.fieldConstraints,(c,u)=>(k(),X("div",{key:u,class:"p-column-filter-constraint"},[r.isShowMatchModes?(k(),Ve(o,{key:0,options:r.matchModes,modelValue:c.matchMode,optionLabel:"label",optionValue:"value","onUpdate:modelValue":d=>r.onMenuMatchModeChange(d,u),class:"p-column-filter-matchmode-dropdown"},null,8,["options","modelValue","onUpdate:modelValue"])):Ce("",!0),n.display==="menu"?(k(),Ve(Yt(n.filterElement),{key:1,field:n.field,filterModel:c,filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"])):Ce("",!0),we("div",null,[r.showRemoveIcon?(k(),Ve(a,{key:0,type:"button",icon:"pi pi-trash",class:"p-column-filter-remove-button p-button-text p-button-danger p-button-sm",onClick:d=>r.removeConstraint(u),label:r.removeRuleButtonLabel},null,8,["onClick","label"])):Ce("",!0)])]))),128))]),r.isShowAddConstraint?(k(),X("div",kE,[he(a,{type:"button",label:r.addRuleButtonLabel,icon:"pi pi-plus",class:"p-column-filter-add-button p-button-text p-button-sm",onClick:e[8]||(e[8]=c=>r.addConstraint())},null,8,["label"])])):Ce("",!0),we("div",OE,[!n.filterClearTemplate&&n.showClearButton?(k(),Ve(a,{key:0,type:"button",class:"p-button-outlined p-button-sm",onClick:e[9]||(e[9]=c=>r.clearFilter()),label:r.clearButtonLabel},null,8,["label"])):(k(),Ve(Yt(n.filterClearTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:r.clearFilter},null,8,["field","filterModel","filterCallback"])),n.showApplyButton?(k(),X(je,{key:2},[n.filterApplyTemplate?(k(),Ve(Yt(n.filterApplyTemplate),{key:1,field:n.field,filterModel:n.filters[n.field],filterCallback:r.applyFilter},null,8,["field","filterModel","filterCallback"])):(k(),Ve(a,{key:0,type:"button",class:"p-button-sm",onClick:e[10]||(e[10]=c=>r.applyFilter()),label:r.applyButtonLabel},null,8,["label"]))],64)):Ce("",!0)])],64)),(k(),Ve(Yt(n.filterFooterTemplate),{field:n.field,filterModel:n.filters[n.field],filterCallback:r.filterCallback},null,8,["field","filterModel","filterCallback"]))],34)):Ce("",!0)]),_:1},8,["onEnter","onLeave","onAfterLeave"])]),_:1})],2)}var lx=kt(wE,[["render",FE]]);const NE={name:"HeaderCell",emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{column:{type:Object,default:null},resizableColumns:{type:Boolean,default:!1},groupRowsBy:{type:[Array,String],default:null},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},filterColumn:{type:Boolean,default:!1},reorderableColumns:{type:Boolean,default:!1}},data(){return{styleObject:{}}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp(t){return Fe.getVNodeProp(this.column,t)},onClick(t){this.$emit("column-click",{originalEvent:t,column:this.column})},onKeyDown(t){t.which===13&&t.currentTarget.nodeName==="TH"&&oe.hasClass(t.currentTarget,"p-sortable-column")&&this.$emit("column-click",{originalEvent:t,column:this.column})},onMouseDown(t){this.$emit("column-mousedown",{originalEvent:t,column:this.column})},onDragStart(t){this.$emit("column-dragstart",t)},onDragOver(t){this.$emit("column-dragover",t)},onDragLeave(t){this.$emit("column-dragleave",t)},onDrop(t){this.$emit("column-drop",t)},onResizeStart(t){this.$emit("column-resizestart",t)},getMultiSortMetaIndex(){return this.multiSortMeta.findIndex(t=>t.field===this.columnProp("field")||t.field===this.columnProp("sortField"))},getBadgeValue(){let t=this.getMultiSortMetaIndex();return this.groupRowsBy&&this.groupRowsBy===this.groupRowSortField&&t>-1?t:t+1},isMultiSorted(){return this.sortMode==="multiple"&&this.columnProp("sortable")&&this.getMultiSortMetaIndex()>-1},isColumnSorted(){return this.sortMode==="single"?this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")):this.isMultiSorted()},updateStickyPosition(){if(this.columnProp("frozen")){if(this.columnProp("alignFrozen")==="right"){let n=0,i=this.$el.nextElementSibling;i&&(n=oe.getOuterWidth(i)+parseFloat(i.style.right||0)),this.styleObject.right=n+"px"}else{let n=0,i=this.$el.previousElementSibling;i&&(n=oe.getOuterWidth(i)+parseFloat(i.style.left||0)),this.styleObject.left=n+"px"}let e=this.$el.parentElement.nextElementSibling;if(e){let n=oe.index(this.$el);e.children[n].style.left=this.styleObject.left,e.children[n].style.right=this.styleObject.right}}},onHeaderCheckboxChange(t){this.$emit("checkbox-change",t)}},computed:{containerClass(){return[this.filterColumn?this.columnProp("filterHeaderClass"):this.columnProp("headerClass"),this.columnProp("class"),{"p-sortable-column":this.columnProp("sortable"),"p-resizable-column":this.resizableColumns,"p-highlight":this.isColumnSorted(),"p-filter-column":this.filterColumn,"p-frozen-column":this.columnProp("frozen"),"p-reorderable-column":this.reorderableColumns}]},containerStyle(){let t=this.filterColumn?this.columnProp("filterHeaderStyle"):this.columnProp("headerStyle"),e=this.columnProp("style");return this.columnProp("frozen")?[e,t,this.styleObject]:[e,t]},sortableColumnIcon(){let t=!1,e=null;if(this.sortMode==="single")t=this.sortField&&(this.sortField===this.columnProp("field")||this.sortField===this.columnProp("sortField")),e=t?this.sortOrder:0;else if(this.sortMode==="multiple"){let n=this.getMultiSortMetaIndex();n>-1&&(t=!0,e=this.multiSortMeta[n].order)}return["p-sortable-column-icon pi pi-fw",{"pi-sort-alt":!t,"pi-sort-amount-up-alt":t&&e>0,"pi-sort-amount-down":t&&e<0}]},ariaSort(){if(this.columnProp("sortable")){const t=this.sortableColumnIcon;return t[1]["pi-sort-amount-down"]?"descending":t[1]["pi-sort-amount-up-alt"]?"ascending":"none"}else return null}},components:{DTHeaderCheckbox:ax,DTColumnFilter:lx}},BE=["tabindex","colspan","rowspan","aria-sort"],zE={class:"p-column-header-content"},VE={key:1,class:"p-column-title"},UE={key:3,class:"p-sortable-column-badge"};function HE(t,e,n,i,s,r){const o=Ke("DTHeaderCheckbox"),a=Ke("DTColumnFilter");return k(),X("th",{style:Ot(r.containerStyle),class:Ie(r.containerClass),tabindex:r.columnProp("sortable")?"0":null,role:"cell",onClick:e[8]||(e[8]=(...l)=>r.onClick&&r.onClick(...l)),onKeydown:e[9]||(e[9]=(...l)=>r.onKeyDown&&r.onKeyDown(...l)),onMousedown:e[10]||(e[10]=(...l)=>r.onMouseDown&&r.onMouseDown(...l)),onDragstart:e[11]||(e[11]=(...l)=>r.onDragStart&&r.onDragStart(...l)),onDragover:e[12]||(e[12]=(...l)=>r.onDragOver&&r.onDragOver(...l)),onDragleave:e[13]||(e[13]=(...l)=>r.onDragLeave&&r.onDragLeave(...l)),onDrop:e[14]||(e[14]=(...l)=>r.onDrop&&r.onDrop(...l)),colspan:r.columnProp("colspan"),rowspan:r.columnProp("rowspan"),"aria-sort":r.ariaSort},[n.resizableColumns&&!r.columnProp("frozen")?(k(),X("span",{key:0,class:"p-column-resizer",onMousedown:e[0]||(e[0]=(...l)=>r.onResizeStart&&r.onResizeStart(...l))},null,32)):Ce("",!0),we("div",zE,[n.column.children&&n.column.children.header?(k(),Ve(Yt(n.column.children.header),{key:0,column:n.column},null,8,["column"])):Ce("",!0),r.columnProp("header")?(k(),X("span",VE,it(r.columnProp("header")),1)):Ce("",!0),r.columnProp("sortable")?(k(),X("span",{key:2,class:Ie(r.sortableColumnIcon)},null,2)):Ce("",!0),r.isMultiSorted()?(k(),X("span",UE,it(r.getBadgeValue()),1)):Ce("",!0),r.columnProp("selectionMode")==="multiple"&&n.filterDisplay!=="row"?(k(),Ve(o,{key:4,checked:n.allRowsSelected,onChange:r.onHeaderCheckboxChange,disabled:n.empty},null,8,["checked","onChange","disabled"])):Ce("",!0),n.filterDisplay==="menu"&&n.column.children&&n.column.children.filter?(k(),Ve(a,{key:5,field:r.columnProp("filterField")||r.columnProp("field"),type:r.columnProp("dataType"),display:"menu",showMenu:r.columnProp("showFilterMenu"),filterElement:n.column.children&&n.column.children.filter,filterHeaderTemplate:n.column.children&&n.column.children.filterheader,filterFooterTemplate:n.column.children&&n.column.children.filterfooter,filterClearTemplate:n.column.children&&n.column.children.filterclear,filterApplyTemplate:n.column.children&&n.column.children.filterapply,filters:n.filters,filtersStore:n.filtersStore,onFilterChange:e[1]||(e[1]=l=>t.$emit("filter-change",l)),onFilterApply:e[2]||(e[2]=l=>t.$emit("filter-apply")),filterMenuStyle:r.columnProp("filterMenuStyle"),filterMenuClass:r.columnProp("filterMenuClass"),showOperator:r.columnProp("showFilterOperator"),showClearButton:r.columnProp("showClearButton"),showApplyButton:r.columnProp("showApplyButton"),showMatchModes:r.columnProp("showFilterMatchModes"),showAddButton:r.columnProp("showAddButton"),matchModeOptions:r.columnProp("filterMatchModeOptions"),maxConstraints:r.columnProp("maxConstraints"),onOperatorChange:e[3]||(e[3]=l=>t.$emit("operator-change",l)),onMatchmodeChange:e[4]||(e[4]=l=>t.$emit("matchmode-change",l)),onConstraintAdd:e[5]||(e[5]=l=>t.$emit("constraint-add",l)),onConstraintRemove:e[6]||(e[6]=l=>t.$emit("constraint-remove",l)),onApplyClick:e[7]||(e[7]=l=>t.$emit("apply-click",l))},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filters","filtersStore","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints"])):Ce("",!0)])],46,BE)}var WE=kt(NE,[["render",HE]]);const GE={name:"TableHeader",emits:["column-click","column-mousedown","column-dragstart","column-dragover","column-dragleave","column-drop","column-resizestart","checkbox-change","filter-change","filter-apply","operator-change","matchmode-change","constraint-add","constraint-remove","filter-clear","apply-click"],props:{columnGroup:{type:null,default:null},columns:{type:null,default:null},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String],default:null},resizableColumns:{type:Boolean,default:!1},allRowsSelected:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},sortMode:{type:String,default:"single"},groupRowSortField:{type:[String,Function],default:null},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},multiSortMeta:{type:Array,default:null},filterDisplay:{type:String,default:null},filters:{type:Object,default:null},filtersStore:{type:Object,default:null},reorderableColumns:{type:Boolean,default:!1}},methods:{columnProp(t,e){return Fe.getVNodeProp(t,e)},getFilterColumnHeaderClass(t){return["p-filter-column",this.columnProp(t,"filterHeaderClass"),this.columnProp(t,"class"),{"p-frozen-column":this.columnProp(t,"frozen")}]},getFilterColumnHeaderStyle(t){return[this.columnProp(t,"filterHeaderStyle"),this.columnProp(t,"style")]},getHeaderRows(){let t=[],e=this.columnGroup;if(e.children&&e.children.default){for(let n of e.children.default())n.type.name==="Row"?t.push(n):n.children&&n.children instanceof Array&&(t=n.children);return t}},getHeaderColumns(t){let e=[];if(t.children&&t.children.default)return t.children.default().forEach(n=>{n.children&&n.children instanceof Array?e=[...e,...n.children]:n.type.name==="Column"&&e.push(n)}),e}},components:{DTHeaderCell:WE,DTHeaderCheckbox:ax,DTColumnFilter:lx}},jE={class:"p-datatable-thead",role:"rowgroup"},$E={role:"row"},KE={key:0,role:"row"};function XE(t,e,n,i,s,r){const o=Ke("DTHeaderCell"),a=Ke("DTHeaderCheckbox"),l=Ke("DTColumnFilter");return k(),X("thead",jE,[n.columnGroup?(k(!0),X(je,{key:1},Vt(r.getHeaderRows(),(c,u)=>(k(),X("tr",{key:u,role:"row"},[(k(!0),X(je,null,Vt(r.getHeaderColumns(c),(d,h)=>(k(),X(je,{key:r.columnProp(d,"columnKey")||r.columnProp(d,"field")||h},[!r.columnProp(d,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(d,"field"))&&typeof d.children!="string"?(k(),Ve(o,{key:0,column:d,onColumnClick:e[23]||(e[23]=p=>t.$emit("column-click",p)),onColumnMousedown:e[24]||(e[24]=p=>t.$emit("column-mousedown",p)),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[25]||(e[25]=p=>t.$emit("checkbox-change",p)),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,onFilterChange:e[26]||(e[26]=p=>t.$emit("filter-change",p)),onFilterApply:e[27]||(e[27]=p=>t.$emit("filter-apply")),onOperatorChange:e[28]||(e[28]=p=>t.$emit("operator-change",p)),onMatchmodeChange:e[29]||(e[29]=p=>t.$emit("matchmode-change",p)),onConstraintAdd:e[30]||(e[30]=p=>t.$emit("constraint-add",p)),onConstraintRemove:e[31]||(e[31]=p=>t.$emit("constraint-remove",p)),onApplyClick:e[32]||(e[32]=p=>t.$emit("apply-click",p))},null,8,["column","groupRowsBy","groupRowSortField","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore"])):Ce("",!0)],64))),128))]))),128)):(k(),X(je,{key:0},[we("tr",$E,[(k(!0),X(je,null,Vt(n.columns,(c,u)=>(k(),X(je,{key:r.columnProp(c,"columnKey")||r.columnProp(c,"field")||u},[!r.columnProp(c,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(c,"field"))?(k(),Ve(o,{key:0,column:c,onColumnClick:e[0]||(e[0]=d=>t.$emit("column-click",d)),onColumnMousedown:e[1]||(e[1]=d=>t.$emit("column-mousedown",d)),onColumnDragstart:e[2]||(e[2]=d=>t.$emit("column-dragstart",d)),onColumnDragover:e[3]||(e[3]=d=>t.$emit("column-dragover",d)),onColumnDragleave:e[4]||(e[4]=d=>t.$emit("column-dragleave",d)),onColumnDrop:e[5]||(e[5]=d=>t.$emit("column-drop",d)),groupRowsBy:n.groupRowsBy,groupRowSortField:n.groupRowSortField,reorderableColumns:n.reorderableColumns,resizableColumns:n.resizableColumns,onColumnResizestart:e[6]||(e[6]=d=>t.$emit("column-resizestart",d)),sortMode:n.sortMode,sortField:n.sortField,sortOrder:n.sortOrder,multiSortMeta:n.multiSortMeta,allRowsSelected:n.allRowsSelected,empty:n.empty,onCheckboxChange:e[7]||(e[7]=d=>t.$emit("checkbox-change",d)),filters:n.filters,filterDisplay:n.filterDisplay,filtersStore:n.filtersStore,onFilterChange:e[8]||(e[8]=d=>t.$emit("filter-change",d)),onFilterApply:e[9]||(e[9]=d=>t.$emit("filter-apply")),onOperatorChange:e[10]||(e[10]=d=>t.$emit("operator-change",d)),onMatchmodeChange:e[11]||(e[11]=d=>t.$emit("matchmode-change",d)),onConstraintAdd:e[12]||(e[12]=d=>t.$emit("constraint-add",d)),onConstraintRemove:e[13]||(e[13]=d=>t.$emit("constraint-remove",d)),onApplyClick:e[14]||(e[14]=d=>t.$emit("apply-click",d))},null,8,["column","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","sortMode","sortField","sortOrder","multiSortMeta","allRowsSelected","empty","filters","filterDisplay","filtersStore"])):Ce("",!0)],64))),128))]),n.filterDisplay==="row"?(k(),X("tr",KE,[(k(!0),X(je,null,Vt(n.columns,(c,u)=>(k(),X(je,{key:r.columnProp(c,"columnKey")||r.columnProp(c,"field")||u},[!r.columnProp(c,"hidden")&&(n.rowGroupMode!=="subheader"||n.groupRowsBy!==r.columnProp(c,"field"))?(k(),X("th",{key:0,style:Ot(r.getFilterColumnHeaderStyle(c)),class:Ie(r.getFilterColumnHeaderClass(c))},[r.columnProp(c,"selectionMode")==="multiple"?(k(),Ve(a,{key:0,checked:n.allRowsSelected,onChange:e[15]||(e[15]=d=>t.$emit("checkbox-change",d)),disabled:n.empty},null,8,["checked","disabled"])):Ce("",!0),c.children&&c.children.filter?(k(),Ve(l,{key:1,field:r.columnProp(c,"filterField")||r.columnProp(c,"field"),type:r.columnProp(c,"dataType"),display:"row",showMenu:r.columnProp(c,"showFilterMenu"),filterElement:c.children&&c.children.filter,filterHeaderTemplate:c.children&&c.children.filterheader,filterFooterTemplate:c.children&&c.children.filterfooter,filterClearTemplate:c.children&&c.children.filterclear,filterApplyTemplate:c.children&&c.children.filterapply,filters:n.filters,filtersStore:n.filtersStore,onFilterChange:e[16]||(e[16]=d=>t.$emit("filter-change",d)),onFilterApply:e[17]||(e[17]=d=>t.$emit("filter-apply")),filterMenuStyle:r.columnProp(c,"filterMenuStyle"),filterMenuClass:r.columnProp(c,"filterMenuClass"),showOperator:r.columnProp(c,"showFilterOperator"),showClearButton:r.columnProp(c,"showClearButton"),showApplyButton:r.columnProp(c,"showApplyButton"),showMatchModes:r.columnProp(c,"showFilterMatchModes"),showAddButton:r.columnProp(c,"showAddButton"),matchModeOptions:r.columnProp(c,"filterMatchModeOptions"),maxConstraints:r.columnProp(c,"maxConstraints"),onOperatorChange:e[18]||(e[18]=d=>t.$emit("operator-change",d)),onMatchmodeChange:e[19]||(e[19]=d=>t.$emit("matchmode-change",d)),onConstraintAdd:e[20]||(e[20]=d=>t.$emit("constraint-add",d)),onConstraintRemove:e[21]||(e[21]=d=>t.$emit("constraint-remove",d)),onApplyClick:e[22]||(e[22]=d=>t.$emit("apply-click",d))},null,8,["field","type","showMenu","filterElement","filterHeaderTemplate","filterFooterTemplate","filterClearTemplate","filterApplyTemplate","filters","filtersStore","filterMenuStyle","filterMenuClass","showOperator","showClearButton","showApplyButton","showMatchModes","showAddButton","matchModeOptions","maxConstraints"])):Ce("",!0)],6)):Ce("",!0)],64))),128))])):Ce("",!0)],64))])}var YE=kt(GE,[["render",XE]]);const qE={name:"RowRadioButton",inheritAttrs:!1,emits:["change"],props:{value:null,checked:null},data(){return{focused:!1}},methods:{onClick(t){this.disabled||this.checked||this.$emit("change",{originalEvent:t,data:this.value})},onFocus(){this.focused=!0},onBlur(){this.focused=!1}}},ZE=["aria-checked"],JE=we("div",{class:"p-radiobutton-icon"},null,-1),QE=[JE];function eD(t,e,n,i,s,r){return k(),X("div",{class:Ie(["p-radiobutton p-component",{"p-radiobutton-focused":s.focused}]),onClick:e[0]||(e[0]=(...o)=>r.onClick&&r.onClick(...o)),tabindex:"0",onFocus:e[1]||(e[1]=o=>r.onFocus(o)),onBlur:e[2]||(e[2]=o=>r.onBlur(o)),onKeydown:e[3]||(e[3]=Pr(Eo((...o)=>r.onClick&&r.onClick(...o),["prevent"]),["space"]))},[we("div",{ref:"box",class:Ie(["p-radiobutton-box p-component",{"p-highlight":n.checked,"p-disabled":t.$attrs.disabled,"p-focus":s.focused}]),role:"radio","aria-checked":n.checked},QE,10,ZE)],34)}var tD=kt(qE,[["render",eD]]);const nD={name:"RowCheckbox",inheritAttrs:!1,emits:["change"],props:{value:null,checked:null},data(){return{focused:!1}},methods:{onClick(t){this.$attrs.disabled||(this.focused=!0,this.$emit("change",{originalEvent:t,data:this.value}))},onFocus(){this.focused=!0},onBlur(){this.focused=!1}}},iD=["aria-checked","tabindex"];function sD(t,e,n,i,s,r){return k(),X("div",{class:Ie(["p-checkbox p-component",{"p-checkbox-focused":s.focused}]),onClick:e[3]||(e[3]=Eo((...o)=>r.onClick&&r.onClick(...o),["stop","prevent"]))},[we("div",{ref:"box",class:Ie(["p-checkbox-box p-component",{"p-highlight":n.checked,"p-disabled":t.$attrs.disabled,"p-focus":s.focused}]),role:"checkbox","aria-checked":n.checked,tabindex:t.$attrs.disabled?null:"0",onKeydown:e[0]||(e[0]=Pr(Eo((...o)=>r.onClick&&r.onClick(...o),["prevent"]),["space"])),onFocus:e[1]||(e[1]=o=>r.onFocus(o)),onBlur:e[2]||(e[2]=o=>r.onBlur(o))},[we("span",{class:Ie(["p-checkbox-icon",{"pi pi-check":n.checked}])},null,2)],42,iD)],2)}var rD=kt(nD,[["render",sD]]);const oD={name:"BodyCell",emits:["cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","row-toggle","radio-change","checkbox-change","editing-meta-change"],props:{rowData:{type:Object,default:null},column:{type:Object,default:null},frozenRow:{type:Boolean,default:!1},rowIndex:{type:Number,default:null},index:{type:Number,default:null},rowTogglerIcon:{type:Array,default:null},selected:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},editingMeta:{type:Object,default:null},editMode:{type:String,default:null},responsiveLayout:{type:String,default:"stack"},virtualScrollerContentProps:{type:Object,default:null}},documentEditListener:null,selfClick:!1,overlayEventListener:null,data(){return{d_editing:this.editing,styleObject:{}}},watch:{editing(t){this.d_editing=t},"$data.d_editing":function(t){this.$emit("editing-meta-change",{data:this.rowData,field:this.field||`field_${this.index}`,index:this.rowIndex,editing:t})}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){if(this.columnProp("frozen")&&this.updateStickyPosition(),this.d_editing&&(this.editMode==="cell"||this.editMode==="row"&&this.columnProp("rowEditor"))){const t=oe.getFirstFocusableElement(this.$el);t&&t.focus()}},beforeUnmount(){this.overlayEventListener&&(as.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null)},methods:{columnProp(t){return Fe.getVNodeProp(this.column,t)},resolveFieldData(){return Fe.resolveFieldData(this.rowData,this.field)},toggleRow(t){this.$emit("row-toggle",{originalEvent:t,data:this.rowData})},toggleRowWithRadio(t,e){this.$emit("radio-change",{originalEvent:t.originalEvent,index:e,data:t.data})},toggleRowWithCheckbox(t,e){this.$emit("checkbox-change",{originalEvent:t.originalEvent,index:e,data:t.data})},isEditable(){return this.column.children&&this.column.children.editor!=null},bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=t=>{this.selfClick||this.completeEdit(t,"outside"),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))},unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null,this.selfClick=!1)},switchCellToViewMode(){this.d_editing=!1,this.unbindDocumentEditListener(),as.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null},onClick(t){this.editMode==="cell"&&this.isEditable()&&(this.selfClick=!0,this.d_editing||(this.d_editing=!0,this.bindDocumentEditListener(),this.$emit("cell-edit-init",{originalEvent:t,data:this.rowData,field:this.field,index:this.rowIndex}),this.overlayEventListener=e=>{this.$el&&this.$el.contains(e.target)&&(this.selfClick=!0)},as.on("overlay-click",this.overlayEventListener)))},completeEdit(t,e){const n={originalEvent:t,data:this.rowData,newData:this.editingRowData,value:this.rowData[this.field],newValue:this.editingRowData[this.field],field:this.field,index:this.rowIndex,type:e,defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}};this.$emit("cell-edit-complete",n),n.defaultPrevented||this.switchCellToViewMode()},onKeyDown(t){if(this.editMode==="cell")switch(t.which){case 13:this.completeEdit(t,"enter");break;case 27:this.switchCellToViewMode(),this.$emit("cell-edit-cancel",{originalEvent:t,data:this.rowData,field:this.field,index:this.rowIndex});break;case 9:this.completeEdit(t,"tab"),t.shiftKey?this.moveToPreviousCell(t):this.moveToNextCell(t);break}},moveToPreviousCell(t){let e=this.findCell(t.target),n=this.findPreviousEditableColumn(e);n&&(oe.invokeElementMethod(n,"click"),t.preventDefault())},moveToNextCell(t){let e=this.findCell(t.target),n=this.findNextEditableColumn(e);n&&(oe.invokeElementMethod(n,"click"),t.preventDefault())},findCell(t){if(t){let e=t;for(;e&&!oe.hasClass(e,"p-cell-editing");)e=e.parentElement;return e}else return null},findPreviousEditableColumn(t){let e=t.previousElementSibling;if(!e){let n=t.parentElement.previousElementSibling;n&&(e=n.lastElementChild)}return e?oe.hasClass(e,"p-editable-column")?e:this.findPreviousEditableColumn(e):null},findNextEditableColumn(t){let e=t.nextElementSibling;if(!e){let n=t.parentElement.nextElementSibling;n&&(e=n.firstElementChild)}return e?oe.hasClass(e,"p-editable-column")?e:this.findNextEditableColumn(e):null},isEditingCellValid(){return oe.find(this.$el,".p-invalid").length===0},onRowEditInit(t){this.$emit("row-edit-init",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditSave(t){this.$emit("row-edit-save",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},onRowEditCancel(t){this.$emit("row-edit-cancel",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorInitCallback(t){this.$emit("row-edit-init",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorSaveCallback(t){this.$emit("row-edit-save",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},editorCancelCallback(t){this.$emit("row-edit-cancel",{originalEvent:t,data:this.rowData,newData:this.editingRowData,field:this.field,index:this.rowIndex})},updateStickyPosition(){if(this.columnProp("frozen"))if(this.columnProp("alignFrozen")==="right"){let e=0,n=this.$el.nextElementSibling;n&&(e=oe.getOuterWidth(n)+parseFloat(n.style.right||0)),this.styleObject.right=e+"px"}else{let e=0,n=this.$el.previousElementSibling;n&&(e=oe.getOuterWidth(n)+parseFloat(n.style.left||0)),this.styleObject.left=e+"px"}},getVirtualScrollerProp(t){return this.virtualScrollerContentProps?this.virtualScrollerContentProps[t]:null}},computed:{editingRowData(){return this.editingMeta[this.rowIndex]?this.editingMeta[this.rowIndex].data:this.rowData},field(){return this.columnProp("field")},containerClass(){return[this.columnProp("bodyClass"),this.columnProp("class"),{"p-selection-column":this.columnProp("selectionMode")!=null,"p-editable-column":this.isEditable(),"p-cell-editing":this.d_editing,"p-frozen-column":this.columnProp("frozen")}]},containerStyle(){let t=this.columnProp("bodyStyle"),e=this.columnProp("style");return this.columnProp("frozen")?[e,t,this.styleObject]:[e,t]},loading(){return this.getVirtualScrollerProp("loading")},loadingOptions(){const t=this.getVirtualScrollerProp("getLoaderOptions");return t&&t(this.rowIndex,{cellIndex:this.index,cellFirst:this.index===0,cellLast:this.index===this.getVirtualScrollerProp("columns").length-1,cellEven:this.index%2===0,cellOdd:this.index%2!==0,column:this.column,field:this.field})}},components:{DTRadioButton:tD,DTCheckbox:rD},directives:{ripple:mi}},aD={key:0,class:"p-column-title"},lD=we("span",{class:"p-row-editor-init-icon pi pi-fw pi-pencil"},null,-1),cD=[lD],uD=we("span",{class:"p-row-editor-save-icon pi pi-fw pi-check"},null,-1),dD=[uD],hD=we("span",{class:"p-row-editor-cancel-icon pi pi-fw pi-times"},null,-1),fD=[hD];function pD(t,e,n,i,s,r){const o=Ke("DTRadioButton"),a=Ke("DTCheckbox"),l=on("ripple");return r.loading?(k(),X("td",{key:0,style:Ot(r.containerStyle),class:Ie(r.containerClass)},[(k(),Ve(Yt(n.column.children.loading),{data:n.rowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,loadingOptions:r.loadingOptions},null,8,["data","column","field","index","frozenRow","loadingOptions"]))],6)):(k(),X("td",{key:1,style:Ot(r.containerStyle),class:Ie(r.containerClass),onClick:e[6]||(e[6]=(...c)=>r.onClick&&r.onClick(...c)),onKeydown:e[7]||(e[7]=(...c)=>r.onKeyDown&&r.onKeyDown(...c)),role:"cell"},[n.responsiveLayout==="stack"?(k(),X("span",aD,it(r.columnProp("header")),1)):Ce("",!0),n.column.children&&n.column.children.body&&!s.d_editing?(k(),Ve(Yt(n.column.children.body),{key:1,data:n.rowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,editorInitCallback:r.editorInitCallback},null,8,["data","column","field","index","frozenRow","editorInitCallback"])):n.column.children&&n.column.children.editor&&s.d_editing?(k(),Ve(Yt(n.column.children.editor),{key:2,data:r.editingRowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow,editorSaveCallback:r.editorSaveCallback,editorCancelCallback:r.editorCancelCallback},null,8,["data","column","field","index","frozenRow","editorSaveCallback","editorCancelCallback"])):n.column.children&&n.column.children.body&&!n.column.children.editor&&s.d_editing?(k(),Ve(Yt(n.column.children.body),{key:3,data:r.editingRowData,column:n.column,field:r.field,index:n.rowIndex,frozenRow:n.frozenRow},null,8,["data","column","field","index","frozenRow"])):r.columnProp("selectionMode")?(k(),X(je,{key:4},[r.columnProp("selectionMode")==="single"?(k(),Ve(o,{key:0,value:n.rowData,checked:n.selected,onChange:e[0]||(e[0]=c=>r.toggleRowWithRadio(c,n.rowIndex))},null,8,["value","checked"])):r.columnProp("selectionMode")==="multiple"?(k(),Ve(a,{key:1,value:n.rowData,checked:n.selected,onChange:e[1]||(e[1]=c=>r.toggleRowWithCheckbox(c,n.rowIndex))},null,8,["value","checked"])):Ce("",!0)],64)):r.columnProp("rowReorder")?(k(),X("i",{key:5,class:Ie(["p-datatable-reorderablerow-handle",r.columnProp("rowReorderIcon")||"pi pi-bars"])},null,2)):r.columnProp("expander")?bt((k(),X("button",{key:6,class:"p-row-toggler p-link",onClick:e[2]||(e[2]=(...c)=>r.toggleRow&&r.toggleRow(...c)),type:"button"},[we("span",{class:Ie(n.rowTogglerIcon)},null,2)])),[[l]]):n.editMode==="row"&&r.columnProp("rowEditor")?(k(),X(je,{key:7},[s.d_editing?Ce("",!0):bt((k(),X("button",{key:0,class:"p-row-editor-init p-link",onClick:e[3]||(e[3]=(...c)=>r.onRowEditInit&&r.onRowEditInit(...c)),type:"button"},cD)),[[l]]),s.d_editing?bt((k(),X("button",{key:1,class:"p-row-editor-save p-link",onClick:e[4]||(e[4]=(...c)=>r.onRowEditSave&&r.onRowEditSave(...c)),type:"button"},dD)),[[l]]):Ce("",!0),s.d_editing?bt((k(),X("button",{key:2,class:"p-row-editor-cancel p-link",onClick:e[5]||(e[5]=(...c)=>r.onRowEditCancel&&r.onRowEditCancel(...c)),type:"button"},fD)),[[l]]):Ce("",!0)],64)):(k(),X(je,{key:8},[vn(it(r.resolveFieldData()),1)],64))],38))}var mD=kt(oD,[["render",pD]]);const gD={name:"TableBody",emits:["rowgroup-toggle","row-click","row-dblclick","row-rightclick","row-touchend","row-keydown","row-mousedown","row-dragstart","row-dragover","row-dragleave","row-dragend","row-drop","row-toggle","radio-change","checkbox-change","cell-edit-init","cell-edit-complete","cell-edit-cancel","row-edit-init","row-edit-save","row-edit-cancel","editing-meta-change"],props:{value:{type:Array,default:null},columns:{type:null,default:null},frozenRow:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},dataKey:{type:String,default:null},expandedRowIcon:{type:String,default:null},collapsedRowIcon:{type:String,default:null},expandedRows:{type:Array,default:null},expandedRowKeys:{type:null,default:null},selection:{type:[Array,Object],default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},editMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},editingRows:{type:Array,default:null},editingRowKeys:{type:null,default:null},editingMeta:{type:Object,default:null},templates:{type:null,default:null},scrollable:{type:Boolean,default:!1},responsiveLayout:{type:String,default:"stack"},virtualScrollerContentProps:{type:Object,default:null},isVirtualScrollerDisabled:{type:Boolean,default:!1}},watch:{virtualScrollerContentProps(t,e){!this.isVirtualScrollerDisabled&&this.getVirtualScrollerProp("vertical")&&this.getVirtualScrollerProp("itemSize",e)!==this.getVirtualScrollerProp("itemSize",t)&&this.updateVirtualScrollerPosition()}},mounted(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition(),!this.isVirtualScrollerDisabled&&this.getVirtualScrollerProp("vertical")&&this.updateVirtualScrollerPosition()},updated(){this.frozenRow&&this.updateFrozenRowStickyPosition(),this.scrollable&&this.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()},data(){return{rowGroupHeaderStyleObject:{}}},methods:{columnProp(t,e){return Fe.getVNodeProp(t,e)},shouldRenderRowGroupHeader(t,e,n){let i=Fe.resolveFieldData(e,this.groupRowsBy),s=t[n-1];if(s){let r=Fe.resolveFieldData(s,this.groupRowsBy);return i!==r}else return!0},getRowKey(t,e){return this.dataKey?Fe.resolveFieldData(t,this.dataKey):e},getRowIndex(t){const e=this.getVirtualScrollerProp("getItemOptions");return e?e(t).index:t},getRowClass(t){let e=[];if(this.selectionMode&&e.push("p-selectable-row"),this.selection&&e.push({"p-highlight":this.isSelected(t)}),this.contextMenuSelection&&e.push({"p-highlight-contextmenu":this.isSelectedWithContextMenu(t)}),this.rowClass){let n=this.rowClass(t);n&&e.push(n)}return e},shouldRenderRowGroupFooter(t,e,n){if(this.expandableRowGroups&&!this.isRowGroupExpanded(e))return!1;{let i=Fe.resolveFieldData(e,this.groupRowsBy),s=t[n+1];if(s){let r=Fe.resolveFieldData(s,this.groupRowsBy);return i!==r}else return!0}},shouldRenderBodyCell(t,e,n){if(this.rowGroupMode){if(this.rowGroupMode==="subheader")return this.groupRowsBy!==this.columnProp(e,"field");if(this.rowGroupMode==="rowspan")if(this.isGrouped(e)){let i=t[n-1];if(i){let s=Fe.resolveFieldData(t[n],this.columnProp(e,"field")),r=Fe.resolveFieldData(i,this.columnProp(e,"field"));return s!==r}else return!0}else return!0}else return!this.columnProp(e,"hidden")},calculateRowGroupSize(t,e,n){if(this.isGrouped(e)){let i=Fe.resolveFieldData(t[n],this.columnProp(e,"field")),s=i,r=0;for(;i===s;){r++;let o=t[++n];if(o)s=Fe.resolveFieldData(o,this.columnProp(e,"field"));else break}return r===1?null:r}else return null},rowTogglerIcon(t){const e=this.isRowExpanded(t)?this.expandedRowIcon:this.collapsedRowIcon;return["p-row-toggler-icon pi",e]},rowGroupTogglerIcon(t){const e=this.isRowGroupExpanded(t)?this.expandedRowIcon:this.collapsedRowIcon;return["p-row-toggler-icon pi",e]},isGrouped(t){return this.groupRowsBy&&this.columnProp(t,"field")?Array.isArray(this.groupRowsBy)?this.groupRowsBy.indexOf(t.props.field)>-1:this.groupRowsBy===t.props.field:!1},isRowEditing(t){return t&&this.editingRows?this.dataKey?this.editingRowKeys?this.editingRowKeys[Fe.resolveFieldData(t,this.dataKey)]!==void 0:!1:this.findIndex(t,this.editingRows)>-1:!1},isRowExpanded(t){return t&&this.expandedRows?this.dataKey?this.expandedRowKeys?this.expandedRowKeys[Fe.resolveFieldData(t,this.dataKey)]!==void 0:!1:this.findIndex(t,this.expandedRows)>-1:!1},isRowGroupExpanded(t){if(this.expandableRowGroups&&this.expandedRowGroups){let e=Fe.resolveFieldData(t,this.groupRowsBy);return this.expandedRowGroups.indexOf(e)>-1}return!1},isSelected(t){return t&&this.selection?this.dataKey?this.selectionKeys?this.selectionKeys[Fe.resolveFieldData(t,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(t)>-1:this.equals(t,this.selection):!1},isSelectedWithContextMenu(t){return t&&this.contextMenuSelection?this.equals(t,this.contextMenuSelection,this.dataKey):!1},findIndexInSelection(t){return this.findIndex(t,this.selection)},findIndex(t,e){let n=-1;if(e&&e.length){for(let i=0;i<e.length;i++)if(this.equals(t,e[i])){n=i;break}}return n},equals(t,e){return this.compareSelectionBy==="equals"?t===e:Fe.equals(t,e,this.dataKey)},onRowGroupToggle(t,e){this.$emit("rowgroup-toggle",{originalEvent:t,data:e})},onRowClick(t,e,n){this.$emit("row-click",{originalEvent:t,data:e,index:n})},onRowDblClick(t,e,n){this.$emit("row-dblclick",{originalEvent:t,data:e,index:n})},onRowRightClick(t,e,n){this.$emit("row-rightclick",{originalEvent:t,data:e,index:n})},onRowTouchEnd(t){this.$emit("row-touchend",t)},onRowKeyDown(t,e,n){this.$emit("row-keydown",{originalEvent:t,data:e,index:n})},onRowMouseDown(t){this.$emit("row-mousedown",t)},onRowDragStart(t,e){this.$emit("row-dragstart",{originalEvent:t,index:e})},onRowDragOver(t,e){this.$emit("row-dragover",{originalEvent:t,index:e})},onRowDragLeave(t){this.$emit("row-dragleave",t)},onRowDragEnd(t){this.$emit("row-dragend",t)},onRowDrop(t){this.$emit("row-drop",t)},onRowToggle(t){this.$emit("row-toggle",t)},onRadioChange(t){this.$emit("radio-change",t)},onCheckboxChange(t){this.$emit("checkbox-change",t)},onCellEditInit(t){this.$emit("cell-edit-init",t)},onCellEditComplete(t){this.$emit("cell-edit-complete",t)},onCellEditCancel(t){this.$emit("cell-edit-cancel",t)},onRowEditInit(t){this.$emit("row-edit-init",t)},onRowEditSave(t){this.$emit("row-edit-save",t)},onRowEditCancel(t){this.$emit("row-edit-cancel",t)},onEditingMetaChange(t){this.$emit("editing-meta-change",t)},updateFrozenRowStickyPosition(){this.$el.style.top=oe.getOuterHeight(this.$el.previousElementSibling)+"px"},updateFrozenRowGroupHeaderStickyPosition(){let t=oe.getOuterHeight(this.$el.previousElementSibling);this.rowGroupHeaderStyleObject.top=t+"px"},updateVirtualScrollerPosition(){const t=oe.getOuterHeight(this.$el.previousElementSibling);this.$el.style.top=(this.$el.style.top||0)+t+"px"},getVirtualScrollerProp(t,e){return e=e||this.virtualScrollerContentProps,e?e[t]:null},bodyRef(t){const e=this.getVirtualScrollerProp("contentRef");e&&e(t)}},computed:{columnsLength(){let t=0;return this.columns.forEach(e=>{this.columnProp(e,"hidden")&&t++}),this.columns?this.columns.length-t:0},rowGroupHeaderStyle(){return this.scrollable?{top:this.rowGroupHeaderStyleObject.top}:null},bodyStyle(){return this.getVirtualScrollerProp("contentStyle")}},components:{DTBodyCell:mD}},bD=["colspan"],yD=["onClick"],xD=["onClick","onDblclick","onContextmenu","onKeydown","tabindex","onDragstart","onDragover"],vD=["colspan"],_D={key:1,class:"p-datatable-emptymessage",role:"row"},wD=["colspan"];function SD(t,e,n,i,s,r){const o=Ke("DTBodyCell");return k(),X("tbody",{ref:r.bodyRef,class:"p-datatable-tbody",role:"rowgroup",style:Ot(r.bodyStyle)},[n.empty?(k(),X("tr",_D,[we("td",{colspan:r.columnsLength},[n.templates.empty?(k(),Ve(Yt(n.templates.empty),{key:0})):Ce("",!0)],8,wD)])):(k(!0),X(je,{key:0},Vt(n.value,(a,l)=>(k(),X(je,{key:r.getRowKey(a,r.getRowIndex(l))+"_subheader"},[n.templates.groupheader&&n.rowGroupMode==="subheader"&&r.shouldRenderRowGroupHeader(n.value,a,r.getRowIndex(l))?(k(),X("tr",{key:0,class:"p-rowgroup-header",style:Ot(r.rowGroupHeaderStyle),role:"row"},[we("td",{colspan:r.columnsLength-1},[n.expandableRowGroups?(k(),X("button",{key:0,class:"p-row-toggler p-link",onClick:c=>r.onRowGroupToggle(c,a),type:"button"},[we("span",{class:Ie(r.rowGroupTogglerIcon(a))},null,2)],8,yD)):Ce("",!0),(k(),Ve(Yt(n.templates.groupheader),{data:a,index:r.getRowIndex(l)},null,8,["data","index"]))],8,bD)],4)):Ce("",!0),!n.expandableRowGroups||r.isRowGroupExpanded(a)?(k(),X("tr",{class:Ie(r.getRowClass(a)),style:Ot(n.rowStyle),key:r.getRowKey(a,r.getRowIndex(l)),onClick:c=>r.onRowClick(c,a,r.getRowIndex(l)),onDblclick:c=>r.onRowDblClick(c,a,r.getRowIndex(l)),onContextmenu:c=>r.onRowRightClick(c,a,r.getRowIndex(l)),onTouchend:e[9]||(e[9]=c=>r.onRowTouchEnd(c)),onKeydown:c=>r.onRowKeyDown(c,a,r.getRowIndex(l)),tabindex:n.selectionMode||n.contextMenu?"0":null,onMousedown:e[10]||(e[10]=c=>r.onRowMouseDown(c)),onDragstart:c=>r.onRowDragStart(c,r.getRowIndex(l)),onDragover:c=>r.onRowDragOver(c,r.getRowIndex(l)),onDragleave:e[11]||(e[11]=c=>r.onRowDragLeave(c)),onDragend:e[12]||(e[12]=c=>r.onRowDragEnd(c)),onDrop:e[13]||(e[13]=c=>r.onRowDrop(c)),role:"row"},[(k(!0),X(je,null,Vt(n.columns,(c,u)=>(k(),X(je,{key:r.columnProp(c,"columnKey")||r.columnProp(c,"field")||u},[r.shouldRenderBodyCell(n.value,c,r.getRowIndex(l))?(k(),Ve(o,{key:0,rowData:a,column:c,rowIndex:r.getRowIndex(l),index:u,selected:r.isSelected(a),rowTogglerIcon:r.columnProp(c,"expander")?r.rowTogglerIcon(a):null,frozenRow:n.frozenRow,rowspan:n.rowGroupMode==="rowspan"?r.calculateRowGroupSize(n.value,c,r.getRowIndex(l)):null,editMode:n.editMode,editing:n.editMode==="row"&&r.isRowEditing(a),responsiveLayout:n.responsiveLayout,onRadioChange:e[0]||(e[0]=d=>r.onRadioChange(d)),onCheckboxChange:e[1]||(e[1]=d=>r.onCheckboxChange(d)),onRowToggle:e[2]||(e[2]=d=>r.onRowToggle(d)),onCellEditInit:e[3]||(e[3]=d=>r.onCellEditInit(d)),onCellEditComplete:e[4]||(e[4]=d=>r.onCellEditComplete(d)),onCellEditCancel:e[5]||(e[5]=d=>r.onCellEditCancel(d)),onRowEditInit:e[6]||(e[6]=d=>r.onRowEditInit(d)),onRowEditSave:e[7]||(e[7]=d=>r.onRowEditSave(d)),onRowEditCancel:e[8]||(e[8]=d=>r.onRowEditCancel(d)),editingMeta:n.editingMeta,onEditingMetaChange:r.onEditingMetaChange,virtualScrollerContentProps:n.virtualScrollerContentProps},null,8,["rowData","column","rowIndex","index","selected","rowTogglerIcon","frozenRow","rowspan","editMode","editing","responsiveLayout","editingMeta","onEditingMetaChange","virtualScrollerContentProps"])):Ce("",!0)],64))),128))],46,xD)):Ce("",!0),n.templates.expansion&&n.expandedRows&&r.isRowExpanded(a)?(k(),X("tr",{class:"p-datatable-row-expansion",key:r.getRowKey(a,r.getRowIndex(l))+"_expansion",role:"row"},[we("td",{colspan:r.columnsLength},[(k(),Ve(Yt(n.templates.expansion),{data:a,index:r.getRowIndex(l)},null,8,["data","index"]))],8,vD)])):Ce("",!0),n.templates.groupfooter&&n.rowGroupMode==="subheader"&&r.shouldRenderRowGroupFooter(n.value,a,r.getRowIndex(l))?(k(),X("tr",{class:"p-rowgroup-footer",key:r.getRowKey(a,r.getRowIndex(l))+"_subfooter",role:"row"},[(k(),Ve(Yt(n.templates.groupfooter),{data:a,index:r.getRowIndex(l)},null,8,["data","index"]))])):Ce("",!0)],64))),128))],4)}var MD=kt(gD,[["render",SD]]);const CD={name:"FooterCell",props:{column:{type:null,default:null}},data(){return{styleObject:{}}},mounted(){this.columnProp("frozen")&&this.updateStickyPosition()},updated(){this.columnProp("frozen")&&this.updateStickyPosition()},methods:{columnProp(t){return Fe.getVNodeProp(this.column,t)},updateStickyPosition(){if(this.columnProp("frozen"))if(this.columnProp("alignFrozen")==="right"){let e=0,n=this.$el.nextElementSibling;n&&(e=oe.getOuterWidth(n)+parseFloat(n.style.left)),this.styleObject.right=e+"px"}else{let e=0,n=this.$el.previousElementSibling;n&&(e=oe.getOuterWidth(n)+parseFloat(n.style.left)),this.styleObject.left=e+"px"}}},computed:{containerClass(){return[this.columnProp("footerClass"),this.columnProp("class"),{"p-frozen-column":this.columnProp("frozen")}]},containerStyle(){let t=this.columnProp("footerStyle"),e=this.columnProp("style");return this.columnProp("frozen")?[e,t,this.styleObject]:[e,t]}}},TD=["colspan","rowspan"];function ED(t,e,n,i,s,r){return k(),X("td",{style:Ot(r.containerStyle),class:Ie(r.containerClass),role:"cell",colspan:r.columnProp("colspan"),rowspan:r.columnProp("rowspan")},[n.column.children&&n.column.children.footer?(k(),Ve(Yt(n.column.children.footer),{key:0,column:n.column},null,8,["column"])):Ce("",!0),vn(" "+it(r.columnProp("footer")),1)],14,TD)}var DD=kt(CD,[["render",ED]]);const PD={name:"TableFooter",props:{columnGroup:{type:null,default:null},columns:{type:null,default:null}},methods:{columnProp(t,e){return Fe.getVNodeProp(t,e)},getFooterRows(){let t=[],e=this.columnGroup;if(e.children&&e.children.default){for(let n of e.children.default())n.type.name==="Row"?t.push(n):n.children&&n.children instanceof Array&&(t=n.children);return t}},getFooterColumns(t){let e=[];if(t.children&&t.children.default)return t.children.default().forEach(n=>{n.children&&n.children instanceof Array?e=[...e,...n.children]:n.type.name==="Column"&&e.push(n)}),e}},computed:{hasFooter(){let t=!1;if(this.columnGroup)t=!0;else if(this.columns){for(let e of this.columns)if(this.columnProp(e,"footer")||e.children&&e.children.footer){t=!0;break}}return t}},components:{DTFooterCell:DD}},LD={key:0,class:"p-datatable-tfoot",role:"rowgroup"},RD={key:0,role:"row"};function AD(t,e,n,i,s,r){const o=Ke("DTFooterCell");return r.hasFooter?(k(),X("tfoot",LD,[n.columnGroup?(k(!0),X(je,{key:1},Vt(r.getFooterRows(),(a,l)=>(k(),X("tr",{key:l,role:"row"},[(k(!0),X(je,null,Vt(r.getFooterColumns(a),(c,u)=>(k(),X(je,{key:r.columnProp(c,"columnKey")||r.columnProp(c,"field")||u},[r.columnProp(c,"hidden")?Ce("",!0):(k(),Ve(o,{key:0,column:c},null,8,["column"]))],64))),128))]))),128)):(k(),X("tr",RD,[(k(!0),X(je,null,Vt(n.columns,(a,l)=>(k(),X(je,{key:r.columnProp(a,"columnKey")||r.columnProp(a,"field")||l},[r.columnProp(a,"hidden")?Ce("",!0):(k(),Ve(o,{key:0,column:a},null,8,["column"]))],64))),128))]))])):Ce("",!0)}var ID=kt(PD,[["render",AD]]);const kD={name:"DataTable",emits:["value-change","update:first","update:rows","page","update:sortField","update:sortOrder","update:multiSortMeta","sort","filter","row-click","row-dblclick","update:selection","row-select","row-unselect","update:contextMenuSelection","row-contextmenu","row-unselect-all","row-select-all","select-all-change","column-resize-end","column-reorder","row-reorder","update:expandedRows","row-collapse","row-expand","update:expandedRowGroups","rowgroup-collapse","rowgroup-expand","update:filters","state-restore","state-save","cell-edit-init","cell-edit-complete","cell-edit-cancel","update:editingRows","row-edit-init","row-edit-save","row-edit-cancel"],props:{value:{type:Array,default:null},dataKey:{type:[String,Function],default:null},rows:{type:Number,default:0},first:{type:Number,default:0},totalRecords:{type:Number,default:0},paginator:{type:Boolean,default:!1},paginatorPosition:{type:String,default:"bottom"},alwaysShowPaginator:{type:Boolean,default:!0},paginatorTemplate:{type:String,default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown"},pageLinkSize:{type:Number,default:5},rowsPerPageOptions:{type:Array,default:null},currentPageReportTemplate:{type:String,default:"({currentPage} of {totalPages})"},lazy:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner"},sortField:{type:[String,Function],default:null},sortOrder:{type:Number,default:null},defaultSortOrder:{type:Number,default:1},multiSortMeta:{type:Array,default:null},sortMode:{type:String,default:"single"},removableSort:{type:Boolean,default:!1},filters:{type:Object,default:null},filterDisplay:{type:String,default:null},globalFilterFields:{type:Array,default:null},filterLocale:{type:String,default:void 0},selection:{type:[Array,Object],default:null},selectionMode:{type:String,default:null},compareSelectionBy:{type:String,default:"deepEquals"},metaKeySelection:{type:Boolean,default:!0},contextMenu:{type:Boolean,default:!1},contextMenuSelection:{type:Object,default:null},selectAll:{type:Boolean,default:null},rowHover:{type:Boolean,default:!1},csvSeparator:{type:String,default:","},exportFilename:{type:String,default:"download"},exportFunction:{type:Function,default:null},autoLayout:{type:Boolean,default:!1},resizableColumns:{type:Boolean,default:!1},columnResizeMode:{type:String,default:"fit"},reorderableColumns:{type:Boolean,default:!1},expandedRows:{type:Array,default:null},expandedRowIcon:{type:String,default:"pi-chevron-down"},collapsedRowIcon:{type:String,default:"pi-chevron-right"},rowGroupMode:{type:String,default:null},groupRowsBy:{type:[Array,String],default:null},expandableRowGroups:{type:Boolean,default:!1},expandedRowGroups:{type:Array,default:null},stateStorage:{type:String,default:"session"},stateKey:{type:String,default:null},editMode:{type:String,default:null},editingRows:{type:Array,default:null},rowClass:{type:null,default:null},rowStyle:{type:null,default:null},scrollable:{type:Boolean,default:!1},scrollDirection:{type:String,default:"vertical"},virtualScrollerOptions:{type:Object,default:null},scrollHeight:{type:String,default:null},frozenValue:{type:Array,default:null},responsiveLayout:{type:String,default:"stack"},breakpoint:{type:String,default:"960px"},showGridlines:{type:Boolean,default:!1},stripedRows:{type:Boolean,default:!1},tableStyle:{type:null,default:null},tableClass:{type:String,default:null}},data(){return{d_first:this.first,d_rows:this.rows,d_sortField:this.sortField,d_sortOrder:this.sortOrder,d_multiSortMeta:this.multiSortMeta?[...this.multiSortMeta]:[],d_groupRowsSortMeta:null,d_selectionKeys:null,d_expandedRowKeys:null,d_columnOrder:null,d_editingRowKeys:null,d_editingMeta:{},d_filters:this.cloneFilters(this.filters)}},rowTouched:!1,anchorRowIndex:null,rangeRowIndex:null,documentColumnResizeListener:null,documentColumnResizeEndListener:null,lastResizeHelperX:null,resizeColumnElement:null,columnResizing:!1,colReorderIconWidth:null,colReorderIconHeight:null,draggedColumn:null,draggedRowIndex:null,droppedRowIndex:null,rowDragging:null,columnWidthsState:null,tableWidthState:null,columnWidthsRestored:!1,watch:{first(t){this.d_first=t},rows(t){this.d_rows=t},sortField(t){this.d_sortField=t},sortOrder(t){this.d_sortOrder=t},multiSortMeta(t){this.d_multiSortMeta=t},selection:{immediate:!0,handler(t){this.dataKey&&this.updateSelectionKeys(t)}},expandedRows(t){this.dataKey&&this.updateExpandedRowKeys(t)},editingRows(t){this.dataKey&&this.updateEditingRowKeys(t)},filters:{deep:!0,handler:function(t){this.d_filters=this.cloneFilters(t)}}},beforeMount(){this.isStateful()&&this.restoreState()},mounted(){this.$el.setAttribute(this.attributeSelector,""),this.responsiveLayout==="stack"&&!this.scrollable&&this.createResponsiveStyle(),this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},beforeUnmount(){this.unbindColumnResizeEvents(),this.destroyStyleElement(),this.destroyResponsiveStyle()},updated(){this.isStateful()&&this.saveState(),this.editMode==="row"&&this.dataKey&&!this.d_editingRowKeys&&this.updateEditingRowKeys(this.editingRows)},methods:{columnProp(t,e){return Fe.getVNodeProp(t,e)},onPage(t){this.clearEditingMetaData(),this.d_first=t.first,this.d_rows=t.rows;let e=this.createLazyLoadEvent(t);e.pageCount=t.pageCount,e.page=t.page,this.$emit("update:first",this.d_first),this.$emit("update:rows",this.d_rows),this.$emit("page",e),this.$emit("value-change",this.processedData)},onColumnHeaderClick(t){const e=t.originalEvent,n=t.column;if(this.columnProp(n,"sortable")){const i=e.target,s=this.columnProp(n,"sortField")||this.columnProp(n,"field");(oe.hasClass(i,"p-sortable-column")||oe.hasClass(i,"p-column-title")||oe.hasClass(i,"p-column-header-content")||oe.hasClass(i,"p-sortable-column-icon")||oe.hasClass(i.parentElement,"p-sortable-column-icon"))&&(oe.clearSelection(),this.sortMode==="single"?(this.d_sortField===s?this.removableSort&&this.d_sortOrder*-1===this.defaultSortOrder?(this.d_sortOrder=null,this.d_sortField=null):this.d_sortOrder=this.d_sortOrder*-1:(this.d_sortOrder=this.defaultSortOrder,this.d_sortField=s),this.$emit("update:sortField",this.d_sortField),this.$emit("update:sortOrder",this.d_sortOrder),this.resetPage()):this.sortMode==="multiple"&&(e.metaKey||e.ctrlKey||(this.d_multiSortMeta=this.d_multiSortMeta.filter(o=>o.field===s)),this.addMultiSortField(s),this.$emit("update:multiSortMeta",this.d_multiSortMeta)),this.$emit("sort",this.createLazyLoadEvent(e)),this.$emit("value-change",this.processedData))}},sortSingle(t){if(this.clearEditingMetaData(),this.groupRowsBy&&this.groupRowsBy===this.sortField)return this.d_multiSortMeta=[{field:this.sortField,order:this.sortOrder||this.defaultSortOrder},{field:this.d_sortField,order:this.d_sortOrder}],this.sortMultiple(t);let e=[...t];return e.sort((n,i)=>{let s=Fe.resolveFieldData(n,this.d_sortField),r=Fe.resolveFieldData(i,this.d_sortField),o=null;return s==null&&r!=null?o=-1:s!=null&&r==null?o=1:s==null&&r==null?o=0:typeof s=="string"&&typeof r=="string"?o=s.localeCompare(r,void 0,{numeric:!0}):o=s<r?-1:s>r?1:0,this.d_sortOrder*o}),e},sortMultiple(t){if(this.clearEditingMetaData(),this.groupRowsBy&&(this.d_groupRowsSortMeta||this.d_multiSortMeta.length&&this.groupRowsBy===this.d_multiSortMeta[0].field)){const n=this.d_multiSortMeta[0];!this.d_groupRowsSortMeta&&(this.d_groupRowsSortMeta=n),n.field!==this.d_groupRowsSortMeta.field&&(this.d_multiSortMeta=[this.d_groupRowsSortMeta,...this.d_multiSortMeta])}let e=[...t];return e.sort((n,i)=>this.multisortField(n,i,0)),e},multisortField(t,e,n){const i=Fe.resolveFieldData(t,this.d_multiSortMeta[n].field),s=Fe.resolveFieldData(e,this.d_multiSortMeta[n].field);let r=null;if(typeof i=="string"||i instanceof String){if(i.localeCompare&&i!==s)return this.d_multiSortMeta[n].order*i.localeCompare(s,void 0,{numeric:!0})}else r=i<s?-1:1;return i===s?this.d_multiSortMeta.length-1>n?this.multisortField(t,e,n+1):0:this.d_multiSortMeta[n].order*r},addMultiSortField(t){let e=this.d_multiSortMeta.findIndex(n=>n.field===t);e>=0?this.removableSort&&this.d_multiSortMeta[e].order*-1===this.defaultSortOrder?this.d_multiSortMeta.splice(e,1):this.d_multiSortMeta[e]={field:t,order:this.d_multiSortMeta[e].order*-1}:this.d_multiSortMeta.push({field:t,order:this.defaultSortOrder}),this.d_multiSortMeta=[...this.d_multiSortMeta]},filter(t){if(!t)return;this.clearEditingMetaData();let e;this.filters.global&&(e=this.globalFilterFields||this.columns.map(s=>this.columnProp(s,"filterField")||this.columnProp(s,"field")));let n=[];for(let s=0;s<t.length;s++){let r=!0,o=!1,a=!1;for(let c in this.filters)if(Object.prototype.hasOwnProperty.call(this.filters,c)&&c!=="global"){a=!0;let u=c,d=this.filters[u];if(d.operator){for(let h of d.constraints)if(r=this.executeLocalFilter(u,t[s],h),d.operator===kc.OR&&r||d.operator===kc.AND&&!r)break}else r=this.executeLocalFilter(u,t[s],d);if(!r)break}if(this.filters.global&&!o&&e)for(let c=0;c<e.length;c++){let u=e[c];if(o=Oc.filters[this.filters.global.matchMode||un.CONTAINS](Fe.resolveFieldData(t[s],u),this.filters.global.value,this.filterLocale),o)break}let l;this.filters.global?l=a?a&&r&&o:o:l=a&&r,l&&n.push(t[s])}n.length===this.value.length&&(n=t);let i=this.createLazyLoadEvent();return i.filteredValue=n,this.$emit("filter",i),this.$emit("value-change",n),n},executeLocalFilter(t,e,n){let i=n.value,s=n.matchMode||un.STARTS_WITH,r=Fe.resolveFieldData(e,t),o=Oc.filters[s];return o(r,i,this.filterLocale)},onRowClick(t){const e=t.originalEvent;if(!oe.isClickable(e.target)){if(this.$emit("row-click",t),this.selectionMode){const n=t.data,i=this.d_first+t.index;if(this.isMultipleSelectionMode()&&e.shiftKey&&this.anchorRowIndex!=null)oe.clearSelection(),this.rangeRowIndex=i,this.selectRange(e);else{const s=this.isSelected(n),r=this.rowTouched?!1:this.metaKeySelection;if(this.anchorRowIndex=i,this.rangeRowIndex=i,r){let o=e.metaKey||e.ctrlKey;if(s&&o){if(this.isSingleSelectionMode())this.$emit("update:selection",null);else{const a=this.findIndexInSelection(n),l=this.selection.filter((c,u)=>u!=a);this.$emit("update:selection",l)}this.$emit("row-unselect",{originalEvent:e,data:n,index:i,type:"row"})}else{if(this.isSingleSelectionMode())this.$emit("update:selection",n);else if(this.isMultipleSelectionMode()){let a=o?this.selection||[]:[];a=[...a,n],this.$emit("update:selection",a)}this.$emit("row-select",{originalEvent:e,data:n,index:i,type:"row"})}}else if(this.selectionMode==="single")s?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:e,data:n,index:i,type:"row"})):(this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:e,data:n,index:i,type:"row"}));else if(this.selectionMode==="multiple")if(s){const o=this.findIndexInSelection(n),a=this.selection.filter((l,c)=>c!=o);this.$emit("update:selection",a),this.$emit("row-unselect",{originalEvent:e,data:n,index:i,type:"row"})}else{const o=this.selection?[...this.selection,n]:[n];this.$emit("update:selection",o),this.$emit("row-select",{originalEvent:e,data:n,index:i,type:"row"})}}}this.rowTouched=!1}},onRowDblClick(t){const e=t.originalEvent;oe.isClickable(e.target)||this.$emit("row-dblclick",t)},onRowRightClick(t){oe.clearSelection(),t.originalEvent.target.focus(),this.$emit("update:contextMenuSelection",t.data),this.$emit("row-contextmenu",t)},onRowTouchEnd(){this.rowTouched=!0},onRowKeyDown(t){const e=t.originalEvent,n=t.data,i=t.index;if(this.selectionMode){const o=e.target;switch(e.which){case 40:var s=this.findNextSelectableRow(o);s&&s.focus(),e.preventDefault();break;case 38:var r=this.findPrevSelectableRow(o);r&&r.focus(),e.preventDefault();break;case 13:this.onRowClick({originalEvent:e,data:n,index:i});break}}},findNextSelectableRow(t){let e=t.nextElementSibling;return e?oe.hasClass(e,"p-selectable-row")?e:this.findNextSelectableRow(e):null},findPrevSelectableRow(t){let e=t.previousElementSibling;return e?oe.hasClass(e,"p-selectable-row")?e:this.findPrevSelectableRow(e):null},toggleRowWithRadio(t){const e=t.data;this.isSelected(e)?(this.$emit("update:selection",null),this.$emit("row-unselect",{originalEvent:t.originalEvent,data:e,index:t.index,type:"radiobutton"})):(this.$emit("update:selection",e),this.$emit("row-select",{originalEvent:t.originalEvent,data:e,index:t.index,type:"radiobutton"}))},toggleRowWithCheckbox(t){const e=t.data;if(this.isSelected(e)){const n=this.findIndexInSelection(e),i=this.selection.filter((s,r)=>r!=n);this.$emit("update:selection",i),this.$emit("row-unselect",{originalEvent:t.originalEvent,data:e,index:t.index,type:"checkbox"})}else{let n=this.selection?[...this.selection]:[];n=[...n,e],this.$emit("update:selection",n),this.$emit("row-select",{originalEvent:t.originalEvent,data:e,index:t.index,type:"checkbox"})}},toggleRowsWithCheckbox(t){if(this.selectAll!==null)this.$emit("select-all-change",t);else{const{originalEvent:e,checked:n}=t;let i=[];n?(i=this.frozenValue?[...this.frozenValue,...this.processedData]:this.processedData,this.$emit("row-select-all",{originalEvent:e,data:i})):this.$emit("row-unselect-all",{originalEvent:e}),this.$emit("update:selection",i)}},isSingleSelectionMode(){return this.selectionMode==="single"},isMultipleSelectionMode(){return this.selectionMode==="multiple"},isSelected(t){return t&&this.selection?this.dataKey?this.d_selectionKeys?this.d_selectionKeys[Fe.resolveFieldData(t,this.dataKey)]!==void 0:!1:this.selection instanceof Array?this.findIndexInSelection(t)>-1:this.equals(t,this.selection):!1},findIndexInSelection(t){return this.findIndex(t,this.selection)},findIndex(t,e){let n=-1;if(e&&e.length){for(let i=0;i<e.length;i++)if(this.equals(t,e[i])){n=i;break}}return n},updateSelectionKeys(t){if(this.d_selectionKeys={},Array.isArray(t))for(let e of t)this.d_selectionKeys[String(Fe.resolveFieldData(e,this.dataKey))]=1;else this.d_selectionKeys[String(Fe.resolveFieldData(t,this.dataKey))]=1},updateExpandedRowKeys(t){if(t&&t.length){this.d_expandedRowKeys={};for(let e of t)this.d_expandedRowKeys[String(Fe.resolveFieldData(e,this.dataKey))]=1}else this.d_expandedRowKeys=null},updateEditingRowKeys(t){if(t&&t.length){this.d_editingRowKeys={};for(let e of t)this.d_editingRowKeys[String(Fe.resolveFieldData(e,this.dataKey))]=1}else this.d_editingRowKeys=null},equals(t,e){return this.compareSelectionBy==="equals"?t===e:Fe.equals(t,e,this.dataKey)},selectRange(t){let e,n;this.rangeRowIndex>this.anchorRowIndex?(e=this.anchorRowIndex,n=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(e=this.rangeRowIndex,n=this.anchorRowIndex):(e=this.rangeRowIndex,n=this.rangeRowIndex),this.lazy&&this.paginator&&(e-=this.first,n-=this.first);const i=this.processedData;let s=[];for(let r=e;r<=n;r++){let o=i[r];s.push(o),this.$emit("row-select",{originalEvent:t,data:o,type:"row"})}this.$emit("update:selection",s)},exportCSV(t,e){let n="\uFEFF";e||(e=this.processedData,t&&t.selectionOnly?e=this.selection||[]:this.frozenValue&&(e=e?[...this.frozenValue,...e]:this.frozenValue));let i=!1;for(let s=0;s<this.columns.length;s++){let r=this.columns[s];this.columnProp(r,"exportable")!==!1&&this.columnProp(r,"field")&&(i?n+=this.csvSeparator:i=!0,n+='"'+(this.columnProp(r,"exportHeader")||this.columnProp(r,"header")||this.columnProp(r,"field"))+'"')}e&&e.forEach(s=>{n+=`
`;let r=!1;for(let o=0;o<this.columns.length;o++){let a=this.columns[o];if(this.columnProp(a,"exportable")!==!1&&this.columnProp(a,"field")){r?n+=this.csvSeparator:r=!0;let l=Fe.resolveFieldData(s,this.columnProp(a,"field"));l!=null?this.exportFunction?l=this.exportFunction({data:l,field:this.columnProp(a,"field")}):l=String(l).replace(/"/g,'""'):l="",n+='"'+l+'"'}}}),oe.exportCSV(n,this.exportFilename)},resetPage(){this.d_first=0,this.$emit("update:first",this.d_first)},onColumnResizeStart(t){let e=oe.getOffset(this.$el).left;this.resizeColumnElement=t.target.parentElement,this.columnResizing=!0,this.lastResizeHelperX=t.pageX-e+this.$el.scrollLeft,this.bindColumnResizeEvents()},onColumnResize(t){let e=oe.getOffset(this.$el).left;oe.addClass(this.$el,"p-unselectable-text"),this.$refs.resizeHelper.style.height=this.$el.offsetHeight+"px",this.$refs.resizeHelper.style.top=0+"px",this.$refs.resizeHelper.style.left=t.pageX-e+this.$el.scrollLeft+"px",this.$refs.resizeHelper.style.display="block"},onColumnResizeEnd(){let t=this.$refs.resizeHelper.offsetLeft-this.lastResizeHelperX,e=this.resizeColumnElement.offsetWidth,n=e+t,i=this.resizeColumnElement.style.minWidth||15;if(e+t>parseInt(i,10)){if(this.columnResizeMode==="fit"){let r=this.resizeColumnElement.nextElementSibling.offsetWidth-t;n>15&&r>15&&this.resizeTableCells(n,r)}else if(this.columnResizeMode==="expand"){const s=this.$refs.table.offsetWidth+t+"px",r=o=>{o&&(o.style.width=o.style.minWidth=s)};if(r(this.$refs.table),!this.virtualScrollerDisabled){const o=this.$refs.bodyRef&&this.$refs.bodyRef.$el,a=this.$refs.frozenBodyRef&&this.$refs.frozenBodyRef.$el;r(o),r(a)}this.resizeTableCells(n)}this.$emit("column-resize-end",{element:this.resizeColumnElement,delta:t})}this.$refs.resizeHelper.style.display="none",this.resizeColumn=null,oe.removeClass(this.$el,"p-unselectable-text"),this.unbindColumnResizeEvents(),this.isStateful()&&this.saveState()},resizeTableCells(t,e){let n=oe.index(this.resizeColumnElement),i=[];oe.find(this.$refs.table,".p-datatable-thead > tr > th").forEach(o=>i.push(oe.getOuterWidth(o))),this.destroyStyleElement(),this.createStyleElement();let r="";i.forEach((o,a)=>{let l=a===n?t:e&&a===n+1?e:o,c=this.scrollable?`flex: 1 1 ${l}px !important`:`width: ${l}px !important`;r+=`
                    .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th:nth-child(${a+1}),
                    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:nth-child(${a+1}),
                    .p-datatable[${this.attributeSelector}] .p-datatable-tfoot > tr > td:nth-child(${a+1}) {
                        ${c}
                    }
                `}),this.styleElement.innerHTML=r},bindColumnResizeEvents(){this.documentColumnResizeListener||(this.documentColumnResizeListener=document.addEventListener("mousemove",()=>{this.columnResizing&&this.onColumnResize(event)})),this.documentColumnResizeEndListener||(this.documentColumnResizeEndListener=document.addEventListener("mouseup",()=>{this.columnResizing&&(this.columnResizing=!1,this.onColumnResizeEnd())}))},unbindColumnResizeEvents(){this.documentColumnResizeListener&&(document.removeEventListener("document",this.documentColumnResizeListener),this.documentColumnResizeListener=null),this.documentColumnResizeEndListener&&(document.removeEventListener("document",this.documentColumnResizeEndListener),this.documentColumnResizeEndListener=null)},onColumnHeaderMouseDown(t){const e=t.originalEvent,n=t.column;this.reorderableColumns&&this.columnProp(n,"reorderableColumn")!==!1&&(e.target.nodeName==="INPUT"||e.target.nodeName==="TEXTAREA"||oe.hasClass(e.target,"p-column-resizer")?e.currentTarget.draggable=!1:e.currentTarget.draggable=!0)},onColumnHeaderDragStart(t){if(this.columnResizing){t.preventDefault();return}this.colReorderIconWidth=oe.getHiddenElementOuterWidth(this.$refs.reorderIndicatorUp),this.colReorderIconHeight=oe.getHiddenElementOuterHeight(this.$refs.reorderIndicatorUp),this.draggedColumn=this.findParentHeader(t.target),t.dataTransfer.setData("text","b")},onColumnHeaderDragOver(t){let e=this.findParentHeader(t.target);if(this.reorderableColumns&&this.draggedColumn&&e){t.preventDefault();let n=oe.getOffset(this.$el),i=oe.getOffset(e);if(this.draggedColumn!==e){let s=i.left-n.left,r=i.left+e.offsetWidth/2;this.$refs.reorderIndicatorUp.style.top=i.top-n.top-(this.colReorderIconHeight-1)+"px",this.$refs.reorderIndicatorDown.style.top=i.top-n.top+e.offsetHeight+"px",t.pageX>r?(this.$refs.reorderIndicatorUp.style.left=s+e.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s+e.offsetWidth-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=1):(this.$refs.reorderIndicatorUp.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.$refs.reorderIndicatorDown.style.left=s-Math.ceil(this.colReorderIconWidth/2)+"px",this.dropPosition=-1),this.$refs.reorderIndicatorUp.style.display="block",this.$refs.reorderIndicatorDown.style.display="block"}}},onColumnHeaderDragLeave(t){this.reorderableColumns&&this.draggedColumn&&(t.preventDefault(),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none")},onColumnHeaderDrop(t){if(t.preventDefault(),this.draggedColumn){let e=oe.index(this.draggedColumn),n=oe.index(this.findParentHeader(t.target)),i=e!==n;i&&(n-e===1&&this.dropPosition===-1||n-e===-1&&this.dropPosition===1)&&(i=!1),i&&(Fe.reorderArray(this.columns,e,n),this.updateReorderableColumns(),this.$emit("column-reorder",{originalEvent:t,dragIndex:e,dropIndex:n})),this.$refs.reorderIndicatorUp.style.display="none",this.$refs.reorderIndicatorDown.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}},findParentHeader(t){if(t.nodeName==="TH")return t;{let e=t.parentElement;for(;e.nodeName!=="TH"&&(e=e.parentElement,!!e););return e}},findColumnByKey(t,e){if(t&&t.length)for(let n=0;n<t.length;n++){let i=t[n];if(this.columnProp(i,"columnKey")===e||this.columnProp(i,"field")===e)return i}return null},onRowMouseDown(t){oe.hasClass(t.target,"p-datatable-reorderablerow-handle")?t.currentTarget.draggable=!0:t.currentTarget.draggable=!1},onRowDragStart(t){const e=t.originalEvent,n=t.index;this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")},onRowDragOver(t){const e=t.originalEvent,n=t.index;if(this.rowDragging&&this.draggedRowIndex!==n){let i=e.currentTarget,s=oe.getOffset(i).top+oe.getWindowScrollTop(),r=e.pageY,o=s+oe.getOuterHeight(i)/2,a=i.previousElementSibling;r<o?(oe.removeClass(i,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,a?oe.addClass(a,"p-datatable-dragpoint-bottom"):oe.addClass(i,"p-datatable-dragpoint-top")):(a?oe.removeClass(a,"p-datatable-dragpoint-bottom"):oe.addClass(i,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,oe.addClass(i,"p-datatable-dragpoint-bottom")),e.preventDefault()}},onRowDragLeave(t){let e=t.currentTarget,n=e.previousElementSibling;n&&oe.removeClass(n,"p-datatable-dragpoint-bottom"),oe.removeClass(e,"p-datatable-dragpoint-bottom"),oe.removeClass(e,"p-datatable-dragpoint-top")},onRowDragEnd(t){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null,t.currentTarget.draggable=!1},onRowDrop(t){if(this.droppedRowIndex!=null){let e=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1,n=[...this.processedData];Fe.reorderArray(n,this.draggedRowIndex,e),this.$emit("row-reorder",{originalEvent:t,dragIndex:this.draggedRowIndex,dropIndex:e,value:n})}this.onRowDragLeave(t),this.onRowDragEnd(t),t.preventDefault()},toggleRow(t){let e=t.data,n,i,s=this.expandedRows?[...this.expandedRows]:[];this.dataKey?n=this.d_expandedRowKeys?this.d_expandedRowKeys[Fe.resolveFieldData(e,this.dataKey)]!==void 0:!1:(i=this.findIndex(e,this.expandedRows),n=i>-1),n?(i==null&&(i=this.findIndex(e,this.expandedRows)),s.splice(i,1),this.$emit("update:expandedRows",s),this.$emit("row-collapse",t)):(s.push(e),this.$emit("update:expandedRows",s),this.$emit("row-expand",t))},toggleRowGroup(t){const e=t.originalEvent,n=t.data,i=Fe.resolveFieldData(n,this.groupRowsBy);let s=this.expandedRowGroups?[...this.expandedRowGroups]:[];this.isRowGroupExpanded(n)?(s=s.filter(r=>r!==i),this.$emit("update:expandedRowGroups",s),this.$emit("rowgroup-collapse",{originalEvent:e,data:i})):(s.push(i),this.$emit("update:expandedRowGroups",s),this.$emit("rowgroup-expand",{originalEvent:e,data:i}))},isRowGroupExpanded(t){if(this.expandableRowGroups&&this.expandedRowGroups){let e=Fe.resolveFieldData(t,this.groupRowsBy);return this.expandedRowGroups.indexOf(e)>-1}return!1},isStateful(){return this.stateKey!=null},getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}},saveState(){const t=this.getStorage();let e={};this.paginator&&(e.first=this.d_first,e.rows=this.d_rows),this.d_sortField&&(e.sortField=this.d_sortField,e.sortOrder=this.d_sortOrder),this.d_multiSortMeta&&(e.multiSortMeta=this.d_multiSortMeta),this.hasFilters&&(e.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(e),this.reorderableColumns&&(e.columnOrder=this.d_columnOrder),this.expandedRows&&(e.expandedRows=this.expandedRows,e.expandedRowKeys=this.d_expandedRowKeys),this.expandedRowGroups&&(e.expandedRowGroups=this.expandedRowGroups),this.selection&&(e.selection=this.selection,e.selectionKeys=this.d_selectionKeys),Object.keys(e).length&&t.setItem(this.stateKey,JSON.stringify(e)),this.$emit("state-save",e)},restoreState(){const e=this.getStorage().getItem(this.stateKey),n=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,i=function(s,r){return typeof r=="string"&&n.test(r)?new Date(r):r};if(e){let s=JSON.parse(e,i);this.paginator&&(this.d_first=s.first,this.d_rows=s.rows),s.sortField&&(this.d_sortField=s.sortField,this.d_sortOrder=s.sortOrder),s.multiSortMeta&&(this.d_multiSortMeta=s.multiSortMeta),s.filters&&this.$emit("update:filters",s.filters),this.resizableColumns&&(this.columnWidthsState=s.columnWidths,this.tableWidthState=s.tableWidth),this.reorderableColumns&&(this.d_columnOrder=s.columnOrder),s.expandedRows&&(this.d_expandedRowKeys=s.expandedRowKeys,this.$emit("update:expandedRows",s.expandedRows)),s.expandedRowGroups&&this.$emit("update:expandedRowGroups",s.expandedRowGroups),s.selection&&(this.d_selectionKeys=s.d_selectionKeys,this.$emit("update:selection",s.selection)),this.$emit("state-restore",s)}},saveColumnWidths(t){let e=[];oe.find(this.$el,".p-datatable-thead > tr > th").forEach(i=>e.push(oe.getOuterWidth(i))),t.columnWidths=e.join(","),this.columnResizeMode==="expand"&&(t.tableWidth=oe.getOuterWidth(this.$refs.table)+"px")},restoreColumnWidths(){if(this.columnWidthsState){let t=this.columnWidthsState.split(",");if(this.columnResizeMode==="expand"&&this.tableWidthState&&(this.$refs.table.style.width=this.tableWidthState,this.$refs.table.style.minWidth=this.tableWidthState,this.$el.style.width=this.tableWidthState),Fe.isNotEmpty(t)){this.createStyleElement();let e="";t.forEach((n,i)=>{let s=this.scrollable?`flex: 1 1 ${n}px !important`:`width: ${n}px !important`;e+=`
                            .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th:nth-child(${i+1}),
                            .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:nth-child(${i+1}),
                            .p-datatable[${this.attributeSelector}] .p-datatable-tfoot > tr > td:nth-child(${i+1}) {
                                ${s}
                            }
                        `}),this.styleElement.innerHTML=e}}},onCellEditInit(t){this.$emit("cell-edit-init",t)},onCellEditComplete(t){this.$emit("cell-edit-complete",t)},onCellEditCancel(t){this.$emit("cell-edit-cancel",t)},onRowEditInit(t){let e=this.editingRows?[...this.editingRows]:[];e.push(t.data),this.$emit("update:editingRows",e),this.$emit("row-edit-init",t)},onRowEditSave(t){let e=[...this.editingRows];e.splice(this.findIndex(t.data,e),1),this.$emit("update:editingRows",e),this.$emit("row-edit-save",t)},onRowEditCancel(t){let e=[...this.editingRows];e.splice(this.findIndex(t.data,e),1),this.$emit("update:editingRows",e),this.$emit("row-edit-cancel",t)},onEditingMetaChange(t){let{data:e,field:n,index:i,editing:s}=t,r={...this.d_editingMeta},o=r[i];if(s)!o&&(o=r[i]={data:{...e},fields:[]}),o.fields.push(n);else if(o){const a=o.fields.filter(l=>l!==n);a.length?o.fields=a:delete r[i]}this.d_editingMeta=r},clearEditingMetaData(){this.editMode&&(this.d_editingMeta={})},createLazyLoadEvent(t){return{originalEvent:t,first:this.d_first,rows:this.d_rows,sortField:this.d_sortField,sortOrder:this.d_sortOrder,multiSortMeta:this.d_multiSortMeta,filters:this.d_filters}},hasGlobalFilter(){return this.filters&&Object.prototype.hasOwnProperty.call(this.filters,"global")},getChildren(){return this.$slots.default?this.$slots.default():null},onFilterChange(t){this.d_filters=t},onFilterApply(){this.d_first=0,this.$emit("update:first",this.d_first),this.$emit("update:filters",this.d_filters),this.lazy&&this.$emit("filter",this.createLazyLoadEvent())},cloneFilters(){let t={};return this.filters&&Object.entries(this.filters).forEach(([e,n])=>{t[e]=n.operator?{operator:n.operator,constraints:n.constraints.map(i=>({...i}))}:{...n}}),t},updateReorderableColumns(){let t=[];this.columns.forEach(e=>t.push(this.columnProp(e,"columnKey")||this.columnProp(e,"field"))),this.d_columnOrder=t},createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)},createResponsiveStyle(){if(!this.responsiveStyleElement){this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement);let t=`
@media screen and (max-width: ${this.breakpoint}) {
    .p-datatable[${this.attributeSelector}] .p-datatable-thead > tr > th,
    .p-datatable[${this.attributeSelector}] .p-datatable-tfoot > tr > td {
        display: none !important;
    }

    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td {
        display: flex;
        width: 100% !important;
        align-items: center;
        justify-content: space-between;
    }

    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td:not(:last-child) {
        border: 0 none;
    }

    .p-datatable[${this.attributeSelector}].p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {
        border-top: 0;
        border-right: 0;
        border-left: 0;
    }

    .p-datatable[${this.attributeSelector}] .p-datatable-tbody > tr > td > .p-column-title {
        display: block;
    }
}
`;this.responsiveStyleElement.innerHTML=t}},destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)},destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},recursiveGetChildren(t,e){return e||(e=[]),t&&t.length&&t.forEach(n=>{n.children instanceof Array?e.concat(this.recursiveGetChildren(n.children,e)):n.type.name=="Column"&&e.push(n)}),e},dataToRender(t){const e=t||this.processedData;if(e&&this.paginator){const n=this.lazy?0:this.d_first;return e.slice(n,n+this.d_rows)}return e}},computed:{containerClass(){return["p-datatable p-component",{"p-datatable-hoverable-rows":this.rowHover||this.selectionMode,"p-datatable-auto-layout":this.autoLayout,"p-datatable-resizable":this.resizableColumns,"p-datatable-resizable-fit":this.resizableColumns&&this.columnResizeMode==="fit","p-datatable-scrollable":this.scrollable,"p-datatable-scrollable-vertical":this.scrollable&&this.scrollDirection==="vertical","p-datatable-scrollable-horizontal":this.scrollable&&this.scrollDirection==="horizontal","p-datatable-scrollable-both":this.scrollable&&this.scrollDirection==="both","p-datatable-flex-scrollable":this.scrollable&&this.scrollHeight==="flex","p-datatable-responsive-stack":this.responsiveLayout==="stack","p-datatable-responsive-scroll":this.responsiveLayout==="scroll","p-datatable-striped":this.stripedRows,"p-datatable-gridlines":this.showGridlines,"p-datatable-grouped-header":this.headerColumnGroup!=null,"p-datatable-grouped-footer":this.footerColumnGroup!=null}]},columns(){let t=this.getChildren();if(!t)return;const e=this.recursiveGetChildren(t,[]);if(this.reorderableColumns&&this.d_columnOrder){let n=[];for(let i of this.d_columnOrder){let s=this.findColumnByKey(e,i);s&&!this.columnProp(s,"hidden")&&n.push(s)}return[...n,...e.filter(i=>n.indexOf(i)<0)]}return e},headerColumnGroup(){const t=this.getChildren();if(t){for(let e of t)if(e.type.name==="ColumnGroup"&&this.columnProp(e,"type")==="header")return e}return null},footerColumnGroup(){const t=this.getChildren();if(t){for(let e of t)if(e.type.name==="ColumnGroup"&&this.columnProp(e,"type")==="footer")return e}return null},hasFilters(){return this.filters&&Object.keys(this.filters).length>0&&this.filters.constructor===Object},processedData(){let t=this.value||[];return this.lazy||t&&t.length&&(this.hasFilters&&(t=this.filter(t)),this.sorted&&(this.sortMode==="single"?t=this.sortSingle(t):this.sortMode==="multiple"&&(t=this.sortMultiple(t)))),t},totalRecordsLength(){if(this.lazy)return this.totalRecords;{const t=this.processedData;return t?t.length:0}},empty(){const t=this.processedData;return!t||t.length===0},paginatorTop(){return this.paginator&&(this.paginatorPosition!=="bottom"||this.paginatorPosition==="both")},paginatorBottom(){return this.paginator&&(this.paginatorPosition!=="top"||this.paginatorPosition==="both")},sorted(){return this.d_sortField||this.d_multiSortMeta&&this.d_multiSortMeta.length>0},loadingIconClass(){return["p-datatable-loading-icon pi-spin",this.loadingIcon]},allRowsSelected(){if(this.selectAll!==null)return this.selectAll;{const t=this.frozenValue?[...this.frozenValue,...this.processedData]:this.processedData;return Fe.isNotEmpty(t)&&this.selection&&Array.isArray(this.selection)&&t.every(e=>this.selection.some(n=>this.equals(n,e)))}},attributeSelector(){return Do()},groupRowSortField(){return this.sortMode==="single"?this.sortField:this.d_groupRowsSortMeta?this.d_groupRowsSortMeta.field:null},virtualScrollerDisabled(){return Fe.isEmpty(this.virtualScrollerOptions)||!this.scrollable}},components:{DTPaginator:ox,DTTableHeader:YE,DTTableBody:MD,DTTableFooter:ID,DTVirtualScroller:Tf}},OD={key:0,class:"p-datatable-loading-overlay p-component-overlay"},FD={key:1,class:"p-datatable-header"},ND={key:4,class:"p-datatable-footer"},BD={ref:"resizeHelper",class:"p-column-resizer-helper",style:{display:"none"}},zD={key:5,ref:"reorderIndicatorUp",class:"pi pi-arrow-down p-datatable-reorder-indicator-up",style:{position:"absolute",display:"none"}},VD={key:6,ref:"reorderIndicatorDown",class:"pi pi-arrow-up p-datatable-reorder-indicator-down",style:{position:"absolute",display:"none"}};function UD(t,e,n,i,s,r){const o=Ke("DTPaginator"),a=Ke("DTTableHeader"),l=Ke("DTTableBody"),c=Ke("DTTableFooter"),u=Ke("DTVirtualScroller");return k(),X("div",{class:Ie(r.containerClass),"data-scrollselectors":".p-datatable-wrapper"},[gt(t.$slots,"default"),n.loading?(k(),X("div",OD,[t.$slots.loading?gt(t.$slots,"loading",{key:0}):(k(),X("i",{key:1,class:Ie(r.loadingIconClass)},null,2))])):Ce("",!0),t.$slots.header?(k(),X("div",FD,[gt(t.$slots,"header")])):Ce("",!0),r.paginatorTop?(k(),Ve(o,{key:2,rows:s.d_rows,first:s.d_first,totalRecords:r.totalRecordsLength,pageLinkSize:n.pageLinkSize,template:n.paginatorTemplate,rowsPerPageOptions:n.rowsPerPageOptions,currentPageReportTemplate:n.currentPageReportTemplate,class:"p-paginator-top",onPage:e[0]||(e[0]=d=>r.onPage(d)),alwaysShow:n.alwaysShowPaginator},sh({_:2},[t.$slots.paginatorstart?{name:"start",fn:Xe(()=>[gt(t.$slots,"paginatorstart")])}:void 0,t.$slots.paginatorend?{name:"end",fn:Xe(()=>[gt(t.$slots,"paginatorend")])}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow"])):Ce("",!0),we("div",{class:"p-datatable-wrapper",style:Ot({maxHeight:r.virtualScrollerDisabled?n.scrollHeight:""})},[he(u,dn(n.virtualScrollerOptions,{items:r.processedData,columns:r.columns,style:{height:n.scrollHeight},disabled:r.virtualScrollerDisabled,loaderDisabled:"",showSpacer:!1}),{content:Xe(d=>[we("table",{ref:"table",role:"table",class:Ie([n.tableClass,"p-datatable-table"]),style:Ot([n.tableStyle,d.spacerStyle])},[he(a,{columnGroup:r.headerColumnGroup,columns:d.columns,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,groupRowSortField:r.groupRowSortField,reorderableColumns:n.reorderableColumns,resizableColumns:n.resizableColumns,allRowsSelected:r.allRowsSelected,empty:r.empty,sortMode:n.sortMode,sortField:s.d_sortField,sortOrder:s.d_sortOrder,multiSortMeta:s.d_multiSortMeta,filters:s.d_filters,filtersStore:n.filters,filterDisplay:n.filterDisplay,onColumnClick:e[1]||(e[1]=h=>r.onColumnHeaderClick(h)),onColumnMousedown:e[2]||(e[2]=h=>r.onColumnHeaderMouseDown(h)),onFilterChange:r.onFilterChange,onFilterApply:r.onFilterApply,onColumnDragstart:e[3]||(e[3]=h=>r.onColumnHeaderDragStart(h)),onColumnDragover:e[4]||(e[4]=h=>r.onColumnHeaderDragOver(h)),onColumnDragleave:e[5]||(e[5]=h=>r.onColumnHeaderDragLeave(h)),onColumnDrop:e[6]||(e[6]=h=>r.onColumnHeaderDrop(h)),onColumnResizestart:e[7]||(e[7]=h=>r.onColumnResizeStart(h)),onCheckboxChange:e[8]||(e[8]=h=>r.toggleRowsWithCheckbox(h))},null,8,["columnGroup","columns","rowGroupMode","groupRowsBy","groupRowSortField","reorderableColumns","resizableColumns","allRowsSelected","empty","sortMode","sortField","sortOrder","multiSortMeta","filters","filtersStore","filterDisplay","onFilterChange","onFilterApply"]),n.frozenValue?(k(),Ve(l,{key:0,ref:"frozenBodyRef",value:n.frozenValue,frozenRow:!0,class:"p-datatable-frozen-tbody",columns:d.columns,dataKey:n.dataKey,selection:n.selection,selectionKeys:s.d_selectionKeys,selectionMode:n.selectionMode,contextMenu:n.contextMenu,contextMenuSelection:n.contextMenuSelection,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,expandableRowGroups:n.expandableRowGroups,rowClass:n.rowClass,rowStyle:n.rowStyle,editMode:n.editMode,compareSelectionBy:n.compareSelectionBy,scrollable:n.scrollable,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,expandedRows:n.expandedRows,expandedRowKeys:s.d_expandedRowKeys,expandedRowGroups:n.expandedRowGroups,editingRows:n.editingRows,editingRowKeys:s.d_editingRowKeys,templates:t.$slots,responsiveLayout:n.responsiveLayout,onRowgroupToggle:r.toggleRowGroup,onRowClick:e[9]||(e[9]=h=>r.onRowClick(h)),onRowDblclick:e[10]||(e[10]=h=>r.onRowDblClick(h)),onRowRightclick:e[11]||(e[11]=h=>r.onRowRightClick(h)),onRowTouchend:r.onRowTouchEnd,onRowKeydown:r.onRowKeyDown,onRowMousedown:r.onRowMouseDown,onRowDragstart:e[12]||(e[12]=h=>r.onRowDragStart(h)),onRowDragover:e[13]||(e[13]=h=>r.onRowDragOver(h)),onRowDragleave:e[14]||(e[14]=h=>r.onRowDragLeave(h)),onRowDragend:e[15]||(e[15]=h=>r.onRowDragEnd(h)),onRowDrop:e[16]||(e[16]=h=>r.onRowDrop(h)),onRowToggle:e[17]||(e[17]=h=>r.toggleRow(h)),onRadioChange:e[18]||(e[18]=h=>r.toggleRowWithRadio(h)),onCheckboxChange:e[19]||(e[19]=h=>r.toggleRowWithCheckbox(h)),onCellEditInit:e[20]||(e[20]=h=>r.onCellEditInit(h)),onCellEditComplete:e[21]||(e[21]=h=>r.onCellEditComplete(h)),onCellEditCancel:e[22]||(e[22]=h=>r.onCellEditCancel(h)),onRowEditInit:e[23]||(e[23]=h=>r.onRowEditInit(h)),onRowEditSave:e[24]||(e[24]=h=>r.onRowEditSave(h)),onRowEditCancel:e[25]||(e[25]=h=>r.onRowEditCancel(h)),editingMeta:s.d_editingMeta,onEditingMetaChange:r.onEditingMetaChange,isVirtualScrollerDisabled:!0},null,8,["value","columns","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowKeys","expandedRowGroups","editingRows","editingRowKeys","templates","responsiveLayout","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange"])):Ce("",!0),he(l,{ref:"bodyRef",value:r.dataToRender(d.rows),class:Ie(d.styleClass),columns:d.columns,empty:r.empty,dataKey:n.dataKey,selection:n.selection,selectionKeys:s.d_selectionKeys,selectionMode:n.selectionMode,contextMenu:n.contextMenu,contextMenuSelection:n.contextMenuSelection,rowGroupMode:n.rowGroupMode,groupRowsBy:n.groupRowsBy,expandableRowGroups:n.expandableRowGroups,rowClass:n.rowClass,rowStyle:n.rowStyle,editMode:n.editMode,compareSelectionBy:n.compareSelectionBy,scrollable:n.scrollable,expandedRowIcon:n.expandedRowIcon,collapsedRowIcon:n.collapsedRowIcon,expandedRows:n.expandedRows,expandedRowKeys:s.d_expandedRowKeys,expandedRowGroups:n.expandedRowGroups,editingRows:n.editingRows,editingRowKeys:s.d_editingRowKeys,templates:t.$slots,responsiveLayout:n.responsiveLayout,onRowgroupToggle:r.toggleRowGroup,onRowClick:e[26]||(e[26]=h=>r.onRowClick(h)),onRowDblclick:e[27]||(e[27]=h=>r.onRowDblClick(h)),onRowRightclick:e[28]||(e[28]=h=>r.onRowRightClick(h)),onRowTouchend:r.onRowTouchEnd,onRowKeydown:r.onRowKeyDown,onRowMousedown:r.onRowMouseDown,onRowDragstart:e[29]||(e[29]=h=>r.onRowDragStart(h)),onRowDragover:e[30]||(e[30]=h=>r.onRowDragOver(h)),onRowDragleave:e[31]||(e[31]=h=>r.onRowDragLeave(h)),onRowDragend:e[32]||(e[32]=h=>r.onRowDragEnd(h)),onRowDrop:e[33]||(e[33]=h=>r.onRowDrop(h)),onRowToggle:e[34]||(e[34]=h=>r.toggleRow(h)),onRadioChange:e[35]||(e[35]=h=>r.toggleRowWithRadio(h)),onCheckboxChange:e[36]||(e[36]=h=>r.toggleRowWithCheckbox(h)),onCellEditInit:e[37]||(e[37]=h=>r.onCellEditInit(h)),onCellEditComplete:e[38]||(e[38]=h=>r.onCellEditComplete(h)),onCellEditCancel:e[39]||(e[39]=h=>r.onCellEditCancel(h)),onRowEditInit:e[40]||(e[40]=h=>r.onRowEditInit(h)),onRowEditSave:e[41]||(e[41]=h=>r.onRowEditSave(h)),onRowEditCancel:e[42]||(e[42]=h=>r.onRowEditCancel(h)),editingMeta:s.d_editingMeta,onEditingMetaChange:r.onEditingMetaChange,virtualScrollerContentProps:d,isVirtualScrollerDisabled:r.virtualScrollerDisabled},null,8,["value","class","columns","empty","dataKey","selection","selectionKeys","selectionMode","contextMenu","contextMenuSelection","rowGroupMode","groupRowsBy","expandableRowGroups","rowClass","rowStyle","editMode","compareSelectionBy","scrollable","expandedRowIcon","collapsedRowIcon","expandedRows","expandedRowKeys","expandedRowGroups","editingRows","editingRowKeys","templates","responsiveLayout","onRowgroupToggle","onRowTouchend","onRowKeydown","onRowMousedown","editingMeta","onEditingMetaChange","virtualScrollerContentProps","isVirtualScrollerDisabled"]),he(c,{columnGroup:r.footerColumnGroup,columns:d.columns},null,8,["columnGroup","columns"])],6)]),_:1},16,["items","columns","style","disabled"])],4),r.paginatorBottom?(k(),Ve(o,{key:3,rows:s.d_rows,first:s.d_first,totalRecords:r.totalRecordsLength,pageLinkSize:n.pageLinkSize,template:n.paginatorTemplate,rowsPerPageOptions:n.rowsPerPageOptions,currentPageReportTemplate:n.currentPageReportTemplate,class:"p-paginator-bottom",onPage:e[43]||(e[43]=d=>r.onPage(d)),alwaysShow:n.alwaysShowPaginator},sh({_:2},[t.$slots.paginatorstart?{name:"start",fn:Xe(()=>[gt(t.$slots,"paginatorstart")])}:void 0,t.$slots.paginatorend?{name:"end",fn:Xe(()=>[gt(t.$slots,"paginatorend")])}:void 0]),1032,["rows","first","totalRecords","pageLinkSize","template","rowsPerPageOptions","currentPageReportTemplate","alwaysShow"])):Ce("",!0),t.$slots.footer?(k(),X("div",ND,[gt(t.$slots,"footer")])):Ce("",!0),we("div",BD,null,512),n.reorderableColumns?(k(),X("span",zD,null,512)):Ce("",!0),n.reorderableColumns?(k(),X("span",VD,null,512)):Ce("",!0)],2)}var HD=kt(kD,[["render",UD]]);const WD={name:"Dialog",inheritAttrs:!1,emits:["update:visible","show","hide","after-hide","maximize","unmaximize","dragend"],props:{header:null,footer:null,visible:Boolean,modal:Boolean,contentStyle:null,contentClass:String,rtl:Boolean,maximizable:Boolean,dismissableMask:Boolean,closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0},appendTo:{type:String,default:"body"},_instance:null},provide(){return{dialogRef:Is(()=>this._instance)}},data(){return{containerVisible:this.visible,maximized:!1}},documentKeydownListener:null,container:null,mask:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,updated(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask&&this.autoZIndex&&gn.clear(this.mask),this.container=null,this.mask=null},mounted(){this.breakpoints&&this.createStyle()},methods:{close(){this.$emit("update:visible",!1)},onBeforeEnter(t){t.setAttribute(this.attributeSelector,"")},onEnter(){this.$emit("show"),this.focus(),this.enableDocumentSettings(),this.bindGlobalListeners(),this.autoZIndex&&gn.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal)},onBeforeLeave(){this.modal&&oe.addClass(this.mask,"p-component-overlay-leave")},onLeave(){this.$emit("hide")},onAfterLeave(){this.autoZIndex&&gn.clear(this.mask),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners(),this.$emit("after-hide")},onMaskClick(t){this.dismissableMask&&this.closable&&this.modal&&this.mask===t.target&&this.close()},focus(){let t=this.container.querySelector("[autofocus]");t&&t.focus()},maximize(t){this.maximized?(this.maximized=!1,this.$emit("unmaximize",t)):(this.maximized=!0,this.$emit("maximize",t)),this.modal||(this.maximized?oe.addClass(document.body,"p-overflow-hidden"):oe.removeClass(document.body,"p-overflow-hidden"))},enableDocumentSettings(){(this.modal||this.maximizable&&this.maximized)&&oe.addClass(document.body,"p-overflow-hidden")},unbindDocumentState(){(this.modal||this.maximizable&&this.maximized)&&oe.removeClass(document.body,"p-overflow-hidden")},onKeyDown(t){if(t.which===9){t.preventDefault();let e=oe.getFocusableElements(this.container);if(e&&e.length>0)if(!document.activeElement)e[0].focus();else{let n=e.indexOf(document.activeElement);t.shiftKey?n==-1||n===0?e[e.length-1].focus():e[n-1].focus():n==-1||n===e.length-1?e[0].focus():e[n+1].focus()}}else t.which===27&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(n=>n===this.position);return e?`p-dialog-${e}`:""},containerRef(t){this.container=t},maskRef(t){this.mask=t},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let t="";for(let e in this.breakpoints)t+=`
                        @media screen and (max-width: ${e}) {
                            .p-dialog[${this.attributeSelector}] {
                                width: ${this.breakpoints[e]} !important;
                            }
                        }
                    `;this.styleElement.innerHTML=t}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag(t){oe.hasClass(t.target,"p-dialog-header-icon")||oe.hasClass(t.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=t.pageX,this.lastPageY=t.pageY,this.container.style.margin="0",oe.addClass(document.body,"p-unselectable-text"))},bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.closable&&this.bindDocumentKeyDownListener()},unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener(){this.documentDragListener=t=>{if(this.dragging){let e=oe.getOuterWidth(this.container),n=oe.getOuterHeight(this.container),i=t.pageX-this.lastPageX,s=t.pageY-this.lastPageY,r=this.container.getBoundingClientRect(),o=r.left+i,a=r.top+s,l=oe.getViewport();this.container.style.position="fixed",this.keepInViewport?(o>=this.minX&&o+e<l.width&&(this.lastPageX=t.pageX,this.container.style.left=o+"px"),a>=this.minY&&a+n<l.height&&(this.lastPageY=t.pageY,this.container.style.top=a+"px")):(this.lastPageX=t.pageX,this.container.style.left=o+"px",this.lastPageY=t.pageY,this.container.style.top=a+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener(){this.documentDragEndListener=t=>{this.dragging&&(this.dragging=!1,oe.removeClass(document.body,"p-unselectable-text"),this.$emit("dragend",t))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maskClass(){return["p-dialog-mask",{"p-component-overlay p-component-overlay-enter":this.modal},this.getPositionClass()]},dialogClass(){return["p-dialog p-component",{"p-dialog-rtl":this.rtl,"p-dialog-maximized":this.maximizable&&this.maximized,"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},maximizeIconClass(){return["p-dialog-header-maximize-icon pi",{"pi-window-maximize":!this.maximized,"pi-window-minimize":this.maximized}]},ariaId(){return Do()},ariaLabelledById(){return this.header!=null?this.ariaId+"_header":null},attributeSelector(){return Do()},contentStyleClass(){return["p-dialog-content",this.contentClass]}},directives:{ripple:mi},components:{Portal:Go}},GD=["aria-labelledby","aria-modal"],jD=["id"],$D={class:"p-dialog-header-icons"},KD=["aria-label"],XD=we("span",{class:"p-dialog-header-close-icon pi pi-times"},null,-1),YD=[XD],qD={key:1,class:"p-dialog-footer"};function ZD(t,e,n,i,s,r){const o=Ke("Portal"),a=on("ripple");return k(),Ve(o,{appendTo:n.appendTo},{default:Xe(()=>[s.containerVisible?(k(),X("div",{key:0,ref:r.maskRef,class:Ie(r.maskClass),onClick:e[3]||(e[3]=(...l)=>r.onMaskClick&&r.onMaskClick(...l))},[he(Ur,{name:"p-dialog",onBeforeEnter:r.onBeforeEnter,onEnter:r.onEnter,onBeforeLeave:r.onBeforeLeave,onLeave:r.onLeave,onAfterLeave:r.onAfterLeave,appear:""},{default:Xe(()=>[n.visible?(k(),X("div",dn({key:0,ref:r.containerRef,class:r.dialogClass},t.$attrs,{role:"dialog","aria-labelledby":r.ariaLabelledById,"aria-modal":n.modal}),[n.showHeader?(k(),X("div",{key:0,class:"p-dialog-header",onMousedown:e[2]||(e[2]=(...l)=>r.initDrag&&r.initDrag(...l))},[gt(t.$slots,"header",{},()=>[n.header?(k(),X("span",{key:0,id:r.ariaLabelledById,class:"p-dialog-title"},it(n.header),9,jD)):Ce("",!0)]),we("div",$D,[n.maximizable?bt((k(),X("button",{key:0,class:"p-dialog-header-icon p-dialog-header-maximize p-link",onClick:e[0]||(e[0]=(...l)=>r.maximize&&r.maximize(...l)),type:"button",tabindex:"-1"},[we("span",{class:Ie(r.maximizeIconClass)},null,2)])),[[a]]):Ce("",!0),n.closable?bt((k(),X("button",{key:1,class:"p-dialog-header-icon p-dialog-header-close p-link",onClick:e[1]||(e[1]=(...l)=>r.close&&r.close(...l)),"aria-label":n.ariaCloseLabel,type:"button"},YD,8,KD)),[[a]]):Ce("",!0)])],32)):Ce("",!0),we("div",{class:Ie(r.contentStyleClass),style:Ot(n.contentStyle)},[gt(t.$slots,"default")],6),n.footer||t.$slots.footer?(k(),X("div",qD,[gt(t.$slots,"footer",{},()=>[vn(it(n.footer),1)])])):Ce("",!0)],16,GD)):Ce("",!0)]),_:3},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave","onAfterLeave"])],2)):Ce("",!0)]),_:3},8,["appendTo"])}var cx=kt(WD,[["render",ZD]]);function ux(){return{type:"line",data:{datasets:[{backgroundColor:"#cfcfcf",data:[{x:0,y:11100}]}]},options:{maintainAspectRatio:!1,animation:{duration:0},elements:{line:{tension:0,borderColor:"#cfcfcf",borderWidth:"1"}},scales:{x:{type:"linear",title:{display:!0,text:st("")}},y:{type:"linear",title:{display:!0,text:st("")}}},plugins:{title:{text:st(""),display:!0},legend:{display:!1},tooltip:{enabled:!1},zoom:{zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"y"}},annotation:st(null)}}}}const JD={class:"mt-2"},QD={class:"mt-2"},eP={__name:"BrightnessDetector",props:{isMeasuringBrightness:Boolean,isCollectingData:Boolean,chartDataPoints:Array,isTooltipDisabled:Boolean,collectionToDisplay:Number},emits:["update:isMeasuringBrightness","update:isCollectingData","resetDataPoints","openCollectionVisualizer","closeCollectionVisualizer"],setup(t,{expose:e,emit:n}){const i=t,{t:s,locale:r}=Hr(),o=Ks(),a=st(i.isMeasuringBrightness),l=st(i.isCollectingData),c=st([]),u=st(0),d=st(!1),h=st(),p=ux(),g=Ho({init:null,end:null});Rn(i,()=>{a.value=i.isMeasuringBrightness,a.value||y(),f()}),Rn(r,()=>{m()});const m=()=>{p.options.scales.x.title.text=s("Time (earth days)"),p.options.scales.y.title.text=s("Brightness"),p.options.plugins.title.text=s("Light Curve"),f(!1)},f=(v=!0)=>{if(a.value){if(v){const C=vt(i.chartDataPoints);p.data.datasets[0].data=C}g.init!==null?p.options.plugins.annotation={annotations:{box1:{type:"box",xMin:g.init,xMax:g.end,backgroundColor:"rgba(255, 213, 79, 0.25)"}}}:p.options.plugins.annotation.value=null,h.value&&h.value.update(250)}},b=()=>{if(l.value=!l.value,n("update:isCollectingData",l.value),l.value)c.value.push({id:u.value,starSystemName:o.parent.proxy.simulation.configuration.starSystem.name,start:new Date,duration:null,totalPoints:null,data:[]}),g.init=o.parent.proxy.simulation.configuration.time,g.end=null,u.value++;else{let v=c.value[c.value.length-1];v.duration=((new Date-v.start)/1e3).toFixed(2),v.totalPoints=v.data.length,g.end=o.parent.proxy.simulation.configuration.time}},x=v=>{c.value=c.value.filter(function(C){if(C.id!==v.id)return C}),v.id===i.collectionToDisplay&&n("closeCollectionVisualizer")},_=(v,C)=>{if(l.value){let R=c.value,w=R[R.length-1];w.data.push(v),w.data.length===C&&b()}},y=()=>{l.value&&b(),g.init=null,g.end=null,p.options.plugins.annotation=st(null)};return e({reset:y,collectDataFromMeasurements:_}),m(),(v,C)=>{const R=Ke("Vue3ChartJs"),w=on("tooltip");return k(),Ve(ge(cx),{header:v.$t("Brightness Detector"),onMaximize:C[1]||(C[1]=D=>d.value=!0),onUnmaximize:C[2]||(C[2]=D=>d.value=!1),onHide:C[3]||(C[3]=D=>d.value=!1),visible:a.value,"onUpdate:visible":[C[4]||(C[4]=D=>a.value=D),C[5]||(C[5]=D=>{v.$emit("update:isMeasuringBrightness",a.value),y()})],position:"bottom",maximizable:!0,modal:!1,style:{"min-width":"30rem",width:"30rem","min-height":"20rem",background:"#1e1e1e"},class:Ie(["resize justify-between overflow-auto",{"opacity-50 hover:opacity-100":!d.value,"opacity-75":d.value}])},{footer:Xe(()=>[bt(he(ge(Wn),{label:v.$t("Reset Measurements"),icon:"pi pi-replay",class:"p-button-help p-button-sm",onClick:C[0]||(C[0]=D=>v.$emit("resetDataPoints")),disabled:l.value},null,8,["label","disabled"]),[[w,{value:v.$t("Reset all measured brightness data on the real-time plot. Data stored in collections are preserved"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),bt(he(ge(Wn),{label:l.value?v.$t("Stop Collecting Data"):v.$t("Start Collecting Data"),icon:l.value?"pi pi-stop":"pi pi-play",class:Ie(l.value?"p-button-danger p-button-sm":" p-button-sm"),onClick:b},null,8,["label","icon","class"]),[[w,{value:v.$t("Store new measurements in collections for further analysis. Collections can be accessed in the menu below."),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]]),he(ge(bf),{class:"mt-4"},{default:Xe(()=>[he(ge(yf),{header:v.$t("Data Collections")},{default:Xe(()=>[he(ge(HD),{value:c.value,responsiveLayout:"scroll"},{default:Xe(()=>[he(ge(na),{field:"id",header:v.$t("ID")},null,8,["header"]),he(ge(na),{field:"starSystemName",header:v.$t("Star System")},{body:Xe(D=>[vn(it(v.$t(D.data.starSystemName)),1)]),_:1},8,["header"]),he(ge(na),{header:v.$t("Start")},{body:Xe(D=>[vn(it(D.data.start.getHours()+":"+D.data.start.getMinutes()+":"+D.data.start.getSeconds()),1)]),_:1},8,["header"]),he(ge(na),{field:"totalPoints",header:v.$t("Points")},null,8,["header"]),he(ge(na),{header:""},{body:Xe(D=>[we("div",JD,[bt(he(ge(Wn),{icon:"pi pi-eye",class:"p-button-sm pt-2",disabled:!D.data.totalPoints,onClick:N=>v.$emit("openCollectionVisualizer",D.data)},null,8,["disabled","onClick"]),[[w,{value:v.$t("Visualize data collection"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])]),we("div",QD,[bt(he(ge(Wn),{icon:"pi pi-trash",class:"p-button-sm p-button-danger",onClick:N=>x(D.data)},null,8,["onClick"]),[[w,{value:v.$t("Delete data collection"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"])]),_:1})]),default:Xe(()=>[he(R,{ref_key:"chart",ref:h,type:ge(p).type,data:ge(p).data,options:ge(p).options},null,8,["type","data","options"])]),_:1},8,["header","visible","class"])}}},tP={__name:"CollectionDataVisualizer",props:{collectionToDisplay:Number,isCollectionVisible:Boolean,chartDataPoints:Array,isTooltipDisabled:Boolean},setup(t){const e=t,{t:n,locale:i}=Hr(),s=st(e.isCollectionVisible),r=st(),o=ux();Rn(e,()=>{s.value=e.isCollectionVisible,l()}),Rn(i,()=>{a()});const a=()=>{o.options.scales.x.title.text=n("Time (earth days)"),o.options.scales.y.title.text=n("Brightness"),o.options.plugins.title.text=n("Light Curve"),l(!1)},l=(u=!0)=>{if(s.value){if(u){const d=vt(e.chartDataPoints);o.data.datasets[0].data=d}r.value&&r.value.update(250)}},c=()=>{const u=r.value.chartJSState.chart.toBase64Image();var d=window.open();d.document.write('<img src="'+u+'"/>')};return a(),(u,d)=>{const h=Ke("Vue3ChartJs"),p=on("tooltip");return k(),Ve(ge(cx),{position:"right",header:`${u.$t("Light Curve - Collection")} ${t.collectionToDisplay}`,visible:s.value,"onUpdate:visible":[d[0]||(d[0]=g=>s.value=g),d[1]||(d[1]=g=>u.$emit("update:isCollectionVisible",s.value))],style:{"min-width":"30rem",width:"30rem","min-height":"20rem",background:"#1e1e1e"},class:"z-25 resize justify-between overflow-auto",maximizable:!0,modal:!1},{footer:Xe(()=>[bt(he(ge(Wn),{label:u.$t("Export Plot"),icon:"pi pi-download",class:"p-button-sm p-button-success",onClick:c},null,8,["label"]),[[p,{value:u.$t("Export plot to a new window tab"),disabled:t.isTooltipDisabled},void 0,{bottom:!0}]])]),default:Xe(()=>[he(h,{ref_key:"chart",ref:r,type:ge(o).type,data:ge(o).data,options:ge(o).options},null,8,["type","data","options"])]),_:1},8,["header","visible"])}}};class nP{constructor(){this.init()}init(){this.initCollection(),this.initMeasurement()}initCollection(){this.collection={data:[]}}initMeasurement(){this.measurement={minY:null,maxY:null,data:[],annotation:{init:null,end:null}}}reset(){this.initMeasurement()}}var wh={exports:{}};(function(t,e){e=t.exports=n,e.getSerialize=i;function n(s,r,o,a){return JSON.stringify(s,i(r,a),o)}function i(s,r){var o=[],a=[];return r==null&&(r=function(l,c){return o[0]===c?"[Circular ~]":"[Circular ~."+a.slice(0,o.indexOf(c)).join(".")+"]"}),function(l,c){if(o.length>0){var u=o.indexOf(this);~u?o.splice(u+1):o.push(this),~u?a.splice(u,1/0,l):a.push(l),~o.indexOf(c)&&(c=r.call(this,l,c))}else o.push(c);return s==null?c:s.call(this,l,c)}}})(wh,wh.exports);var iP=wh.exports,sP=function(){var t=4022871197,e=function(n){if(n){n=n.toString();for(var i=0;i<n.length;i++){t+=n.charCodeAt(i);var s=.02519603282416938*t;t=s>>>0,s-=t,s*=t,t=s>>>0,s-=t,t+=s*4294967296}return(t>>>0)*23283064365386963e-26}else t=4022871197};return e},Sh=function(t){return function(){var e=48,n=1,i=e,s=new Array(e),r,o,a=0,l=new sP;for(r=0;r<e;r++)s[r]=l(Math.random());var c=function(){++i>=e&&(i=0);var h=1768863*s[i]+n*23283064365386963e-26;return s[i]=h-(n=h|0)},u=function(h){return Math.floor(h*(c()+(c()*2097152|0)*11102230246251565e-32))};u.string=function(h){var p,g="";for(p=0;p<h;p++)g+=String.fromCharCode(33+u(94));return g};var d=function(){var h=Array.prototype.slice.call(arguments);for(r=0;r<h.length;r++)for(o=0;o<e;o++)s[o]-=l(h[r]),s[o]<0&&(s[o]+=1)};return u.cleanString=function(h){return h=h.replace(/(^\s*)|(\s*$)/gi,""),h=h.replace(/[\x00-\x1F]/gi,""),h=h.replace(/\n /,`
`),h},u.hashString=function(h){for(h=u.cleanString(h),l(h),r=0;r<h.length;r++)for(a=h.charCodeAt(r),o=0;o<e;o++)s[o]-=l(a),s[o]<0&&(s[o]+=1)},u.seed=function(h){(typeof h=="undefined"||h===null)&&(h=Math.random()),typeof h!="string"&&(h=iP(h,function(p,g){return typeof g=="function"?g.toString():g})),u.initState(),u.hashString(h)},u.addEntropy=function(){var h=[];for(r=0;r<arguments.length;r++)h.push(arguments[r]);d(a+++new Date().getTime()+h.join("")+Math.random())},u.initState=function(){for(l(),r=0;r<e;r++)s[r]=l(" ");n=1,i=e},u.done=function(){l=null},typeof t!="undefined"&&u.seed(t),u.range=function(h){return u(h)},u.random=function(){return u(Number.MAX_VALUE-1)/Number.MAX_VALUE},u.floatBetween=function(h,p){return u.random()*(p-h)+h},u.intBetween=function(h,p){return Math.floor(u.random()*(p-h+1))+h},u}()};Sh.create=function(t){return new Sh(t)};var rP=Sh;let oP=24,aP=1/oP,Ft=1495.978707,Mh=6.6743*Math.pow(10,-11)*Math.pow(86400,2)*Math.pow(10,-24);class xm{constructor({bgStars:e=100,mode:n="default",starSystem:i="SolarInner",randomSeed:s=null,customDetails:r="",starScale:o=null,glowScale:a=1,planetScale:l=null,satelliteScale:c=null,planetDistanceScale:u=null,satelliteDistanceScale:d=null,measurementDetails:h=null,simulationSpeed:p=5,simulationStep:g=.01,rotationEnabled:m=!1,orbitInclination:f=!0,running:b=!0,cameraMode:x="view",time:_=0,collectionLimit:y=500}={}){switch(this.bgStars=e,this.mode=n,this.randomSeed=s,this.starScale=o,this.glowScale=a,this.planetScale=l,this.satelliteScale=c,this.planetDistanceScale=u,this.satelliteDistanceScale=d,h===null&&(this.measurementDetails={distance:null,renderer:{tag:"main",index:null},camera:{tag:"main",index:null}}),this.simulationSpeed=p,this.simulationStep=g,this.rotationEnabled=m,this.orbitInclination=f,this.running=b,this.cameraMode=x,this.time=_,this.collectionLimit=y,this.currentMeasurement={x:null,y:null},this.starSystemLibrary=Be,n){case"default":this.starSystem=this.starSystemLibrary[i];break;case"custom":r=JSON.parse(r),this.starSystem=new Zn,this.starSystem=new Zn(r.name),this.starSystem.setStar(r.star.name,r.star.mass,r.star.radius,r.star.color);for(var v of r.planets)this.starSystem.addPlanet(v.name,v.radius,v.semiMajor,v.eccentricity,v.longitudePerihelion,v.orbitInclination,v.color,v.texture,v.rotationSpeed,v.obliquity,v.mass,v.visible,v.tilted);for(var C of r.satellites)this.starSystem.addSatellite(C.name,C.hostPlanet,C.radius,C.semiMajor,C.eccentricity,C.longitudePerihelion,C.orbitInclination,C.color,C.texture,C.rotationSpeed,C.obliquity,C.visible,C.tilted);this.starSystem.cameraSettings=r.cameraSettings,this.starSystem.scales=r.scales;break;case"random":this.randomSeed||(this.randomSeed=Math.floor(Math.random()*1e8)),this.starSystem=this.randomStarSystem();break}o===null&&(this.starScale=this.starSystem.scales.starScale),l===null&&(this.planetScale=this.starSystem.scales.planetScale),c===null&&(this.satelliteScale=this.starSystem.scales.satelliteScale),u===null&&(this.planetDistanceScale=this.starSystem.scales.planetDistanceScale),d===null&&(this.satelliteDistanceScale=this.starSystem.scales.satelliteDistanceScale),this.measurementDetails.distance===null&&(this.measurementDetails.distance=this.starSystem.scales.measurementDistance),this.cameraSettings=this.starSystem.cameraSettings}randomStarSystem(){const e=rP.create(this.randomSeed);let n=new Zn("Aleat\xF3rio - "+this.randomSeed),i=e.floatBetween(Kt.starMass.min,Kt.starMass.max)*Math.pow(10,30),s=Kt.starRadius.min+e(Kt.starRadius.range),r=Kt.starColors[e(Kt.starColors.length)];n.setStar("Rand-"+this.randomSeed,i,s,r);let o=Kt.planetNumber.min+e(Kt.planetNumber.range),a,l=0,c,u,d,h,p="a";for(var g=0;g<o;g++)a=e.floatBetween(Kt.planetRadius.min,Kt.planetRadius.max),l=l+Kt.planetSemiMajor.spacer+e(Kt.planetSemiMajor.range),c=Kt.planetEccentricity.min+e(Kt.planetEccentricity.range),u=Kt.planetLongitudePerihelion.min+e(Kt.planetLongitudePerihelion.range),d=Kt.planetOrbitInclination.min+e(Kt.planetOrbitInclination.range),h=Kt.planetColors[e(Kt.planetColors.length)],p=String.fromCharCode(p.charCodeAt(p.length-1)+1),n.addPlanet(p,a,l,c,u,d,h);return n.calculateCameraSettings(),n.calculateScales(),n}}let Kt={starMass:{min:1,max:2},starRadius:{min:2,range:5},starColors:[16777215,16776960,5609881,16737081,16711680],planetNumber:{min:1,range:4},planetRadius:{min:.02,max:.04},planetSemiMajor:{range:200,spacer:500},planetEccentricity:{min:.4,range:.1},planetLongitudePerihelion:{min:0,range:22.5},planetOrbitInclination:{min:0,range:1},planetColors:[3355443,10040115,11174457,2967153,5870898,2519639]},Be={},ul=Math.PI*2/aP;Be.SolarInner=new Zn("Inner Solar");Be.SolarInner.setStar("Sol",1.989*Math.pow(10,30),6.957,"yellow");Be.SolarInner.addPlanet("Mercury",.02439,579.1,.205,77.45,7.00487,12302251,"imgs/planet-textures/solar/mercury.jpg",ul/1407.6,.034);Be.SolarInner.addPlanet("Venus",.06051,1082.1,.007,131.53,3.39471,14538964,"imgs/planet-textures/solar/venus.jpg",ul/-5832.5,177.4);Be.SolarInner.addPlanet("Earth",.06378,1496,.017,102.95,5e-5,7050198,"imgs/planet-textures/solar/earth.jpg",ul/23.9,23.4,5.9724*Math.pow(10,24));Be.SolarInner.addPlanet("Mars",.03396,2279.2,.094,336.04,1.85061,12665870,"imgs/planet-textures/solar/mars.jpg",ul/24.6,25.2);Be.SolarInner.addSatellite("Moon","Earth",.01738,3.844,.0549,180,5.145,12302251,"imgs/planet-textures/solar/moon.jpg",ul/655.7,6.7);Be.SolarInner.calculateCameraSettings();Be.SolarInner.setScales(40,1e3,1e3,1,50,12e3);let Qs=Be.SolarInner.star.mass,er=Be.SolarInner.star.radius,zt=Be.SolarInner.planets[2].radius,Ef=11.2*zt;Be.Trappist1=new Zn("Trappist-1");Be.Trappist1.setStar("Trappist-1",.0898*Qs,.1192*er,"red");Be.Trappist1.addPlanet("b",1.116*zt,.01154*Ft,.006,0,0,12302251,"imgs/planet-textures/trappist-1/1b.jpg");Be.Trappist1.addPlanet("c",1.097*zt,.0158*Ft,.007,0,.14,12302251,"imgs/planet-textures/trappist-1/1c.jpg");Be.Trappist1.addPlanet("d",.778*zt,.02227*Ft,.008,0,.33,12302251,"imgs/planet-textures/trappist-1/1d.jpg");Be.Trappist1.addPlanet("e",.92*zt,.02925*Ft,.005,0,.18,12302251,"imgs/planet-textures/trappist-1/1e.jpg");Be.Trappist1.addPlanet("f",1.045*zt,.03849*Ft,.01,0,.12,12302251,"imgs/planet-textures/trappist-1/1f.jpg");Be.Trappist1.addPlanet("g",1.129*zt,.04683*Ft,.002,0,.12,12302251,"imgs/planet-textures/trappist-1/1g.jpg");Be.Trappist1.addPlanet("h",.775*zt,.06189*Ft,.006,0,.24,12302251,"imgs/planet-textures/trappist-1/1h.jpg");Be.Trappist1.calculateCameraSettings();Be.Trappist1.setScales(10,20,20,1,50,400);Be.Kepler442=new Zn("Kepler-442");Be.Kepler442.setStar("Kepler-442",.609*Qs,.598*er,16737081);Be.Kepler442.addPlanet("b",1.34*zt,.409*Ft,.04,0,0,10506797);Be.Kepler442.calculateCameraSettings();Be.Kepler442.setScales(30,300,300,1,50,3500);Be.ProximaCentauri=new Zn("Proxima Centauri");Be.ProximaCentauri.setStar("Proxima Centauri",.12*Qs,.154*er,15885604);Be.ProximaCentauri.addPlanet("Proxima Centauri b",1.1*zt,.048*Ft,.124,0,0,12158811);Be.ProximaCentauri.calculateCameraSettings();Be.ProximaCentauri.setScales(15,60,60,1,50,1e3);Be.Kepler11=new Zn("Kepler-11");Be.Kepler11.setStar("Kepler-11",.961*Qs,1.02*er,16054092);Be.Kepler11.addPlanet("b",1.83*zt,.091*Ft,.05,0,0,14287702);Be.Kepler11.addPlanet("c",3.15*zt,.107*Ft,.03,0,0,367577);Be.Kepler11.addPlanet("d",3.43*zt,.155*Ft,0,0,0,11174197);Be.Kepler11.addPlanet("e",4.52*zt,.195*Ft,.01,0,0,8540308);Be.Kepler11.addPlanet("f",2.61*zt,.24*Ft,.01,0,0,5839728);Be.Kepler11.addPlanet("g",3.66*zt,.466*Ft,.15,0,0,2387995);Be.Kepler11.calculateCameraSettings();Be.Kepler11.setScales(10,45,45,1,50,1e3);Be.HD189733=new Zn("HD 189733");Be.HD189733.setStar("HD 189733",.9*Qs,.781*er,16349959);Be.HD189733.addPlanet("b",1.138*Ef,.03126*Ft,0,0,0,500729);Be.HD189733.calculateCameraSettings();Be.HD189733.setScales(5,10,10,1,50,1e3);Be.TrEs2=new Zn("TrEs-2");Be.TrEs2.setStar("TrEs-2",.98*Qs,.131*er,15713283);Be.TrEs2.addPlanet("b",1.272*Ef,.03563*Ft,0,0,0,9440319);Be.TrEs2.calculateCameraSettings();Be.TrEs2.setScales(20,10,10,1,50,1500);Be.Kepler90=new Zn("Kepler-90");Be.Kepler90.setStar("Kepler-90",1.2*Qs,1.2*er,"yellow");Be.Kepler90.addPlanet("b",1.31*zt,.074*Ft,0,0,0,10380869);Be.Kepler90.addPlanet("c",1.18*zt,.089*Ft,0,0,0,9456938);Be.Kepler90.addPlanet("i",1.32*zt,.107*Ft,0,0,0,11311214);Be.Kepler90.addPlanet("d",2.88*zt,.32*Ft,0,0,0,9802387);Be.Kepler90.addPlanet("e",2.67*zt,.42*Ft,0,0,0,10400696);Be.Kepler90.addPlanet("f",2.89*zt,.48*Ft,.01,0,0,12888170);Be.Kepler90.addPlanet("g",8.13*zt,.71*Ft,.049,0,0,12161128);Be.Kepler90.addPlanet("h",11.32*zt,1.01*Ft,.011,0,0,10919985);Be.Kepler90.calculateCameraSettings();Be.Kepler90.setScales(10,45,45,1,50,1e3);Be.HD76920=new Zn("HD 76920");Be.HD76920.setStar("HD 76920",1.17*Qs,7.47*er,15885604);Be.HD76920.addPlanet("b",1.16*Ef,1.149*Ft,.856,0,0,16777215);Be.HD76920.calculateCameraSettings();Be.HD76920.setScales(1,10,10,1,50,1500);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Df="142",Yr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lP=0,vm=1,cP=2,dx=1,uP=2,xa=3,Za=0,Di=1,Ro=2,dP=1,Us=0,So=1,_m=2,wm=3,Sm=4,hP=5,go=100,fP=101,pP=102,Mm=103,Cm=104,mP=200,gP=201,bP=202,yP=203,hx=204,fx=205,xP=206,vP=207,_P=208,wP=209,SP=210,MP=0,CP=1,TP=2,Ch=3,EP=4,DP=5,PP=6,LP=7,Pf=0,RP=1,AP=2,hs=0,IP=1,kP=2,OP=3,FP=4,NP=5,px=300,Ao=301,Io=302,Th=303,Eh=304,pu=306,Dh=1e3,Mi=1001,Ph=1002,Un=1003,Tm=1004,Em=1005,li=1006,BP=1007,mu=1008,Ir=1009,zP=1010,VP=1011,mx=1012,UP=1013,Mr=1014,Cr=1015,Ja=1016,HP=1017,WP=1018,Mo=1020,GP=1021,jP=1022,Vi=1023,$P=1024,KP=1025,Lr=1026,ko=1027,XP=1028,YP=1029,qP=1030,ZP=1031,JP=1033,Qu=33776,ed=33777,td=33778,nd=33779,Dm=35840,Pm=35841,Lm=35842,Rm=35843,QP=36196,Am=37492,Im=37496,km=37808,Om=37809,Fm=37810,Nm=37811,Bm=37812,zm=37813,Vm=37814,Um=37815,Hm=37816,Wm=37817,Gm=37818,jm=37819,$m=37820,Km=37821,Xm=36492,kr=3e3,Ht=3001,eL=3200,tL=3201,nL=0,iL=1,ns="srgb",Tr="srgb-linear",id=7680,sL=519,Ym=35044,qm="300 es",Lh=1035;class Wr{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const Mn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Zm=1234567;const Ra=Math.PI/180,Fc=180/Math.PI;function jo(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Mn[t&255]+Mn[t>>8&255]+Mn[t>>16&255]+Mn[t>>24&255]+"-"+Mn[e&255]+Mn[e>>8&255]+"-"+Mn[e>>16&15|64]+Mn[e>>24&255]+"-"+Mn[n&63|128]+Mn[n>>8&255]+"-"+Mn[n>>16&255]+Mn[n>>24&255]+Mn[i&255]+Mn[i>>8&255]+Mn[i>>16&255]+Mn[i>>24&255]).toLowerCase()}function _n(t,e,n){return Math.max(e,Math.min(n,t))}function Lf(t,e){return(t%e+e)%e}function rL(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)}function oL(t,e,n){return t!==e?(n-t)/(e-t):0}function Aa(t,e,n){return(1-n)*t+n*e}function aL(t,e,n,i){return Aa(t,e,1-Math.exp(-n*i))}function lL(t,e=1){return e-Math.abs(Lf(t,e*2)-e)}function cL(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function uL(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function dL(t,e){return t+Math.floor(Math.random()*(e-t+1))}function hL(t,e){return t+Math.random()*(e-t)}function fL(t){return t*(.5-Math.random())}function pL(t){t!==void 0&&(Zm=t);let e=Zm+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mL(t){return t*Ra}function gL(t){return t*Fc}function Rh(t){return(t&t-1)===0&&t!==0}function bL(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Nc(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function yL(t,e,n,i,s){const r=Math.cos,o=Math.sin,a=r(n/2),l=o(n/2),c=r((e+i)/2),u=o((e+i)/2),d=r((e-i)/2),h=o((e-i)/2),p=r((i-e)/2),g=o((i-e)/2);switch(s){case"XYX":t.set(a*u,l*d,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*g,l*p,a*c);break;case"YXY":t.set(l*p,a*u,l*g,a*c);break;case"ZYZ":t.set(l*g,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function xL(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function vL(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var wi=Object.freeze({__proto__:null,DEG2RAD:Ra,RAD2DEG:Fc,generateUUID:jo,clamp:_n,euclideanModulo:Lf,mapLinear:rL,inverseLerp:oL,lerp:Aa,damp:aL,pingpong:lL,smoothstep:cL,smootherstep:uL,randInt:dL,randFloat:hL,randFloatSpread:fL,seededRandom:pL,degToRad:mL,radToDeg:gL,isPowerOfTwo:Rh,ceilPowerOfTwo:bL,floorPowerOfTwo:Nc,setQuaternionFromProperEuler:yL,normalize:vL,denormalize:xL});class et{constructor(e=0,n=0){et.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ui{constructor(){ui.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=n,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],g=i[8],m=s[0],f=s[3],b=s[6],x=s[1],_=s[4],y=s[7],v=s[2],C=s[5],R=s[8];return r[0]=o*m+a*x+l*v,r[3]=o*f+a*_+l*C,r[6]=o*b+a*y+l*R,r[1]=c*m+u*x+d*v,r[4]=c*f+u*_+d*C,r[7]=c*b+u*y+d*R,r[2]=h*m+p*x+g*v,r[5]=h*f+p*_+g*C,r[8]=h*b+p*y+g*R,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*r,p=c*r-o*l,g=n*d+i*h+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/g;return e[0]=d*m,e[1]=(s*c-u*i)*m,e[2]=(a*i-s*o)*m,e[3]=h*m,e[4]=(u*n-s*l)*m,e[5]=(s*r-a*n)*m,e[6]=p*m,e[7]=(i*l-c*n)*m,e[8]=(o*n-i*r)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),s=this.elements,r=s[0],o=s[3],a=s[6],l=s[1],c=s[4],u=s[7];return s[0]=n*r+i*l,s[3]=n*o+i*c,s[6]=n*a+i*u,s[1]=-i*r+n*l,s[4]=-i*o+n*c,s[7]=-i*a+n*u,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function gx(t){for(let e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}function Qa(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Rr(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function wc(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const sd={[ns]:{[Tr]:Rr},[Tr]:{[ns]:wc}},yi={legacyMode:!0,get workingColorSpace(){return Tr},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.legacyMode||e===n||!e||!n)return t;if(sd[e]&&sd[e][n]!==void 0){const i=sd[e][n];return t.r=i(t.r),t.g=i(t.g),t.b=i(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},bx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sn={r:0,g:0,b:0},xi={h:0,s:0,l:0},Fl={h:0,s:0,l:0};function rd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function Nl(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class Dt{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ns){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yi.toWorkingColorSpace(this,n),this}setRGB(e,n,i,s=Tr){return this.r=e,this.g=n,this.b=i,yi.toWorkingColorSpace(this,s),this}setHSL(e,n,i,s=Tr){if(e=Lf(e,1),n=_n(n,0,1),i=_n(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=rd(o,r,e+1/3),this.g=rd(o,r,e),this.b=rd(o,r,e-1/3)}return yi.toWorkingColorSpace(this,s),this}setStyle(e,n=ns){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,yi.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,yi.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return i(r[4]),this.setHSL(l,c,u,n)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,yi.toWorkingColorSpace(this,n),this;if(o===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,yi.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=ns){const i=bx[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rr(e.r),this.g=Rr(e.g),this.b=Rr(e.b),this}copyLinearToSRGB(e){return this.r=wc(e.r),this.g=wc(e.g),this.b=wc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ns){return yi.fromWorkingColorSpace(Nl(this,sn),e),_n(sn.r*255,0,255)<<16^_n(sn.g*255,0,255)<<8^_n(sn.b*255,0,255)<<0}getHexString(e=ns){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Tr){yi.fromWorkingColorSpace(Nl(this,sn),n);const i=sn.r,s=sn.g,r=sn.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-i)/d+2;break;case r:l=(i-s)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Tr){return yi.fromWorkingColorSpace(Nl(this,sn),n),e.r=sn.r,e.g=sn.g,e.b=sn.b,e}getStyle(e=ns){return yi.fromWorkingColorSpace(Nl(this,sn),e),e!==ns?`color(${e} ${sn.r} ${sn.g} ${sn.b})`:`rgb(${sn.r*255|0},${sn.g*255|0},${sn.b*255|0})`}offsetHSL(e,n,i){return this.getHSL(xi),xi.h+=e,xi.s+=n,xi.l+=i,this.setHSL(xi.h,xi.s,xi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(xi),e.getHSL(Fl);const i=Aa(xi.h,Fl.h,n),s=Aa(xi.s,Fl.s,n),r=Aa(xi.l,Fl.l,n);return this.setHSL(i,s,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Dt.NAMES=bx;let Zr;class yx{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Zr===void 0&&(Zr=Qa("canvas")),Zr.width=e.width,Zr.height=e.height;const i=Zr.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=Zr}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const n=Qa("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Rr(r[o]/255)*255;return i.putImageData(s,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Rr(n[i]/255)*255):n[i]=Rr(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class xx{constructor(e=null){this.isSource=!0,this.uuid=jo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(od(s[o].image)):r.push(od(s[o]))}else r=od(s);i.url=r}return n||(e.images[this.uuid]=i),i}}function od(t){return typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?yx.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _L=0;class pi extends Wr{constructor(e=pi.DEFAULT_IMAGE,n=pi.DEFAULT_MAPPING,i=Mi,s=Mi,r=li,o=mu,a=Vi,l=Ir,c=1,u=kr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_L++}),this.uuid=jo(),this.name="",this.source=new xx(e),this.mipmaps=[],this.mapping=n,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ui,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==px)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Dh:e.x=e.x-Math.floor(e.x);break;case Mi:e.x=e.x<0?0:1;break;case Ph:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Dh:e.y=e.y-Math.floor(e.y);break;case Mi:e.y=e.y<0?0:1;break;case Ph:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}pi.DEFAULT_IMAGE=null;pi.DEFAULT_MAPPING=px;class Bt{constructor(e=0,n=0,i=0,s=1){Bt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,r;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],g=l[9],m=l[2],f=l[6],b=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(g-f)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(g+f)<.1&&Math.abs(c+p+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(c+1)/2,y=(p+1)/2,v=(b+1)/2,C=(u+h)/4,R=(d+m)/4,w=(g+f)/4;return _>y&&_>v?_<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(_),s=C/i,r=R/i):y>v?y<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(y),i=C/s,r=w/s):v<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(v),i=R/r,s=w/r),this.set(i,s,r,n),this}let x=Math.sqrt((f-g)*(f-g)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(f-g)/x,this.y=(d-m)/x,this.z=(h-u)/x,this.w=Math.acos((c+p+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Xs extends Wr{constructor(e,n,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Bt(0,0,e,n),this.scissorTest=!1,this.viewport=new Bt(0,0,e,n);const s={width:e,height:n,depth:1};this.texture=new pi(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:li,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,n,i=1){(this.width!==e||this.height!==n||this.depth!==i)&&(this.width=e,this.height=n,this.depth=i,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new xx(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class vx extends pi{constructor(e=null,n=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=Un,this.minFilter=Un,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wL extends pi{constructor(e=null,n=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:s},this.magFilter=Un,this.minFilter=Un,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Or{constructor(e=0,n=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=s}static slerp(e,n,i,s){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,n,s)}static slerpFlat(e,n,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],d=i[s+3];const h=r[o+0],p=r[o+1],g=r[o+2],m=r[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=p,e[n+2]=g,e[n+3]=m;return}if(d!==m||l!==h||c!==p||u!==g){let f=1-a;const b=l*h+c*p+u*g+d*m,x=b>=0?1:-1,_=1-b*b;if(_>Number.EPSILON){const v=Math.sqrt(_),C=Math.atan2(v,b*x);f=Math.sin(f*C)/v,a=Math.sin(a*C)/v}const y=a*x;if(l=l*f+h*y,c=c*f+p*y,u=u*f+g*y,d=d*f+m*y,f===1-a){const v=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=v,c*=v,u*=v,d*=v}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],d=r[o],h=r[o+1],p=r[o+2],g=r[o+3];return e[n]=a*g+u*d+l*p-c*h,e[n+1]=l*g+u*h+c*d-a*p,e[n+2]=c*g+u*p+a*h-l*d,e[n+3]=u*g-a*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),d=a(r/2),h=l(i/2),p=l(s/2),g=l(r/2);switch(o){case"XYZ":this._x=h*u*d+c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d-h*p*g;break;case"YXZ":this._x=h*u*d+c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d+h*p*g;break;case"ZXY":this._x=h*u*d-c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d-h*p*g;break;case"ZYX":this._x=h*u*d-c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d+h*p*g;break;case"YZX":this._x=h*u*d+c*p*g,this._y=c*p*d+h*u*g,this._z=c*u*g-h*p*d,this._w=c*u*d-h*p*g;break;case"XZY":this._x=h*u*d-c*p*g,this._y=c*p*d-h*u*g,this._z=c*u*g+h*p*d,this._w=c*u*d+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],r=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=i+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(r-c)*p,this._z=(o-s)*p}else if(i>a&&i>d){const p=2*Math.sqrt(1+i-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(r+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-i-d);this._w=(r-c)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-a);this._w=(o-s)/p,this._x=(r+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_n(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,r=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*s+n*this._y,this._z=p*r+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=s*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=Math.random(),n=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(n*Math.cos(s),i*Math.sin(r),i*Math.cos(r),n*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class H{constructor(e=0,n=0,i=0){H.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Jm.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Jm.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6]*s,this.y=r[1]*n+r[4]*i+r[7]*s,this.z=r[2]*n+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*n+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*n+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*n+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*s-a*i,u=l*i+a*n-r*s,d=l*s+r*i-o*n,h=-r*n-o*i-a*s;return this.x=c*l+h*-r+u*-a-d*-o,this.y=u*l+h*-o+d*-r-c*-a,this.z=d*l+h*-a+c*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[4]*i+r[8]*s,this.y=r[1]*n+r[5]*i+r[9]*s,this.z=r[2]*n+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,r=e.z,o=n.x,a=n.y,l=n.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return ad.copy(this).projectOnVector(e),this.sub(ad)}reflect(e){return this.sub(ad.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(_n(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(n),this.y=i*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ad=new H,Jm=new Or;class $o{constructor(e=new H(1/0,1/0,1/0),n=new H(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<n&&(n=u),d<i&&(i=d),h<s&&(s=h),u>r&&(r=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<n&&(n=u),d<i&&(i=d),h<s&&(s=h),u>r&&(r=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ar.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(n&&i.attributes!=null&&i.attributes.position!==void 0){const r=i.attributes.position;for(let o=0,a=r.count;o<a;o++)ar.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ar)}else i.boundingBox===null&&i.computeBoundingBox(),ld.copy(i.boundingBox),ld.applyMatrix4(e.matrixWorld),this.union(ld);const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ar),ar.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ia),Bl.subVectors(this.max,ia),Jr.subVectors(e.a,ia),Qr.subVectors(e.b,ia),eo.subVectors(e.c,ia),_s.subVectors(Qr,Jr),ws.subVectors(eo,Qr),lr.subVectors(Jr,eo);let n=[0,-_s.z,_s.y,0,-ws.z,ws.y,0,-lr.z,lr.y,_s.z,0,-_s.x,ws.z,0,-ws.x,lr.z,0,-lr.x,-_s.y,_s.x,0,-ws.y,ws.x,0,-lr.y,lr.x,0];return!cd(n,Jr,Qr,eo,Bl)||(n=[1,0,0,0,1,0,0,0,1],!cd(n,Jr,Qr,eo,Bl))?!1:(zl.crossVectors(_s,ws),n=[zl.x,zl.y,zl.z],cd(n,Jr,Qr,eo,Bl))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ar.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ar).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ki[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ki[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ki[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ki[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ki[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ki[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ki[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ki[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ki),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ki=[new H,new H,new H,new H,new H,new H,new H,new H],ar=new H,ld=new $o,Jr=new H,Qr=new H,eo=new H,_s=new H,ws=new H,lr=new H,ia=new H,Bl=new H,zl=new H,cr=new H;function cd(t,e,n,i,s){for(let r=0,o=t.length-3;r<=o;r+=3){cr.fromArray(t,r);const a=s.x*Math.abs(cr.x)+s.y*Math.abs(cr.y)+s.z*Math.abs(cr.z),l=e.dot(cr),c=n.dot(cr),u=i.dot(cr);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const SL=new $o,Qm=new H,Vl=new H,ud=new H;class gu{constructor(e=new H,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):SL.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ud.subVectors(e,this.center);const n=ud.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),s=(i-this.radius)*.5;this.center.add(ud.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?Vl.set(0,0,1).multiplyScalar(e.radius):Vl.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Qm.copy(e.center).add(Vl)),this.expandByPoint(Qm.copy(e.center).sub(Vl)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Xi=new H,dd=new H,Ul=new H,Ss=new H,hd=new H,Hl=new H,fd=new H;class _x{constructor(e=new H,n=new H(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xi)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Xi.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Xi.copy(this.direction).multiplyScalar(n).add(this.origin),Xi.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){dd.copy(e).add(n).multiplyScalar(.5),Ul.copy(n).sub(e).normalize(),Ss.copy(this.origin).sub(dd);const r=e.distanceTo(n)*.5,o=-this.direction.dot(Ul),a=Ss.dot(this.direction),l=-Ss.dot(Ul),c=Ss.lengthSq(),u=Math.abs(1-o*o);let d,h,p,g;if(u>0)if(d=o*l-a,h=o*a-l,g=r*u,d>=0)if(h>=-g)if(h<=g){const m=1/u;d*=m,h*=m,p=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=r,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h=-r,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h<=-g?(d=Math.max(0,-(-o*r+a)),h=d>0?-r:Math.min(Math.max(-r,-l),r),p=-d*d+h*(h+2*l)+c):h<=g?(d=0,h=Math.min(Math.max(-r,-l),r),p=h*(h+2*l)+c):(d=Math.max(0,-(o*r+a)),h=d>0?r:Math.min(Math.max(-r,-l),r),p=-d*d+h*(h+2*l)+c);else h=o>0?-r:r,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),s&&s.copy(Ul).multiplyScalar(h).add(dd),p}intersectSphere(e,n){Xi.subVectors(e.center,this.origin);const i=Xi.dot(this.direction),s=Xi.dot(Xi)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||r>s||((r>i||i!==i)&&(i=r),(o<s||s!==s)&&(s=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,Xi)!==null}intersectTriangle(e,n,i,s,r){hd.subVectors(n,e),Hl.subVectors(i,e),fd.crossVectors(hd,Hl);let o=this.direction.dot(fd),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ss.subVectors(this.origin,e);const l=a*this.direction.dot(Hl.crossVectors(Ss,Hl));if(l<0)return null;const c=a*this.direction.dot(hd.cross(Ss));if(c<0||l+c>o)return null;const u=-a*Ss.dot(fd);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gt{constructor(){Gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c,u,d,h,p,g,m,f){const b=this.elements;return b[0]=e,b[4]=n,b[8]=i,b[12]=s,b[1]=r,b[5]=o,b[9]=a,b[13]=l,b[2]=c,b[6]=u,b[10]=d,b[14]=h,b[3]=p,b[7]=g,b[11]=m,b[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gt().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/to.setFromMatrixColumn(e,0).length(),r=1/to.setFromMatrixColumn(e,1).length(),o=1/to.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const h=o*u,p=o*d,g=a*u,m=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+g*c,n[5]=h-m*c,n[9]=-a*l,n[2]=m-h*c,n[6]=g+p*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,g=c*u,m=c*d;n[0]=h+m*a,n[4]=g*a-p,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=p*a-g,n[6]=m+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,g=c*u,m=c*d;n[0]=h-m*a,n[4]=-o*d,n[8]=g+p*a,n[1]=p+g*a,n[5]=o*u,n[9]=m-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*d,g=a*u,m=a*d;n[0]=l*u,n[4]=g*c-p,n[8]=h*c+m,n[1]=l*d,n[5]=m*c+h,n[9]=p*c-g,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,g=a*l,m=a*c;n[0]=l*u,n[4]=m-h*d,n[8]=g*d+p,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=p*d+g,n[10]=h-m*d}else if(e.order==="XZY"){const h=o*l,p=o*c,g=a*l,m=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+m,n[5]=o*u,n[9]=p*d-g,n[2]=g*d-p,n[6]=a*u,n[10]=m*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ML,e,CL)}lookAt(e,n,i){const s=this.elements;return $n.subVectors(e,n),$n.lengthSq()===0&&($n.z=1),$n.normalize(),Ms.crossVectors(i,$n),Ms.lengthSq()===0&&(Math.abs(i.z)===1?$n.x+=1e-4:$n.z+=1e-4,$n.normalize(),Ms.crossVectors(i,$n)),Ms.normalize(),Wl.crossVectors($n,Ms),s[0]=Ms.x,s[4]=Wl.x,s[8]=$n.x,s[1]=Ms.y,s[5]=Wl.y,s[9]=$n.y,s[2]=Ms.z,s[6]=Wl.z,s[10]=$n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],g=i[2],m=i[6],f=i[10],b=i[14],x=i[3],_=i[7],y=i[11],v=i[15],C=s[0],R=s[4],w=s[8],D=s[12],N=s[1],V=s[5],j=s[9],se=s[13],$=s[2],q=s[6],K=s[10],ne=s[14],te=s[3],J=s[7],de=s[11],ve=s[15];return r[0]=o*C+a*N+l*$+c*te,r[4]=o*R+a*V+l*q+c*J,r[8]=o*w+a*j+l*K+c*de,r[12]=o*D+a*se+l*ne+c*ve,r[1]=u*C+d*N+h*$+p*te,r[5]=u*R+d*V+h*q+p*J,r[9]=u*w+d*j+h*K+p*de,r[13]=u*D+d*se+h*ne+p*ve,r[2]=g*C+m*N+f*$+b*te,r[6]=g*R+m*V+f*q+b*J,r[10]=g*w+m*j+f*K+b*de,r[14]=g*D+m*se+f*ne+b*ve,r[3]=x*C+_*N+y*$+v*te,r[7]=x*R+_*V+y*q+v*J,r[11]=x*w+_*j+y*K+v*de,r[15]=x*D+_*se+y*ne+v*ve,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],g=e[3],m=e[7],f=e[11],b=e[15];return g*(+r*l*d-s*c*d-r*a*h+i*c*h+s*a*p-i*l*p)+m*(+n*l*p-n*c*h+r*o*h-s*o*p+s*c*u-r*l*u)+f*(+n*c*d-n*a*p-r*o*d+i*o*p+r*a*u-i*c*u)+b*(-s*a*u-n*l*d+n*a*h+s*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],g=e[12],m=e[13],f=e[14],b=e[15],x=d*f*c-m*h*c+m*l*p-a*f*p-d*l*b+a*h*b,_=g*h*c-u*f*c-g*l*p+o*f*p+u*l*b-o*h*b,y=u*m*c-g*d*c+g*a*p-o*m*p-u*a*b+o*d*b,v=g*d*l-u*m*l-g*a*h+o*m*h+u*a*f-o*d*f,C=n*x+i*_+s*y+r*v;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/C;return e[0]=x*R,e[1]=(m*h*r-d*f*r-m*s*p+i*f*p+d*s*b-i*h*b)*R,e[2]=(a*f*r-m*l*r+m*s*c-i*f*c-a*s*b+i*l*b)*R,e[3]=(d*l*r-a*h*r-d*s*c+i*h*c+a*s*p-i*l*p)*R,e[4]=_*R,e[5]=(u*f*r-g*h*r+g*s*p-n*f*p-u*s*b+n*h*b)*R,e[6]=(g*l*r-o*f*r-g*s*c+n*f*c+o*s*b-n*l*b)*R,e[7]=(o*h*r-u*l*r+u*s*c-n*h*c-o*s*p+n*l*p)*R,e[8]=y*R,e[9]=(g*d*r-u*m*r-g*i*p+n*m*p+u*i*b-n*d*b)*R,e[10]=(o*m*r-g*a*r+g*i*c-n*m*c-o*i*b+n*a*b)*R,e[11]=(u*a*r-o*d*r-u*i*c+n*d*c+o*i*p-n*a*p)*R,e[12]=v*R,e[13]=(u*m*s-g*d*s+g*i*h-n*m*h-u*i*f+n*d*f)*R,e[14]=(g*a*s-o*m*s-g*i*l+n*m*l+o*i*f-n*a*f)*R,e[15]=(o*d*s-u*a*s+u*i*l-n*d*l-o*i*h+n*a*h)*R,this}scale(e){const n=this.elements,i=e.x,s=e.y,r=e.z;return n[0]*=i,n[4]*=s,n[8]*=r,n[1]*=i,n[5]*=s,n[9]*=r,n[2]*=i,n[6]*=s,n[10]*=r,n[3]*=i,n[7]*=s,n[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,n,s,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,r=n._x,o=n._y,a=n._z,l=n._w,c=r+r,u=o+o,d=a+a,h=r*c,p=r*u,g=r*d,m=o*u,f=o*d,b=a*d,x=l*c,_=l*u,y=l*d,v=i.x,C=i.y,R=i.z;return s[0]=(1-(m+b))*v,s[1]=(p+y)*v,s[2]=(g-_)*v,s[3]=0,s[4]=(p-y)*C,s[5]=(1-(h+b))*C,s[6]=(f+x)*C,s[7]=0,s[8]=(g+_)*R,s[9]=(f-x)*R,s[10]=(1-(h+m))*R,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let r=to.set(s[0],s[1],s[2]).length();const o=to.set(s[4],s[5],s[6]).length(),a=to.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],vi.copy(this);const c=1/r,u=1/o,d=1/a;return vi.elements[0]*=c,vi.elements[1]*=c,vi.elements[2]*=c,vi.elements[4]*=u,vi.elements[5]*=u,vi.elements[6]*=u,vi.elements[8]*=d,vi.elements[9]*=d,vi.elements[10]*=d,n.setFromRotationMatrix(vi),i.x=r,i.y=o,i.z=a,this}makePerspective(e,n,i,s,r,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*r/(n-e),c=2*r/(i-s),u=(n+e)/(n-e),d=(i+s)/(i-s),h=-(o+r)/(o-r),p=-2*o*r/(o-r);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,s,r,o){const a=this.elements,l=1/(n-e),c=1/(i-s),u=1/(o-r),d=(n+e)*l,h=(i+s)*c,p=(o+r)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const to=new H,vi=new Gt,ML=new H(0,0,0),CL=new H(1,1,1),Ms=new H,Wl=new H,$n=new H,eg=new Gt,tg=new Or;class Ys{constructor(e=0,n=0,i=0,s=Ys.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s=this._order){return this._x=e,this._y=n,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],d=s[2],h=s[6],p=s[10];switch(n){case"XYZ":this._y=Math.asin(_n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-_n(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(_n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-_n(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(_n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-_n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return eg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eg,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return tg.setFromEuler(this),this.setFromQuaternion(tg,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ys.DefaultOrder="XYZ";Ys.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class wx{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let TL=0;const ng=new H,no=new Or,Yi=new Gt,Gl=new H,sa=new H,EL=new H,DL=new Or,ig=new H(1,0,0),sg=new H(0,1,0),rg=new H(0,0,1),PL={type:"added"},og={type:"removed"};class Qn extends Wr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TL++}),this.uuid=jo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qn.DefaultUp.clone();const e=new H,n=new Ys,i=new Or,s=new H(1,1,1);function r(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Gt},normalMatrix:{value:new ui}}),this.matrix=new Gt,this.matrixWorld=new Gt,this.matrixAutoUpdate=Qn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return no.setFromAxisAngle(e,n),this.quaternion.multiply(no),this}rotateOnWorldAxis(e,n){return no.setFromAxisAngle(e,n),this.quaternion.premultiply(no),this}rotateX(e){return this.rotateOnAxis(ig,e)}rotateY(e){return this.rotateOnAxis(sg,e)}rotateZ(e){return this.rotateOnAxis(rg,e)}translateOnAxis(e,n){return ng.copy(e).applyQuaternion(this.quaternion),this.position.add(ng.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(ig,e)}translateY(e){return this.translateOnAxis(sg,e)}translateZ(e){return this.translateOnAxis(rg,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Yi.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Gl.copy(e):Gl.set(e,n,i);const s=this.parent;this.updateWorldMatrix(!0,!1),sa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yi.lookAt(sa,Gl,this.up):Yi.lookAt(Gl,sa,this.up),this.quaternion.setFromRotationMatrix(Yi),s&&(Yi.extractRotation(s.matrixWorld),no.setFromRotationMatrix(Yi),this.quaternion.premultiply(no.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(PL)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(og)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(og)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Yi.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Yi.multiply(e.parent.matrixWorld)),e.applyMatrix4(Yi),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sa,e,EL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sa,DL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,s=n.length;i<s;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Qn.DefaultUp=new H(0,1,0);Qn.DefaultMatrixAutoUpdate=!0;const _i=new H,qi=new H,pd=new H,Zi=new H,io=new H,so=new H,ag=new H,md=new H,gd=new H,bd=new H;class os{constructor(e=new H,n=new H,i=new H){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,s){s.subVectors(i,n),_i.subVectors(e,n),s.cross(_i);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,n,i,s,r){_i.subVectors(s,n),qi.subVectors(i,n),pd.subVectors(e,n);const o=_i.dot(_i),a=_i.dot(qi),l=_i.dot(pd),c=qi.dot(qi),u=qi.dot(pd),d=o*c-a*a;if(d===0)return r.set(-2,-1,-1);const h=1/d,p=(c*l-a*u)*h,g=(o*u-a*l)*h;return r.set(1-p-g,g,p)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,Zi),Zi.x>=0&&Zi.y>=0&&Zi.x+Zi.y<=1}static getUV(e,n,i,s,r,o,a,l){return this.getBarycoord(e,n,i,s,Zi),l.set(0,0),l.addScaledVector(r,Zi.x),l.addScaledVector(o,Zi.y),l.addScaledVector(a,Zi.z),l}static isFrontFacing(e,n,i,s){return _i.subVectors(i,n),qi.subVectors(e,n),_i.cross(qi).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,n,i,s){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _i.subVectors(this.c,this.b),qi.subVectors(this.a,this.b),_i.cross(qi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return os.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return os.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,s,r){return os.getUV(e,this.a,this.b,this.c,n,i,s,r)}containsPoint(e){return os.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return os.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,s=this.b,r=this.c;let o,a;io.subVectors(s,i),so.subVectors(r,i),md.subVectors(e,i);const l=io.dot(md),c=so.dot(md);if(l<=0&&c<=0)return n.copy(i);gd.subVectors(e,s);const u=io.dot(gd),d=so.dot(gd);if(u>=0&&d<=u)return n.copy(s);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(io,o);bd.subVectors(e,r);const p=io.dot(bd),g=so.dot(bd);if(g>=0&&p<=g)return n.copy(r);const m=p*c-l*g;if(m<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(i).addScaledVector(so,a);const f=u*g-p*d;if(f<=0&&d-u>=0&&p-g>=0)return ag.subVectors(r,s),a=(d-u)/(d-u+(p-g)),n.copy(s).addScaledVector(ag,a);const b=1/(f+m+h);return o=m*b,a=h*b,n.copy(i).addScaledVector(io,o).addScaledVector(so,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let LL=0;class Ko extends Wr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LL++}),this.uuid=jo(),this.name="",this.type="Material",this.blending=So,this.side=Za,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=hx,this.blendDst=fx,this.blendEquation=go,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ch,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=id,this.stencilZFail=id,this.stencilZPass=id,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}if(n==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===dP;continue}const s=this[n];if(s===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==So&&(i.blending=this.blending),this.side!==Za&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(n){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const s=n.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=n[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class bu extends Ko{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xt=new H,jl=new et;class Hi{constructor(e,n,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i===!0,this.usage=Ym,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=n.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const n=this.array;let i=0;for(let s=0,r=e.length;s<r;s++){let o=e[s];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),o=new Dt),n[i++]=o.r,n[i++]=o.g,n[i++]=o.b}return this}copyVector2sArray(e){const n=this.array;let i=0;for(let s=0,r=e.length;s<r;s++){let o=e[s];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),o=new et),n[i++]=o.x,n[i++]=o.y}return this}copyVector3sArray(e){const n=this.array;let i=0;for(let s=0,r=e.length;s<r;s++){let o=e[s];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),o=new H),n[i++]=o.x,n[i++]=o.y,n[i++]=o.z}return this}copyVector4sArray(e){const n=this.array;let i=0;for(let s=0,r=e.length;s<r;s++){let o=e[s];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),o=new Bt),n[i++]=o.x,n[i++]=o.y,n[i++]=o.z,n[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)jl.fromBufferAttribute(this,n),jl.applyMatrix3(e),this.setXY(n,jl.x,jl.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Xt.fromBufferAttribute(this,n),Xt.applyMatrix3(e),this.setXYZ(n,Xt.x,Xt.y,Xt.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Xt.fromBufferAttribute(this,n),Xt.applyMatrix4(e),this.setXYZ(n,Xt.x,Xt.y,Xt.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Xt.fromBufferAttribute(this,n),Xt.applyNormalMatrix(e),this.setXYZ(n,Xt.x,Xt.y,Xt.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Xt.fromBufferAttribute(this,n),Xt.transformDirection(e),this.setXYZ(n,Xt.x,Xt.y,Xt.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){return this.array[e*this.itemSize]}setX(e,n){return this.array[e*this.itemSize]=n,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,n){return this.array[e*this.itemSize+1]=n,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,n){return this.array[e*this.itemSize+2]=n,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,n){return this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,s){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,n,i,s,r){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ym&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Sx extends Hi{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class Mx extends Hi{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class Gn extends Hi{constructor(e,n,i){super(new Float32Array(e),n,i)}}let RL=0;const si=new Gt,yd=new Qn,ro=new H,Kn=new $o,ra=new $o,cn=new H;class Pi extends Wr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:RL++}),this.uuid=jo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gx(e)?Mx:Sx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new ui().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return si.makeRotationFromQuaternion(e),this.applyMatrix4(si),this}rotateX(e){return si.makeRotationX(e),this.applyMatrix4(si),this}rotateY(e){return si.makeRotationY(e),this.applyMatrix4(si),this}rotateZ(e){return si.makeRotationZ(e),this.applyMatrix4(si),this}translate(e,n,i){return si.makeTranslation(e,n,i),this.applyMatrix4(si),this}scale(e,n,i){return si.makeScale(e,n,i),this.applyMatrix4(si),this}lookAt(e){return yd.lookAt(e),yd.updateMatrix(),this.applyMatrix4(yd.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ro).negate(),this.translate(ro.x,ro.y,ro.z),this}setFromPoints(e){const n=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];n.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Gn(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $o);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new H(-1/0,-1/0,-1/0),new H(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,s=n.length;i<s;i++){const r=n[i];Kn.setFromBufferAttribute(r),this.morphTargetsRelative?(cn.addVectors(this.boundingBox.min,Kn.min),this.boundingBox.expandByPoint(cn),cn.addVectors(this.boundingBox.max,Kn.max),this.boundingBox.expandByPoint(cn)):(this.boundingBox.expandByPoint(Kn.min),this.boundingBox.expandByPoint(Kn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gu);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new H,1/0);return}if(e){const i=this.boundingSphere.center;if(Kn.setFromBufferAttribute(e),n)for(let r=0,o=n.length;r<o;r++){const a=n[r];ra.setFromBufferAttribute(a),this.morphTargetsRelative?(cn.addVectors(Kn.min,ra.min),Kn.expandByPoint(cn),cn.addVectors(Kn.max,ra.max),Kn.expandByPoint(cn)):(Kn.expandByPoint(ra.min),Kn.expandByPoint(ra.max))}Kn.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)cn.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(cn));if(n)for(let r=0,o=n.length;r<o;r++){const a=n[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)cn.fromBufferAttribute(a,c),l&&(ro.fromBufferAttribute(e,c),cn.add(ro)),s=Math.max(s,i.distanceToSquared(cn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=n.position.array,r=n.normal.array,o=n.uv.array,a=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Hi(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new H,u[N]=new H;const d=new H,h=new H,p=new H,g=new et,m=new et,f=new et,b=new H,x=new H;function _(N,V,j){d.fromArray(s,N*3),h.fromArray(s,V*3),p.fromArray(s,j*3),g.fromArray(o,N*2),m.fromArray(o,V*2),f.fromArray(o,j*2),h.sub(d),p.sub(d),m.sub(g),f.sub(g);const se=1/(m.x*f.y-f.x*m.y);!isFinite(se)||(b.copy(h).multiplyScalar(f.y).addScaledVector(p,-m.y).multiplyScalar(se),x.copy(p).multiplyScalar(m.x).addScaledVector(h,-f.x).multiplyScalar(se),c[N].add(b),c[V].add(b),c[j].add(b),u[N].add(x),u[V].add(x),u[j].add(x))}let y=this.groups;y.length===0&&(y=[{start:0,count:i.length}]);for(let N=0,V=y.length;N<V;++N){const j=y[N],se=j.start,$=j.count;for(let q=se,K=se+$;q<K;q+=3)_(i[q+0],i[q+1],i[q+2])}const v=new H,C=new H,R=new H,w=new H;function D(N){R.fromArray(r,N*3),w.copy(R);const V=c[N];v.copy(V),v.sub(R.multiplyScalar(R.dot(V))).normalize(),C.crossVectors(w,V);const se=C.dot(u[N])<0?-1:1;l[N*4]=v.x,l[N*4+1]=v.y,l[N*4+2]=v.z,l[N*4+3]=se}for(let N=0,V=y.length;N<V;++N){const j=y[N],se=j.start,$=j.count;for(let q=se,K=se+$;q<K;q+=3)D(i[q+0]),D(i[q+1]),D(i[q+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Hi(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const s=new H,r=new H,o=new H,a=new H,l=new H,c=new H,u=new H,d=new H;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),m=e.getX(h+1),f=e.getX(h+2);s.fromBufferAttribute(n,g),r.fromBufferAttribute(n,m),o.fromBufferAttribute(n,f),u.subVectors(o,r),d.subVectors(s,r),u.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,f),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(f,c.x,c.y,c.z)}else for(let h=0,p=n.count;h<p;h+=3)s.fromBufferAttribute(n,h+0),r.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,r),d.subVectors(s,r),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,n){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}n===void 0&&(n=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,a=e.attributes[s],l=a.array,c=a.itemSize*n,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)cn.fromBufferAttribute(e,n),cn.normalize(),e.setXYZ(n,cn.x,cn.y,cn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,g=0;for(let m=0,f=l.length;m<f;m++){a.isInterleavedBufferAttribute?p=l[m]*a.data.stride+a.offset:p=l[m]*u;for(let b=0;b<u;b++)h[g++]=c[p++]}return new Hi(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Pi,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);n.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(n))}const r=e.morphAttributes;for(const c in r){const u=[],d=r[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const lg=new Gt,oo=new _x,xd=new gu,Cs=new H,Ts=new H,Es=new H,vd=new H,_d=new H,wd=new H,$l=new H,Kl=new H,Xl=new H,Yl=new et,ql=new et,Zl=new et,Sd=new H,Jl=new H;class Ui extends Qn{constructor(e=new Pi,n=new bu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}raycast(e,n){const i=this.geometry,s=this.material,r=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),xd.copy(i.boundingSphere),xd.applyMatrix4(r),e.ray.intersectsSphere(xd)===!1)||(lg.copy(r).invert(),oo.copy(e.ray).applyMatrix4(lg),i.boundingBox!==null&&oo.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,p=i.groups,g=i.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,f=p.length;m<f;m++){const b=p[m],x=s[b.materialIndex],_=Math.max(b.start,g.start),y=Math.min(a.count,Math.min(b.start+b.count,g.start+g.count));for(let v=_,C=y;v<C;v+=3){const R=a.getX(v),w=a.getX(v+1),D=a.getX(v+2);o=Ql(this,x,e,oo,l,c,u,d,h,R,w,D),o&&(o.faceIndex=Math.floor(v/3),o.face.materialIndex=b.materialIndex,n.push(o))}}else{const m=Math.max(0,g.start),f=Math.min(a.count,g.start+g.count);for(let b=m,x=f;b<x;b+=3){const _=a.getX(b),y=a.getX(b+1),v=a.getX(b+2);o=Ql(this,s,e,oo,l,c,u,d,h,_,y,v),o&&(o.faceIndex=Math.floor(b/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,f=p.length;m<f;m++){const b=p[m],x=s[b.materialIndex],_=Math.max(b.start,g.start),y=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let v=_,C=y;v<C;v+=3){const R=v,w=v+1,D=v+2;o=Ql(this,x,e,oo,l,c,u,d,h,R,w,D),o&&(o.faceIndex=Math.floor(v/3),o.face.materialIndex=b.materialIndex,n.push(o))}}else{const m=Math.max(0,g.start),f=Math.min(l.count,g.start+g.count);for(let b=m,x=f;b<x;b+=3){const _=b,y=b+1,v=b+2;o=Ql(this,s,e,oo,l,c,u,d,h,_,y,v),o&&(o.faceIndex=Math.floor(b/3),n.push(o))}}}}function AL(t,e,n,i,s,r,o,a){let l;if(e.side===Di?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side!==Ro,a),l===null)return null;Jl.copy(a),Jl.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Jl);return c<n.near||c>n.far?null:{distance:c,point:Jl.clone(),object:t}}function Ql(t,e,n,i,s,r,o,a,l,c,u,d){Cs.fromBufferAttribute(s,c),Ts.fromBufferAttribute(s,u),Es.fromBufferAttribute(s,d);const h=t.morphTargetInfluences;if(r&&h){$l.set(0,0,0),Kl.set(0,0,0),Xl.set(0,0,0);for(let g=0,m=r.length;g<m;g++){const f=h[g],b=r[g];f!==0&&(vd.fromBufferAttribute(b,c),_d.fromBufferAttribute(b,u),wd.fromBufferAttribute(b,d),o?($l.addScaledVector(vd,f),Kl.addScaledVector(_d,f),Xl.addScaledVector(wd,f)):($l.addScaledVector(vd.sub(Cs),f),Kl.addScaledVector(_d.sub(Ts),f),Xl.addScaledVector(wd.sub(Es),f)))}Cs.add($l),Ts.add(Kl),Es.add(Xl)}t.isSkinnedMesh&&(t.boneTransform(c,Cs),t.boneTransform(u,Ts),t.boneTransform(d,Es));const p=AL(t,e,n,i,Cs,Ts,Es,Sd);if(p){a&&(Yl.fromBufferAttribute(a,c),ql.fromBufferAttribute(a,u),Zl.fromBufferAttribute(a,d),p.uv=os.getUV(Sd,Cs,Ts,Es,Yl,ql,Zl,new et)),l&&(Yl.fromBufferAttribute(l,c),ql.fromBufferAttribute(l,u),Zl.fromBufferAttribute(l,d),p.uv2=os.getUV(Sd,Cs,Ts,Es,Yl,ql,Zl,new et));const g={a:c,b:u,c:d,normal:new H,materialIndex:0};os.getNormal(Cs,Ts,Es,g.normal),p.face=g}return p}class dl extends Pi{constructor(e=1,n=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,p=0;g("z","y","x",-1,-1,i,n,e,o,r,0),g("z","y","x",1,-1,i,n,-e,o,r,1),g("x","z","y",1,1,e,i,n,s,o,2),g("x","z","y",1,-1,e,i,-n,s,o,3),g("x","y","z",1,-1,e,n,i,s,r,4),g("x","y","z",-1,-1,e,n,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new Gn(c,3)),this.setAttribute("normal",new Gn(u,3)),this.setAttribute("uv",new Gn(d,2));function g(m,f,b,x,_,y,v,C,R,w,D){const N=y/R,V=v/w,j=y/2,se=v/2,$=C/2,q=R+1,K=w+1;let ne=0,te=0;const J=new H;for(let de=0;de<K;de++){const ve=de*V-se;for(let me=0;me<q;me++){const ye=me*N-j;J[m]=ye*x,J[f]=ve*_,J[b]=$,c.push(J.x,J.y,J.z),J[m]=0,J[f]=0,J[b]=C>0?1:-1,u.push(J.x,J.y,J.z),d.push(me/R),d.push(1-de/w),ne+=1}}for(let de=0;de<w;de++)for(let ve=0;ve<R;ve++){const me=h+ve+q*de,ye=h+ve+q*(de+1),ke=h+(ve+1)+q*(de+1),Ue=h+(ve+1)+q*de;l.push(me,ye,Ue),l.push(ye,ke,Ue),te+=6}a.addGroup(p,te,D),p+=te,h+=ne}}static fromJSON(e){return new dl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Oo(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const s=t[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function Cn(t){const e={};for(let n=0;n<t.length;n++){const i=Oo(t[n]);for(const s in i)e[s]=i[s]}return e}const IL={clone:Oo,merge:Cn};var kL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,OL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Fr extends Ko{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=kL,this.fragmentShader=OL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Oo(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?n.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[s]={type:"m4",value:o.toArray()}:n.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class Cx extends Qn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gt,this.projectionMatrix=new Gt,this.projectionMatrixInverse=new Gt}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yn extends Cx{constructor(e=50,n=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Fc*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ra*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Fc*2*Math.atan(Math.tan(Ra*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,i,s,r,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ra*.5*this.fov)/this.zoom,i=2*n,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,n-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,n,n-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ao=90,lo=1;class FL extends Qn{constructor(e,n,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new Yn(ao,lo,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new H(1,0,0)),this.add(s);const r=new Yn(ao,lo,e,n);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new H(-1,0,0)),this.add(r);const o=new Yn(ao,lo,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new H(0,1,0)),this.add(o);const a=new Yn(ao,lo,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new H(0,-1,0)),this.add(a);const l=new Yn(ao,lo,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new H(0,0,1)),this.add(l);const c=new Yn(ao,lo,e,n);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new H(0,0,-1)),this.add(c)}update(e,n){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,r,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=hs,e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(n,s),e.setRenderTarget(i,1),e.render(n,r),e.setRenderTarget(i,2),e.render(n,o),e.setRenderTarget(i,3),e.render(n,a),e.setRenderTarget(i,4),e.render(n,l),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(n,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class Tx extends pi{constructor(e,n,i,s,r,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Ao,super(e,n,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class NL extends Xs{constructor(e,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new Tx(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:li}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new dl(5,5,5),r=new Fr({name:"CubemapFromEquirect",uniforms:Oo(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Di,blending:Us});r.uniforms.tEquirect.value=n;const o=new Ui(s,r),a=n.minFilter;return n.minFilter===mu&&(n.minFilter=li),new FL(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,s);e.setRenderTarget(r)}}const Md=new H,BL=new H,zL=new ui;class mr{constructor(e=new H(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=Md.subVectors(i,n).cross(BL.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const i=e.delta(Md),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:n.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||zL.getNormalMatrix(e),s=this.coplanarPoint(Md).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const co=new gu,ec=new H;class Rf{constructor(e=new mr,n=new mr,i=new mr,s=new mr,r=new mr,o=new mr){this.planes=[e,n,i,s,r,o]}set(e,n,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],g=i[10],m=i[11],f=i[12],b=i[13],x=i[14],_=i[15];return n[0].setComponents(a-s,d-l,m-h,_-f).normalize(),n[1].setComponents(a+s,d+l,m+h,_+f).normalize(),n[2].setComponents(a+r,d+c,m+p,_+b).normalize(),n[3].setComponents(a-r,d-c,m-p,_-b).normalize(),n[4].setComponents(a-o,d-u,m-g,_-x).normalize(),n[5].setComponents(a+o,d+u,m+g,_+x).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),co.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(co)}intersectsSprite(e){return co.center.set(0,0,0),co.radius=.7071067811865476,co.applyMatrix4(e.matrixWorld),this.intersectsSphere(co)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(n[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(ec.x=s.normal.x>0?e.max.x:e.min.x,ec.y=s.normal.y>0?e.max.y:e.min.y,ec.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(ec)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Ex(){let t=null,e=!1,n=null,i=null;function s(r,o){n(r,o),i=t.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){n=r},setContext:function(r){t=r}}}function VL(t,e){const n=e.isWebGL2,i=new WeakMap;function s(c,u){const d=c.array,h=c.usage,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,d,h),c.onUploadCallback();let g;if(d instanceof Float32Array)g=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(d instanceof Int16Array)g=5122;else if(d instanceof Uint32Array)g=5125;else if(d instanceof Int32Array)g=5124;else if(d instanceof Int8Array)g=5120;else if(d instanceof Uint8Array)g=5121;else if(d instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function r(c,u,d){const h=u.array,p=u.updateRange;t.bindBuffer(d,c),p.count===-1?t.bufferSubData(d,0,h):(n?t.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):t.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,s(c,u)):d.version<c.version&&(r(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}class Af extends Pi{constructor(e=1,n=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s};const r=e/2,o=n/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,d=e/a,h=n/l,p=[],g=[],m=[],f=[];for(let b=0;b<u;b++){const x=b*h-o;for(let _=0;_<c;_++){const y=_*d-r;g.push(y,-x,0),m.push(0,0,1),f.push(_/a),f.push(1-b/l)}}for(let b=0;b<l;b++)for(let x=0;x<a;x++){const _=x+c*b,y=x+c*(b+1),v=x+1+c*(b+1),C=x+1+c*b;p.push(_,y,C),p.push(y,v,C)}this.setIndex(p),this.setAttribute("position",new Gn(g,3)),this.setAttribute("normal",new Gn(m,3)),this.setAttribute("uv",new Gn(f,2))}static fromJSON(e){return new Af(e.width,e.height,e.widthSegments,e.heightSegments)}}var UL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,HL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WL=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,GL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$L=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,KL="vec3 transformed = vec3( position );",XL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,YL=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,qL=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,ZL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,JL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,QL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,eR=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tR=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,nR=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iR=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sR=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,rR=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,oR=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,aR=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lR=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cR=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uR=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,dR=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,hR=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fR="gl_FragColor = linearToOutputTexel( gl_FragColor );",pR=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mR=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gR=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bR=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yR=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xR=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,vR=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_R=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wR=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,SR=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,MR=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,CR=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,TR=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ER=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,DR=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,PR=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,LR=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RR=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,AR=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,IR=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,kR=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,OR=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,FR=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NR=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,BR=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,zR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VR=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,UR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,HR=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,WR=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,GR=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jR=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,$R=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KR=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,XR=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,YR=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qR=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,ZR=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,JR=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,QR=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,eA=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tA=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nA=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iA=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sA=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,rA=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,oA=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,aA=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,lA=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,cA=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,uA=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,dA=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hA=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fA=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,pA=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,mA=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,gA=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bA=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,yA=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xA=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,vA=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_A=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,wA=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,SA=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,MA=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,CA=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,TA=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EA=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,DA=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PA=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,LA=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,RA=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,AA=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,IA=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,kA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,OA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,FA=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,NA=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const BA=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zA=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,VA=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UA=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,HA=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,WA=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,GA=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jA=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$A=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,KA=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XA=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YA=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qA=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ZA=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JA=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QA=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,tI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,iI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,aI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hI=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pt={alphamap_fragment:UL,alphamap_pars_fragment:HL,alphatest_fragment:WL,alphatest_pars_fragment:GL,aomap_fragment:jL,aomap_pars_fragment:$L,begin_vertex:KL,beginnormal_vertex:XL,bsdfs:YL,iridescence_fragment:qL,bumpmap_pars_fragment:ZL,clipping_planes_fragment:JL,clipping_planes_pars_fragment:QL,clipping_planes_pars_vertex:eR,clipping_planes_vertex:tR,color_fragment:nR,color_pars_fragment:iR,color_pars_vertex:sR,color_vertex:rR,common:oR,cube_uv_reflection_fragment:aR,defaultnormal_vertex:lR,displacementmap_pars_vertex:cR,displacementmap_vertex:uR,emissivemap_fragment:dR,emissivemap_pars_fragment:hR,encodings_fragment:fR,encodings_pars_fragment:pR,envmap_fragment:mR,envmap_common_pars_fragment:gR,envmap_pars_fragment:bR,envmap_pars_vertex:yR,envmap_physical_pars_fragment:PR,envmap_vertex:xR,fog_vertex:vR,fog_pars_vertex:_R,fog_fragment:wR,fog_pars_fragment:SR,gradientmap_pars_fragment:MR,lightmap_fragment:CR,lightmap_pars_fragment:TR,lights_lambert_vertex:ER,lights_pars_begin:DR,lights_toon_fragment:LR,lights_toon_pars_fragment:RR,lights_phong_fragment:AR,lights_phong_pars_fragment:IR,lights_physical_fragment:kR,lights_physical_pars_fragment:OR,lights_fragment_begin:FR,lights_fragment_maps:NR,lights_fragment_end:BR,logdepthbuf_fragment:zR,logdepthbuf_pars_fragment:VR,logdepthbuf_pars_vertex:UR,logdepthbuf_vertex:HR,map_fragment:WR,map_pars_fragment:GR,map_particle_fragment:jR,map_particle_pars_fragment:$R,metalnessmap_fragment:KR,metalnessmap_pars_fragment:XR,morphcolor_vertex:YR,morphnormal_vertex:qR,morphtarget_pars_vertex:ZR,morphtarget_vertex:JR,normal_fragment_begin:QR,normal_fragment_maps:eA,normal_pars_fragment:tA,normal_pars_vertex:nA,normal_vertex:iA,normalmap_pars_fragment:sA,clearcoat_normal_fragment_begin:rA,clearcoat_normal_fragment_maps:oA,clearcoat_pars_fragment:aA,iridescence_pars_fragment:lA,output_fragment:cA,packing:uA,premultiplied_alpha_fragment:dA,project_vertex:hA,dithering_fragment:fA,dithering_pars_fragment:pA,roughnessmap_fragment:mA,roughnessmap_pars_fragment:gA,shadowmap_pars_fragment:bA,shadowmap_pars_vertex:yA,shadowmap_vertex:xA,shadowmask_pars_fragment:vA,skinbase_vertex:_A,skinning_pars_vertex:wA,skinning_vertex:SA,skinnormal_vertex:MA,specularmap_fragment:CA,specularmap_pars_fragment:TA,tonemapping_fragment:EA,tonemapping_pars_fragment:DA,transmission_fragment:PA,transmission_pars_fragment:LA,uv_pars_fragment:RA,uv_pars_vertex:AA,uv_vertex:IA,uv2_pars_fragment:kA,uv2_pars_vertex:OA,uv2_vertex:FA,worldpos_vertex:NA,background_vert:BA,background_frag:zA,cube_vert:VA,cube_frag:UA,depth_vert:HA,depth_frag:WA,distanceRGBA_vert:GA,distanceRGBA_frag:jA,equirect_vert:$A,equirect_frag:KA,linedashed_vert:XA,linedashed_frag:YA,meshbasic_vert:qA,meshbasic_frag:ZA,meshlambert_vert:JA,meshlambert_frag:QA,meshmatcap_vert:eI,meshmatcap_frag:tI,meshnormal_vert:nI,meshnormal_frag:iI,meshphong_vert:sI,meshphong_frag:rI,meshphysical_vert:oI,meshphysical_frag:aI,meshtoon_vert:lI,meshtoon_frag:cI,points_vert:uI,points_frag:dI,shadow_vert:hI,shadow_frag:fI,sprite_vert:pI,sprite_frag:mI},Oe={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ui},uv2Transform:{value:new ui},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ui}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ui}}},Bi={basic:{uniforms:Cn([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:pt.meshbasic_vert,fragmentShader:pt.meshbasic_frag},lambert:{uniforms:Cn([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.fog,Oe.lights,{emissive:{value:new Dt(0)}}]),vertexShader:pt.meshlambert_vert,fragmentShader:pt.meshlambert_frag},phong:{uniforms:Cn([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:pt.meshphong_vert,fragmentShader:pt.meshphong_frag},standard:{uniforms:Cn([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag},toon:{uniforms:Cn([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Dt(0)}}]),vertexShader:pt.meshtoon_vert,fragmentShader:pt.meshtoon_frag},matcap:{uniforms:Cn([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:pt.meshmatcap_vert,fragmentShader:pt.meshmatcap_frag},points:{uniforms:Cn([Oe.points,Oe.fog]),vertexShader:pt.points_vert,fragmentShader:pt.points_frag},dashed:{uniforms:Cn([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pt.linedashed_vert,fragmentShader:pt.linedashed_frag},depth:{uniforms:Cn([Oe.common,Oe.displacementmap]),vertexShader:pt.depth_vert,fragmentShader:pt.depth_frag},normal:{uniforms:Cn([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:pt.meshnormal_vert,fragmentShader:pt.meshnormal_frag},sprite:{uniforms:Cn([Oe.sprite,Oe.fog]),vertexShader:pt.sprite_vert,fragmentShader:pt.sprite_frag},background:{uniforms:{uvTransform:{value:new ui},t2D:{value:null}},vertexShader:pt.background_vert,fragmentShader:pt.background_frag},cube:{uniforms:Cn([Oe.envmap,{opacity:{value:1}}]),vertexShader:pt.cube_vert,fragmentShader:pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pt.equirect_vert,fragmentShader:pt.equirect_frag},distanceRGBA:{uniforms:Cn([Oe.common,Oe.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pt.distanceRGBA_vert,fragmentShader:pt.distanceRGBA_frag},shadow:{uniforms:Cn([Oe.lights,Oe.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:pt.shadow_vert,fragmentShader:pt.shadow_frag}};Bi.physical={uniforms:Cn([Bi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new et(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag};function gI(t,e,n,i,s,r){const o=new Dt(0);let a=s===!0?0:1,l,c,u=null,d=0,h=null;function p(m,f){let b=!1,x=f.isScene===!0?f.background:null;x&&x.isTexture&&(x=e.get(x));const _=t.xr,y=_.getSession&&_.getSession();y&&y.environmentBlendMode==="additive"&&(x=null),x===null?g(o,a):x&&x.isColor&&(g(x,1),b=!0),(t.autoClear||b)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===pu)?(c===void 0&&(c=new Ui(new dl(1,1,1),new Fr({name:"BackgroundCubeMaterial",uniforms:Oo(Bi.cube.uniforms),vertexShader:Bi.cube.vertexShader,fragmentShader:Bi.cube.fragmentShader,side:Di,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(v,C,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,(u!==x||d!==x.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,h=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(l===void 0&&(l=new Ui(new Af(2,2),new Fr({name:"BackgroundMaterial",uniforms:Oo(Bi.background.uniforms),vertexShader:Bi.background.vertexShader,fragmentShader:Bi.background.fragmentShader,side:Za,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=x,x.matrixAutoUpdate===!0&&x.updateMatrix(),l.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||h!==t.toneMapping)&&(l.material.needsUpdate=!0,u=x,d=x.version,h=t.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function g(m,f){n.buffers.color.setClear(m.r,m.g,m.b,f,r)}return{getClearColor:function(){return o},setClearColor:function(m,f=1){o.set(m),a=f,g(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(m){a=m,g(o,a)},render:p}}function bI(t,e,n,i){const s=t.getParameter(34921),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||r!==null,a={},l=f(null);let c=l,u=!1;function d($,q,K,ne,te){let J=!1;if(o){const de=m(ne,K,q);c!==de&&(c=de,p(c.object)),J=b($,ne,K,te),J&&x($,ne,K,te)}else{const de=q.wireframe===!0;(c.geometry!==ne.id||c.program!==K.id||c.wireframe!==de)&&(c.geometry=ne.id,c.program=K.id,c.wireframe=de,J=!0)}te!==null&&n.update(te,34963),(J||u)&&(u=!1,w($,q,K,ne),te!==null&&t.bindBuffer(34963,n.get(te).buffer))}function h(){return i.isWebGL2?t.createVertexArray():r.createVertexArrayOES()}function p($){return i.isWebGL2?t.bindVertexArray($):r.bindVertexArrayOES($)}function g($){return i.isWebGL2?t.deleteVertexArray($):r.deleteVertexArrayOES($)}function m($,q,K){const ne=K.wireframe===!0;let te=a[$.id];te===void 0&&(te={},a[$.id]=te);let J=te[q.id];J===void 0&&(J={},te[q.id]=J);let de=J[ne];return de===void 0&&(de=f(h()),J[ne]=de),de}function f($){const q=[],K=[],ne=[];for(let te=0;te<s;te++)q[te]=0,K[te]=0,ne[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:K,attributeDivisors:ne,object:$,attributes:{},index:null}}function b($,q,K,ne){const te=c.attributes,J=q.attributes;let de=0;const ve=K.getAttributes();for(const me in ve)if(ve[me].location>=0){const ke=te[me];let Ue=J[me];if(Ue===void 0&&(me==="instanceMatrix"&&$.instanceMatrix&&(Ue=$.instanceMatrix),me==="instanceColor"&&$.instanceColor&&(Ue=$.instanceColor)),ke===void 0||ke.attribute!==Ue||Ue&&ke.data!==Ue.data)return!0;de++}return c.attributesNum!==de||c.index!==ne}function x($,q,K,ne){const te={},J=q.attributes;let de=0;const ve=K.getAttributes();for(const me in ve)if(ve[me].location>=0){let ke=J[me];ke===void 0&&(me==="instanceMatrix"&&$.instanceMatrix&&(ke=$.instanceMatrix),me==="instanceColor"&&$.instanceColor&&(ke=$.instanceColor));const Ue={};Ue.attribute=ke,ke&&ke.data&&(Ue.data=ke.data),te[me]=Ue,de++}c.attributes=te,c.attributesNum=de,c.index=ne}function _(){const $=c.newAttributes;for(let q=0,K=$.length;q<K;q++)$[q]=0}function y($){v($,0)}function v($,q){const K=c.newAttributes,ne=c.enabledAttributes,te=c.attributeDivisors;K[$]=1,ne[$]===0&&(t.enableVertexAttribArray($),ne[$]=1),te[$]!==q&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,q),te[$]=q)}function C(){const $=c.newAttributes,q=c.enabledAttributes;for(let K=0,ne=q.length;K<ne;K++)q[K]!==$[K]&&(t.disableVertexAttribArray(K),q[K]=0)}function R($,q,K,ne,te,J){i.isWebGL2===!0&&(K===5124||K===5125)?t.vertexAttribIPointer($,q,K,te,J):t.vertexAttribPointer($,q,K,ne,te,J)}function w($,q,K,ne){if(i.isWebGL2===!1&&($.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const te=ne.attributes,J=K.getAttributes(),de=q.defaultAttributeValues;for(const ve in J){const me=J[ve];if(me.location>=0){let ye=te[ve];if(ye===void 0&&(ve==="instanceMatrix"&&$.instanceMatrix&&(ye=$.instanceMatrix),ve==="instanceColor"&&$.instanceColor&&(ye=$.instanceColor)),ye!==void 0){const ke=ye.normalized,Ue=ye.itemSize,le=n.get(ye);if(le===void 0)continue;const Ye=le.buffer,$e=le.type,Ne=le.bytesPerElement;if(ye.isInterleavedBufferAttribute){const Te=ye.data,O=Te.stride,z=ye.offset;if(Te.isInstancedInterleavedBuffer){for(let M=0;M<me.locationSize;M++)v(me.location+M,Te.meshPerAttribute);$.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let M=0;M<me.locationSize;M++)y(me.location+M);t.bindBuffer(34962,Ye);for(let M=0;M<me.locationSize;M++)R(me.location+M,Ue/me.locationSize,$e,ke,O*Ne,(z+Ue/me.locationSize*M)*Ne)}else{if(ye.isInstancedBufferAttribute){for(let Te=0;Te<me.locationSize;Te++)v(me.location+Te,ye.meshPerAttribute);$.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Te=0;Te<me.locationSize;Te++)y(me.location+Te);t.bindBuffer(34962,Ye);for(let Te=0;Te<me.locationSize;Te++)R(me.location+Te,Ue/me.locationSize,$e,ke,Ue*Ne,Ue/me.locationSize*Te*Ne)}}else if(de!==void 0){const ke=de[ve];if(ke!==void 0)switch(ke.length){case 2:t.vertexAttrib2fv(me.location,ke);break;case 3:t.vertexAttrib3fv(me.location,ke);break;case 4:t.vertexAttrib4fv(me.location,ke);break;default:t.vertexAttrib1fv(me.location,ke)}}}}C()}function D(){j();for(const $ in a){const q=a[$];for(const K in q){const ne=q[K];for(const te in ne)g(ne[te].object),delete ne[te];delete q[K]}delete a[$]}}function N($){if(a[$.id]===void 0)return;const q=a[$.id];for(const K in q){const ne=q[K];for(const te in ne)g(ne[te].object),delete ne[te];delete q[K]}delete a[$.id]}function V($){for(const q in a){const K=a[q];if(K[$.id]===void 0)continue;const ne=K[$.id];for(const te in ne)g(ne[te].object),delete ne[te];delete K[$.id]}}function j(){se(),u=!0,c!==l&&(c=l,p(c.object))}function se(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:j,resetDefaultState:se,dispose:D,releaseStatesOfGeometry:N,releaseStatesOfProgram:V,initAttributes:_,enableAttribute:y,disableUnusedAttributes:C}}function yI(t,e,n,i){const s=i.isWebGL2;let r;function o(c){r=c}function a(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function l(c,u,d){if(d===0)return;let h,p;if(s)h=t,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](r,c,u,d),n.update(u,r,d)}this.setMode=o,this.render=a,this.renderInstances=l}function xI(t,e,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function r(R){if(R==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(34930),h=t.getParameter(35660),p=t.getParameter(3379),g=t.getParameter(34076),m=t.getParameter(34921),f=t.getParameter(36347),b=t.getParameter(36348),x=t.getParameter(36349),_=h>0,y=o||e.has("OES_texture_float"),v=_&&y,C=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:f,maxVaryings:b,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:v,maxSamples:C}}function vI(t){const e=this;let n=null,i=0,s=!1,r=!1;const o=new mr,a=new ui,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,p){const g=d.length!==0||h||i!==0||s;return s=h,n=u(d,p,0),i=d.length,g},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,c()},this.setState=function(d,h,p){const g=d.clippingPlanes,m=d.clipIntersection,f=d.clipShadows,b=t.get(d);if(!s||g===null||g.length===0||r&&!f)r?u(null):c();else{const x=r?0:i,_=x*4;let y=b.clippingState||null;l.value=y,y=u(g,h,_,p);for(let v=0;v!==_;++v)y[v]=n[v];b.clippingState=y,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,g){const m=d!==null?d.length:0;let f=null;if(m!==0){if(f=l.value,g!==!0||f===null){const b=p+m*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(f===null||f.length<b)&&(f=new Float32Array(b));for(let _=0,y=p;_!==m;++_,y+=4)o.copy(d[_]).applyMatrix4(x,a),o.normal.toArray(f,y),f[y+3]=o.constant}l.value=f,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,f}}function _I(t){let e=new WeakMap;function n(o,a){return a===Th?o.mapping=Ao:a===Eh&&(o.mapping=Io),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Th||a===Eh)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new NL(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",s),n(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}class wI extends Cx{constructor(e=-1,n=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+n,l=s-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const yo=4,cg=[.125,.215,.35,.446,.526,.582],_r=20,Cd=new wI,ug=new Dt;let Td=null;const gr=(1+Math.sqrt(5))/2,uo=1/gr,dg=[new H(1,1,1),new H(-1,1,1),new H(1,1,-1),new H(-1,1,-1),new H(0,gr,uo),new H(0,gr,-uo),new H(uo,0,gr),new H(-uo,0,gr),new H(gr,uo,0),new H(-gr,uo,0)];class hg{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,s=100){Td=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),n>0&&this._blur(r,0,0,n),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Td),e.scissorTest=!1,tc(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ao||e.mapping===Io?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Td=this._renderer.getRenderTarget();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:li,minFilter:li,generateMipmaps:!1,type:Ja,format:Vi,encoding:kr,depthBuffer:!1},s=fg(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=fg(e,n,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SI(r)),this._blurMaterial=MI(r,e,n)}return s}_compileMaterial(e){const n=new Ui(this._lodPlanes[0],e);this._renderer.compile(n,Cd)}_sceneToCubeUV(e,n,i,s){const a=new Yn(90,1,n,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(ug),u.toneMapping=hs,u.autoClear=!1;const p=new bu({name:"PMREM.Background",side:Di,depthWrite:!1,depthTest:!1}),g=new Ui(new dl,p);let m=!1;const f=e.background;f?f.isColor&&(p.color.copy(f),e.background=null,m=!0):(p.color.copy(ug),m=!0);for(let b=0;b<6;b++){const x=b%3;x===0?(a.up.set(0,l[b],0),a.lookAt(c[b],0,0)):x===1?(a.up.set(0,0,l[b]),a.lookAt(0,c[b],0)):(a.up.set(0,l[b],0),a.lookAt(0,0,c[b]));const _=this._cubeSize;tc(s,x*_,b>2?_:0,_,_),u.setRenderTarget(s),m&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=f}_textureToCubeUV(e,n){const i=this._renderer,s=e.mapping===Ao||e.mapping===Io;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=mg()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pg());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Ui(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;tc(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,Cd)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const r=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=dg[(s-1)%dg.length];this._blur(e,s-1,s,r,o)}n.autoClear=i}_blur(e,n,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,n,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Ui(this._lodPlanes[s],c),h=c.uniforms,p=this._sizeLods[i]-1,g=isFinite(r)?Math.PI/(2*p):2*Math.PI/(2*_r-1),m=r/g,f=isFinite(r)?1+Math.floor(u*m):_r;f>_r&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${_r}`);const b=[];let x=0;for(let R=0;R<_r;++R){const w=R/m,D=Math.exp(-w*w/2);b.push(D),R===0?x+=D:R<f&&(x+=2*D)}for(let R=0;R<b.length;R++)b[R]=b[R]/x;h.envMap.value=e.texture,h.samples.value=f,h.weights.value=b,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=g,h.mipInt.value=_-i;const y=this._sizeLods[s],v=3*y*(s>_-yo?s-_+yo:0),C=4*(this._cubeSize-y);tc(n,v,C,3*y,2*y),l.setRenderTarget(n),l.render(d,Cd)}}function SI(t){const e=[],n=[],i=[];let s=t;const r=t-yo+1+cg.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);n.push(a);let l=1/a;o>t-yo?l=cg[o-t+yo-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,g=6,m=3,f=2,b=1,x=new Float32Array(m*g*p),_=new Float32Array(f*g*p),y=new Float32Array(b*g*p);for(let C=0;C<p;C++){const R=C%3*2/3-1,w=C>2?0:-1,D=[R,w,0,R+2/3,w,0,R+2/3,w+1,0,R,w,0,R+2/3,w+1,0,R,w+1,0];x.set(D,m*g*C),_.set(h,f*g*C);const N=[C,C,C,C,C,C];y.set(N,b*g*C)}const v=new Pi;v.setAttribute("position",new Hi(x,m)),v.setAttribute("uv",new Hi(_,f)),v.setAttribute("faceIndex",new Hi(y,b)),e.push(v),s>yo&&s--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function fg(t,e,n){const i=new Xs(t,e,n);return i.texture.mapping=pu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function tc(t,e,n,i,s){t.viewport.set(e,n,i,s),t.scissor.set(e,n,i,s)}function MI(t,e,n){const i=new Float32Array(_r),s=new H(0,1,0);return new Fr({name:"SphericalGaussianBlur",defines:{n:_r,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:If(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Us,depthTest:!1,depthWrite:!1})}function pg(){return new Fr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:If(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Us,depthTest:!1,depthWrite:!1})}function mg(){return new Fr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:If(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Us,depthTest:!1,depthWrite:!1})}function If(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function CI(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Th||l===Eh,u=l===Ao||l===Io;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new hg(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&s(d)){n===null&&(n=new hg(t));const h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",r),h.texture}else return null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function TI(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=t.getExtension(i)}return e[i]=s,s}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const s=n(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function EI(t,e,n,i){const s={},r=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete s[h.id];const p=r.get(h);p&&(e.remove(p),r.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(d,h){return s[h.id]===!0||(h.addEventListener("dispose",o),s[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const g in h)e.update(h[g],34962);const p=d.morphAttributes;for(const g in p){const m=p[g];for(let f=0,b=m.length;f<b;f++)e.update(m[f],34962)}}function c(d){const h=[],p=d.index,g=d.attributes.position;let m=0;if(p!==null){const x=p.array;m=p.version;for(let _=0,y=x.length;_<y;_+=3){const v=x[_+0],C=x[_+1],R=x[_+2];h.push(v,C,C,R,R,v)}}else{const x=g.array;m=g.version;for(let _=0,y=x.length/3-1;_<y;_+=3){const v=_+0,C=_+1,R=_+2;h.push(v,C,C,R,R,v)}}const f=new(gx(h)?Mx:Sx)(h,1);f.version=m;const b=r.get(d);b&&e.remove(b),r.set(d,f)}function u(d){const h=r.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return r.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function DI(t,e,n,i){const s=i.isWebGL2;let r;function o(h){r=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){t.drawElements(r,p,a,h*l),n.update(p,r,1)}function d(h,p,g){if(g===0)return;let m,f;if(s)m=t,f="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),f="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[f](r,p,a,h*l,g),n.update(p,r,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function PI(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(r/3);break;case 1:n.lines+=a*(r/2);break;case 3:n.lines+=a*(r-1);break;case 2:n.lines+=a*r;break;case 0:n.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function LI(t,e){return t[0]-e[0]}function RI(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Ed(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Uint8Array?n=255:i instanceof Uint16Array?n=65535:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function AI(t,e,n){const i={},s=new Float32Array(8),r=new WeakMap,o=new Bt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d,h){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=m!==void 0?m.length:0;let b=r.get(u);if(b===void 0||b.count!==f){let K=function(){$.dispose(),r.delete(u),u.removeEventListener("dispose",K)};var g=K;b!==void 0&&b.texture.dispose();const y=u.morphAttributes.position!==void 0,v=u.morphAttributes.normal!==void 0,C=u.morphAttributes.color!==void 0,R=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],D=u.morphAttributes.color||[];let N=0;y===!0&&(N=1),v===!0&&(N=2),C===!0&&(N=3);let V=u.attributes.position.count*N,j=1;V>e.maxTextureSize&&(j=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const se=new Float32Array(V*j*4*f),$=new vx(se,V,j,f);$.type=Cr,$.needsUpdate=!0;const q=N*4;for(let ne=0;ne<f;ne++){const te=R[ne],J=w[ne],de=D[ne],ve=V*j*4*ne;for(let me=0;me<te.count;me++){const ye=me*q;y===!0&&(o.fromBufferAttribute(te,me),te.normalized===!0&&Ed(o,te),se[ve+ye+0]=o.x,se[ve+ye+1]=o.y,se[ve+ye+2]=o.z,se[ve+ye+3]=0),v===!0&&(o.fromBufferAttribute(J,me),J.normalized===!0&&Ed(o,J),se[ve+ye+4]=o.x,se[ve+ye+5]=o.y,se[ve+ye+6]=o.z,se[ve+ye+7]=0),C===!0&&(o.fromBufferAttribute(de,me),de.normalized===!0&&Ed(o,de),se[ve+ye+8]=o.x,se[ve+ye+9]=o.y,se[ve+ye+10]=o.z,se[ve+ye+11]=de.itemSize===4?o.w:1)}}b={count:f,texture:$,size:new et(V,j)},r.set(u,b),u.addEventListener("dispose",K)}let x=0;for(let y=0;y<p.length;y++)x+=p[y];const _=u.morphTargetsRelative?1:1-x;h.getUniforms().setValue(t,"morphTargetBaseInfluence",_),h.getUniforms().setValue(t,"morphTargetInfluences",p),h.getUniforms().setValue(t,"morphTargetsTexture",b.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",b.size)}else{const m=p===void 0?0:p.length;let f=i[u.id];if(f===void 0||f.length!==m){f=[];for(let v=0;v<m;v++)f[v]=[v,0];i[u.id]=f}for(let v=0;v<m;v++){const C=f[v];C[0]=v,C[1]=p[v]}f.sort(RI);for(let v=0;v<8;v++)v<m&&f[v][1]?(a[v][0]=f[v][0],a[v][1]=f[v][1]):(a[v][0]=Number.MAX_SAFE_INTEGER,a[v][1]=0);a.sort(LI);const b=u.morphAttributes.position,x=u.morphAttributes.normal;let _=0;for(let v=0;v<8;v++){const C=a[v],R=C[0],w=C[1];R!==Number.MAX_SAFE_INTEGER&&w?(b&&u.getAttribute("morphTarget"+v)!==b[R]&&u.setAttribute("morphTarget"+v,b[R]),x&&u.getAttribute("morphNormal"+v)!==x[R]&&u.setAttribute("morphNormal"+v,x[R]),s[v]=w,_+=w):(b&&u.hasAttribute("morphTarget"+v)===!0&&u.deleteAttribute("morphTarget"+v),x&&u.hasAttribute("morphNormal"+v)===!0&&u.deleteAttribute("morphNormal"+v),s[v]=0)}const y=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(t,"morphTargetBaseInfluence",y),h.getUniforms().setValue(t,"morphTargetInfluences",s)}}return{update:l}}function II(t,e,n,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);return s.get(d)!==c&&(e.update(d),s.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),d}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:r,dispose:o}}const Dx=new pi,Px=new vx,Lx=new wL,Rx=new Tx,gg=[],bg=[],yg=new Float32Array(16),xg=new Float32Array(9),vg=new Float32Array(4);function Xo(t,e,n){const i=t[0];if(i<=0||i>0)return t;const s=e*n;let r=gg[s];if(r===void 0&&(r=new Float32Array(s),gg[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(r,a)}return r}function Nn(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Bn(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function yu(t,e){let n=bg[e];n===void 0&&(n=new Int32Array(e),bg[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function kI(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function OI(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nn(n,e))return;t.uniform2fv(this.addr,e),Bn(n,e)}}function FI(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Nn(n,e))return;t.uniform3fv(this.addr,e),Bn(n,e)}}function NI(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nn(n,e))return;t.uniform4fv(this.addr,e),Bn(n,e)}}function BI(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nn(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Bn(n,e)}else{if(Nn(n,i))return;vg.set(i),t.uniformMatrix2fv(this.addr,!1,vg),Bn(n,i)}}function zI(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nn(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Bn(n,e)}else{if(Nn(n,i))return;xg.set(i),t.uniformMatrix3fv(this.addr,!1,xg),Bn(n,i)}}function VI(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Nn(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Bn(n,e)}else{if(Nn(n,i))return;yg.set(i),t.uniformMatrix4fv(this.addr,!1,yg),Bn(n,i)}}function UI(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function HI(t,e){const n=this.cache;Nn(n,e)||(t.uniform2iv(this.addr,e),Bn(n,e))}function WI(t,e){const n=this.cache;Nn(n,e)||(t.uniform3iv(this.addr,e),Bn(n,e))}function GI(t,e){const n=this.cache;Nn(n,e)||(t.uniform4iv(this.addr,e),Bn(n,e))}function jI(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function $I(t,e){const n=this.cache;Nn(n,e)||(t.uniform2uiv(this.addr,e),Bn(n,e))}function KI(t,e){const n=this.cache;Nn(n,e)||(t.uniform3uiv(this.addr,e),Bn(n,e))}function XI(t,e){const n=this.cache;Nn(n,e)||(t.uniform4uiv(this.addr,e),Bn(n,e))}function YI(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture2D(e||Dx,s)}function qI(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||Lx,s)}function ZI(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTextureCube(e||Rx,s)}function JI(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||Px,s)}function QI(t){switch(t){case 5126:return kI;case 35664:return OI;case 35665:return FI;case 35666:return NI;case 35674:return BI;case 35675:return zI;case 35676:return VI;case 5124:case 35670:return UI;case 35667:case 35671:return HI;case 35668:case 35672:return WI;case 35669:case 35673:return GI;case 5125:return jI;case 36294:return $I;case 36295:return KI;case 36296:return XI;case 35678:case 36198:case 36298:case 36306:case 35682:return YI;case 35679:case 36299:case 36307:return qI;case 35680:case 36300:case 36308:case 36293:return ZI;case 36289:case 36303:case 36311:case 36292:return JI}}function e2(t,e){t.uniform1fv(this.addr,e)}function t2(t,e){const n=Xo(e,this.size,2);t.uniform2fv(this.addr,n)}function n2(t,e){const n=Xo(e,this.size,3);t.uniform3fv(this.addr,n)}function i2(t,e){const n=Xo(e,this.size,4);t.uniform4fv(this.addr,n)}function s2(t,e){const n=Xo(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function r2(t,e){const n=Xo(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function o2(t,e){const n=Xo(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function a2(t,e){t.uniform1iv(this.addr,e)}function l2(t,e){t.uniform2iv(this.addr,e)}function c2(t,e){t.uniform3iv(this.addr,e)}function u2(t,e){t.uniform4iv(this.addr,e)}function d2(t,e){t.uniform1uiv(this.addr,e)}function h2(t,e){t.uniform2uiv(this.addr,e)}function f2(t,e){t.uniform3uiv(this.addr,e)}function p2(t,e){t.uniform4uiv(this.addr,e)}function m2(t,e,n){const i=e.length,s=yu(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.setTexture2D(e[r]||Dx,s[r])}function g2(t,e,n){const i=e.length,s=yu(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.setTexture3D(e[r]||Lx,s[r])}function b2(t,e,n){const i=e.length,s=yu(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.setTextureCube(e[r]||Rx,s[r])}function y2(t,e,n){const i=e.length,s=yu(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.setTexture2DArray(e[r]||Px,s[r])}function x2(t){switch(t){case 5126:return e2;case 35664:return t2;case 35665:return n2;case 35666:return i2;case 35674:return s2;case 35675:return r2;case 35676:return o2;case 5124:case 35670:return a2;case 35667:case 35671:return l2;case 35668:case 35672:return c2;case 35669:case 35673:return u2;case 5125:return d2;case 36294:return h2;case 36295:return f2;case 36296:return p2;case 35678:case 36198:case 36298:case 36306:case 35682:return m2;case 35679:case 36299:case 36307:return g2;case 35680:case 36300:case 36308:case 36293:return b2;case 36289:case 36303:case 36311:case 36292:return y2}}class v2{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.setValue=QI(n.type)}}class _2{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.size=n.size,this.setValue=x2(n.type)}}class w2{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,n[a.id],i)}}}const Dd=/(\w+)(\])?(\[|\.)?/g;function _g(t,e){t.seq.push(e),t.map[e.id]=e}function S2(t,e,n){const i=t.name,s=i.length;for(Dd.lastIndex=0;;){const r=Dd.exec(i),o=Dd.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){_g(n,c===void 0?new v2(a,t,e):new _2(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new w2(a),_g(n,d)),n=d}}}class Sc{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,35718);for(let s=0;s<i;++s){const r=e.getActiveUniform(n,s),o=e.getUniformLocation(n,r.name);S2(r,o,this)}}setValue(e,n,i,s){const r=this.map[n];r!==void 0&&r.setValue(e,i,s)}setOptional(e,n,i){const s=n[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,n,i,s){for(let r=0,o=n.length;r!==o;++r){const a=n[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,n){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in n&&i.push(o)}return i}}function wg(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let M2=0;function C2(t,e){const n=t.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,n.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}function T2(t){switch(t){case kr:return["Linear","( value )"];case Ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Sg(t,e,n){const i=t.getShaderParameter(e,35713),s=t.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return n.toUpperCase()+`

`+s+`

`+C2(t.getShaderSource(e),o)}else return s}function E2(t,e){const n=T2(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function D2(t,e){let n;switch(e){case IP:n="Linear";break;case kP:n="Reinhard";break;case OP:n="OptimizedCineon";break;case FP:n="ACESFilmic";break;case NP:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function P2(t){return[t.extensionDerivatives||!!t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(va).join(`
`)}function L2(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function R2(t,e){const n={},i=t.getProgramParameter(e,35721);for(let s=0;s<i;s++){const r=t.getActiveAttrib(e,s),o=r.name;let a=1;r.type===35674&&(a=2),r.type===35675&&(a=3),r.type===35676&&(a=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function va(t){return t!==""}function Mg(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Cg(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const A2=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ah(t){return t.replace(A2,I2)}function I2(t,e){const n=pt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Ah(n)}const k2=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,O2=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tg(t){return t.replace(O2,Ax).replace(k2,F2)}function F2(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ax(t,e,n,i)}function Ax(t,e,n,i){let s="";for(let r=parseInt(e);r<parseInt(n);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function Eg(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function N2(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===dx?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===uP?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===xa&&(e="SHADOWMAP_TYPE_VSM"),e}function B2(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Ao:case Io:e="ENVMAP_TYPE_CUBE";break;case pu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function z2(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Io:e="ENVMAP_MODE_REFRACTION";break}return e}function V2(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Pf:e="ENVMAP_BLENDING_MULTIPLY";break;case RP:e="ENVMAP_BLENDING_MIX";break;case AP:e="ENVMAP_BLENDING_ADD";break}return e}function U2(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function H2(t,e,n,i){const s=t.getContext(),r=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=N2(n),c=B2(n),u=z2(n),d=V2(n),h=U2(n),p=n.isWebGL2?"":P2(n),g=L2(r),m=s.createProgram();let f,b,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(f=[g].filter(va).join(`
`),f.length>0&&(f+=`
`),b=[p,g].filter(va).join(`
`),b.length>0&&(b+=`
`)):(f=[Eg(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(va).join(`
`),b=[p,Eg(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==hs?"#define TONE_MAPPING":"",n.toneMapping!==hs?pt.tonemapping_pars_fragment:"",n.toneMapping!==hs?D2("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",pt.encodings_pars_fragment,E2("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(va).join(`
`)),o=Ah(o),o=Mg(o,n),o=Cg(o,n),a=Ah(a),a=Mg(a,n),a=Cg(a,n),o=Tg(o),a=Tg(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,f=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+f,b=["#define varying in",n.glslVersion===qm?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===qm?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const _=x+f+o,y=x+b+a,v=wg(s,35633,_),C=wg(s,35632,y);if(s.attachShader(m,v),s.attachShader(m,C),n.index0AttributeName!==void 0?s.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),t.debug.checkShaderErrors){const D=s.getProgramInfoLog(m).trim(),N=s.getShaderInfoLog(v).trim(),V=s.getShaderInfoLog(C).trim();let j=!0,se=!0;if(s.getProgramParameter(m,35714)===!1){j=!1;const $=Sg(s,v,"vertex"),q=Sg(s,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(m,35715)+`

Program Info Log: `+D+`
`+$+`
`+q)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(N===""||V==="")&&(se=!1);se&&(this.diagnostics={runnable:j,programLog:D,vertexShader:{log:N,prefix:f},fragmentShader:{log:V,prefix:b}})}s.deleteShader(v),s.deleteShader(C);let R;this.getUniforms=function(){return R===void 0&&(R=new Sc(s,m)),R};let w;return this.getAttributes=function(){return w===void 0&&(w=R2(s,m)),w},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=M2++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=v,this.fragmentShader=C,this}let W2=0;class G2{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(n),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;return n.has(e)===!1&&n.set(e,new Set),n.get(e)}_getShaderStage(e){const n=this.shaderCache;if(n.has(e)===!1){const i=new j2(e);n.set(e,i)}return n.get(e)}}class j2{constructor(e){this.id=W2++,this.code=e,this.usedTimes=0}}function $2(t,e,n,i,s,r,o){const a=new wx,l=new G2,c=[],u=s.isWebGL2,d=s.logarithmicDepthBuffer,h=s.vertexTextures;let p=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(w,D,N,V,j){const se=V.fog,$=j.geometry,q=w.isMeshStandardMaterial?V.environment:null,K=(w.isMeshStandardMaterial?n:e).get(w.envMap||q),ne=!!K&&K.mapping===pu?K.image.height:null,te=g[w.type];w.precision!==null&&(p=s.getMaxPrecision(w.precision),p!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",p,"instead."));const J=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,de=J!==void 0?J.length:0;let ve=0;$.morphAttributes.position!==void 0&&(ve=1),$.morphAttributes.normal!==void 0&&(ve=2),$.morphAttributes.color!==void 0&&(ve=3);let me,ye,ke,Ue;if(te){const O=Bi[te];me=O.vertexShader,ye=O.fragmentShader}else me=w.vertexShader,ye=w.fragmentShader,l.update(w),ke=l.getVertexShaderID(w),Ue=l.getFragmentShaderID(w);const le=t.getRenderTarget(),Ye=w.alphaTest>0,$e=w.clearcoat>0,Ne=w.iridescence>0;return{isWebGL2:u,shaderID:te,shaderName:w.type,vertexShader:me,fragmentShader:ye,defines:w.defines,customVertexShaderID:ke,customFragmentShaderID:Ue,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:p,instancing:j.isInstancedMesh===!0,instancingColor:j.isInstancedMesh===!0&&j.instanceColor!==null,supportsVertexTextures:h,outputEncoding:le===null?t.outputEncoding:le.isXRRenderTarget===!0?le.texture.encoding:kr,map:!!w.map,matcap:!!w.matcap,envMap:!!K,envMapMode:K&&K.mapping,envMapCubeUVHeight:ne,lightMap:!!w.lightMap,aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:w.normalMapType===iL,tangentSpaceNormalMap:w.normalMapType===nL,decodeVideoTexture:!!w.map&&w.map.isVideoTexture===!0&&w.map.encoding===Ht,clearcoat:$e,clearcoatMap:$e&&!!w.clearcoatMap,clearcoatRoughnessMap:$e&&!!w.clearcoatRoughnessMap,clearcoatNormalMap:$e&&!!w.clearcoatNormalMap,iridescence:Ne,iridescenceMap:Ne&&!!w.iridescenceMap,iridescenceThicknessMap:Ne&&!!w.iridescenceThicknessMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,specularIntensityMap:!!w.specularIntensityMap,specularColorMap:!!w.specularColorMap,opaque:w.transparent===!1&&w.blending===So,alphaMap:!!w.alphaMap,alphaTest:Ye,gradientMap:!!w.gradientMap,sheen:w.sheen>0,sheenColorMap:!!w.sheenColorMap,sheenRoughnessMap:!!w.sheenRoughnessMap,transmission:w.transmission>0,transmissionMap:!!w.transmissionMap,thicknessMap:!!w.thicknessMap,combine:w.combine,vertexTangents:!!w.normalMap&&!!$.attributes.tangent,vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.iridescenceMap||!!w.iridescenceThicknessMap||!!w.displacementMap||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||!!w.sheenColorMap||!!w.sheenRoughnessMap,uvsVertexOnly:!(!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatNormalMap||!!w.iridescenceMap||!!w.iridescenceThicknessMap||w.transmission>0||!!w.transmissionMap||!!w.thicknessMap||!!w.specularIntensityMap||!!w.specularColorMap||w.sheen>0||!!w.sheenColorMap||!!w.sheenRoughnessMap)&&!!w.displacementMap,fog:!!se,useFog:w.fog===!0,fogExp2:se&&se.isFogExp2,flatShading:!!w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:de,morphTextureStride:ve,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:t.shadowMap.enabled&&N.length>0,shadowMapType:t.shadowMap.type,toneMapping:w.toneMapped?t.toneMapping:hs,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===Ro,flipSided:w.side===Di,useDepthPacking:!!w.depthPacking,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}}function f(w){const D=[];if(w.shaderID?D.push(w.shaderID):(D.push(w.customVertexShaderID),D.push(w.customFragmentShaderID)),w.defines!==void 0)for(const N in w.defines)D.push(N),D.push(w.defines[N]);return w.isRawShaderMaterial===!1&&(b(D,w),x(D,w),D.push(t.outputEncoding)),D.push(w.customProgramCacheKey),D.join()}function b(w,D){w.push(D.precision),w.push(D.outputEncoding),w.push(D.envMapMode),w.push(D.envMapCubeUVHeight),w.push(D.combine),w.push(D.vertexUvs),w.push(D.fogExp2),w.push(D.sizeAttenuation),w.push(D.morphTargetsCount),w.push(D.morphAttributeCount),w.push(D.numDirLights),w.push(D.numPointLights),w.push(D.numSpotLights),w.push(D.numHemiLights),w.push(D.numRectAreaLights),w.push(D.numDirLightShadows),w.push(D.numPointLightShadows),w.push(D.numSpotLightShadows),w.push(D.shadowMapType),w.push(D.toneMapping),w.push(D.numClippingPlanes),w.push(D.numClipIntersection),w.push(D.depthPacking)}function x(w,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.map&&a.enable(4),D.matcap&&a.enable(5),D.envMap&&a.enable(6),D.lightMap&&a.enable(7),D.aoMap&&a.enable(8),D.emissiveMap&&a.enable(9),D.bumpMap&&a.enable(10),D.normalMap&&a.enable(11),D.objectSpaceNormalMap&&a.enable(12),D.tangentSpaceNormalMap&&a.enable(13),D.clearcoat&&a.enable(14),D.clearcoatMap&&a.enable(15),D.clearcoatRoughnessMap&&a.enable(16),D.clearcoatNormalMap&&a.enable(17),D.iridescence&&a.enable(18),D.iridescenceMap&&a.enable(19),D.iridescenceThicknessMap&&a.enable(20),D.displacementMap&&a.enable(21),D.specularMap&&a.enable(22),D.roughnessMap&&a.enable(23),D.metalnessMap&&a.enable(24),D.gradientMap&&a.enable(25),D.alphaMap&&a.enable(26),D.alphaTest&&a.enable(27),D.vertexColors&&a.enable(28),D.vertexAlphas&&a.enable(29),D.vertexUvs&&a.enable(30),D.vertexTangents&&a.enable(31),D.uvsVertexOnly&&a.enable(32),D.fog&&a.enable(33),w.push(a.mask),a.disableAll(),D.useFog&&a.enable(0),D.flatShading&&a.enable(1),D.logarithmicDepthBuffer&&a.enable(2),D.skinning&&a.enable(3),D.morphTargets&&a.enable(4),D.morphNormals&&a.enable(5),D.morphColors&&a.enable(6),D.premultipliedAlpha&&a.enable(7),D.shadowMapEnabled&&a.enable(8),D.physicallyCorrectLights&&a.enable(9),D.doubleSided&&a.enable(10),D.flipSided&&a.enable(11),D.useDepthPacking&&a.enable(12),D.dithering&&a.enable(13),D.specularIntensityMap&&a.enable(14),D.specularColorMap&&a.enable(15),D.transmission&&a.enable(16),D.transmissionMap&&a.enable(17),D.thicknessMap&&a.enable(18),D.sheen&&a.enable(19),D.sheenColorMap&&a.enable(20),D.sheenRoughnessMap&&a.enable(21),D.decodeVideoTexture&&a.enable(22),D.opaque&&a.enable(23),w.push(a.mask)}function _(w){const D=g[w.type];let N;if(D){const V=Bi[D];N=IL.clone(V.uniforms)}else N=w.uniforms;return N}function y(w,D){let N;for(let V=0,j=c.length;V<j;V++){const se=c[V];if(se.cacheKey===D){N=se,++N.usedTimes;break}}return N===void 0&&(N=new H2(t,D,w,r),c.push(N)),N}function v(w){if(--w.usedTimes===0){const D=c.indexOf(w);c[D]=c[c.length-1],c.pop(),w.destroy()}}function C(w){l.remove(w)}function R(){l.dispose()}return{getParameters:m,getProgramCacheKey:f,getUniforms:_,acquireProgram:y,releaseProgram:v,releaseShaderCache:C,programs:c,dispose:R}}function K2(){let t=new WeakMap;function e(r){let o=t.get(r);return o===void 0&&(o={},t.set(r,o)),o}function n(r){t.delete(r)}function i(r,o,a){t.get(r)[o]=a}function s(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:s}}function X2(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Dg(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Pg(){const t=[];let e=0;const n=[],i=[],s=[];function r(){e=0,n.length=0,i.length=0,s.length=0}function o(d,h,p,g,m,f){let b=t[e];return b===void 0?(b={id:d.id,object:d,geometry:h,material:p,groupOrder:g,renderOrder:d.renderOrder,z:m,group:f},t[e]=b):(b.id=d.id,b.object=d,b.geometry=h,b.material=p,b.groupOrder=g,b.renderOrder=d.renderOrder,b.z=m,b.group=f),e++,b}function a(d,h,p,g,m,f){const b=o(d,h,p,g,m,f);p.transmission>0?i.push(b):p.transparent===!0?s.push(b):n.push(b)}function l(d,h,p,g,m,f){const b=o(d,h,p,g,m,f);p.transmission>0?i.unshift(b):p.transparent===!0?s.unshift(b):n.unshift(b)}function c(d,h){n.length>1&&n.sort(d||X2),i.length>1&&i.sort(h||Dg),s.length>1&&s.sort(h||Dg)}function u(){for(let d=e,h=t.length;d<h;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function Y2(){let t=new WeakMap;function e(i,s){let r;return t.has(i)===!1?(r=new Pg,t.set(i,[r])):s>=t.get(i).length?(r=new Pg,t.get(i).push(r)):r=t.get(i)[s],r}function n(){t=new WeakMap}return{get:e,dispose:n}}function q2(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new H,color:new Dt};break;case"SpotLight":n={position:new H,direction:new H,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new H,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new H,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":n={color:new Dt,position:new H,halfWidth:new H,halfHeight:new H};break}return t[e.id]=n,n}}}function Z2(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let J2=0;function Q2(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ek(t,e){const n=new q2,i=Z2(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)s.probe.push(new H);const r=new H,o=new Gt,a=new Gt;function l(u,d){let h=0,p=0,g=0;for(let D=0;D<9;D++)s.probe[D].set(0,0,0);let m=0,f=0,b=0,x=0,_=0,y=0,v=0,C=0;u.sort(Q2);const R=d!==!0?Math.PI:1;for(let D=0,N=u.length;D<N;D++){const V=u[D],j=V.color,se=V.intensity,$=V.distance,q=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)h+=j.r*se*R,p+=j.g*se*R,g+=j.b*se*R;else if(V.isLightProbe)for(let K=0;K<9;K++)s.probe[K].addScaledVector(V.sh.coefficients[K],se);else if(V.isDirectionalLight){const K=n.get(V);if(K.color.copy(V.color).multiplyScalar(V.intensity*R),V.castShadow){const ne=V.shadow,te=i.get(V);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,s.directionalShadow[m]=te,s.directionalShadowMap[m]=q,s.directionalShadowMatrix[m]=V.shadow.matrix,y++}s.directional[m]=K,m++}else if(V.isSpotLight){const K=n.get(V);if(K.position.setFromMatrixPosition(V.matrixWorld),K.color.copy(j).multiplyScalar(se*R),K.distance=$,K.coneCos=Math.cos(V.angle),K.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),K.decay=V.decay,V.castShadow){const ne=V.shadow,te=i.get(V);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,s.spotShadow[b]=te,s.spotShadowMap[b]=q,s.spotShadowMatrix[b]=V.shadow.matrix,C++}s.spot[b]=K,b++}else if(V.isRectAreaLight){const K=n.get(V);K.color.copy(j).multiplyScalar(se),K.halfWidth.set(V.width*.5,0,0),K.halfHeight.set(0,V.height*.5,0),s.rectArea[x]=K,x++}else if(V.isPointLight){const K=n.get(V);if(K.color.copy(V.color).multiplyScalar(V.intensity*R),K.distance=V.distance,K.decay=V.decay,V.castShadow){const ne=V.shadow,te=i.get(V);te.shadowBias=ne.bias,te.shadowNormalBias=ne.normalBias,te.shadowRadius=ne.radius,te.shadowMapSize=ne.mapSize,te.shadowCameraNear=ne.camera.near,te.shadowCameraFar=ne.camera.far,s.pointShadow[f]=te,s.pointShadowMap[f]=q,s.pointShadowMatrix[f]=V.shadow.matrix,v++}s.point[f]=K,f++}else if(V.isHemisphereLight){const K=n.get(V);K.skyColor.copy(V.color).multiplyScalar(se*R),K.groundColor.copy(V.groundColor).multiplyScalar(se*R),s.hemi[_]=K,_++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Oe.LTC_FLOAT_1,s.rectAreaLTC2=Oe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Oe.LTC_HALF_1,s.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=h,s.ambient[1]=p,s.ambient[2]=g;const w=s.hash;(w.directionalLength!==m||w.pointLength!==f||w.spotLength!==b||w.rectAreaLength!==x||w.hemiLength!==_||w.numDirectionalShadows!==y||w.numPointShadows!==v||w.numSpotShadows!==C)&&(s.directional.length=m,s.spot.length=b,s.rectArea.length=x,s.point.length=f,s.hemi.length=_,s.directionalShadow.length=y,s.directionalShadowMap.length=y,s.pointShadow.length=v,s.pointShadowMap.length=v,s.spotShadow.length=C,s.spotShadowMap.length=C,s.directionalShadowMatrix.length=y,s.pointShadowMatrix.length=v,s.spotShadowMatrix.length=C,w.directionalLength=m,w.pointLength=f,w.spotLength=b,w.rectAreaLength=x,w.hemiLength=_,w.numDirectionalShadows=y,w.numPointShadows=v,w.numSpotShadows=C,s.version=J2++)}function c(u,d){let h=0,p=0,g=0,m=0,f=0;const b=d.matrixWorldInverse;for(let x=0,_=u.length;x<_;x++){const y=u[x];if(y.isDirectionalLight){const v=s.directional[h];v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(b),h++}else if(y.isSpotLight){const v=s.spot[g];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(b),v.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(b),g++}else if(y.isRectAreaLight){const v=s.rectArea[m];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(b),a.identity(),o.copy(y.matrixWorld),o.premultiply(b),a.extractRotation(o),v.halfWidth.set(y.width*.5,0,0),v.halfHeight.set(0,y.height*.5,0),v.halfWidth.applyMatrix4(a),v.halfHeight.applyMatrix4(a),m++}else if(y.isPointLight){const v=s.point[p];v.position.setFromMatrixPosition(y.matrixWorld),v.position.applyMatrix4(b),p++}else if(y.isHemisphereLight){const v=s.hemi[f];v.direction.setFromMatrixPosition(y.matrixWorld),v.direction.transformDirection(b),f++}}}return{setup:l,setupView:c,state:s}}function Lg(t,e){const n=new ek(t,e),i=[],s=[];function r(){i.length=0,s.length=0}function o(d){i.push(d)}function a(d){s.push(d)}function l(d){n.setup(i,d)}function c(d){n.setupView(i,d)}return{init:r,state:{lightsArray:i,shadowsArray:s,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function tk(t,e){let n=new WeakMap;function i(r,o=0){let a;return n.has(r)===!1?(a=new Lg(t,e),n.set(r,[a])):o>=n.get(r).length?(a=new Lg(t,e),n.get(r).push(a)):a=n.get(r)[o],a}function s(){n=new WeakMap}return{get:i,dispose:s}}class nk extends Ko{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=eL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ik extends Ko{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new H,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sk=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rk=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ok(t,e,n){let i=new Rf;const s=new et,r=new et,o=new Bt,a=new nk({depthPacking:tL}),l=new ik,c={},u=n.maxTextureSize,d={0:Di,1:Za,2:Ro},h=new Fr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:sk,fragmentShader:rk}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Pi;g.setAttribute("position",new Hi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ui(g,h),f=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=dx,this.render=function(y,v,C){if(f.enabled===!1||f.autoUpdate===!1&&f.needsUpdate===!1||y.length===0)return;const R=t.getRenderTarget(),w=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),N=t.state;N.setBlending(Us),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let V=0,j=y.length;V<j;V++){const se=y[V],$=se.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const q=$.getFrameExtents();if(s.multiply(q),r.copy($.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/q.x),s.x=r.x*q.x,$.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/q.y),s.y=r.y*q.y,$.mapSize.y=r.y)),$.map===null){const ne=this.type!==xa?{minFilter:Un,magFilter:Un}:{};$.map=new Xs(s.x,s.y,ne),$.map.texture.name=se.name+".shadowMap",$.camera.updateProjectionMatrix()}t.setRenderTarget($.map),t.clear();const K=$.getViewportCount();for(let ne=0;ne<K;ne++){const te=$.getViewport(ne);o.set(r.x*te.x,r.y*te.y,r.x*te.z,r.y*te.w),N.viewport(o),$.updateMatrices(se,ne),i=$.getFrustum(),_(v,C,$.camera,se,this.type)}$.isPointLightShadow!==!0&&this.type===xa&&b($,C),$.needsUpdate=!1}f.needsUpdate=!1,t.setRenderTarget(R,w,D)};function b(y,v){const C=e.update(m);h.defines.VSM_SAMPLES!==y.blurSamples&&(h.defines.VSM_SAMPLES=y.blurSamples,p.defines.VSM_SAMPLES=y.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),y.mapPass===null&&(y.mapPass=new Xs(s.x,s.y)),h.uniforms.shadow_pass.value=y.map.texture,h.uniforms.resolution.value=y.mapSize,h.uniforms.radius.value=y.radius,t.setRenderTarget(y.mapPass),t.clear(),t.renderBufferDirect(v,null,C,h,m,null),p.uniforms.shadow_pass.value=y.mapPass.texture,p.uniforms.resolution.value=y.mapSize,p.uniforms.radius.value=y.radius,t.setRenderTarget(y.map),t.clear(),t.renderBufferDirect(v,null,C,p,m,null)}function x(y,v,C,R,w,D){let N=null;const V=C.isPointLight===!0?y.customDistanceMaterial:y.customDepthMaterial;if(V!==void 0?N=V:N=C.isPointLight===!0?l:a,t.localClippingEnabled&&v.clipShadows===!0&&Array.isArray(v.clippingPlanes)&&v.clippingPlanes.length!==0||v.displacementMap&&v.displacementScale!==0||v.alphaMap&&v.alphaTest>0){const j=N.uuid,se=v.uuid;let $=c[j];$===void 0&&($={},c[j]=$);let q=$[se];q===void 0&&(q=N.clone(),$[se]=q),N=q}return N.visible=v.visible,N.wireframe=v.wireframe,D===xa?N.side=v.shadowSide!==null?v.shadowSide:v.side:N.side=v.shadowSide!==null?v.shadowSide:d[v.side],N.alphaMap=v.alphaMap,N.alphaTest=v.alphaTest,N.clipShadows=v.clipShadows,N.clippingPlanes=v.clippingPlanes,N.clipIntersection=v.clipIntersection,N.displacementMap=v.displacementMap,N.displacementScale=v.displacementScale,N.displacementBias=v.displacementBias,N.wireframeLinewidth=v.wireframeLinewidth,N.linewidth=v.linewidth,C.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(C.matrixWorld),N.nearDistance=R,N.farDistance=w),N}function _(y,v,C,R,w){if(y.visible===!1)return;if(y.layers.test(v.layers)&&(y.isMesh||y.isLine||y.isPoints)&&(y.castShadow||y.receiveShadow&&w===xa)&&(!y.frustumCulled||i.intersectsObject(y))){y.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,y.matrixWorld);const V=e.update(y),j=y.material;if(Array.isArray(j)){const se=V.groups;for(let $=0,q=se.length;$<q;$++){const K=se[$],ne=j[K.materialIndex];if(ne&&ne.visible){const te=x(y,ne,R,C.near,C.far,w);t.renderBufferDirect(C,null,V,te,y,K)}}}else if(j.visible){const se=x(y,j,R,C.near,C.far,w);t.renderBufferDirect(C,null,V,se,y,null)}}const N=y.children;for(let V=0,j=N.length;V<j;V++)_(N[V],v,C,R,w)}}function ak(t,e,n){const i=n.isWebGL2;function s(){let B=!1;const De=new Bt;let Pe=null;const He=new Bt(0,0,0,0);return{setMask:function(Le){Pe!==Le&&!B&&(t.colorMask(Le,Le,Le,Le),Pe=Le)},setLocked:function(Le){B=Le},setClear:function(Le,Ge,Re,Je,St){St===!0&&(Le*=Je,Ge*=Je,Re*=Je),De.set(Le,Ge,Re,Je),He.equals(De)===!1&&(t.clearColor(Le,Ge,Re,Je),He.copy(De))},reset:function(){B=!1,Pe=null,He.set(-1,0,0,0)}}}function r(){let B=!1,De=null,Pe=null,He=null;return{setTest:function(Le){Le?Ue(2929):le(2929)},setMask:function(Le){De!==Le&&!B&&(t.depthMask(Le),De=Le)},setFunc:function(Le){if(Pe!==Le){if(Le)switch(Le){case MP:t.depthFunc(512);break;case CP:t.depthFunc(519);break;case TP:t.depthFunc(513);break;case Ch:t.depthFunc(515);break;case EP:t.depthFunc(514);break;case DP:t.depthFunc(518);break;case PP:t.depthFunc(516);break;case LP:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Pe=Le}},setLocked:function(Le){B=Le},setClear:function(Le){He!==Le&&(t.clearDepth(Le),He=Le)},reset:function(){B=!1,De=null,Pe=null,He=null}}}function o(){let B=!1,De=null,Pe=null,He=null,Le=null,Ge=null,Re=null,Je=null,St=null;return{setTest:function(Mt){B||(Mt?Ue(2960):le(2960))},setMask:function(Mt){De!==Mt&&!B&&(t.stencilMask(Mt),De=Mt)},setFunc:function(Mt,en,ei){(Pe!==Mt||He!==en||Le!==ei)&&(t.stencilFunc(Mt,en,ei),Pe=Mt,He=en,Le=ei)},setOp:function(Mt,en,ei){(Ge!==Mt||Re!==en||Je!==ei)&&(t.stencilOp(Mt,en,ei),Ge=Mt,Re=en,Je=ei)},setLocked:function(Mt){B=Mt},setClear:function(Mt){St!==Mt&&(t.clearStencil(Mt),St=Mt)},reset:function(){B=!1,De=null,Pe=null,He=null,Le=null,Ge=null,Re=null,Je=null,St=null}}}const a=new s,l=new r,c=new o;let u={},d={},h=new WeakMap,p=[],g=null,m=!1,f=null,b=null,x=null,_=null,y=null,v=null,C=null,R=!1,w=null,D=null,N=null,V=null,j=null;const se=t.getParameter(35661);let $=!1,q=0;const K=t.getParameter(7938);K.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(K)[1]),$=q>=1):K.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),$=q>=2);let ne=null,te={};const J=t.getParameter(3088),de=t.getParameter(2978),ve=new Bt().fromArray(J),me=new Bt().fromArray(de);function ye(B,De,Pe){const He=new Uint8Array(4),Le=t.createTexture();t.bindTexture(B,Le),t.texParameteri(B,10241,9728),t.texParameteri(B,10240,9728);for(let Ge=0;Ge<Pe;Ge++)t.texImage2D(De+Ge,0,6408,1,1,0,6408,5121,He);return Le}const ke={};ke[3553]=ye(3553,3553,1),ke[34067]=ye(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ue(2929),l.setFunc(Ch),A(!1),G(vm),Ue(2884),z(Us);function Ue(B){u[B]!==!0&&(t.enable(B),u[B]=!0)}function le(B){u[B]!==!1&&(t.disable(B),u[B]=!1)}function Ye(B,De){return d[B]!==De?(t.bindFramebuffer(B,De),d[B]=De,i&&(B===36009&&(d[36160]=De),B===36160&&(d[36009]=De)),!0):!1}function $e(B,De){let Pe=p,He=!1;if(B)if(Pe=h.get(De),Pe===void 0&&(Pe=[],h.set(De,Pe)),B.isWebGLMultipleRenderTargets){const Le=B.texture;if(Pe.length!==Le.length||Pe[0]!==36064){for(let Ge=0,Re=Le.length;Ge<Re;Ge++)Pe[Ge]=36064+Ge;Pe.length=Le.length,He=!0}}else Pe[0]!==36064&&(Pe[0]=36064,He=!0);else Pe[0]!==1029&&(Pe[0]=1029,He=!0);He&&(n.isWebGL2?t.drawBuffers(Pe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Pe))}function Ne(B){return g!==B?(t.useProgram(B),g=B,!0):!1}const Te={[go]:32774,[fP]:32778,[pP]:32779};if(i)Te[Mm]=32775,Te[Cm]=32776;else{const B=e.get("EXT_blend_minmax");B!==null&&(Te[Mm]=B.MIN_EXT,Te[Cm]=B.MAX_EXT)}const O={[mP]:0,[gP]:1,[bP]:768,[hx]:770,[SP]:776,[_P]:774,[xP]:772,[yP]:769,[fx]:771,[wP]:775,[vP]:773};function z(B,De,Pe,He,Le,Ge,Re,Je){if(B===Us){m===!0&&(le(3042),m=!1);return}if(m===!1&&(Ue(3042),m=!0),B!==hP){if(B!==f||Je!==R){if((b!==go||y!==go)&&(t.blendEquation(32774),b=go,y=go),Je)switch(B){case So:t.blendFuncSeparate(1,771,1,771);break;case _m:t.blendFunc(1,1);break;case wm:t.blendFuncSeparate(0,769,0,1);break;case Sm:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}else switch(B){case So:t.blendFuncSeparate(770,771,1,771);break;case _m:t.blendFunc(770,1);break;case wm:t.blendFuncSeparate(0,769,0,1);break;case Sm:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}x=null,_=null,v=null,C=null,f=B,R=Je}return}Le=Le||De,Ge=Ge||Pe,Re=Re||He,(De!==b||Le!==y)&&(t.blendEquationSeparate(Te[De],Te[Le]),b=De,y=Le),(Pe!==x||He!==_||Ge!==v||Re!==C)&&(t.blendFuncSeparate(O[Pe],O[He],O[Ge],O[Re]),x=Pe,_=He,v=Ge,C=Re),f=B,R=null}function M(B,De){B.side===Ro?le(2884):Ue(2884);let Pe=B.side===Di;De&&(Pe=!Pe),A(Pe),B.blending===So&&B.transparent===!1?z(Us):z(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.premultipliedAlpha),l.setFunc(B.depthFunc),l.setTest(B.depthTest),l.setMask(B.depthWrite),a.setMask(B.colorWrite);const He=B.stencilWrite;c.setTest(He),He&&(c.setMask(B.stencilWriteMask),c.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),c.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),re(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),B.alphaToCoverage===!0?Ue(32926):le(32926)}function A(B){w!==B&&(B?t.frontFace(2304):t.frontFace(2305),w=B)}function G(B){B!==lP?(Ue(2884),B!==D&&(B===vm?t.cullFace(1029):B===cP?t.cullFace(1028):t.cullFace(1032))):le(2884),D=B}function Y(B){B!==N&&($&&t.lineWidth(B),N=B)}function re(B,De,Pe){B?(Ue(32823),(V!==De||j!==Pe)&&(t.polygonOffset(De,Pe),V=De,j=Pe)):le(32823)}function fe(B){B?Ue(3089):le(3089)}function xe(B){B===void 0&&(B=33984+se-1),ne!==B&&(t.activeTexture(B),ne=B)}function _e(B,De){ne===null&&xe();let Pe=te[ne];Pe===void 0&&(Pe={type:void 0,texture:void 0},te[ne]=Pe),(Pe.type!==B||Pe.texture!==De)&&(t.bindTexture(B,De||ke[B]),Pe.type=B,Pe.texture=De)}function U(){const B=te[ne];B!==void 0&&B.type!==void 0&&(t.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)}function S(){try{t.compressedTexImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function T(){try{t.texSubImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function W(){try{t.texSubImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Q(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ae(){try{t.texStorage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function pe(){try{t.texStorage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Ae(){try{t.texImage2D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function L(){try{t.texImage3D.apply(t,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ce(B){ve.equals(B)===!1&&(t.scissor(B.x,B.y,B.z,B.w),ve.copy(B))}function Me(B){me.equals(B)===!1&&(t.viewport(B.x,B.y,B.z,B.w),me.copy(B))}function Ee(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),i===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},ne=null,te={},d={},h=new WeakMap,p=[],g=null,m=!1,f=null,b=null,x=null,_=null,y=null,v=null,C=null,R=!1,w=null,D=null,N=null,V=null,j=null,ve.set(0,0,t.canvas.width,t.canvas.height),me.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Ue,disable:le,bindFramebuffer:Ye,drawBuffers:$e,useProgram:Ne,setBlending:z,setMaterial:M,setFlipSided:A,setCullFace:G,setLineWidth:Y,setPolygonOffset:re,setScissorTest:fe,activeTexture:xe,bindTexture:_e,unbindTexture:U,compressedTexImage2D:S,texImage2D:Ae,texImage3D:L,texStorage2D:ae,texStorage3D:pe,texSubImage2D:T,texSubImage3D:W,compressedTexSubImage2D:Q,scissor:ce,viewport:Me,reset:Ee}}function lk(t,e,n,i,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,u=s.maxTextureSize,d=s.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let m;const f=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(S,T){return b?new OffscreenCanvas(S,T):Qa("canvas")}function _(S,T,W,Q){let ae=1;if((S.width>Q||S.height>Q)&&(ae=Q/Math.max(S.width,S.height)),ae<1||T===!0)if(typeof HTMLImageElement!="undefined"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&S instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&S instanceof ImageBitmap){const pe=T?Nc:Math.floor,Ae=pe(ae*S.width),L=pe(ae*S.height);m===void 0&&(m=x(Ae,L));const ce=W?x(Ae,L):m;return ce.width=Ae,ce.height=L,ce.getContext("2d").drawImage(S,0,0,Ae,L),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+S.width+"x"+S.height+") to ("+Ae+"x"+L+")."),ce}else return"data"in S&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+S.width+"x"+S.height+")."),S;return S}function y(S){return Rh(S.width)&&Rh(S.height)}function v(S){return a?!1:S.wrapS!==Mi||S.wrapT!==Mi||S.minFilter!==Un&&S.minFilter!==li}function C(S,T){return S.generateMipmaps&&T&&S.minFilter!==Un&&S.minFilter!==li}function R(S){t.generateMipmap(S)}function w(S,T,W,Q,ae=!1){if(a===!1)return T;if(S!==null){if(t[S]!==void 0)return t[S];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+S+"'")}let pe=T;return T===6403&&(W===5126&&(pe=33326),W===5131&&(pe=33325),W===5121&&(pe=33321)),T===33319&&(W===5126&&(pe=33328),W===5131&&(pe=33327),W===5121&&(pe=33323)),T===6408&&(W===5126&&(pe=34836),W===5131&&(pe=34842),W===5121&&(pe=Q===Ht&&ae===!1?35907:32856),W===32819&&(pe=32854),W===32820&&(pe=32855)),(pe===33325||pe===33326||pe===33327||pe===33328||pe===34842||pe===34836)&&e.get("EXT_color_buffer_float"),pe}function D(S,T,W){return C(S,W)===!0||S.isFramebufferTexture&&S.minFilter!==Un&&S.minFilter!==li?Math.log2(Math.max(T.width,T.height))+1:S.mipmaps!==void 0&&S.mipmaps.length>0?S.mipmaps.length:S.isCompressedTexture&&Array.isArray(S.image)?T.mipmaps.length:1}function N(S){return S===Un||S===Tm||S===Em?9728:9729}function V(S){const T=S.target;T.removeEventListener("dispose",V),se(T),T.isVideoTexture&&g.delete(T)}function j(S){const T=S.target;T.removeEventListener("dispose",j),q(T)}function se(S){const T=i.get(S);if(T.__webglInit===void 0)return;const W=S.source,Q=f.get(W);if(Q){const ae=Q[T.__cacheKey];ae.usedTimes--,ae.usedTimes===0&&$(S),Object.keys(Q).length===0&&f.delete(W)}i.remove(S)}function $(S){const T=i.get(S);t.deleteTexture(T.__webglTexture);const W=S.source,Q=f.get(W);delete Q[T.__cacheKey],o.memory.textures--}function q(S){const T=S.texture,W=i.get(S),Q=i.get(T);if(Q.__webglTexture!==void 0&&(t.deleteTexture(Q.__webglTexture),o.memory.textures--),S.depthTexture&&S.depthTexture.dispose(),S.isWebGLCubeRenderTarget)for(let ae=0;ae<6;ae++)t.deleteFramebuffer(W.__webglFramebuffer[ae]),W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer[ae]);else{if(t.deleteFramebuffer(W.__webglFramebuffer),W.__webglDepthbuffer&&t.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&t.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let ae=0;ae<W.__webglColorRenderbuffer.length;ae++)W.__webglColorRenderbuffer[ae]&&t.deleteRenderbuffer(W.__webglColorRenderbuffer[ae]);W.__webglDepthRenderbuffer&&t.deleteRenderbuffer(W.__webglDepthRenderbuffer)}if(S.isWebGLMultipleRenderTargets)for(let ae=0,pe=T.length;ae<pe;ae++){const Ae=i.get(T[ae]);Ae.__webglTexture&&(t.deleteTexture(Ae.__webglTexture),o.memory.textures--),i.remove(T[ae])}i.remove(T),i.remove(S)}let K=0;function ne(){K=0}function te(){const S=K;return S>=l&&console.warn("THREE.WebGLTextures: Trying to use "+S+" texture units while this GPU supports only "+l),K+=1,S}function J(S){const T=[];return T.push(S.wrapS),T.push(S.wrapT),T.push(S.magFilter),T.push(S.minFilter),T.push(S.anisotropy),T.push(S.internalFormat),T.push(S.format),T.push(S.type),T.push(S.generateMipmaps),T.push(S.premultiplyAlpha),T.push(S.flipY),T.push(S.unpackAlignment),T.push(S.encoding),T.join()}function de(S,T){const W=i.get(S);if(S.isVideoTexture&&_e(S),S.isRenderTargetTexture===!1&&S.version>0&&W.__version!==S.version){const Q=S.image;if(Q===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Q.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$e(W,S,T);return}}n.activeTexture(33984+T),n.bindTexture(3553,W.__webglTexture)}function ve(S,T){const W=i.get(S);if(S.version>0&&W.__version!==S.version){$e(W,S,T);return}n.activeTexture(33984+T),n.bindTexture(35866,W.__webglTexture)}function me(S,T){const W=i.get(S);if(S.version>0&&W.__version!==S.version){$e(W,S,T);return}n.activeTexture(33984+T),n.bindTexture(32879,W.__webglTexture)}function ye(S,T){const W=i.get(S);if(S.version>0&&W.__version!==S.version){Ne(W,S,T);return}n.activeTexture(33984+T),n.bindTexture(34067,W.__webglTexture)}const ke={[Dh]:10497,[Mi]:33071,[Ph]:33648},Ue={[Un]:9728,[Tm]:9984,[Em]:9986,[li]:9729,[BP]:9985,[mu]:9987};function le(S,T,W){if(W?(t.texParameteri(S,10242,ke[T.wrapS]),t.texParameteri(S,10243,ke[T.wrapT]),(S===32879||S===35866)&&t.texParameteri(S,32882,ke[T.wrapR]),t.texParameteri(S,10240,Ue[T.magFilter]),t.texParameteri(S,10241,Ue[T.minFilter])):(t.texParameteri(S,10242,33071),t.texParameteri(S,10243,33071),(S===32879||S===35866)&&t.texParameteri(S,32882,33071),(T.wrapS!==Mi||T.wrapT!==Mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(S,10240,N(T.magFilter)),t.texParameteri(S,10241,N(T.minFilter)),T.minFilter!==Un&&T.minFilter!==li&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Q=e.get("EXT_texture_filter_anisotropic");if(T.type===Cr&&e.has("OES_texture_float_linear")===!1||a===!1&&T.type===Ja&&e.has("OES_texture_half_float_linear")===!1)return;(T.anisotropy>1||i.get(T).__currentAnisotropy)&&(t.texParameterf(S,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,s.getMaxAnisotropy())),i.get(T).__currentAnisotropy=T.anisotropy)}}function Ye(S,T){let W=!1;S.__webglInit===void 0&&(S.__webglInit=!0,T.addEventListener("dispose",V));const Q=T.source;let ae=f.get(Q);ae===void 0&&(ae={},f.set(Q,ae));const pe=J(T);if(pe!==S.__cacheKey){ae[pe]===void 0&&(ae[pe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,W=!0),ae[pe].usedTimes++;const Ae=ae[S.__cacheKey];Ae!==void 0&&(ae[S.__cacheKey].usedTimes--,Ae.usedTimes===0&&$(T)),S.__cacheKey=pe,S.__webglTexture=ae[pe].texture}return W}function $e(S,T,W){let Q=3553;T.isDataArrayTexture&&(Q=35866),T.isData3DTexture&&(Q=32879);const ae=Ye(S,T),pe=T.source;if(n.activeTexture(33984+W),n.bindTexture(Q,S.__webglTexture),pe.version!==pe.__currentVersion||ae===!0){t.pixelStorei(37440,T.flipY),t.pixelStorei(37441,T.premultiplyAlpha),t.pixelStorei(3317,T.unpackAlignment),t.pixelStorei(37443,0);const Ae=v(T)&&y(T.image)===!1;let L=_(T.image,Ae,!1,u);L=U(T,L);const ce=y(L)||a,Me=r.convert(T.format,T.encoding);let Ee=r.convert(T.type),B=w(T.internalFormat,Me,Ee,T.encoding,T.isVideoTexture);le(Q,T,ce);let De;const Pe=T.mipmaps,He=a&&T.isVideoTexture!==!0,Le=pe.__currentVersion===void 0||ae===!0,Ge=D(T,L,ce);if(T.isDepthTexture)B=6402,a?T.type===Cr?B=36012:T.type===Mr?B=33190:T.type===Mo?B=35056:B=33189:T.type===Cr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),T.format===Lr&&B===6402&&T.type!==mx&&T.type!==Mr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=Mr,Ee=r.convert(T.type)),T.format===ko&&B===6402&&(B=34041,T.type!==Mo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=Mo,Ee=r.convert(T.type))),Le&&(He?n.texStorage2D(3553,1,B,L.width,L.height):n.texImage2D(3553,0,B,L.width,L.height,0,Me,Ee,null));else if(T.isDataTexture)if(Pe.length>0&&ce){He&&Le&&n.texStorage2D(3553,Ge,B,Pe[0].width,Pe[0].height);for(let Re=0,Je=Pe.length;Re<Je;Re++)De=Pe[Re],He?n.texSubImage2D(3553,Re,0,0,De.width,De.height,Me,Ee,De.data):n.texImage2D(3553,Re,B,De.width,De.height,0,Me,Ee,De.data);T.generateMipmaps=!1}else He?(Le&&n.texStorage2D(3553,Ge,B,L.width,L.height),n.texSubImage2D(3553,0,0,0,L.width,L.height,Me,Ee,L.data)):n.texImage2D(3553,0,B,L.width,L.height,0,Me,Ee,L.data);else if(T.isCompressedTexture){He&&Le&&n.texStorage2D(3553,Ge,B,Pe[0].width,Pe[0].height);for(let Re=0,Je=Pe.length;Re<Je;Re++)De=Pe[Re],T.format!==Vi?Me!==null?He?n.compressedTexSubImage2D(3553,Re,0,0,De.width,De.height,Me,De.data):n.compressedTexImage2D(3553,Re,B,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?n.texSubImage2D(3553,Re,0,0,De.width,De.height,Me,Ee,De.data):n.texImage2D(3553,Re,B,De.width,De.height,0,Me,Ee,De.data)}else if(T.isDataArrayTexture)He?(Le&&n.texStorage3D(35866,Ge,B,L.width,L.height,L.depth),n.texSubImage3D(35866,0,0,0,0,L.width,L.height,L.depth,Me,Ee,L.data)):n.texImage3D(35866,0,B,L.width,L.height,L.depth,0,Me,Ee,L.data);else if(T.isData3DTexture)He?(Le&&n.texStorage3D(32879,Ge,B,L.width,L.height,L.depth),n.texSubImage3D(32879,0,0,0,0,L.width,L.height,L.depth,Me,Ee,L.data)):n.texImage3D(32879,0,B,L.width,L.height,L.depth,0,Me,Ee,L.data);else if(T.isFramebufferTexture){if(Le)if(He)n.texStorage2D(3553,Ge,B,L.width,L.height);else{let Re=L.width,Je=L.height;for(let St=0;St<Ge;St++)n.texImage2D(3553,St,B,Re,Je,0,Me,Ee,null),Re>>=1,Je>>=1}}else if(Pe.length>0&&ce){He&&Le&&n.texStorage2D(3553,Ge,B,Pe[0].width,Pe[0].height);for(let Re=0,Je=Pe.length;Re<Je;Re++)De=Pe[Re],He?n.texSubImage2D(3553,Re,0,0,Me,Ee,De):n.texImage2D(3553,Re,B,Me,Ee,De);T.generateMipmaps=!1}else He?(Le&&n.texStorage2D(3553,Ge,B,L.width,L.height),n.texSubImage2D(3553,0,0,0,Me,Ee,L)):n.texImage2D(3553,0,B,Me,Ee,L);C(T,ce)&&R(Q),pe.__currentVersion=pe.version,T.onUpdate&&T.onUpdate(T)}S.__version=T.version}function Ne(S,T,W){if(T.image.length!==6)return;const Q=Ye(S,T),ae=T.source;if(n.activeTexture(33984+W),n.bindTexture(34067,S.__webglTexture),ae.version!==ae.__currentVersion||Q===!0){t.pixelStorei(37440,T.flipY),t.pixelStorei(37441,T.premultiplyAlpha),t.pixelStorei(3317,T.unpackAlignment),t.pixelStorei(37443,0);const pe=T.isCompressedTexture||T.image[0].isCompressedTexture,Ae=T.image[0]&&T.image[0].isDataTexture,L=[];for(let Re=0;Re<6;Re++)!pe&&!Ae?L[Re]=_(T.image[Re],!1,!0,c):L[Re]=Ae?T.image[Re].image:T.image[Re],L[Re]=U(T,L[Re]);const ce=L[0],Me=y(ce)||a,Ee=r.convert(T.format,T.encoding),B=r.convert(T.type),De=w(T.internalFormat,Ee,B,T.encoding),Pe=a&&T.isVideoTexture!==!0,He=ae.__currentVersion===void 0||Q===!0;let Le=D(T,ce,Me);le(34067,T,Me);let Ge;if(pe){Pe&&He&&n.texStorage2D(34067,Le,De,ce.width,ce.height);for(let Re=0;Re<6;Re++){Ge=L[Re].mipmaps;for(let Je=0;Je<Ge.length;Je++){const St=Ge[Je];T.format!==Vi?Ee!==null?Pe?n.compressedTexSubImage2D(34069+Re,Je,0,0,St.width,St.height,Ee,St.data):n.compressedTexImage2D(34069+Re,Je,De,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?n.texSubImage2D(34069+Re,Je,0,0,St.width,St.height,Ee,B,St.data):n.texImage2D(34069+Re,Je,De,St.width,St.height,0,Ee,B,St.data)}}}else{Ge=T.mipmaps,Pe&&He&&(Ge.length>0&&Le++,n.texStorage2D(34067,Le,De,L[0].width,L[0].height));for(let Re=0;Re<6;Re++)if(Ae){Pe?n.texSubImage2D(34069+Re,0,0,0,L[Re].width,L[Re].height,Ee,B,L[Re].data):n.texImage2D(34069+Re,0,De,L[Re].width,L[Re].height,0,Ee,B,L[Re].data);for(let Je=0;Je<Ge.length;Je++){const Mt=Ge[Je].image[Re].image;Pe?n.texSubImage2D(34069+Re,Je+1,0,0,Mt.width,Mt.height,Ee,B,Mt.data):n.texImage2D(34069+Re,Je+1,De,Mt.width,Mt.height,0,Ee,B,Mt.data)}}else{Pe?n.texSubImage2D(34069+Re,0,0,0,Ee,B,L[Re]):n.texImage2D(34069+Re,0,De,Ee,B,L[Re]);for(let Je=0;Je<Ge.length;Je++){const St=Ge[Je];Pe?n.texSubImage2D(34069+Re,Je+1,0,0,Ee,B,St.image[Re]):n.texImage2D(34069+Re,Je+1,De,Ee,B,St.image[Re])}}}C(T,Me)&&R(34067),ae.__currentVersion=ae.version,T.onUpdate&&T.onUpdate(T)}S.__version=T.version}function Te(S,T,W,Q,ae){const pe=r.convert(W.format,W.encoding),Ae=r.convert(W.type),L=w(W.internalFormat,pe,Ae,W.encoding);i.get(T).__hasExternalTextures||(ae===32879||ae===35866?n.texImage3D(ae,0,L,T.width,T.height,T.depth,0,pe,Ae,null):n.texImage2D(ae,0,L,T.width,T.height,0,pe,Ae,null)),n.bindFramebuffer(36160,S),xe(T)?h.framebufferTexture2DMultisampleEXT(36160,Q,ae,i.get(W).__webglTexture,0,fe(T)):t.framebufferTexture2D(36160,Q,ae,i.get(W).__webglTexture,0),n.bindFramebuffer(36160,null)}function O(S,T,W){if(t.bindRenderbuffer(36161,S),T.depthBuffer&&!T.stencilBuffer){let Q=33189;if(W||xe(T)){const ae=T.depthTexture;ae&&ae.isDepthTexture&&(ae.type===Cr?Q=36012:ae.type===Mr&&(Q=33190));const pe=fe(T);xe(T)?h.renderbufferStorageMultisampleEXT(36161,pe,Q,T.width,T.height):t.renderbufferStorageMultisample(36161,pe,Q,T.width,T.height)}else t.renderbufferStorage(36161,Q,T.width,T.height);t.framebufferRenderbuffer(36160,36096,36161,S)}else if(T.depthBuffer&&T.stencilBuffer){const Q=fe(T);W&&xe(T)===!1?t.renderbufferStorageMultisample(36161,Q,35056,T.width,T.height):xe(T)?h.renderbufferStorageMultisampleEXT(36161,Q,35056,T.width,T.height):t.renderbufferStorage(36161,34041,T.width,T.height),t.framebufferRenderbuffer(36160,33306,36161,S)}else{const Q=T.isWebGLMultipleRenderTargets===!0?T.texture:[T.texture];for(let ae=0;ae<Q.length;ae++){const pe=Q[ae],Ae=r.convert(pe.format,pe.encoding),L=r.convert(pe.type),ce=w(pe.internalFormat,Ae,L,pe.encoding),Me=fe(T);W&&xe(T)===!1?t.renderbufferStorageMultisample(36161,Me,ce,T.width,T.height):xe(T)?h.renderbufferStorageMultisampleEXT(36161,Me,ce,T.width,T.height):t.renderbufferStorage(36161,ce,T.width,T.height)}}t.bindRenderbuffer(36161,null)}function z(S,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,S),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),de(T.depthTexture,0);const Q=i.get(T.depthTexture).__webglTexture,ae=fe(T);if(T.depthTexture.format===Lr)xe(T)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Q,0,ae):t.framebufferTexture2D(36160,36096,3553,Q,0);else if(T.depthTexture.format===ko)xe(T)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Q,0,ae):t.framebufferTexture2D(36160,33306,3553,Q,0);else throw new Error("Unknown depthTexture format")}function M(S){const T=i.get(S),W=S.isWebGLCubeRenderTarget===!0;if(S.depthTexture&&!T.__autoAllocateDepthBuffer){if(W)throw new Error("target.depthTexture not supported in Cube render targets");z(T.__webglFramebuffer,S)}else if(W){T.__webglDepthbuffer=[];for(let Q=0;Q<6;Q++)n.bindFramebuffer(36160,T.__webglFramebuffer[Q]),T.__webglDepthbuffer[Q]=t.createRenderbuffer(),O(T.__webglDepthbuffer[Q],S,!1)}else n.bindFramebuffer(36160,T.__webglFramebuffer),T.__webglDepthbuffer=t.createRenderbuffer(),O(T.__webglDepthbuffer,S,!1);n.bindFramebuffer(36160,null)}function A(S,T,W){const Q=i.get(S);T!==void 0&&Te(Q.__webglFramebuffer,S,S.texture,36064,3553),W!==void 0&&M(S)}function G(S){const T=S.texture,W=i.get(S),Q=i.get(T);S.addEventListener("dispose",j),S.isWebGLMultipleRenderTargets!==!0&&(Q.__webglTexture===void 0&&(Q.__webglTexture=t.createTexture()),Q.__version=T.version,o.memory.textures++);const ae=S.isWebGLCubeRenderTarget===!0,pe=S.isWebGLMultipleRenderTargets===!0,Ae=y(S)||a;if(ae){W.__webglFramebuffer=[];for(let L=0;L<6;L++)W.__webglFramebuffer[L]=t.createFramebuffer()}else{if(W.__webglFramebuffer=t.createFramebuffer(),pe)if(s.drawBuffers){const L=S.texture;for(let ce=0,Me=L.length;ce<Me;ce++){const Ee=i.get(L[ce]);Ee.__webglTexture===void 0&&(Ee.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&S.samples>0&&xe(S)===!1){const L=pe?T:[T];W.__webglMultisampledFramebuffer=t.createFramebuffer(),W.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,W.__webglMultisampledFramebuffer);for(let ce=0;ce<L.length;ce++){const Me=L[ce];W.__webglColorRenderbuffer[ce]=t.createRenderbuffer(),t.bindRenderbuffer(36161,W.__webglColorRenderbuffer[ce]);const Ee=r.convert(Me.format,Me.encoding),B=r.convert(Me.type),De=w(Me.internalFormat,Ee,B,Me.encoding),Pe=fe(S);t.renderbufferStorageMultisample(36161,Pe,De,S.width,S.height),t.framebufferRenderbuffer(36160,36064+ce,36161,W.__webglColorRenderbuffer[ce])}t.bindRenderbuffer(36161,null),S.depthBuffer&&(W.__webglDepthRenderbuffer=t.createRenderbuffer(),O(W.__webglDepthRenderbuffer,S,!0)),n.bindFramebuffer(36160,null)}}if(ae){n.bindTexture(34067,Q.__webglTexture),le(34067,T,Ae);for(let L=0;L<6;L++)Te(W.__webglFramebuffer[L],S,T,36064,34069+L);C(T,Ae)&&R(34067),n.unbindTexture()}else if(pe){const L=S.texture;for(let ce=0,Me=L.length;ce<Me;ce++){const Ee=L[ce],B=i.get(Ee);n.bindTexture(3553,B.__webglTexture),le(3553,Ee,Ae),Te(W.__webglFramebuffer,S,Ee,36064+ce,3553),C(Ee,Ae)&&R(3553)}n.unbindTexture()}else{let L=3553;(S.isWebGL3DRenderTarget||S.isWebGLArrayRenderTarget)&&(a?L=S.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(L,Q.__webglTexture),le(L,T,Ae),Te(W.__webglFramebuffer,S,T,36064,L),C(T,Ae)&&R(L),n.unbindTexture()}S.depthBuffer&&M(S)}function Y(S){const T=y(S)||a,W=S.isWebGLMultipleRenderTargets===!0?S.texture:[S.texture];for(let Q=0,ae=W.length;Q<ae;Q++){const pe=W[Q];if(C(pe,T)){const Ae=S.isWebGLCubeRenderTarget?34067:3553,L=i.get(pe).__webglTexture;n.bindTexture(Ae,L),R(Ae),n.unbindTexture()}}}function re(S){if(a&&S.samples>0&&xe(S)===!1){const T=S.isWebGLMultipleRenderTargets?S.texture:[S.texture],W=S.width,Q=S.height;let ae=16384;const pe=[],Ae=S.stencilBuffer?33306:36096,L=i.get(S),ce=S.isWebGLMultipleRenderTargets===!0;if(ce)for(let Me=0;Me<T.length;Me++)n.bindFramebuffer(36160,L.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Me,36161,null),n.bindFramebuffer(36160,L.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Me,3553,null,0);n.bindFramebuffer(36008,L.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,L.__webglFramebuffer);for(let Me=0;Me<T.length;Me++){pe.push(36064+Me),S.depthBuffer&&pe.push(Ae);const Ee=L.__ignoreDepthValues!==void 0?L.__ignoreDepthValues:!1;if(Ee===!1&&(S.depthBuffer&&(ae|=256),S.stencilBuffer&&(ae|=1024)),ce&&t.framebufferRenderbuffer(36008,36064,36161,L.__webglColorRenderbuffer[Me]),Ee===!0&&(t.invalidateFramebuffer(36008,[Ae]),t.invalidateFramebuffer(36009,[Ae])),ce){const B=i.get(T[Me]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,B,0)}t.blitFramebuffer(0,0,W,Q,0,0,W,Q,ae,9728),p&&t.invalidateFramebuffer(36008,pe)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),ce)for(let Me=0;Me<T.length;Me++){n.bindFramebuffer(36160,L.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+Me,36161,L.__webglColorRenderbuffer[Me]);const Ee=i.get(T[Me]).__webglTexture;n.bindFramebuffer(36160,L.__webglFramebuffer),t.framebufferTexture2D(36009,36064+Me,3553,Ee,0)}n.bindFramebuffer(36009,L.__webglMultisampledFramebuffer)}}function fe(S){return Math.min(d,S.samples)}function xe(S){const T=i.get(S);return a&&S.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&T.__useRenderToTexture!==!1}function _e(S){const T=o.render.frame;g.get(S)!==T&&(g.set(S,T),S.update())}function U(S,T){const W=S.encoding,Q=S.format,ae=S.type;return S.isCompressedTexture===!0||S.isVideoTexture===!0||S.format===Lh||W!==kr&&(W===Ht?a===!1?e.has("EXT_sRGB")===!0&&Q===Vi?(S.format=Lh,S.minFilter=li,S.generateMipmaps=!1):T=yx.sRGBToLinear(T):(Q!==Vi||ae!==Ir)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",W)),T}this.allocateTextureUnit=te,this.resetTextureUnits=ne,this.setTexture2D=de,this.setTexture2DArray=ve,this.setTexture3D=me,this.setTextureCube=ye,this.rebindTextures=A,this.setupRenderTarget=G,this.updateRenderTargetMipmap=Y,this.updateMultisampleRenderTarget=re,this.setupDepthRenderbuffer=M,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=xe}function ck(t,e,n){const i=n.isWebGL2;function s(r,o=null){let a;if(r===Ir)return 5121;if(r===HP)return 32819;if(r===WP)return 32820;if(r===zP)return 5120;if(r===VP)return 5122;if(r===mx)return 5123;if(r===UP)return 5124;if(r===Mr)return 5125;if(r===Cr)return 5126;if(r===Ja)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(r===GP)return 6406;if(r===Vi)return 6408;if(r===$P)return 6409;if(r===KP)return 6410;if(r===Lr)return 6402;if(r===ko)return 34041;if(r===XP)return 6403;if(r===jP)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(r===Lh)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(r===YP)return 36244;if(r===qP)return 33319;if(r===ZP)return 33320;if(r===JP)return 36249;if(r===Qu||r===ed||r===td||r===nd)if(o===Ht)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===Qu)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===ed)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===td)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===nd)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===Qu)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===ed)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===td)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===nd)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Dm||r===Pm||r===Lm||r===Rm)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===Dm)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Pm)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Lm)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Rm)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===QP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===Am||r===Im)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===Am)return o===Ht?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===Im)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===km||r===Om||r===Fm||r===Nm||r===Bm||r===zm||r===Vm||r===Um||r===Hm||r===Wm||r===Gm||r===jm||r===$m||r===Km)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===km)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Om)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Fm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Nm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Bm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===zm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Vm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Um)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Hm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Wm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Gm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===jm)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===$m)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Km)return o===Ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Xm)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===Xm)return o===Ht?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return r===Mo?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[r]!==void 0?t[r]:null}return{convert:s}}class uk extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class nc extends Qn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dk={type:"move"};class Pd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new nc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new nc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new H,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new H),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new nc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new H,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new H),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const f=n.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const x=new nc;x.matrixAutoUpdate=!1,x.visible=!1,c.joints[m.jointName]=x,c.add(x)}const b=c.joints[m.jointName];f!==null&&(b.matrix.fromArray(f.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.jointRadius=f.radius),b.visible=f!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,g=.005;c.inputState.pinching&&h>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=n.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=n.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(dk)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}}class hk extends pi{constructor(e,n,i,s,r,o,a,l,c,u){if(u=u!==void 0?u:Lr,u!==Lr&&u!==ko)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Lr&&(i=Mr),i===void 0&&u===ko&&(i=Mo),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Un,this.minFilter=l!==void 0?l:Un,this.flipY=!1,this.generateMipmaps=!1}}class fk extends Wr{constructor(e,n){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,p=null;const g=n.getContextAttributes();let m=null,f=null;const b=[],x=[],_=new Yn;_.layers.enable(1),_.viewport=new Bt;const y=new Yn;y.layers.enable(2),y.viewport=new Bt;const v=[_,y],C=new uk;C.layers.enable(1),C.layers.enable(2);let R=null,w=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let de=b[J];return de===void 0&&(de=new Pd,b[J]=de),de.getTargetRaySpace()},this.getControllerGrip=function(J){let de=b[J];return de===void 0&&(de=new Pd,b[J]=de),de.getGripSpace()},this.getHand=function(J){let de=b[J];return de===void 0&&(de=new Pd,b[J]=de),de.getHandSpace()};function D(J){const de=x.indexOf(J.inputSource);if(de===-1)return;const ve=b[de];ve!==void 0&&ve.dispatchEvent({type:J.type,data:J.inputSource})}function N(){s.removeEventListener("select",D),s.removeEventListener("selectstart",D),s.removeEventListener("selectend",D),s.removeEventListener("squeeze",D),s.removeEventListener("squeezestart",D),s.removeEventListener("squeezeend",D),s.removeEventListener("end",N),s.removeEventListener("inputsourceschange",V);for(let J=0;J<b.length;J++){const de=x[J];de!==null&&(x[J]=null,b[J].disconnect(de))}R=null,w=null,e.setRenderTarget(m),h=null,d=null,u=null,s=null,f=null,te.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){r=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(J){l=J},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return s},this.setSession=async function(J){if(s=J,s!==null){if(m=e.getRenderTarget(),s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",N),s.addEventListener("inputsourceschange",V),g.xrCompatible!==!0&&await n.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const de={antialias:s.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(s,n,de),s.updateRenderState({baseLayer:h}),f=new Xs(h.framebufferWidth,h.framebufferHeight,{format:Vi,type:Ir,encoding:e.outputEncoding})}else{let de=null,ve=null,me=null;g.depth&&(me=g.stencil?35056:33190,de=g.stencil?ko:Lr,ve=g.stencil?Mo:Mr);const ye={colorFormat:32856,depthFormat:me,scaleFactor:r};u=new XRWebGLBinding(s,n),d=u.createProjectionLayer(ye),s.updateRenderState({layers:[d]}),f=new Xs(d.textureWidth,d.textureHeight,{format:Vi,type:Ir,depthTexture:new hk(d.textureWidth,d.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const ke=e.properties.get(f);ke.__ignoreDepthValues=d.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await s.requestReferenceSpace(a),te.setContext(s),te.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function V(J){for(let de=0;de<J.removed.length;de++){const ve=J.removed[de],me=x.indexOf(ve);me>=0&&(x[me]=null,b[me].dispatchEvent({type:"disconnected",data:ve}))}for(let de=0;de<J.added.length;de++){const ve=J.added[de];let me=x.indexOf(ve);if(me===-1){for(let ke=0;ke<b.length;ke++)if(ke>=x.length){x.push(ve),me=ke;break}else if(x[ke]===null){x[ke]=ve,me=ke;break}if(me===-1)break}const ye=b[me];ye&&ye.dispatchEvent({type:"connected",data:ve})}}const j=new H,se=new H;function $(J,de,ve){j.setFromMatrixPosition(de.matrixWorld),se.setFromMatrixPosition(ve.matrixWorld);const me=j.distanceTo(se),ye=de.projectionMatrix.elements,ke=ve.projectionMatrix.elements,Ue=ye[14]/(ye[10]-1),le=ye[14]/(ye[10]+1),Ye=(ye[9]+1)/ye[5],$e=(ye[9]-1)/ye[5],Ne=(ye[8]-1)/ye[0],Te=(ke[8]+1)/ke[0],O=Ue*Ne,z=Ue*Te,M=me/(-Ne+Te),A=M*-Ne;de.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(A),J.translateZ(M),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const G=Ue+M,Y=le+M,re=O-A,fe=z+(me-A),xe=Ye*le/Y*G,_e=$e*le/Y*G;J.projectionMatrix.makePerspective(re,fe,xe,_e,G,Y)}function q(J,de){de===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(de.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(s===null)return;C.near=y.near=_.near=J.near,C.far=y.far=_.far=J.far,(R!==C.near||w!==C.far)&&(s.updateRenderState({depthNear:C.near,depthFar:C.far}),R=C.near,w=C.far);const de=J.parent,ve=C.cameras;q(C,de);for(let ye=0;ye<ve.length;ye++)q(ve[ye],de);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),J.position.copy(C.position),J.quaternion.copy(C.quaternion),J.scale.copy(C.scale),J.matrix.copy(C.matrix),J.matrixWorld.copy(C.matrixWorld);const me=J.children;for(let ye=0,ke=me.length;ye<ke;ye++)me[ye].updateMatrixWorld(!0);ve.length===2?$(C,_,y):C.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(h!==null)return h.fixedFoveation},this.setFoveation=function(J){d!==null&&(d.fixedFoveation=J),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=J)};let K=null;function ne(J,de){if(c=de.getViewerPose(l||o),p=de,c!==null){const ve=c.views;h!==null&&(e.setRenderTargetFramebuffer(f,h.framebuffer),e.setRenderTarget(f));let me=!1;ve.length!==C.cameras.length&&(C.cameras.length=0,me=!0);for(let ye=0;ye<ve.length;ye++){const ke=ve[ye];let Ue=null;if(h!==null)Ue=h.getViewport(ke);else{const Ye=u.getViewSubImage(d,ke);Ue=Ye.viewport,ye===0&&(e.setRenderTargetTextures(f,Ye.colorTexture,d.ignoreDepthValues?void 0:Ye.depthStencilTexture),e.setRenderTarget(f))}let le=v[ye];le===void 0&&(le=new Yn,le.layers.enable(ye),le.viewport=new Bt,v[ye]=le),le.matrix.fromArray(ke.transform.matrix),le.projectionMatrix.fromArray(ke.projectionMatrix),le.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),ye===0&&C.matrix.copy(le.matrix),me===!0&&C.cameras.push(le)}}for(let ve=0;ve<b.length;ve++){const me=x[ve],ye=b[ve];me!==null&&ye!==void 0&&ye.update(me,de,l||o)}K&&K(J,de),p=null}const te=new Ex;te.setAnimationLoop(ne),this.setAnimationLoop=function(J){K=J},this.dispose=function(){}}}function pk(t,e){function n(m,f){m.fogColor.value.copy(f.color),f.isFog?(m.fogNear.value=f.near,m.fogFar.value=f.far):f.isFogExp2&&(m.fogDensity.value=f.density)}function i(m,f,b,x,_){f.isMeshBasicMaterial||f.isMeshLambertMaterial?s(m,f):f.isMeshToonMaterial?(s(m,f),u(m,f)):f.isMeshPhongMaterial?(s(m,f),c(m,f)):f.isMeshStandardMaterial?(s(m,f),d(m,f),f.isMeshPhysicalMaterial&&h(m,f,_)):f.isMeshMatcapMaterial?(s(m,f),p(m,f)):f.isMeshDepthMaterial?s(m,f):f.isMeshDistanceMaterial?(s(m,f),g(m,f)):f.isMeshNormalMaterial?s(m,f):f.isLineBasicMaterial?(r(m,f),f.isLineDashedMaterial&&o(m,f)):f.isPointsMaterial?a(m,f,b,x):f.isSpriteMaterial?l(m,f):f.isShadowMaterial?(m.color.value.copy(f.color),m.opacity.value=f.opacity):f.isShaderMaterial&&(f.uniformsNeedUpdate=!1)}function s(m,f){m.opacity.value=f.opacity,f.color&&m.diffuse.value.copy(f.color),f.emissive&&m.emissive.value.copy(f.emissive).multiplyScalar(f.emissiveIntensity),f.map&&(m.map.value=f.map),f.alphaMap&&(m.alphaMap.value=f.alphaMap),f.bumpMap&&(m.bumpMap.value=f.bumpMap,m.bumpScale.value=f.bumpScale,f.side===Di&&(m.bumpScale.value*=-1)),f.displacementMap&&(m.displacementMap.value=f.displacementMap,m.displacementScale.value=f.displacementScale,m.displacementBias.value=f.displacementBias),f.emissiveMap&&(m.emissiveMap.value=f.emissiveMap),f.normalMap&&(m.normalMap.value=f.normalMap,m.normalScale.value.copy(f.normalScale),f.side===Di&&m.normalScale.value.negate()),f.specularMap&&(m.specularMap.value=f.specularMap),f.alphaTest>0&&(m.alphaTest.value=f.alphaTest);const b=e.get(f).envMap;if(b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=f.reflectivity,m.ior.value=f.ior,m.refractionRatio.value=f.refractionRatio),f.lightMap){m.lightMap.value=f.lightMap;const y=t.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=f.lightMapIntensity*y}f.aoMap&&(m.aoMap.value=f.aoMap,m.aoMapIntensity.value=f.aoMapIntensity);let x;f.map?x=f.map:f.specularMap?x=f.specularMap:f.displacementMap?x=f.displacementMap:f.normalMap?x=f.normalMap:f.bumpMap?x=f.bumpMap:f.roughnessMap?x=f.roughnessMap:f.metalnessMap?x=f.metalnessMap:f.alphaMap?x=f.alphaMap:f.emissiveMap?x=f.emissiveMap:f.clearcoatMap?x=f.clearcoatMap:f.clearcoatNormalMap?x=f.clearcoatNormalMap:f.clearcoatRoughnessMap?x=f.clearcoatRoughnessMap:f.iridescenceMap?x=f.iridescenceMap:f.iridescenceThicknessMap?x=f.iridescenceThicknessMap:f.specularIntensityMap?x=f.specularIntensityMap:f.specularColorMap?x=f.specularColorMap:f.transmissionMap?x=f.transmissionMap:f.thicknessMap?x=f.thicknessMap:f.sheenColorMap?x=f.sheenColorMap:f.sheenRoughnessMap&&(x=f.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix));let _;f.aoMap?_=f.aoMap:f.lightMap&&(_=f.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uv2Transform.value.copy(_.matrix))}function r(m,f){m.diffuse.value.copy(f.color),m.opacity.value=f.opacity}function o(m,f){m.dashSize.value=f.dashSize,m.totalSize.value=f.dashSize+f.gapSize,m.scale.value=f.scale}function a(m,f,b,x){m.diffuse.value.copy(f.color),m.opacity.value=f.opacity,m.size.value=f.size*b,m.scale.value=x*.5,f.map&&(m.map.value=f.map),f.alphaMap&&(m.alphaMap.value=f.alphaMap),f.alphaTest>0&&(m.alphaTest.value=f.alphaTest);let _;f.map?_=f.map:f.alphaMap&&(_=f.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}function l(m,f){m.diffuse.value.copy(f.color),m.opacity.value=f.opacity,m.rotation.value=f.rotation,f.map&&(m.map.value=f.map),f.alphaMap&&(m.alphaMap.value=f.alphaMap),f.alphaTest>0&&(m.alphaTest.value=f.alphaTest);let b;f.map?b=f.map:f.alphaMap&&(b=f.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function c(m,f){m.specular.value.copy(f.specular),m.shininess.value=Math.max(f.shininess,1e-4)}function u(m,f){f.gradientMap&&(m.gradientMap.value=f.gradientMap)}function d(m,f){m.roughness.value=f.roughness,m.metalness.value=f.metalness,f.roughnessMap&&(m.roughnessMap.value=f.roughnessMap),f.metalnessMap&&(m.metalnessMap.value=f.metalnessMap),e.get(f).envMap&&(m.envMapIntensity.value=f.envMapIntensity)}function h(m,f,b){m.ior.value=f.ior,f.sheen>0&&(m.sheenColor.value.copy(f.sheenColor).multiplyScalar(f.sheen),m.sheenRoughness.value=f.sheenRoughness,f.sheenColorMap&&(m.sheenColorMap.value=f.sheenColorMap),f.sheenRoughnessMap&&(m.sheenRoughnessMap.value=f.sheenRoughnessMap)),f.clearcoat>0&&(m.clearcoat.value=f.clearcoat,m.clearcoatRoughness.value=f.clearcoatRoughness,f.clearcoatMap&&(m.clearcoatMap.value=f.clearcoatMap),f.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=f.clearcoatRoughnessMap),f.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(f.clearcoatNormalScale),m.clearcoatNormalMap.value=f.clearcoatNormalMap,f.side===Di&&m.clearcoatNormalScale.value.negate())),f.iridescence>0&&(m.iridescence.value=f.iridescence,m.iridescenceIOR.value=f.iridescenceIOR,m.iridescenceThicknessMinimum.value=f.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=f.iridescenceThicknessRange[1],f.iridescenceMap&&(m.iridescenceMap.value=f.iridescenceMap),f.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=f.iridescenceThicknessMap)),f.transmission>0&&(m.transmission.value=f.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),f.transmissionMap&&(m.transmissionMap.value=f.transmissionMap),m.thickness.value=f.thickness,f.thicknessMap&&(m.thicknessMap.value=f.thicknessMap),m.attenuationDistance.value=f.attenuationDistance,m.attenuationColor.value.copy(f.attenuationColor)),m.specularIntensity.value=f.specularIntensity,m.specularColor.value.copy(f.specularColor),f.specularIntensityMap&&(m.specularIntensityMap.value=f.specularIntensityMap),f.specularColorMap&&(m.specularColorMap.value=f.specularColorMap)}function p(m,f){f.matcap&&(m.matcap.value=f.matcap)}function g(m,f){m.referencePosition.value.copy(f.referencePosition),m.nearDistance.value=f.nearDistance,m.farDistance.value=f.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function mk(){const t=Qa("canvas");return t.style.display="block",t}function Ix(t={}){this.isWebGLRenderer=!0;const e=t.canvas!==void 0?t.canvas:mk(),n=t.context!==void 0?t.context:null,i=t.depth!==void 0?t.depth:!0,s=t.stencil!==void 0?t.stencil:!0,r=t.antialias!==void 0?t.antialias:!1,o=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,a=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,l=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let u;n!==null?u=n.getContextAttributes().alpha:u=t.alpha!==void 0?t.alpha:!1;let d=null,h=null;const p=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=kr,this.physicallyCorrectLights=!1,this.toneMapping=hs,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let f=!1,b=0,x=0,_=null,y=-1,v=null;const C=new Bt,R=new Bt;let w=null,D=e.width,N=e.height,V=1,j=null,se=null;const $=new Bt(0,0,D,N),q=new Bt(0,0,D,N);let K=!1;const ne=new Rf;let te=!1,J=!1,de=null;const ve=new Gt,me=new et,ye=new H,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ue(){return _===null?V:1}let le=n;function Ye(I,Z){for(let ue=0;ue<I.length;ue++){const ie=I[ue],be=e.getContext(ie,Z);if(be!==null)return be}return null}try{const I={alpha:!0,depth:i,stencil:s,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Df}`),e.addEventListener("webglcontextlost",B,!1),e.addEventListener("webglcontextrestored",De,!1),e.addEventListener("webglcontextcreationerror",Pe,!1),le===null){const Z=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Z.shift(),le=Ye(Z,I),le===null)throw Ye(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}le.getShaderPrecisionFormat===void 0&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let $e,Ne,Te,O,z,M,A,G,Y,re,fe,xe,_e,U,S,T,W,Q,ae,pe,Ae,L,ce;function Me(){$e=new TI(le),Ne=new xI(le,$e,t),$e.init(Ne),L=new ck(le,$e,Ne),Te=new ak(le,$e,Ne),O=new PI,z=new K2,M=new lk(le,$e,Te,z,Ne,L,O),A=new _I(m),G=new CI(m),Y=new VL(le,Ne),ce=new bI(le,$e,Y,Ne),re=new EI(le,Y,O,ce),fe=new II(le,re,Y,O),ae=new AI(le,Ne,M),T=new vI(z),xe=new $2(m,A,G,$e,Ne,ce,T),_e=new pk(m,z),U=new Y2,S=new tk($e,Ne),Q=new gI(m,A,Te,fe,u,o),W=new ok(m,fe,Ne),pe=new yI(le,$e,O,Ne),Ae=new DI(le,$e,O,Ne),O.programs=xe.programs,m.capabilities=Ne,m.extensions=$e,m.properties=z,m.renderLists=U,m.shadowMap=W,m.state=Te,m.info=O}Me();const Ee=new fk(m,le);this.xr=Ee,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const I=$e.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=$e.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(I){I!==void 0&&(V=I,this.setSize(D,N,!1))},this.getSize=function(I){return I.set(D,N)},this.setSize=function(I,Z,ue){if(Ee.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}D=I,N=Z,e.width=Math.floor(I*V),e.height=Math.floor(Z*V),ue!==!1&&(e.style.width=I+"px",e.style.height=Z+"px"),this.setViewport(0,0,I,Z)},this.getDrawingBufferSize=function(I){return I.set(D*V,N*V).floor()},this.setDrawingBufferSize=function(I,Z,ue){D=I,N=Z,V=ue,e.width=Math.floor(I*ue),e.height=Math.floor(Z*ue),this.setViewport(0,0,I,Z)},this.getCurrentViewport=function(I){return I.copy(C)},this.getViewport=function(I){return I.copy($)},this.setViewport=function(I,Z,ue,ie){I.isVector4?$.set(I.x,I.y,I.z,I.w):$.set(I,Z,ue,ie),Te.viewport(C.copy($).multiplyScalar(V).floor())},this.getScissor=function(I){return I.copy(q)},this.setScissor=function(I,Z,ue,ie){I.isVector4?q.set(I.x,I.y,I.z,I.w):q.set(I,Z,ue,ie),Te.scissor(R.copy(q).multiplyScalar(V).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(I){Te.setScissorTest(K=I)},this.setOpaqueSort=function(I){j=I},this.setTransparentSort=function(I){se=I},this.getClearColor=function(I){return I.copy(Q.getClearColor())},this.setClearColor=function(){Q.setClearColor.apply(Q,arguments)},this.getClearAlpha=function(){return Q.getClearAlpha()},this.setClearAlpha=function(){Q.setClearAlpha.apply(Q,arguments)},this.clear=function(I=!0,Z=!0,ue=!0){let ie=0;I&&(ie|=16384),Z&&(ie|=256),ue&&(ie|=1024),le.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",B,!1),e.removeEventListener("webglcontextrestored",De,!1),e.removeEventListener("webglcontextcreationerror",Pe,!1),U.dispose(),S.dispose(),z.dispose(),A.dispose(),G.dispose(),fe.dispose(),ce.dispose(),xe.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",St),Ee.removeEventListener("sessionend",Mt),de&&(de.dispose(),de=null),en.stop()};function B(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function De(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1;const I=O.autoReset,Z=W.enabled,ue=W.autoUpdate,ie=W.needsUpdate,be=W.type;Me(),O.autoReset=I,W.enabled=Z,W.autoUpdate=ue,W.needsUpdate=ie,W.type=be}function Pe(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function He(I){const Z=I.target;Z.removeEventListener("dispose",He),Le(Z)}function Le(I){Ge(I),z.remove(I)}function Ge(I){const Z=z.get(I).programs;Z!==void 0&&(Z.forEach(function(ue){xe.releaseProgram(ue)}),I.isShaderMaterial&&xe.releaseShaderCache(I))}this.renderBufferDirect=function(I,Z,ue,ie,be,Ze){Z===null&&(Z=ke);const tt=be.isMesh&&be.matrixWorld.determinant()<0,ot=Kr(I,Z,ue,ie,be);Te.setMaterial(ie,tt);let rt=ue.index;const wt=ue.attributes.position;if(rt===null){if(wt===void 0||wt.count===0)return}else if(rt.count===0)return;let at=1;ie.wireframe===!0&&(rt=re.getWireframeAttribute(ue),at=2),ce.setup(be,ie,ot,ue,rt);let dt,Pt=pe;rt!==null&&(dt=Y.get(rt),Pt=Ae,Pt.setIndex(dt));const ti=rt!==null?rt.count:wt.count,Li=ue.drawRange.start*at,gs=ue.drawRange.count*at,ni=Ze!==null?Ze.start*at:0,xt=Ze!==null?Ze.count*at:1/0,tn=Math.max(Li,ni),Rt=Math.min(ti,Li+gs,ni+xt)-1,nn=Math.max(0,Rt-tn+1);if(nn!==0){if(be.isMesh)ie.wireframe===!0?(Te.setLineWidth(ie.wireframeLinewidth*Ue()),Pt.setMode(1)):Pt.setMode(4);else if(be.isLine){let an=ie.linewidth;an===void 0&&(an=1),Te.setLineWidth(an*Ue()),be.isLineSegments?Pt.setMode(1):be.isLineLoop?Pt.setMode(2):Pt.setMode(3)}else be.isPoints?Pt.setMode(0):be.isSprite&&Pt.setMode(4);if(be.isInstancedMesh)Pt.renderInstances(tn,nn,be.count);else if(ue.isInstancedBufferGeometry){const an=Math.min(ue.instanceCount,ue._maxInstanceCount);Pt.renderInstances(tn,nn,an)}else Pt.render(tn,nn)}},this.compile=function(I,Z){h=S.get(I),h.init(),g.push(h),I.traverseVisible(function(ue){ue.isLight&&ue.layers.test(Z.layers)&&(h.pushLight(ue),ue.castShadow&&h.pushShadow(ue))}),h.setupLights(m.physicallyCorrectLights),I.traverse(function(ue){const ie=ue.material;if(ie)if(Array.isArray(ie))for(let be=0;be<ie.length;be++){const Ze=ie[be];Jo(Ze,I,ue)}else Jo(ie,I,ue)}),g.pop(),h=null};let Re=null;function Je(I){Re&&Re(I)}function St(){en.stop()}function Mt(){en.start()}const en=new Ex;en.setAnimationLoop(Je),typeof self!="undefined"&&en.setContext(self),this.setAnimationLoop=function(I){Re=I,Ee.setAnimationLoop(I),I===null?en.stop():en.start()},Ee.addEventListener("sessionstart",St),Ee.addEventListener("sessionend",Mt),this.render=function(I,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(f===!0)return;I.autoUpdate===!0&&I.updateMatrixWorld(),Z.parent===null&&Z.updateMatrixWorld(),Ee.enabled===!0&&Ee.isPresenting===!0&&(Ee.cameraAutoUpdate===!0&&Ee.updateCamera(Z),Z=Ee.getCamera()),I.isScene===!0&&I.onBeforeRender(m,I,Z,_),h=S.get(I,g.length),h.init(),g.push(h),ve.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),ne.setFromProjectionMatrix(ve),J=this.localClippingEnabled,te=T.init(this.clippingPlanes,J,Z),d=U.get(I,p.length),d.init(),p.push(d),ei(I,Z,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(j,se),te===!0&&T.beginShadows();const ue=h.state.shadowsArray;if(W.render(ue,I,Z),te===!0&&T.endShadows(),this.info.autoReset===!0&&this.info.reset(),Q.render(d,I),h.setupLights(m.physicallyCorrectLights),Z.isArrayCamera){const ie=Z.cameras;for(let be=0,Ze=ie.length;be<Ze;be++){const tt=ie[be];Cl(d,I,tt,tt.viewport)}}else Cl(d,I,Z);_!==null&&(M.updateMultisampleRenderTarget(_),M.updateRenderTargetMipmap(_)),I.isScene===!0&&I.onAfterRender(m,I,Z),ce.resetDefaultState(),y=-1,v=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,p.pop(),p.length>0?d=p[p.length-1]:d=null};function ei(I,Z,ue,ie){if(I.visible===!1)return;if(I.layers.test(Z.layers)){if(I.isGroup)ue=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Z);else if(I.isLight)h.pushLight(I),I.castShadow&&h.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||ne.intersectsSprite(I)){ie&&ye.setFromMatrixPosition(I.matrixWorld).applyMatrix4(ve);const tt=fe.update(I),ot=I.material;ot.visible&&d.push(I,tt,ot,ue,ye.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(I.isSkinnedMesh&&I.skeleton.frame!==O.render.frame&&(I.skeleton.update(),I.skeleton.frame=O.render.frame),!I.frustumCulled||ne.intersectsObject(I))){ie&&ye.setFromMatrixPosition(I.matrixWorld).applyMatrix4(ve);const tt=fe.update(I),ot=I.material;if(Array.isArray(ot)){const rt=tt.groups;for(let wt=0,at=rt.length;wt<at;wt++){const dt=rt[wt],Pt=ot[dt.materialIndex];Pt&&Pt.visible&&d.push(I,tt,Pt,ue,ye.z,dt)}}else ot.visible&&d.push(I,tt,ot,ue,ye.z,null)}}const Ze=I.children;for(let tt=0,ot=Ze.length;tt<ot;tt++)ei(Ze[tt],Z,ue,ie)}function Cl(I,Z,ue,ie){const be=I.opaque,Ze=I.transmissive,tt=I.transparent;h.setupLightsView(ue),Ze.length>0&&Nu(be,Z,ue),ie&&Te.viewport(C.copy(ie)),be.length>0&&ir(be,Z,ue),Ze.length>0&&ir(Ze,Z,ue),tt.length>0&&ir(tt,Z,ue),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function Nu(I,Z,ue){const ie=Ne.isWebGL2;de===null&&(de=new Xs(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")?Ja:Ir,minFilter:mu,samples:ie&&r===!0?4:0})),m.getDrawingBufferSize(me),ie?de.setSize(me.x,me.y):de.setSize(Nc(me.x),Nc(me.y));const be=m.getRenderTarget();m.setRenderTarget(de),m.clear();const Ze=m.toneMapping;m.toneMapping=hs,ir(I,Z,ue),m.toneMapping=Ze,M.updateMultisampleRenderTarget(de),M.updateRenderTargetMipmap(de),m.setRenderTarget(be)}function ir(I,Z,ue){const ie=Z.isScene===!0?Z.overrideMaterial:null;for(let be=0,Ze=I.length;be<Ze;be++){const tt=I[be],ot=tt.object,rt=tt.geometry,wt=ie===null?tt.material:ie,at=tt.group;ot.layers.test(ue.layers)&&Bu(ot,Z,ue,rt,wt,at)}}function Bu(I,Z,ue,ie,be,Ze){I.onBeforeRender(m,Z,ue,ie,be,Ze),I.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),be.onBeforeRender(m,Z,ue,ie,I,Ze),be.transparent===!0&&be.side===Ro?(be.side=Di,be.needsUpdate=!0,m.renderBufferDirect(ue,Z,ie,be,I,Ze),be.side=Za,be.needsUpdate=!0,m.renderBufferDirect(ue,Z,ie,be,I,Ze),be.side=Ro):m.renderBufferDirect(ue,Z,ie,be,I,Ze),I.onAfterRender(m,Z,ue,ie,be,Ze)}function Jo(I,Z,ue){Z.isScene!==!0&&(Z=ke);const ie=z.get(I),be=h.state.lights,Ze=h.state.shadowsArray,tt=be.state.version,ot=xe.getParameters(I,be.state,Ze,Z,ue),rt=xe.getProgramCacheKey(ot);let wt=ie.programs;ie.environment=I.isMeshStandardMaterial?Z.environment:null,ie.fog=Z.fog,ie.envMap=(I.isMeshStandardMaterial?G:A).get(I.envMap||ie.environment),wt===void 0&&(I.addEventListener("dispose",He),wt=new Map,ie.programs=wt);let at=wt.get(rt);if(at!==void 0){if(ie.currentProgram===at&&ie.lightsStateVersion===tt)return Tl(I,ot),at}else ot.uniforms=xe.getUniforms(I),I.onBuild(ue,ot,m),I.onBeforeCompile(ot,m),at=xe.acquireProgram(ot,rt),wt.set(rt,at),ie.uniforms=ot.uniforms;const dt=ie.uniforms;(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(dt.clippingPlanes=T.uniform),Tl(I,ot),ie.needsLights=Vu(I),ie.lightsStateVersion=tt,ie.needsLights&&(dt.ambientLightColor.value=be.state.ambient,dt.lightProbe.value=be.state.probe,dt.directionalLights.value=be.state.directional,dt.directionalLightShadows.value=be.state.directionalShadow,dt.spotLights.value=be.state.spot,dt.spotLightShadows.value=be.state.spotShadow,dt.rectAreaLights.value=be.state.rectArea,dt.ltc_1.value=be.state.rectAreaLTC1,dt.ltc_2.value=be.state.rectAreaLTC2,dt.pointLights.value=be.state.point,dt.pointLightShadows.value=be.state.pointShadow,dt.hemisphereLights.value=be.state.hemi,dt.directionalShadowMap.value=be.state.directionalShadowMap,dt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,dt.spotShadowMap.value=be.state.spotShadowMap,dt.spotShadowMatrix.value=be.state.spotShadowMatrix,dt.pointShadowMap.value=be.state.pointShadowMap,dt.pointShadowMatrix.value=be.state.pointShadowMatrix);const Pt=at.getUniforms(),ti=Sc.seqWithValue(Pt.seq,dt);return ie.currentProgram=at,ie.uniformsList=ti,at}function Tl(I,Z){const ue=z.get(I);ue.outputEncoding=Z.outputEncoding,ue.instancing=Z.instancing,ue.skinning=Z.skinning,ue.morphTargets=Z.morphTargets,ue.morphNormals=Z.morphNormals,ue.morphColors=Z.morphColors,ue.morphTargetsCount=Z.morphTargetsCount,ue.numClippingPlanes=Z.numClippingPlanes,ue.numIntersection=Z.numClipIntersection,ue.vertexAlphas=Z.vertexAlphas,ue.vertexTangents=Z.vertexTangents,ue.toneMapping=Z.toneMapping}function Kr(I,Z,ue,ie,be){Z.isScene!==!0&&(Z=ke),M.resetTextureUnits();const Ze=Z.fog,tt=ie.isMeshStandardMaterial?Z.environment:null,ot=_===null?m.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:kr,rt=(ie.isMeshStandardMaterial?G:A).get(ie.envMap||tt),wt=ie.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,at=!!ie.normalMap&&!!ue.attributes.tangent,dt=!!ue.morphAttributes.position,Pt=!!ue.morphAttributes.normal,ti=!!ue.morphAttributes.color,Li=ie.toneMapped?m.toneMapping:hs,gs=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,ni=gs!==void 0?gs.length:0,xt=z.get(ie),tn=h.state.lights;if(te===!0&&(J===!0||I!==v)){const An=I===v&&ie.id===y;T.setState(ie,I,An)}let Rt=!1;ie.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==tn.state.version||xt.outputEncoding!==ot||be.isInstancedMesh&&xt.instancing===!1||!be.isInstancedMesh&&xt.instancing===!0||be.isSkinnedMesh&&xt.skinning===!1||!be.isSkinnedMesh&&xt.skinning===!0||xt.envMap!==rt||ie.fog===!0&&xt.fog!==Ze||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==T.numPlanes||xt.numIntersection!==T.numIntersection)||xt.vertexAlphas!==wt||xt.vertexTangents!==at||xt.morphTargets!==dt||xt.morphNormals!==Pt||xt.morphColors!==ti||xt.toneMapping!==Li||Ne.isWebGL2===!0&&xt.morphTargetsCount!==ni)&&(Rt=!0):(Rt=!0,xt.__version=ie.version);let nn=xt.currentProgram;Rt===!0&&(nn=Jo(ie,Z,be));let an=!1,gi=!1,zn=!1;const Nt=nn.getUniforms(),bs=xt.uniforms;if(Te.useProgram(nn.program)&&(an=!0,gi=!0,zn=!0),ie.id!==y&&(y=ie.id,gi=!0),an||v!==I){if(Nt.setValue(le,"projectionMatrix",I.projectionMatrix),Ne.logarithmicDepthBuffer&&Nt.setValue(le,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),v!==I&&(v=I,gi=!0,zn=!0),ie.isShaderMaterial||ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshStandardMaterial||ie.envMap){const An=Nt.map.cameraPosition;An!==void 0&&An.setValue(le,ye.setFromMatrixPosition(I.matrixWorld))}(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&Nt.setValue(le,"isOrthographic",I.isOrthographicCamera===!0),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial||ie.isShadowMaterial||be.isSkinnedMesh)&&Nt.setValue(le,"viewMatrix",I.matrixWorldInverse)}if(be.isSkinnedMesh){Nt.setOptional(le,be,"bindMatrix"),Nt.setOptional(le,be,"bindMatrixInverse");const An=be.skeleton;An&&(Ne.floatVertexTextures?(An.boneTexture===null&&An.computeBoneTexture(),Nt.setValue(le,"boneTexture",An.boneTexture,M),Nt.setValue(le,"boneTextureSize",An.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Xr=ue.morphAttributes;return(Xr.position!==void 0||Xr.normal!==void 0||Xr.color!==void 0&&Ne.isWebGL2===!0)&&ae.update(be,ue,ie,nn),(gi||xt.receiveShadow!==be.receiveShadow)&&(xt.receiveShadow=be.receiveShadow,Nt.setValue(le,"receiveShadow",be.receiveShadow)),gi&&(Nt.setValue(le,"toneMappingExposure",m.toneMappingExposure),xt.needsLights&&zu(bs,zn),Ze&&ie.fog===!0&&_e.refreshFogUniforms(bs,Ze),_e.refreshMaterialUniforms(bs,ie,V,N,de),Sc.upload(le,xt.uniformsList,bs,M)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(Sc.upload(le,xt.uniformsList,bs,M),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&Nt.setValue(le,"center",be.center),Nt.setValue(le,"modelViewMatrix",be.modelViewMatrix),Nt.setValue(le,"normalMatrix",be.normalMatrix),Nt.setValue(le,"modelMatrix",be.matrixWorld),nn}function zu(I,Z){I.ambientLightColor.needsUpdate=Z,I.lightProbe.needsUpdate=Z,I.directionalLights.needsUpdate=Z,I.directionalLightShadows.needsUpdate=Z,I.pointLights.needsUpdate=Z,I.pointLightShadows.needsUpdate=Z,I.spotLights.needsUpdate=Z,I.spotLightShadows.needsUpdate=Z,I.rectAreaLights.needsUpdate=Z,I.hemisphereLights.needsUpdate=Z}function Vu(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(I,Z,ue){z.get(I.texture).__webglTexture=Z,z.get(I.depthTexture).__webglTexture=ue;const ie=z.get(I);ie.__hasExternalTextures=!0,ie.__hasExternalTextures&&(ie.__autoAllocateDepthBuffer=ue===void 0,ie.__autoAllocateDepthBuffer||$e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,Z){const ue=z.get(I);ue.__webglFramebuffer=Z,ue.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(I,Z=0,ue=0){_=I,b=Z,x=ue;let ie=!0;if(I){const rt=z.get(I);rt.__useDefaultFramebuffer!==void 0?(Te.bindFramebuffer(36160,null),ie=!1):rt.__webglFramebuffer===void 0?M.setupRenderTarget(I):rt.__hasExternalTextures&&M.rebindTextures(I,z.get(I.texture).__webglTexture,z.get(I.depthTexture).__webglTexture)}let be=null,Ze=!1,tt=!1;if(I){const rt=I.texture;(rt.isData3DTexture||rt.isDataArrayTexture)&&(tt=!0);const wt=z.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(be=wt[Z],Ze=!0):Ne.isWebGL2&&I.samples>0&&M.useMultisampledRTT(I)===!1?be=z.get(I).__webglMultisampledFramebuffer:be=wt,C.copy(I.viewport),R.copy(I.scissor),w=I.scissorTest}else C.copy($).multiplyScalar(V).floor(),R.copy(q).multiplyScalar(V).floor(),w=K;if(Te.bindFramebuffer(36160,be)&&Ne.drawBuffers&&ie&&Te.drawBuffers(I,be),Te.viewport(C),Te.scissor(R),Te.setScissorTest(w),Ze){const rt=z.get(I.texture);le.framebufferTexture2D(36160,36064,34069+Z,rt.__webglTexture,ue)}else if(tt){const rt=z.get(I.texture),wt=Z||0;le.framebufferTextureLayer(36160,36064,rt.__webglTexture,ue||0,wt)}y=-1},this.readRenderTargetPixels=function(I,Z,ue,ie,be,Ze,tt){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=z.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&tt!==void 0&&(ot=ot[tt]),ot){Te.bindFramebuffer(36160,ot);try{const rt=I.texture,wt=rt.format,at=rt.type;if(wt!==Vi&&L.convert(wt)!==le.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const dt=at===Ja&&($e.has("EXT_color_buffer_half_float")||Ne.isWebGL2&&$e.has("EXT_color_buffer_float"));if(at!==Ir&&L.convert(at)!==le.getParameter(35738)&&!(at===Cr&&(Ne.isWebGL2||$e.has("OES_texture_float")||$e.has("WEBGL_color_buffer_float")))&&!dt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=I.width-ie&&ue>=0&&ue<=I.height-be&&le.readPixels(Z,ue,ie,be,L.convert(wt),L.convert(at),Ze)}finally{const rt=_!==null?z.get(_).__webglFramebuffer:null;Te.bindFramebuffer(36160,rt)}}},this.copyFramebufferToTexture=function(I,Z,ue=0){const ie=Math.pow(2,-ue),be=Math.floor(Z.image.width*ie),Ze=Math.floor(Z.image.height*ie);M.setTexture2D(Z,0),le.copyTexSubImage2D(3553,ue,0,0,I.x,I.y,be,Ze),Te.unbindTexture()},this.copyTextureToTexture=function(I,Z,ue,ie=0){const be=Z.image.width,Ze=Z.image.height,tt=L.convert(ue.format),ot=L.convert(ue.type);M.setTexture2D(ue,0),le.pixelStorei(37440,ue.flipY),le.pixelStorei(37441,ue.premultiplyAlpha),le.pixelStorei(3317,ue.unpackAlignment),Z.isDataTexture?le.texSubImage2D(3553,ie,I.x,I.y,be,Ze,tt,ot,Z.image.data):Z.isCompressedTexture?le.compressedTexSubImage2D(3553,ie,I.x,I.y,Z.mipmaps[0].width,Z.mipmaps[0].height,tt,Z.mipmaps[0].data):le.texSubImage2D(3553,ie,I.x,I.y,tt,ot,Z.image),ie===0&&ue.generateMipmaps&&le.generateMipmap(3553),Te.unbindTexture()},this.copyTextureToTexture3D=function(I,Z,ue,ie,be=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ze=I.max.x-I.min.x+1,tt=I.max.y-I.min.y+1,ot=I.max.z-I.min.z+1,rt=L.convert(ie.format),wt=L.convert(ie.type);let at;if(ie.isData3DTexture)M.setTexture3D(ie,0),at=32879;else if(ie.isDataArrayTexture)M.setTexture2DArray(ie,0),at=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}le.pixelStorei(37440,ie.flipY),le.pixelStorei(37441,ie.premultiplyAlpha),le.pixelStorei(3317,ie.unpackAlignment);const dt=le.getParameter(3314),Pt=le.getParameter(32878),ti=le.getParameter(3316),Li=le.getParameter(3315),gs=le.getParameter(32877),ni=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;le.pixelStorei(3314,ni.width),le.pixelStorei(32878,ni.height),le.pixelStorei(3316,I.min.x),le.pixelStorei(3315,I.min.y),le.pixelStorei(32877,I.min.z),ue.isDataTexture||ue.isData3DTexture?le.texSubImage3D(at,be,Z.x,Z.y,Z.z,Ze,tt,ot,rt,wt,ni.data):ue.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),le.compressedTexSubImage3D(at,be,Z.x,Z.y,Z.z,Ze,tt,ot,rt,ni.data)):le.texSubImage3D(at,be,Z.x,Z.y,Z.z,Ze,tt,ot,rt,wt,ni),le.pixelStorei(3314,dt),le.pixelStorei(32878,Pt),le.pixelStorei(3316,ti),le.pixelStorei(3315,Li),le.pixelStorei(32877,gs),be===0&&ie.generateMipmaps&&le.generateMipmap(at),Te.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?M.setTextureCube(I,0):I.isData3DTexture?M.setTexture3D(I,0):I.isDataArrayTexture?M.setTexture2DArray(I,0):M.setTexture2D(I,0),Te.unbindTexture()},this.resetState=function(){b=0,x=0,_=null,Te.reset(),ce.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class gk extends Ix{}gk.prototype.isWebGL1Renderer=!0;class bk extends Qn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}class kx extends Ko{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rg=new H,Ag=new H,Ig=new Gt,Ld=new _x,ic=new gu;class yk extends Qn{constructor(e=new Pi,n=new kx){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let s=1,r=n.count;s<r;s++)Rg.fromBufferAttribute(n,s-1),Ag.fromBufferAttribute(n,s),i[s]=i[s-1],i[s]+=Rg.distanceTo(Ag);e.setAttribute("lineDistance",new Gn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ic.copy(i.boundingSphere),ic.applyMatrix4(s),ic.radius+=r,e.ray.intersectsSphere(ic)===!1)return;Ig.copy(s).invert(),Ld.copy(e.ray).applyMatrix4(Ig);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new H,u=new H,d=new H,h=new H,p=this.isLineSegments?2:1,g=i.index,f=i.attributes.position;if(g!==null){const b=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let _=b,y=x-1;_<y;_+=p){const v=g.getX(_),C=g.getX(_+1);if(c.fromBufferAttribute(f,v),u.fromBufferAttribute(f,C),Ld.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||n.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const b=Math.max(0,o.start),x=Math.min(f.count,o.start+o.count);for(let _=b,y=x-1;_<y;_+=p){if(c.fromBufferAttribute(f,_),u.fromBufferAttribute(f,_+1),Ld.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||n.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const s=n[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}class xk{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,s=this.getPoint(0),r=0;n.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(s),n.push(r),s=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let s=0;const r=i.length;let o;n?o=n:o=e*i[r-1];let a=0,l=r-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=i[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,i[s]===o)return s/(r-1);const u=i[s],h=i[s+1]-u,p=(o-u)/h;return(s+p)/(r-1)}getTangent(e,n){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=n||(o.isVector2?new et:new H);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new H,s=[],r=[],o=[],a=new H,l=new Gt;for(let p=0;p<=e;p++){const g=p/e;s[p]=this.getTangentAt(g,new H)}r[0]=new H,o[0]=new H;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),d=Math.abs(s[0].y),h=Math.abs(s[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let p=1;p<=e;p++){if(r[p]=r[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(s[p-1],s[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(_n(s[p-1].dot(s[p]),-1,1));r[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(s[p],r[p])}if(n===!0){let p=Math.acos(_n(r[0].dot(r[e]),-1,1));p/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(p=-p);for(let g=1;g<=e;g++)r[g].applyMatrix4(l.makeRotationAxis(s[g],p*g)),o[g].crossVectors(s[g],r[g])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vk extends xk{constructor(e=0,n=0,i=1,s=1,r=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const i=n||new et,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const a=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class kf extends Pi{constructor(e=[],n=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s};const r=[],o=[];a(s),c(i),u(),this.setAttribute("position",new Gn(r,3)),this.setAttribute("normal",new Gn(r.slice(),3)),this.setAttribute("uv",new Gn(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const _=new H,y=new H,v=new H;for(let C=0;C<n.length;C+=3)p(n[C+0],_),p(n[C+1],y),p(n[C+2],v),l(_,y,v,x)}function l(x,_,y,v){const C=v+1,R=[];for(let w=0;w<=C;w++){R[w]=[];const D=x.clone().lerp(y,w/C),N=_.clone().lerp(y,w/C),V=C-w;for(let j=0;j<=V;j++)j===0&&w===C?R[w][j]=D:R[w][j]=D.clone().lerp(N,j/V)}for(let w=0;w<C;w++)for(let D=0;D<2*(C-w)-1;D++){const N=Math.floor(D/2);D%2===0?(h(R[w][N+1]),h(R[w+1][N]),h(R[w][N])):(h(R[w][N+1]),h(R[w+1][N+1]),h(R[w+1][N]))}}function c(x){const _=new H;for(let y=0;y<r.length;y+=3)_.x=r[y+0],_.y=r[y+1],_.z=r[y+2],_.normalize().multiplyScalar(x),r[y+0]=_.x,r[y+1]=_.y,r[y+2]=_.z}function u(){const x=new H;for(let _=0;_<r.length;_+=3){x.x=r[_+0],x.y=r[_+1],x.z=r[_+2];const y=f(x)/2/Math.PI+.5,v=b(x)/Math.PI+.5;o.push(y,1-v)}g(),d()}function d(){for(let x=0;x<o.length;x+=6){const _=o[x+0],y=o[x+2],v=o[x+4],C=Math.max(_,y,v),R=Math.min(_,y,v);C>.9&&R<.1&&(_<.2&&(o[x+0]+=1),y<.2&&(o[x+2]+=1),v<.2&&(o[x+4]+=1))}}function h(x){r.push(x.x,x.y,x.z)}function p(x,_){const y=x*3;_.x=e[y+0],_.y=e[y+1],_.z=e[y+2]}function g(){const x=new H,_=new H,y=new H,v=new H,C=new et,R=new et,w=new et;for(let D=0,N=0;D<r.length;D+=9,N+=6){x.set(r[D+0],r[D+1],r[D+2]),_.set(r[D+3],r[D+4],r[D+5]),y.set(r[D+6],r[D+7],r[D+8]),C.set(o[N+0],o[N+1]),R.set(o[N+2],o[N+3]),w.set(o[N+4],o[N+5]),v.copy(x).add(_).add(y).divideScalar(3);const V=f(v);m(C,N+0,x,V),m(R,N+2,_,V),m(w,N+4,y,V)}}function m(x,_,y,v){v<0&&x.x===1&&(o[_]=x.x-1),y.x===0&&y.z===0&&(o[_]=v/2/Math.PI+.5)}function f(x){return Math.atan2(x.z,-x.x)}function b(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}static fromJSON(e){return new kf(e.vertices,e.indices,e.radius,e.details)}}class Of extends kf{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Of(e.radius,e.detail)}}class Ff extends Pi{constructor(e=1,n=32,i=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new H,h=new H,p=[],g=[],m=[],f=[];for(let b=0;b<=i;b++){const x=[],_=b/i;let y=0;b==0&&o==0?y=.5/n:b==i&&l==Math.PI&&(y=-.5/n);for(let v=0;v<=n;v++){const C=v/n;d.x=-e*Math.cos(s+C*r)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(s+C*r)*Math.sin(o+_*a),g.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),f.push(C+y,1-_),x.push(c++)}u.push(x)}for(let b=0;b<i;b++)for(let x=0;x<n;x++){const _=u[b][x+1],y=u[b][x],v=u[b+1][x],C=u[b+1][x+1];(b!==0||o>0)&&p.push(_,y,C),(b!==i-1||l<Math.PI)&&p.push(y,v,C)}this.setIndex(p),this.setAttribute("position",new Gn(g,3)),this.setAttribute("normal",new Gn(m,3)),this.setAttribute("uv",new Gn(f,2))}static fromJSON(e){return new Ff(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _k extends Ko{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kg={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class wk{constructor(e,n,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],g=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null}}}const Sk=new wk;class Ox{constructor(e){this.manager=e!==void 0?e:Sk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(s,r){i.load(e,s,n,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}class Mk extends Ox{constructor(e){super(e)}load(e,n,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=kg.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){n&&n(o),r.manager.itemEnd(e)},0),o;const a=Qa("img");function l(){u(),kg.add(e,this),n&&n(this),r.manager.itemEnd(e)}function c(d){u(),s&&s(d),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class Ck extends Ox{constructor(e){super(e)}load(e,n,i,s){const r=new pi,o=new Mk(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,n!==void 0&&n(r)},i,s),r}}class Fx extends Qn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const Og=new Gt,Fg=new H,Ng=new H;class Tk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new Gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rf,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new Bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;Fg.setFromMatrixPosition(e.matrixWorld),n.position.copy(Fg),Ng.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Ng),n.updateMatrixWorld(),Og.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Og),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(n.projectionMatrix),i.multiply(n.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const Bg=new Gt,oa=new H,Rd=new H;class Ek extends Tk{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new Bt(2,1,1,1),new Bt(0,1,1,1),new Bt(3,1,1,1),new Bt(1,1,1,1),new Bt(3,0,1,1),new Bt(1,0,1,1)],this._cubeDirections=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],this._cubeUps=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),oa.setFromMatrixPosition(e.matrixWorld),i.position.copy(oa),Rd.copy(i.position),Rd.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(Rd),i.updateMatrixWorld(),s.makeTranslation(-oa.x,-oa.y,-oa.z),Bg.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bg)}}class Dk extends Fx{constructor(e,n,i=0,s=1){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new Ek}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Pk extends Fx{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class zg{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(_n(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Df}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Df);const Vg={type:"change"},Ad={type:"start"},Ug={type:"end"};class Lk extends Wr{constructor(e,n){super(),n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new H,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Yr.ROTATE,MIDDLE:Yr.DOLLY,RIGHT:Yr.PAN},this.touches={ONE:qr.ROTATE,TWO:qr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(L){L.addEventListener("keydown",U),this._domElementKeyEvents=L},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Vg),i.update(),r=s.NONE},this.update=function(){const L=new H,ce=new Or().setFromUnitVectors(e.up,new H(0,1,0)),Me=ce.clone().invert(),Ee=new H,B=new Or,De=2*Math.PI;return function(){const He=i.object.position;L.copy(He).sub(i.target),L.applyQuaternion(ce),a.setFromVector3(L),i.autoRotate&&r===s.NONE&&D(R()),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Le=i.minAzimuthAngle,Ge=i.maxAzimuthAngle;return isFinite(Le)&&isFinite(Ge)&&(Le<-Math.PI?Le+=De:Le>Math.PI&&(Le-=De),Ge<-Math.PI?Ge+=De:Ge>Math.PI&&(Ge-=De),Le<=Ge?a.theta=Math.max(Le,Math.min(Ge,a.theta)):a.theta=a.theta>(Le+Ge)/2?Math.max(Le,a.theta):Math.min(Ge,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),L.setFromSpherical(a),L.applyQuaternion(Me),He.copy(i.target).add(L),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,d||Ee.distanceToSquared(i.object.position)>o||8*(1-B.dot(i.object.quaternion))>o?(i.dispatchEvent(Vg),Ee.copy(i.object.position),B.copy(i.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",W),i.domElement.removeEventListener("pointerdown",A),i.domElement.removeEventListener("pointercancel",re),i.domElement.removeEventListener("wheel",_e),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",Y),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",U)};const i=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=s.NONE;const o=1e-6,a=new zg,l=new zg;let c=1;const u=new H;let d=!1;const h=new et,p=new et,g=new et,m=new et,f=new et,b=new et,x=new et,_=new et,y=new et,v=[],C={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function w(){return Math.pow(.95,i.zoomSpeed)}function D(L){l.theta-=L}function N(L){l.phi-=L}const V=function(){const L=new H;return function(Me,Ee){L.setFromMatrixColumn(Ee,0),L.multiplyScalar(-Me),u.add(L)}}(),j=function(){const L=new H;return function(Me,Ee){i.screenSpacePanning===!0?L.setFromMatrixColumn(Ee,1):(L.setFromMatrixColumn(Ee,0),L.crossVectors(i.object.up,L)),L.multiplyScalar(Me),u.add(L)}}(),se=function(){const L=new H;return function(Me,Ee){const B=i.domElement;if(i.object.isPerspectiveCamera){const De=i.object.position;L.copy(De).sub(i.target);let Pe=L.length();Pe*=Math.tan(i.object.fov/2*Math.PI/180),V(2*Me*Pe/B.clientHeight,i.object.matrix),j(2*Ee*Pe/B.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(V(Me*(i.object.right-i.object.left)/i.object.zoom/B.clientWidth,i.object.matrix),j(Ee*(i.object.top-i.object.bottom)/i.object.zoom/B.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function $(L){i.object.isPerspectiveCamera?c/=L:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*L)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(L){i.object.isPerspectiveCamera?c*=L:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/L)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(L){h.set(L.clientX,L.clientY)}function ne(L){x.set(L.clientX,L.clientY)}function te(L){m.set(L.clientX,L.clientY)}function J(L){p.set(L.clientX,L.clientY),g.subVectors(p,h).multiplyScalar(i.rotateSpeed);const ce=i.domElement;D(2*Math.PI*g.x/ce.clientHeight),N(2*Math.PI*g.y/ce.clientHeight),h.copy(p),i.update()}function de(L){_.set(L.clientX,L.clientY),y.subVectors(_,x),y.y>0?$(w()):y.y<0&&q(w()),x.copy(_),i.update()}function ve(L){f.set(L.clientX,L.clientY),b.subVectors(f,m).multiplyScalar(i.panSpeed),se(b.x,b.y),m.copy(f),i.update()}function me(L){L.deltaY<0?q(w()):L.deltaY>0&&$(w()),i.update()}function ye(L){let ce=!1;switch(L.code){case i.keys.UP:se(0,i.keyPanSpeed),ce=!0;break;case i.keys.BOTTOM:se(0,-i.keyPanSpeed),ce=!0;break;case i.keys.LEFT:se(i.keyPanSpeed,0),ce=!0;break;case i.keys.RIGHT:se(-i.keyPanSpeed,0),ce=!0;break}ce&&(L.preventDefault(),i.update())}function ke(){if(v.length===1)h.set(v[0].pageX,v[0].pageY);else{const L=.5*(v[0].pageX+v[1].pageX),ce=.5*(v[0].pageY+v[1].pageY);h.set(L,ce)}}function Ue(){if(v.length===1)m.set(v[0].pageX,v[0].pageY);else{const L=.5*(v[0].pageX+v[1].pageX),ce=.5*(v[0].pageY+v[1].pageY);m.set(L,ce)}}function le(){const L=v[0].pageX-v[1].pageX,ce=v[0].pageY-v[1].pageY,Me=Math.sqrt(L*L+ce*ce);x.set(0,Me)}function Ye(){i.enableZoom&&le(),i.enablePan&&Ue()}function $e(){i.enableZoom&&le(),i.enableRotate&&ke()}function Ne(L){if(v.length==1)p.set(L.pageX,L.pageY);else{const Me=Ae(L),Ee=.5*(L.pageX+Me.x),B=.5*(L.pageY+Me.y);p.set(Ee,B)}g.subVectors(p,h).multiplyScalar(i.rotateSpeed);const ce=i.domElement;D(2*Math.PI*g.x/ce.clientHeight),N(2*Math.PI*g.y/ce.clientHeight),h.copy(p)}function Te(L){if(v.length===1)f.set(L.pageX,L.pageY);else{const ce=Ae(L),Me=.5*(L.pageX+ce.x),Ee=.5*(L.pageY+ce.y);f.set(Me,Ee)}b.subVectors(f,m).multiplyScalar(i.panSpeed),se(b.x,b.y),m.copy(f)}function O(L){const ce=Ae(L),Me=L.pageX-ce.x,Ee=L.pageY-ce.y,B=Math.sqrt(Me*Me+Ee*Ee);_.set(0,B),y.set(0,Math.pow(_.y/x.y,i.zoomSpeed)),$(y.y),x.copy(_)}function z(L){i.enableZoom&&O(L),i.enablePan&&Te(L)}function M(L){i.enableZoom&&O(L),i.enableRotate&&Ne(L)}function A(L){i.enabled!==!1&&(v.length===0&&(i.domElement.setPointerCapture(L.pointerId),i.domElement.addEventListener("pointermove",G),i.domElement.addEventListener("pointerup",Y)),Q(L),L.pointerType==="touch"?S(L):fe(L))}function G(L){i.enabled!==!1&&(L.pointerType==="touch"?T(L):xe(L))}function Y(L){ae(L),v.length===0&&(i.domElement.releasePointerCapture(L.pointerId),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",Y)),i.dispatchEvent(Ug),r=s.NONE}function re(L){ae(L)}function fe(L){let ce;switch(L.button){case 0:ce=i.mouseButtons.LEFT;break;case 1:ce=i.mouseButtons.MIDDLE;break;case 2:ce=i.mouseButtons.RIGHT;break;default:ce=-1}switch(ce){case Yr.DOLLY:if(i.enableZoom===!1)return;ne(L),r=s.DOLLY;break;case Yr.ROTATE:if(L.ctrlKey||L.metaKey||L.shiftKey){if(i.enablePan===!1)return;te(L),r=s.PAN}else{if(i.enableRotate===!1)return;K(L),r=s.ROTATE}break;case Yr.PAN:if(L.ctrlKey||L.metaKey||L.shiftKey){if(i.enableRotate===!1)return;K(L),r=s.ROTATE}else{if(i.enablePan===!1)return;te(L),r=s.PAN}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(Ad)}function xe(L){if(i.enabled!==!1)switch(r){case s.ROTATE:if(i.enableRotate===!1)return;J(L);break;case s.DOLLY:if(i.enableZoom===!1)return;de(L);break;case s.PAN:if(i.enablePan===!1)return;ve(L);break}}function _e(L){i.enabled===!1||i.enableZoom===!1||r!==s.NONE||(L.preventDefault(),i.dispatchEvent(Ad),me(L),i.dispatchEvent(Ug))}function U(L){i.enabled===!1||i.enablePan===!1||ye(L)}function S(L){switch(pe(L),v.length){case 1:switch(i.touches.ONE){case qr.ROTATE:if(i.enableRotate===!1)return;ke(),r=s.TOUCH_ROTATE;break;case qr.PAN:if(i.enablePan===!1)return;Ue(),r=s.TOUCH_PAN;break;default:r=s.NONE}break;case 2:switch(i.touches.TWO){case qr.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ye(),r=s.TOUCH_DOLLY_PAN;break;case qr.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;$e(),r=s.TOUCH_DOLLY_ROTATE;break;default:r=s.NONE}break;default:r=s.NONE}r!==s.NONE&&i.dispatchEvent(Ad)}function T(L){switch(pe(L),r){case s.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ne(L),i.update();break;case s.TOUCH_PAN:if(i.enablePan===!1)return;Te(L),i.update();break;case s.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;z(L),i.update();break;case s.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;M(L),i.update();break;default:r=s.NONE}}function W(L){i.enabled!==!1&&L.preventDefault()}function Q(L){v.push(L)}function ae(L){delete C[L.pointerId];for(let ce=0;ce<v.length;ce++)if(v[ce].pointerId==L.pointerId){v.splice(ce,1);return}}function pe(L){let ce=C[L.pointerId];ce===void 0&&(ce=new et,C[L.pointerId]=ce),ce.set(L.pageX,L.pageY)}function Ae(L){const ce=L.pointerId===v[0].pointerId?v[1]:v[0];return C[ce.pointerId]}i.domElement.addEventListener("contextmenu",W),i.domElement.addEventListener("pointerdown",A),i.domElement.addEventListener("pointercancel",re),i.domElement.addEventListener("wheel",_e,{passive:!1}),this.update()}}class Hg{constructor(e){this.mainCanvas=document.querySelector("#mainCanvas"),this.bgCanvas=document.querySelector("#backgroundCanvas"),this.configuration=e,this.renderers={main:null,supplementary:[]},this.cameras={main:null,supplementary:[]},this.orbitControls,this.lights,this.simulationBodies,this.iniStarScale=e.starScale,this.forceResize=!1,this.step=this.step.bind(this),this.scene=new bk,this.createRenderer(this.mainCanvas),this.createBGStars(),this.createCamera(this.configuration.starSystem.cameraSettings),this.createOrbitControls(),this.createLights()}createRenderer(e,n=!1){let i=new Ix({canvas:e,alpha:!0});i.setPixelRatio(window.devicePixelRatio),n?this.renderers.supplementary.push(i):this.renderers.main=i}step(){if(this.resizeRenderer(),this.oscillatesBGStars(),this.configuration.running&&this.oscillateStarGlow(),this.renderers.main.render(this.scene,this.cameras.main),this.renderers.supplementary.length>0){this.setOrbitVisibility(!1);for(var e=0;e<this.renderers.supplementary.length;e++)this.renderers.supplementary[e].render(this.scene,this.cameras.supplementary[e]);this.setOrbitVisibility(!0)}}resizeRenderer(){const e=this.renderers.main.domElement,n=e.clientWidth,i=e.clientHeight;(e.width!==n||e.height!==i||this.forceResize)&&(this.bgCanvas.width=n,this.bgCanvas.height=i,this.renderers.main.setSize(n,i,!1),this.cameras.main.aspect=e.clientWidth/e.clientHeight,this.cameras.main.updateProjectionMatrix(),this.forceResize=!1)}createCamera(e,n=!1){let i;return i=new Yn(e.fov,e.aspect,e.near,e.far),i.position.set(e.position.x,e.position.y,e.position.z),i.up.set(0,0,1),n?this.cameras.supplementary.push(i):this.cameras.main=i,i}createOrbitControls(){this.orbitControls=new Lk(this.cameras.main,this.renderers.main.domElement),this.orbitControls.target=new H(0,0,0),this.orbitControls.enablePan=!1}createLights(){{const e=new Pk(4210752,.35);this.scene.add(e)}{const e=new Dk(16777215,2,0,0);e.position.set(0,0,0),this.scene.add(e)}}createMaterial(e,n){let i=null;n==="star"?i=new bu({transparent:!0,opacity:1}):i=new _k({transparent:!0,opacity:1});const s=new Dt(e);return i.color=s,i}createBGStars(){this.bgStars=[];for(var e=0;e<this.configuration.bgStars;e++){var n={x:Math.random(),y:Math.random()};this.bgStars.push(n)}}oscillatesBGStars(){const e=this.bgCanvas.getContext("2d"),n=1.5;e.fillStyle="rgba(0,0,0,0.25)",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="rgba(255,255,255,0.25)";for(var i of this.bgStars){let s=i.x*e.canvas.width,r=i.y*e.canvas.height,o=Math.random()<.998?Math.random()*1*n:Math.random()*3*n;e.beginPath(),e.moveTo(s,r-o),e.lineTo(s+o,r),e.lineTo(s,r+o),e.lineTo(s-o,r),e.closePath(),e.fill()}}oscillateStarGlow(){let e=this.simulationBodies.star.graphicalObject.supObjects.filter(o=>o.type==="glow"),n=this.configuration.glowScale*this.configuration.starScale/this.iniStarScale;function i(o){return Math.max(n-.05,Math.min(n+.05,r.scale[o]+(Math.random()>.5?.005:-.005)))}for(var s in e){var r=e[s];r.scale.set(i("x"),i("y"),i("z"))}}countStarPixels(){let e=this.configuration.measurementDetails,n,i;e.camera.tag==="main"?n=this.cameras.main:e.camera.tag==="supplementary"&&(n=this.cameras.supplementary[e.camera.index]),e.renderer.tag==="main"?i=this.renderers.main:e.renderer.tag==="supplementary"&&(i=this.renderers.supplementary[e.renderer.index]);let s=this.simulationBodies.star.graphicalObject,r=s.geometry.parameters.radius*2*s.scale.x,o=s.material.color;o={r:Math.floor(o.r*255),g:Math.floor(o.g*255),b:Math.floor(o.b*255)};let a=this.estimatePixelSize(n,i,r),l=i.domElement.width,c=i.domElement.height,u=Math.floor(a),d=new Xs(l,c);i.setRenderTarget(d),i.setScissor(l/2-u/2,c/2-u/2,u,u),i.render(this.scene,n);let h=new Uint8Array(u*u*4);i.readRenderTargetPixels(d,l/2-u/2,c/2-u/2,u,u,h);let p=0,g=0,m=0;for(var f=0;f<h.length;f+=4){let x=this.weightPixelCount(g,m,u,u);x>.9&&h[0+f]==o.r&&h[1+f]==o.g&&h[2+f]==o.b&&(p+=x),g==u&&(g=0,m++),g++}return p+=Math.random()*(r*.1),i.setRenderTarget(null),p}estimatePixelSize(e,n,i){let s=e.fov*Math.PI/180,r=e.position.length(),o=2*Math.tan(s/2)*Math.abs(r);return n.domElement.height/o*i*1.1}weightPixelCount(e,n,i,s){return Math.pow(Math.sqrt(1-Math.pow(e/i-.5,2)-Math.pow(n/s-.5,2)),1)}setOrbitVisibility(e){for(let n of this.simulationBodies.planets)if(n.graphicalObject.visible)for(let i of n.graphicalObject.supObjects)i.visible=e;for(let n of this.simulationBodies.satellites)if(n.graphicalObject.visible)for(let i of n.graphicalObject.supObjects)i.visible=e}setForceResize(){this.forceResize=!0}}class Wg{constructor(e){this.configuration=e,this.simulationStep=e.simulationStep,this.simulationSpeed=e.simulationSpeed,this.simulationBodies}step(){for(var e=0;e<this.configuration.simulationSpeed;e++)this.stepPlanets(),this.stepSatellites()}stepPlanets(){let e=this.simulationBodies.star,n;for(var i of this.simulationBodies.planets)n=this.getAcceleration(e.physicalObject,i.physicalObject,this.configuration.planetDistanceScale),i.physicalObject.velocity.addScaledVector(n,this.configuration.simulationStep),i.physicalObject.position.addScaledVector(i.physicalObject.velocity,this.configuration.simulationStep),this.configuration.rotationEnabled&&(i.graphicalObject.rotation.y+=this.configuration.simulationStep*i.bodyConfiguration.rotationSpeed)}stepSatellites(){let e;for(var n of this.simulationBodies.satellites){let i=this.simulationBodies.planets.filter(s=>s.name===n.hostPlanet.name)[0];n.physicalObject.position.addScaledVector(i.physicalObject.velocity,this.configuration.simulationStep),n.graphicalObject.supObjects[0].position.copy(i.physicalObject.position),e=this.getAcceleration(i.physicalObject,n.physicalObject,this.configuration.satelliteDistanceScale),n.physicalObject.velocity.addScaledVector(e,this.configuration.simulationStep),n.physicalObject.position.addScaledVector(n.physicalObject.velocity,this.configuration.simulationStep),n.graphicalObject.rotation.y+=this.configuration.simulationStep*n.bodyConfiguration.rotationSpeed}}getAcceleration(e,n,i){let s=e.mass*Math.pow(i,3),r=n.position.clone();r.sub(e.position);let o=-1*Mh*s/r.lengthSq();return r.normalize(),new H(o*r.x,o*r.y,o*r.z)}}class Id{constructor(e,n,i,s,r){this.graphWorld=e,this.physicsWorld=n,this.bodyType=i,this.bodyConfiguration=s,this.simConfiguration=r,this.name=s.name,this.updateInnerConf(),this.createGlowLayers=this.createGlowLayers.bind(this),this.graphicalObject=this.createGraphicalObject(),this.physicalObject=this.createPhysicalObject()}updateInnerConf(){this.bodyType==="star"?this.sizeScale=this.simConfiguration.starScale:this.bodyType==="planet"?(this.sizeScale=this.simConfiguration.planetScale,this.distanceScale=this.simConfiguration.planetDistanceScale):this.bodyType==="satellite"&&(this.sizeScale=this.simConfiguration.satelliteScale,this.distanceScale=this.simConfiguration.satelliteDistanceScale,this.hostPlanet=this.simConfiguration.starSystem.planets.filter(e=>e.name===this.bodyConfiguration.hostPlanet)[0])}createGraphicalObject(){const e=this.bodyConfiguration.color,n=this.bodyConfiguration.radius*this.sizeScale,i=new Ff(n,20,20),s=this.graphWorld.createMaterial(e,this.bodyType);if(this.bodyConfiguration.texture){let o=new Ck().load(this.bodyConfiguration.texture);s.map=o}const r=new Ui(i,s);return r.boundingBox=new $o().setFromObject(r),this.bodyType==="star"?r.castShadow=!1:r.castShadow=!0,r.receiveShadow=!0,r.position.set(this.bodyConfiguration.initialPosition.x,this.bodyConfiguration.initialPosition.y,this.bodyConfiguration.initialPosition.z),r.visible=this.bodyConfiguration.visible,this.bodyConfiguration.texture&&r.rotateX(Math.PI/2),r.supObjects=[],this.createSupplementaryGraphicalObjects(r),this.graphWorld.scene.add(r),r}createPhysicalObject(){return{position:new H(this.bodyConfiguration.initialPosition.x,this.bodyConfiguration.initialPosition.y,this.bodyConfiguration.initialPosition.z),velocity:new H(this.bodyConfiguration.initialVelocity.x,this.bodyConfiguration.initialVelocity.y,this.bodyConfiguration.initialVelocity.z),mass:this.bodyConfiguration.mass}}createSupplementaryGraphicalObjects(e){this.bodyType==="star"&&this.bodyConfiguration.glowLayers>0&&this.createGlowLayers(e),(this.bodyType==="planet"||this.bodyType==="satellite")&&this.createOrbits(e)}createGlowLayers(e){const n=this.bodyConfiguration.color,i=this.bodyConfiguration.radius,s=this.bodyConfiguration.glowLayers;let r=1.1;for(var o=0;o<s;o++){var a=new Ui(new Of(i*r*this.sizeScale,2),new bu({color:n,transparent:!0,opacity:.1}));a.castShadow=!1,a.type="glow",r+=.1,a.visible=this.bodyConfiguration.visible,e.supObjects.push(a),this.graphWorld.scene.add(a)}}createOrbits(e){let i=new vk(this.bodyConfiguration.eccentricity*this.bodyConfiguration.semiMajor*this.distanceScale,0,this.bodyConfiguration.semiMajor*this.distanceScale,this.bodyConfiguration.semiMinor*this.distanceScale,0,2*Math.PI,!1,0).getPoints(150),s=new Pi().setFromPoints(i),r=new kx({color:this.simConfiguration.starSystem.star.color,transparent:!0,opacity:.2}),o=new yk(s,r);o.visible=this.bodyConfiguration.visible,o.rotation.order="ZYX";let a=0,l=0;this.bodyType==="satellite"&&(l=this.hostPlanet.longitudePerihelion,this.hostPlanet.tilted&&this.simConfiguration.orbitInclination?a=this.hostPlanet.orbitInclination:a=0);let c=a+this.bodyConfiguration.orbitInclination,u=l+this.bodyConfiguration.longitudePerihelion;this.bodyConfiguration.tilted&&this.simConfiguration.orbitInclination&&(o.rotation.y=wi.degToRad(c)),o.rotation.z=wi.degToRad(u),this.bodyType==="satellite"?o.position.add(this.hostPlanet.initialPosition):this.bodyType,e.supObjects.push(o),this.graphWorld.scene.add(o)}physicsToGraphical(){this.graphicalObject.position.set(this.physicalObject.position.x,this.physicalObject.position.y,this.physicalObject.position.z)}rotateBody(e,n,i){let s=new Ys(e,n,i);this.physicalObject.position.applyEuler(s),this.physicalObject.velocity.applyEuler(s)}}class Rk{constructor(e){this.mounted=!0,this.initConfiguration=new xm({bgStars:200}),this.configuration=Object.assign({},this.initConfiguration),window.simConfiguration=this.configuration,this.graphEngine=new Hg(this.configuration),this.physicsEngine=new Wg(this.configuration),this.stats=e,this.stepCallback=function(){},this.simulationStep=this.simulationStep.bind(this),this.setOrbitInclination=this.setOrbitInclination.bind(this),this.setStarScale=this.setStarScale.bind(this)}start(){this.setupWorld(this.configuration),this.simulationStep()}resetSimulation(){Object.assign(this.configuration,this.initConfiguration),this.setPlanetDistanceScale(this.configuration.planetDistanceScale),this.setSatelliteDistanceScale(this.configuration.satelliteDistanceScale)}newConfig(e){this.initConfiguration=new xm(e),this.configuration=Object.assign({},this.initConfiguration),this.graphEngine=new Hg(this.configuration),this.physicsEngine=new Wg(this.configuration),this.setupWorld(this.configuration),this.graphEngine.setForceResize()}simulationStep(){this.stats.begin(),this.configuration.running&&(this.configuration.time+=this.configuration.simulationStep*this.configuration.simulationSpeed,this.physicsEngine.step()),this.physicsToGraphical(),this.graphEngine.step(),this.stepCallback(),this.stats.end(),requestAnimationFrame(this.simulationStep)}setupWorld(){this.setInitialPhysicsInfo(),this.simulationBodies={star:null,planets:[],satellites:[]};let e=this.configuration.starSystem.star,n=new Id(this.graphEngine,this.physicsEngine,"star",e,this.configuration);this.simulationBodies.star=n;for(var i of this.configuration.starSystem.planets){let r=new Id(this.graphEngine,this.physicsEngine,"planet",i,this.configuration);this.simulationBodies.planets.push(r)}for(var s of this.configuration.starSystem.satellites){let r=new Id(this.graphEngine,this.physicsEngine,"satellite",s,this.configuration);this.simulationBodies.satellites.push(r)}this.physicsEngine.simulationBodies=this.simulationBodies,this.graphEngine.simulationBodies=this.simulationBodies,this.bodyMap=this.mapSimulationBodies()}setInitialPhysicsInfo(){this.configuration.starSystem.star.initialPosition=new H(0,0,0),this.configuration.starSystem.star.initialVelocity=new H(0,0,0);let e=Math.PI,n,i,s,r,o;for(var a of this.configuration.starSystem.planets)a.initialPosition=new H(0,0,0),a.initialPosition.setX((Math.cos(e)*a.semiMajor+a.eccentricity*a.semiMajor)*this.configuration.planetDistanceScale),a.initialPosition.setY(Math.sin(e)*a.semiMinor*this.configuration.planetDistanceScale),a.initialPosition.setZ(0*this.configuration.planetDistanceScale),a.initialVelocity=new H(0,0,0),s=this.configuration.starSystem.star.mass*Math.pow(this.configuration.planetDistanceScale,3),r=Math.sqrt(Mh*s*(2/a.initialPosition.length()-1/(a.semiMajor*this.configuration.planetDistanceScale))),a.initialVelocity.setX(Math.sin(e)*r),a.initialVelocity.setY(-1*Math.cos(e)*r),a.initialVelocity.setZ(0),a.tilted&&this.configuration.orbitInclination?i=wi.degToRad(a.orbitInclination):i=0,o=new Ys(0,i,wi.degToRad(a.longitudePerihelion),"ZYX"),a.initialPositionBeforeRotation=Object.assign({},a.initialPosition),a.initialPosition.applyEuler(o),a.initialVelocity.applyEuler(o);for(var l of this.configuration.starSystem.satellites){l.initialPosition=new H(0,0,0),l.initialPosition.setX((Math.cos(e)*l.semiMajor+l.eccentricity*l.semiMajor)*this.configuration.satelliteDistanceScale),l.initialPosition.setY(Math.sin(e)*l.semiMinor*this.configuration.satelliteDistanceScale),l.initialPosition.setZ(0*this.configuration.satelliteDistanceScale),l.initialVelocity=new H(0,0,0),n=this.configuration.starSystem.planets.filter(u=>u.name===l.hostPlanet)[0],s=n.mass*Math.pow(this.configuration.satelliteDistanceScale,3),r=Math.sqrt(Mh*s*(2/l.initialPosition.length()-1/(l.semiMajor*this.configuration.satelliteDistanceScale))),l.initialVelocity.setX(-1*Math.sin(e)*r),l.initialVelocity.setY(Math.cos(e)*r),l.initialVelocity.setZ(0),n.tilted&&this.configuration.orbitInclination?i=wi.degToRad(n.orbitInclination):i=0,l.tilted&&this.configuration.orbitInclination?i+=wi.degToRad(l.orbitInclination):i+=0;let c=n.longitudePerihelion+l.longitudePerihelion;o=new Ys(0,i,wi.degToRad(c),"ZYX"),l.initialPosition.applyEuler(o),l.initialVelocity.applyEuler(o),l.initialPosition.add(n.initialPosition)}}physicsToGraphical(){for(var e of this.simulationBodies.planets)e.physicsToGraphical();for(var n of this.simulationBodies.satellites)n.physicsToGraphical()}initToCurrentPhysics(){this.configuration.time=0;for(var e of this.simulationBodies.planets){let i=this.configuration.starSystem.planets.filter(s=>s.name===e.name)[0];e.physicalObject.position.copy(i.initialPosition),e.physicalObject.velocity.copy(i.initialVelocity)}for(var n of this.simulationBodies.satellites){let i=this.configuration.starSystem.satellites.filter(s=>s.name===n.name)[0];n.physicalObject.position.copy(i.initialPosition),n.physicalObject.velocity.copy(i.initialVelocity)}}mapSimulationBodies(){let e={};e[this.simulationBodies.star.name]=this.simulationBodies.star;for(var n of this.simulationBodies.planets)e[n.name]=n;for(var i of this.simulationBodies.satellites)e[i.name]=i;return e}setSimulationSpeed(e){e>0?this.configuration.simulationSpeed=e:this.configuration.simulationSpeed=0}setSimulationStep(e){this.configuration.simulationStep=e}setStepCallback(e){this.stepCallback=e}setStarScale(e){let n=e/this.configuration.starScale;this.simulationBodies.star.graphicalObject.scale.multiplyScalar(n),this.configuration.starScale=e}setGlowScale(e){this.configuration.glowScale=e}setPlanetScale(e){let n=e/this.configuration.planetScale;for(var i of this.simulationBodies.planets)i.graphicalObject.scale.multiplyScalar(n);this.configuration.planetScale=e}setSatelliteScale(e){let n=e/this.configuration.satelliteScale;for(var i of this.simulationBodies.satellites)i.graphicalObject.scale.multiplyScalar(n);this.configuration.satelliteScale=e}setPlanetDistanceScale(e){this.configuration.planetDistanceScale=e,this.setInitialPhysicsInfo(),this.initToCurrentPhysics();for(var n of this.simulationBodies.planets){let s=n.graphicalObject.supObjects.pop();this.graphEngine.scene.remove(s),n.updateInnerConf(),n.createOrbits(n.graphicalObject)}for(var i of this.simulationBodies.satellites){let s=i.graphicalObject.supObjects.pop();this.graphEngine.scene.remove(s),i.updateInnerConf(),i.createOrbits(i.graphicalObject)}}setSatelliteDistanceScale(e){this.configuration.satelliteDistanceScale=e,this.setInitialPhysicsInfo(),this.initToCurrentPhysics();for(var n of this.simulationBodies.satellites){let i=n.graphicalObject.supObjects.pop();this.graphEngine.scene.remove(i),n.updateInnerConf(),n.createOrbits(n.graphicalObject)}}setOrbitInclination(e){let n,i,s,r,o,a;e!==this.configuration.orbitInclination?this.configuration.orbitInclination?r=-1:r=1:r=0;for(var l of this.simulationBodies.planets){n=this.configuration.starSystem.planets.filter(c=>c.name===l.name)[0],o=this.simulationBodies.satellites.filter(c=>c.hostPlanet.name===l.name),i=wi.degToRad(n.longitudePerihelion),s=wi.degToRad(r*n.orbitInclination),a=l.graphicalObject.supObjects[0],a.rotation.y+=s,l.rotateBody(0,0,-i),l.rotateBody(0,s,0),l.rotateBody(0,0,i);for(let c of o)c.rotateBody(0,0,-i),c.rotateBody(0,s,0),c.rotateBody(0,0,i),c.graphicalObject.supObjects[0].rotation.y+=s,c.graphicalObject.supObjects[0].position.copy(l.physicalObject.position)}for(let c of this.simulationBodies.satellites){n=this.configuration.starSystem.satellites.filter(d=>d.name===c.name)[0];let u=this.bodyMap[c.hostPlanet.name];i=wi.degToRad(n.longitudePerihelion+u.bodyConfiguration.longitudePerihelion),s=wi.degToRad(r*n.orbitInclination),a=c.graphicalObject.supObjects[0],a.rotation.y+=s,c.physicalObject.position.sub(u.physicalObject.position),c.rotateBody(0,0,-i),c.rotateBody(0,s,0),c.rotateBody(0,0,i),c.physicalObject.position.add(u.physicalObject.position)}this.configuration.orbitInclination=e}setRotation(e){this.configuration.rotationEnabled=e}setOrbitVisibility(e){var n;for(var i of this.simulationBodies.planets)if(i.graphicalObject.visible)for(n of i.graphicalObject.supObjects)n.visible=e;for(var s of this.simulationBodies.satellites)if(s.graphicalObject.visible)for(n of s.graphicalObject.supObjects)n.visible=e}setBodyVisibility(e,n){let i=this.bodyMap[e];i.graphicalObject.visible=n;for(var s of i.graphicalObject.supObjects)s.visible=n}setRunning(e){this.configuration.running=e}setCameraMode(e){let n=this.configuration.measurementDetails,i=this.graphEngine.orbitControls;e==="view"?(i.update(),i.enabled=!0,this.setOrbitVisibility(!0),this.configuration.cameraMode=e):e==="measurement"?(this.setCameraPosition(0,n.distance,0,n.camera.tag,n.camera.index),i.update(),i.enabled=!1,this.setOrbitVisibility(!1),this.configuration.cameraMode=e):console.warn(`WARNING: There are only two available modes: "view" or "measurement". Please enter a valid mode. Mode used: ${e}`)}setMeasurementDistance(e){this.configuration.measurementDetails.distance=e,this.setCameraPosition(0,e,0)}setCameraPosition(e,n,i,s="main",r=0){s==="main"?this.graphEngine.cameras.main.position.set(e,n,i):s==="supplementary"&&this.graphEngine.cameras.supplementary[r].position.set(e,n,i),this.graphEngine.orbitControls.update()}}var Ia=function(){var t=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++t%e.children.length)},!1);function n(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";t=u}var s=(performance||Date).now(),r=s,o=0,a=n(new Ia.Panel("FPS","#0ff","#002")),l=n(new Ia.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=n(new Ia.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:n,showPanel:i,begin:function(){s=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(l.update(u-s,200),u>=r+1e3&&(a.update(o*1e3/(u-r),100),r=u,o=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){s=this.end()},domElement:e,setMode:i}};Ia.Panel=function(t,e,n){var i=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,u=2*o,d=3*o,h=15*o,p=74*o,g=30*o,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var f=m.getContext("2d");return f.font="bold "+9*o+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=n,f.fillRect(0,0,a,l),f.fillStyle=e,f.fillText(t,c,u),f.fillRect(d,h,p,g),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(d,h,p,g),{dom:m,update:function(b,x){i=Math.min(i,b),s=Math.max(s,b),f.fillStyle=n,f.globalAlpha=1,f.fillRect(0,0,a,h),f.fillStyle=e,f.fillText(r(b)+" "+t+" ("+r(i)+"-"+r(s)+")",c,u),f.drawImage(m,d+o,h,p-o,g,d,h,p-o,g),f.fillRect(d+p-o,h,o,g),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(d+p-o,h,o,r((1-b/x)*g))}}};const Ak=c0({name:"SimulationControls",components:{Accordion:bf,AccordionTab:yf,Toast:xM,UpperSection:f1,AdvancedModeSwitch:w1,DefaultSystems:S1,RandomSystems:F1,CustomSystems:mT,ScalesSection:bT,VisibilitySection:xT,SimulationParameters:_T,BrightnessDetectionParameters:wT,CollectionDataVisualizer:tP,BrightnessDetector:eP},data(){return{simulation:{},isRunning:!0,isMeasuringBrightness:!1,isTooltipDisabled:!1,isAdvancedSettingsActive:!1,scales:{starSize:40,planetSize:1e3,satelliteSize:1e3,planetDistance:1,satelliteDistance:20},isVisible:{orbits:!0,star:!0,planets:!0,satellites:!1},areOrbitsTilted:!0,isRotationEnabled:!1,measurements:{isCollectionVisible:!1,chartDataPoints:new nP,pointsPerSecond:5,plotSizeLimit:500,interval:null,isCollectingData:!1,collectionToDisplay:null,currentMeasurement:{x:null,y:null}}}},created(){var t=new Ia;t.domElement.style.position="absolute",t.domElement.style["z-index"]="unset",t.domElement.style.bottom=0,t.domElement.style.top="unset",t.domElement.style.right=0,t.domElement.style.left="unset",t.domElement.style.opacity=.2,document.body.appendChild(t.domElement),this.simulation=new Rk(t),this.simulation.start()},mounted(){this.ensureUIConfigurations()},methods:{ensureUIConfigurations(){this.scales.starSize=this.simulation.configuration.starScale,this.scales.planetSize=this.simulation.configuration.planetScale,this.scales.satelliteSize=this.simulation.configuration.satelliteScale,this.scales.planetDistance=this.simulation.configuration.planetDistanceScale,this.scales.satelliteDistance=this.simulation.configuration.satelliteDistanceScale,this.simulation.configuration.running=this.isRunning,this.simulation.setCameraMode(this.isMeasuringBrightness?"measurement":"view"),this.setStarVisibility(this.isVisible.star),this.setPlanetVisibility(this.isVisible.planets),this.setOrbitVisibility(this.isVisible.orbits),this.setSatelliteVisibility(this.isVisible.satellites),this.setOrbitInclination(this.areOrbitsTilted)},setOrbitVisibility(t){this.simulation.setOrbitVisibility(t)},setStarVisibility(t){let e=this.simulation.simulationBodies.star.name;this.simulation.setBodyVisibility(e,t)},setPlanetVisibility(t){for(var e of this.simulation.simulationBodies.planets){let n=e.name;this.simulation.setBodyVisibility(n,t)}this.simulation.setOrbitVisibility(this.isVisible.orbits)},setSatelliteVisibility(t){for(var e of this.simulation.simulationBodies.satellites){let n=e.name;this.simulation.setBodyVisibility(n,t)}},setOrbitInclination(t){this.simulation.setOrbitInclination(t)},getCurrentOptions(){return{simulationSpeed:this.simulation.configuration.simulationSpeed,simulationStep:this.simulation.configuration.simulationStep}},setDefaultSystem(t){let e=this.getCurrentOptions();e.starSystem=t,this.simulation.newConfig(e),this.resetDataPoints(),this.ensureUIConfigurations()},setRandomSystem(t){t===null&&(this.$refs.randomSystems.generateRandomNumber(),t=this.$refs.randomSystems.randomSeed);let e=this.getCurrentOptions();e.mode="random",e.randomSeed=t,this.simulation.newConfig(e),this.resetDataPoints(),this.ensureUIConfigurations()},setCustomSystem(t){if(t){let e=this.getCurrentOptions();e.mode="custom",e.customDetails=t,this.simulation.newConfig(e),this.resetDataPoints(),this.ensureUIConfigurations()}},retrieveDataFromSimulation(){this.isMeasuringBrightness&&this.isRunning&&(this.measureBrightness(),this.measurements.isCollectingData&&this.$refs.brightnessDetector.collectDataFromMeasurements(this.measurements.currentMeasurement,this.measurements.plotSizeLimit))},measureBrightness(){let t=vt(this.simulation.graphEngine).countStarPixels(),e={x:this.simulation.configuration.time,y:t.toFixed()};this.measurements.currentMeasurement=e;let n=this.measurements.chartDataPoints.measurement;n.maxY=Math.max(n.maxY,e.y),n.minY=Math.min(n.minY,e.y);let i=n.data;for(i.push(e);i.length>this.measurements.plotSizeLimit;)i.shift()},openCollectionVisualizer(t){this.measurements.collectionToDisplay=t.id,this.measurements.isCollectionVisible=!0,this.measurements.chartDataPoints.collection.data=t.data},closeCollectionVisualizer(){this.measurements.collectionToDisplay=null,this.measurements.isCollectionVisible=!1},resetDataPoints(){this.measurements.chartDataPoints.reset(),this.$refs.brightnessDetector.reset(),this.simulation.configuration.time=0},setMeasurerInterval(){this.measurements.interval!==null&&clearInterval(this.measurements.interval),this.measurements.interval=setInterval(this.retrieveDataFromSimulation,1e3/this.measurements.pointsPerSecond)},clearMeasurerInterval(){this.measurements.interval!==null&&(clearInterval(this.measurements.interval),this.measurements.interval=null)}},watch:{isRunning:function(){this.simulation.setRunning(this.isRunning)},isMeasuringBrightness:function(){this.isMeasuringBrightness?(this.isVisible.orbits=!1,this.resetDataPoints(),this.setMeasurerInterval()):(this.isVisible.orbits=!0,this.clearMeasurerInterval()),this.simulation.setCameraMode(this.isMeasuringBrightness?"measurement":"view")},isTooltipDisabled:function(){this.isTooltipDisabled?this.$toast.add({severity:"warn",summary:"Aviso",detail:"Dicas Desativadas",life:3e3}):this.$toast.add({severity:"success",summary:"Sucesso",detail:"Dicas Ativadas",life:3e3})},"scales.starSize":function(){this.simulation.setStarScale(this.scales.starSize)},"scales.planetSize":function(){this.simulation.setPlanetScale(this.scales.planetSize)},"scales.satelliteSize":function(){this.simulation.setSatelliteScale(this.scales.satelliteSize)},"scales.planetDistance":function(){this.simulation.setPlanetDistanceScale(this.scales.planetDistance)},"scales.satelliteDistance":function(){this.simulation.setSatelliteDistanceScale(this.scales.satelliteDistance)},"isVisible.orbits":function(){this.setOrbitVisibility(this.isVisible.orbits)},"isVisible.star":function(){this.setStarVisibility(this.isVisible.star)},"isVisible.planets":function(){this.setPlanetVisibility(this.isVisible.planets)},"isVisible.satellites":function(){this.setSatelliteVisibility(this.isVisible.satellites)},areOrbitsTilted:function(){this.setOrbitInclination(this.areOrbitsTilted)},isRotationEnabled:function(){this.simulation.configuration.rotationEnabled=this.isRotationEnabled},"measurements.pointsPerSecond":function(){this.setMeasurerInterval()}}}),Ik={class:"max-h-screen overflow-auto p-card absolute z-10",style:{overflow:"overlay"}};function kk(t,e,n,i,s,r){const o=Ke("UpperSection"),a=Ke("AdvancedModeSwitch"),l=Ke("DefaultSystems"),c=Ke("AccordionTab"),u=Ke("RandomSystems"),d=Ke("CustomSystems"),h=Ke("Accordion"),p=Ke("ScalesSection"),g=Ke("VisibilitySection"),m=Ke("SimulationParameters"),f=Ke("BrightnessDetectionParameters"),b=Ke("BrightnessDetector"),x=Ke("CollectionDataVisualizer"),_=Ke("Toast");return k(),X(je,null,[we("div",Ik,[he(o,{isRunning:t.isRunning,"onUpdate:isRunning":e[0]||(e[0]=y=>t.isRunning=y),isMeasuringBrightness:t.isMeasuringBrightness,"onUpdate:isMeasuringBrightness":e[1]||(e[1]=y=>t.isMeasuringBrightness=y),isTooltipDisabled:t.isTooltipDisabled,"onUpdate:isTooltipDisabled":e[2]||(e[2]=y=>t.isTooltipDisabled=y)},null,8,["isRunning","isMeasuringBrightness","isTooltipDisabled"]),he(h,null,{default:Xe(()=>[he(c,{header:t.$t("Settings")},{default:Xe(()=>[he(a,{isAdvancedSettingsActive:t.isAdvancedSettingsActive,"onUpdate:isAdvancedSettingsActive":e[3]||(e[3]=y=>t.isAdvancedSettingsActive=y),isTooltipDisabled:t.isTooltipDisabled},null,8,["isAdvancedSettingsActive","isTooltipDisabled"]),he(h,{multiple:!0},{default:Xe(()=>[he(c,{header:t.$t("Star Systems")},{default:Xe(()=>[he(h,null,{default:Xe(()=>[he(c,{header:t.$t("Defaults")},{default:Xe(()=>[he(l,{starSystemLibrary:t.simulation.configuration.starSystemLibrary,currentStarSystemName:t.simulation.configuration.starSystem.name,onUpdateStarSystem:t.setDefaultSystem},null,8,["starSystemLibrary","currentStarSystemName","onUpdateStarSystem"])]),_:1},8,["header"]),he(c,{header:t.$t("Random")},{default:Xe(()=>[he(u,{ref:"randomSystems",isTooltipDisabled:t.isTooltipDisabled,onUpdateStarSystem:t.setRandomSystem},null,8,["isTooltipDisabled","onUpdateStarSystem"])]),_:1},8,["header"]),he(c,{header:t.$t("Custom")},{default:Xe(()=>[he(d,{ref:"customSystems",isTooltipDisabled:t.isTooltipDisabled,isAdvancedSettingsActive:t.isAdvancedSettingsActive,onUpdateStarSystem:t.setCustomSystem},null,8,["isTooltipDisabled","isAdvancedSettingsActive","onUpdateStarSystem"])]),_:1},8,["header"])]),_:1})]),_:1},8,["header"]),he(c,{header:t.$t("Visual Representation")},{default:Xe(()=>[he(h,{multiple:!0},{default:Xe(()=>[he(c,{header:t.$t("Scales")},{default:Xe(()=>[he(p,{isAdvancedSettingsActive:t.isAdvancedSettingsActive,isTooltipDisabled:t.isTooltipDisabled,starSize:t.scales.starSize,"onUpdate:starSize":e[4]||(e[4]=y=>t.scales.starSize=y),planetSize:t.scales.planetSize,"onUpdate:planetSize":e[5]||(e[5]=y=>t.scales.planetSize=y),satelliteSize:t.scales.satelliteSize,"onUpdate:satelliteSize":e[6]||(e[6]=y=>t.scales.satelliteSize=y),planetDistance:t.scales.planetDistance,"onUpdate:planetDistance":e[7]||(e[7]=y=>t.scales.planetDistance=y),satelliteDistance:t.scales.satelliteDistance,"onUpdate:satelliteDistance":e[8]||(e[8]=y=>t.scales.satelliteDistance=y)},null,8,["isAdvancedSettingsActive","isTooltipDisabled","starSize","planetSize","satelliteSize","planetDistance","satelliteDistance"])]),_:1},8,["header"]),he(c,{header:t.$t("Visibility")},{default:Xe(()=>[he(g,{isAdvancedSettingsActive:t.isAdvancedSettingsActive,isTooltipDisabled:t.isTooltipDisabled,areOrbitsVisible:t.isVisible.orbits,"onUpdate:areOrbitsVisible":e[9]||(e[9]=y=>t.isVisible.orbits=y),isStarVisible:t.isVisible.star,"onUpdate:isStarVisible":e[10]||(e[10]=y=>t.isVisible.star=y),arePlanetsVisible:t.isVisible.planets,"onUpdate:arePlanetsVisible":e[11]||(e[11]=y=>t.isVisible.planets=y),areSatellitesVisible:t.isVisible.satellites,"onUpdate:areSatellitesVisible":e[12]||(e[12]=y=>t.isVisible.satellites=y)},null,8,["isAdvancedSettingsActive","isTooltipDisabled","areOrbitsVisible","isStarVisible","arePlanetsVisible","areSatellitesVisible"])]),_:1},8,["header"])]),_:1})]),_:1},8,["header"]),he(c,{header:t.$t("Simulation Parameters")},{default:Xe(()=>[he(m,{isAdvancedSettingsActive:t.isAdvancedSettingsActive,isTooltipDisabled:t.isTooltipDisabled,simulationSpeed:t.simulation.configuration.simulationSpeed,"onUpdate:simulationSpeed":e[13]||(e[13]=y=>t.simulation.configuration.simulationSpeed=y),simulationStep:t.simulation.configuration.simulationStep,"onUpdate:simulationStep":e[14]||(e[14]=y=>t.simulation.configuration.simulationStep=y),areOrbitsTilted:t.areOrbitsTilted,"onUpdate:areOrbitsTilted":e[15]||(e[15]=y=>t.areOrbitsTilted=y),isRotationEnabled:t.isRotationEnabled,"onUpdate:isRotationEnabled":e[16]||(e[16]=y=>t.isRotationEnabled=y)},null,8,["isAdvancedSettingsActive","isTooltipDisabled","simulationSpeed","simulationStep","areOrbitsTilted","isRotationEnabled"])]),_:1},8,["header"]),he(c,{header:t.$t("Brightness Detection")},{default:Xe(()=>[he(f,{isTooltipDisabled:t.isTooltipDisabled,plotSizeLimit:t.measurements.plotSizeLimit,"onUpdate:plotSizeLimit":e[17]||(e[17]=y=>t.measurements.plotSizeLimit=y),pointsPerSecond:t.measurements.pointsPerSecond,"onUpdate:pointsPerSecond":e[18]||(e[18]=y=>t.measurements.pointsPerSecond=y)},null,8,["isTooltipDisabled","plotSizeLimit","pointsPerSecond"])]),_:1},8,["header"])]),_:1})]),_:1},8,["header"])]),_:1})]),he(b,{ref:"brightnessDetector",isMeasuringBrightness:t.isMeasuringBrightness,"onUpdate:isMeasuringBrightness":e[19]||(e[19]=y=>t.isMeasuringBrightness=y),isCollectingData:t.measurements.isCollectingData,"onUpdate:isCollectingData":e[20]||(e[20]=y=>t.measurements.isCollectingData=y),chartDataPoints:t.measurements.chartDataPoints.measurement.data,isTooltipDisabled:t.isTooltipDisabled,collectionToDisplay:t.measurements.collectionToDisplay,onResetDataPoints:t.resetDataPoints,onOpenCollectionVisualizer:t.openCollectionVisualizer,onCloseCollectionVisualizer:t.closeCollectionVisualizer},null,8,["isMeasuringBrightness","isCollectingData","chartDataPoints","isTooltipDisabled","collectionToDisplay","onResetDataPoints","onOpenCollectionVisualizer","onCloseCollectionVisualizer"]),he(x,{collectionToDisplay:t.measurements.collectionToDisplay,isCollectionVisible:t.measurements.isCollectionVisible,"onUpdate:isCollectionVisible":e[21]||(e[21]=y=>t.measurements.isCollectionVisible=y),chartDataPoints:t.measurements.chartDataPoints.collection.data},null,8,["collectionToDisplay","isCollectionVisible","chartDataPoints"]),he(_,{class:"z-40"})],64)}var Ok=kt(Ak,[["render",kk]]);const Fk=t=>(dw("data-v-0606f76e"),t=t(),hw(),t),Nk=Fk(()=>we("div",{id:"canvasContainer"},[we("canvas",{id:"backgroundCanvas"}),we("canvas",{id:"mainCanvas"})],-1)),Bk={__name:"App",setup(t){let e=st(!1);return Wo(()=>{e.value=!0}),(n,i)=>(k(),X("main",null,[ge(e)?(k(),Ve(Ok,{key:0})):Ce("",!0),Nk]))}};var zk=kt(Bk,[["__scopeId","data-v-0606f76e"]]);const Gg={ripple:!1,inputStyle:"outlined",locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"},filterMatchModeOptions:{text:[un.STARTS_WITH,un.CONTAINS,un.NOT_CONTAINS,un.ENDS_WITH,un.EQUALS,un.NOT_EQUALS],numeric:[un.EQUALS,un.NOT_EQUALS,un.LESS_THAN,un.LESS_THAN_OR_EQUAL_TO,un.GREATER_THAN,un.GREATER_THAN_OR_EQUAL_TO],date:[un.DATE_IS,un.DATE_IS_NOT,un.DATE_BEFORE,un.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}},Vk=Symbol();var Uk={install:(t,e)=>{let n=e?{...Gg,...e}:{...Gg};const i={config:Ho(n)};t.config.globalProperties.$primevue=i,t.provide(Vk,i)}},Hk={install:t=>{const e={add:n=>{is.emit("add",n)},removeGroup:n=>{is.emit("remove-group",n)},removeAllGroups:()=>{is.emit("remove-all-groups")}};t.config.globalProperties.$toast=e,t.provide(Y0,e)}};function Wk(t){t.$_ptooltipModifiers.focus?(t.addEventListener("focus",zx),t.addEventListener("blur",Vx)):(t.addEventListener("mouseenter",Nx),t.addEventListener("mouseleave",Bx),t.addEventListener("click",Ux))}function Gk(t){t.$_ptooltipModifiers.focus?(t.removeEventListener("focus",zx),t.removeEventListener("blur",Vx)):(t.removeEventListener("mouseenter",Nx),t.removeEventListener("mouseleave",Bx),t.removeEventListener("click",Ux))}function jk(t){t.$_ptooltipScrollHandler||(t.$_ptooltipScrollHandler=new lu(t,function(){hl(t)})),t.$_ptooltipScrollHandler.bindScrollListener()}function $k(t){t.$_ptooltipScrollHandler&&t.$_ptooltipScrollHandler.unbindScrollListener()}function Nx(t){Hx(t.currentTarget)}function Bx(t){hl(t.currentTarget)}function zx(t){Hx(t.currentTarget)}function Vx(t){hl(t.currentTarget)}function Ux(t){hl(t.currentTarget)}function Hx(t){if(t.$_ptooltipDisabled)return;let e=Kk(t);Xk(t),oe.fadeIn(e,250),window.addEventListener("resize",function n(){oe.isTouchDevice()||hl(t),this.removeEventListener("resize",n)}),jk(t),gn.set("tooltip",e,t.$_ptooltipZIndex)}function hl(t){Wx(t),$k(t)}function Gr(t){return document.getElementById(t.$_ptooltipId)}function Kk(t){const e=Do()+"_tooltip";t.$_ptooltipId=e;let n=document.createElement("div");n.id=e;let i=document.createElement("div");i.className="p-tooltip-arrow",n.appendChild(i);let s=document.createElement("div");return s.className="p-tooltip-text",t.$_ptooltipEscape?s.innerHTML=t.$_ptooltipValue:(s.innerHTML="",s.appendChild(document.createTextNode(t.$_ptooltipValue))),n.appendChild(s),document.body.appendChild(n),n.style.display="inline-block",t.$_ptooltipFitContent&&(n.style.width="fit-content"),n}function Wx(t){if(t){let e=Gr(t);e&&e.parentElement&&(gn.clear(e),document.body.removeChild(e)),t.$_ptooltipId=null}}function Xk(t){const e=t.$_ptooltipModifiers;e.top?(aa(t),ri(t)&&(la(t),ri(t)&&aa(t))):e.left?(Od(t),ri(t)&&(kd(t),ri(t)&&(aa(t),ri(t)&&(la(t),ri(t)&&Od(t))))):e.bottom?(la(t),ri(t)&&(aa(t),ri(t)&&la(t))):(kd(t),ri(t)&&(Od(t),ri(t)&&(aa(t),ri(t)&&(la(t),ri(t)&&kd(t)))))}function xu(t){let e=t.getBoundingClientRect(),n=e.left+oe.getWindowScrollLeft(),i=e.top+oe.getWindowScrollTop();return{left:n,top:i}}function kd(t){vu(t,"right");let e=Gr(t),n=xu(t),i=n.left+oe.getOuterWidth(t),s=n.top+(oe.getOuterHeight(t)-oe.getOuterHeight(e))/2;e.style.left=i+"px",e.style.top=s+"px"}function Od(t){vu(t,"left");let e=Gr(t),n=xu(t),i=n.left-oe.getOuterWidth(e),s=n.top+(oe.getOuterHeight(t)-oe.getOuterHeight(e))/2;e.style.left=i+"px",e.style.top=s+"px"}function aa(t){vu(t,"top");let e=Gr(t),n=xu(t),i=n.left+(oe.getOuterWidth(t)-oe.getOuterWidth(e))/2,s=n.top-oe.getOuterHeight(e);e.style.left=i+"px",e.style.top=s+"px"}function la(t){vu(t,"bottom");let e=Gr(t),n=xu(t),i=n.left+(oe.getOuterWidth(t)-oe.getOuterWidth(e))/2,s=n.top+oe.getOuterHeight(t);e.style.left=i+"px",e.style.top=s+"px"}function vu(t,e){let n=Gr(t);n.style.left=-999+"px",n.style.top=-999+"px",n.className=`p-tooltip p-component p-tooltip-${e} ${t.$_ptooltipClass||""}`}function ri(t){let e=Gr(t),n=e.getBoundingClientRect(),i=n.top,s=n.left,r=oe.getOuterWidth(e),o=oe.getOuterHeight(e),a=oe.getViewport();return s+r>a.width||s<0||i<0||i+o>a.height}function Fd(t){return oe.hasClass(t,"p-inputwrapper")?oe.findSingle(t,"input"):t}function jg(t){return t.modifiers&&Object.keys(t.modifiers).length?t.modifiers:t.arg&&typeof t.arg=="object"?Object.entries(t.arg).reduce((e,[n,i])=>((n==="event"||n==="position")&&(e[i]=!0),e),{}):{}}const Yk={beforeMount(t,e){let n=Fd(t);if(n.$_ptooltipModifiers=jg(e),e.value)typeof e.value=="string"?(n.$_ptooltipValue=e.value,n.$_ptooltipDisabled=!1,n.$_ptooltipEscape=!1,n.$_ptooltipClass=null,n.$_ptooltipFitContent=!0):(n.$_ptooltipValue=e.value.value,n.$_ptooltipDisabled=e.value.disabled||!1,n.$_ptooltipEscape=e.value.escape||!1,n.$_ptooltipClass=e.value.class,n.$_ptooltipFitContent=e.value.fitContent||!0);else return;n.$_ptooltipZIndex=e.instance.$primevue&&e.instance.$primevue.config&&e.instance.$primevue.config.zIndex.tooltip,Wk(n)},unmounted(t){let e=Fd(t);Wx(e),Gk(e),e.$_ptooltipScrollHandler&&(e.$_ptooltipScrollHandler.destroy(),e.$_ptooltipScrollHandler=null),gn.clear(t)},updated(t,e){let n=Fd(t);n.$_ptooltipModifiers=jg(e),e.value&&(typeof e.value=="string"?(n.$_ptooltipValue=e.value,n.$_ptooltipDisabled=!1,n.$_ptooltipEscape=!1,n.$_ptooltipClass=null):(n.$_ptooltipValue=e.value.value,n.$_ptooltipDisabled=e.value.disabled||!1,n.$_ptooltipEscape=e.value.escape||!1,n.$_ptooltipClass=e.value.class))}};/*!
 * Chart.js v3.8.0
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const Gx=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function jx(t,e,n){const i=n||(o=>Array.prototype.slice.call(o));let s=!1,r=[];return function(...o){r=i(o),s||(s=!0,Gx.call(window,()=>{s=!1,t.apply(e,r)}))}}function qk(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Nf=t=>t==="start"?"left":t==="end"?"right":"center",Tn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Zk=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function Ji(){}const Jk=function(){let t=0;return function(){return t++}}();function Ct(t){return t===null||typeof t=="undefined"}function Et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ut(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}const Ut=t=>(typeof t=="number"||t instanceof Number)&&isFinite(+t);function ai(t,e){return Ut(t)?t:e}function qe(t,e){return typeof t=="undefined"?e:t}const Qk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:t/e,$x=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function nt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function mt(t,e,n,i){let s,r,o;if(Et(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(ut(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Bc(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function zc(t){if(Et(t))return t.map(zc);if(ut(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=zc(t[n[s]]);return e}return t}function Kx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eO(t,e,n,i){if(!Kx(t))return;const s=e[t],r=n[t];ut(s)&&ut(r)?el(s,r,i):e[t]=zc(r)}function el(t,e,n){const i=Et(e)?e:[e],s=i.length;if(!ut(t))return t;n=n||{};const r=n.merger||eO;for(let o=0;o<s;++o){if(e=i[o],!ut(e))continue;const a=Object.keys(e);for(let l=0,c=a.length;l<c;++l)r(a[l],t,e,n)}return t}function ka(t,e){return el(t,e,{merger:tO})}function tO(t,e,n){if(!Kx(t))return;const i=e[t],s=n[t];ut(i)&&ut(s)?ka(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=zc(s))}const nO="",iO=".";function $g(t,e){const n=t.indexOf(iO,e);return n===-1?t.length:n}function qs(t,e){if(e===nO)return t;let n=0,i=$g(e,n);for(;t&&i>n;)t=t[e.slice(n,i)],n=i+1,i=$g(e,n);return t}function Bf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qt=t=>typeof t!="undefined",Zs=t=>typeof t=="function",Kg=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function sO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Tt=Math.PI,It=2*Tt,rO=It+Tt,Vc=Number.POSITIVE_INFINITY,Xx=Tt/180,Wt=Tt/2,ca=Tt/4,Xg=Tt*2/3,ci=Math.log10,fi=Math.sign;function Yg(t){const e=Math.round(t);t=Oa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ci(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function oO(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function tl(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Oa(t,e,n){return Math.abs(t-e)<n}function aO(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Yx(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function pn(t){return t*(Tt/180)}function zf(t){return t*(180/Tt)}function qg(t){if(!Ut(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function qx(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Tt&&(r+=It),{angle:r,distance:s}}function nl(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function lO(t,e){return(t-e+rO)%It-Tt}function Xn(t){return(t%It+It)%It}function il(t,e,n,i){const s=Xn(t),r=Xn(e),o=Xn(n),a=Xn(r-s),l=Xn(o-s),c=Xn(s-r),u=Xn(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function mn(t,e,n){return Math.max(e,Math.min(n,t))}function cO(t){return mn(t,-32768,32767)}function ls(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}const sc=t=>t===0||t===1,Zg=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*It/n)),Jg=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*It/n)+1,Fa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Wt)+1,easeOutSine:t=>Math.sin(t*Wt),easeInOutSine:t=>-.5*(Math.cos(Tt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>sc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>sc(t)?t:Zg(t,.075,.3),easeOutElastic:t=>sc(t)?t:Jg(t,.075,.3),easeInOutElastic(t){return sc(t)?t:t<.5?.5*Zg(t*2,.1125,.45):.5+.5*Jg(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Fa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Fa.easeInBounce(t*2)*.5:Fa.easeOutBounce(t*2-1)*.5+.5};/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function fl(t){return t+.5|0}const Os=(t,e,n)=>Math.max(Math.min(t,n),e);function _a(t){return Os(fl(t*2.55),0,255)}function Hs(t){return Os(fl(t*255),0,255)}function ss(t){return Os(fl(t/2.55)/100,0,1)}function Qg(t){return Os(fl(t*100),0,100)}const oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ih=[..."0123456789ABCDEF"],uO=t=>Ih[t&15],dO=t=>Ih[(t&240)>>4]+Ih[t&15],rc=t=>(t&240)>>4===(t&15),hO=t=>rc(t.r)&&rc(t.g)&&rc(t.b)&&rc(t.a);function fO(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&oi[t[1]]*17,g:255&oi[t[2]]*17,b:255&oi[t[3]]*17,a:e===5?oi[t[4]]*17:255}:(e===7||e===9)&&(n={r:oi[t[1]]<<4|oi[t[2]],g:oi[t[3]]<<4|oi[t[4]],b:oi[t[5]]<<4|oi[t[6]],a:e===9?oi[t[7]]<<4|oi[t[8]]:255})),n}const pO=(t,e)=>t<255?e(t):"";function mO(t){var e=hO(t)?uO:dO;return t?"#"+e(t.r)+e(t.g)+e(t.b)+pO(t.a,e):void 0}const gO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zx(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function bO(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function yO(t,e,n){const i=Zx(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function xO(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function Vf(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=xO(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Uf(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Hs)}function Hf(t,e,n){return Uf(Zx,t,e,n)}function vO(t,e,n){return Uf(yO,t,e,n)}function _O(t,e,n){return Uf(bO,t,e,n)}function Jx(t){return(t%360+360)%360}function wO(t){const e=gO.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?_a(+e[5]):Hs(+e[5]));const s=Jx(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=vO(s,r,o):e[1]==="hsv"?i=_O(s,r,o):i=Hf(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function SO(t,e){var n=Vf(t);n[0]=Jx(n[0]+e),n=Hf(n),t.r=n[0],t.g=n[1],t.b=n[2]}function MO(t){if(!t)return;const e=Vf(t),n=e[0],i=Qg(e[1]),s=Qg(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${ss(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const eb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function CO(){const t={},e=Object.keys(tb),n=Object.keys(eb);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,eb[r]);r=parseInt(tb[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let oc;function TO(t){oc||(oc=CO(),oc.transparent=[0,0,0,0]);const e=oc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const EO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function DO(t){const e=EO.exec(t);let n=255,i,s,r;if(!!e){if(e[7]!==i){const o=+e[7];n=e[8]?_a(o):Os(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?_a(i):Os(i,0,255)),s=255&(e[4]?_a(s):Os(s,0,255)),r=255&(e[6]?_a(r):Os(r,0,255)),{r:i,g:s,b:r,a:n}}}function PO(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ss(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Nd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ho=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function LO(t,e,n){const i=ho(ss(t.r)),s=ho(ss(t.g)),r=ho(ss(t.b));return{r:Hs(Nd(i+n*(ho(ss(e.r))-i))),g:Hs(Nd(s+n*(ho(ss(e.g))-s))),b:Hs(Nd(r+n*(ho(ss(e.b))-r))),a:t.a+n*(e.a-t.a)}}function ac(t,e,n){if(t){let i=Vf(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Hf(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Qx(t,e){return t&&Object.assign(e||{},t)}function nb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Hs(t[3]))):(e=Qx(t,{r:0,g:0,b:0,a:1}),e.a=Hs(e.a)),e}function RO(t){return t.charAt(0)==="r"?DO(t):wO(t)}class Uc{constructor(e){if(e instanceof Uc)return e;const n=typeof e;let i;n==="object"?i=nb(e):n==="string"&&(i=fO(e)||TO(e)||RO(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Qx(this._rgb);return e&&(e.a=ss(e.a)),e}set rgb(e){this._rgb=nb(e)}rgbString(){return this._valid?PO(this._rgb):void 0}hexString(){return this._valid?mO(this._rgb):void 0}hslString(){return this._valid?MO(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=LO(this._rgb,e._rgb,n)),this}clone(){return new Uc(this.rgb)}alpha(e){return this._rgb.a=Hs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=fl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ac(this._rgb,2,e),this}darken(e){return ac(this._rgb,2,-e),this}saturate(e){return ac(this._rgb,1,e),this}desaturate(e){return ac(this._rgb,1,-e),this}rotate(e){return SO(this._rgb,e),this}}function ev(t){return new Uc(t)}function tv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ib(t){return tv(t)?t:ev(t)}function Bd(t){return tv(t)?t:ev(t).saturate(.5).darken(.1).hexString()}const Nr=Object.create(null),kh=Object.create(null);function Na(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function zd(t,e,n){return typeof e=="string"?el(Na(t,e),n):el(Na(t,""),e)}class AO{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Bd(i.backgroundColor),this.hoverBorderColor=(n,i)=>Bd(i.borderColor),this.hoverColor=(n,i)=>Bd(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,n){return zd(this,e,n)}get(e){return Na(this,e)}describe(e,n){return zd(kh,e,n)}override(e,n){return zd(Nr,e,n)}route(e,n,i,s){const r=Na(this,e),o=Na(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ut(l)?Object.assign({},c,l):qe(l,c)},set(l){this[a]=l}}})}}var yt=new AO({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function IO(t){return!t||Ct(t.size)||Ct(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Hc(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function kO(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&Et(d)!==!0)o=Hc(t,s,r,o,d);else if(Et(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Et(h)&&(o=Hc(t,s,r,o,h));t.restore();const p=r.length/2;if(p>n.length){for(l=0;l<p;l++)delete s[r[l]];r.splice(0,p)}return o}function ur(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function sb(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function sl(t,e,n,i){let s,r,o,a,l;const c=e.pointStyle,u=e.rotation,d=e.radius;let h=(u||0)*Xx;if(c&&typeof c=="object"&&(s=c.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(h),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),t.restore();return}if(!(isNaN(d)||d<=0)){switch(t.beginPath(),c){default:t.arc(n,i,d,0,It),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(h)*d,i-Math.cos(h)*d),h+=Xg,t.lineTo(n+Math.sin(h)*d,i-Math.cos(h)*d),h+=Xg,t.lineTo(n+Math.sin(h)*d,i-Math.cos(h)*d),t.closePath();break;case"rectRounded":l=d*.516,a=d-l,r=Math.cos(h+ca)*a,o=Math.sin(h+ca)*a,t.arc(n-r,i-o,l,h-Tt,h-Wt),t.arc(n+o,i-r,l,h-Wt,h),t.arc(n+r,i+o,l,h,h+Wt),t.arc(n-o,i+r,l,h+Wt,h+Tt),t.closePath();break;case"rect":if(!u){a=Math.SQRT1_2*d,t.rect(n-a,i-a,2*a,2*a);break}h+=ca;case"rectRot":r=Math.cos(h)*d,o=Math.sin(h)*d,t.moveTo(n-r,i-o),t.lineTo(n+o,i-r),t.lineTo(n+r,i+o),t.lineTo(n-o,i+r),t.closePath();break;case"crossRot":h+=ca;case"cross":r=Math.cos(h)*d,o=Math.sin(h)*d,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r);break;case"star":r=Math.cos(h)*d,o=Math.sin(h)*d,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r),h+=ca,r=Math.cos(h)*d,o=Math.sin(h)*d,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r);break;case"line":r=Math.cos(h)*d,o=Math.sin(h)*d,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(h)*d,i+Math.sin(h)*d);break}t.fill(),e.borderWidth>0&&t.stroke()}}function rl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function pl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ml(t){t.restore()}function OO(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function FO(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Br(t,e,n,i,s,r={}){const o=Et(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,NO(t,r),l=0;l<o.length;++l)c=o[l],a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Ct(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),BO(t,n,i,c,r),i+=s.lineHeight;t.restore()}function NO(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ct(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function BO(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Fo(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-Wt,Tt,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Tt,Wt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,Wt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-Wt,!0),t.lineTo(n+o.topLeft,i)}const zO=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),VO=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function UO(t,e){const n=(""+t).match(zO);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const HO=t=>+t||0;function Wf(t,e){const n={},i=ut(e),s=i?Object.keys(e):e,r=ut(t)?i?o=>qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=HO(r(o));return n}function nv(t){return Wf(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ws(t){return Wf(t,["topLeft","topRight","bottomLeft","bottomRight"])}function rn(t){const e=nv(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function $t(t,e){t=t||{},e=e||yt.font;let n=qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=qe(t.style,e.style);i&&!(""+i).match(VO)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:qe(t.family,e.family),lineHeight:UO(qe(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:qe(t.weight,e.weight),string:""};return s.string=IO(s),s}function wa(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Et(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function WO(t,e,n){const{min:i,max:s}=t,r=$x(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function tr(t,e){return Object.assign(Object.create(t),e)}function Gf(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const cs=(t,e,n)=>Gf(t,n,i=>t[i][e]<n),GO=(t,e,n)=>Gf(t,n,i=>t[i][e]>=n);function jO(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const iv=["push","pop","shift","splice","unshift"];function $O(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iv.forEach(n=>{const i="_onData"+Bf(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function rb(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(iv.forEach(r=>{delete t[r]}),delete t._chartjs)}function sv(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function jf(t,e=[""],n=t,i,s=()=>t[0]){Qt(i)||(i=lv("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:o=>jf([o,...t],e,n,i)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete t[0][a],!0},get(o,a){return ov(o,a,()=>e3(a,e,t,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,a){return ab(o).includes(a)},ownKeys(o){return ab(o)},set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function No(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:rv(t,i),setContext:r=>No(t,r,n,i),override:r=>No(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return ov(r,o,()=>XO(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function rv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Zs(n)?n:()=>n,isIndexable:Zs(i)?i:()=>i}}const KO=(t,e)=>t?t+Bf(e):e,$f=(t,e)=>ut(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ov(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function XO(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Zs(a)&&o.isScriptable(e)&&(a=YO(e,a,t,n)),Et(a)&&a.length&&(a=qO(e,a,t,o.isIndexable)),$f(e,a)&&(a=No(a,s,r&&r[e],o)),a}function YO(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(r,o||i),a.delete(t),$f(t,e)&&(e=Kf(s._scopes,s,t,e)),e}function qO(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(Qt(r.index)&&i(t))e=e[r.index%e.length];else if(ut(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=Kf(c,s,t,u);e.push(No(d,r,o&&o[t],a))}}return e}function av(t,e,n){return Zs(t)?t(e,n):t}const ZO=(t,e)=>t===!0?e:typeof t=="string"?qs(e,t):void 0;function JO(t,e,n,i,s){for(const r of e){const o=ZO(n,r);if(o){t.add(o);const a=av(o._fallback,n,s);if(Qt(a)&&a!==n&&a!==i)return a}else if(o===!1&&Qt(i)&&n!==i)return null}return!1}function Kf(t,e,n,i){const s=e._rootScopes,r=av(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=ob(a,o,n,r||n,i);return l===null||Qt(r)&&r!==n&&(l=ob(a,o,r,l,i),l===null)?!1:jf(Array.from(a),[""],s,r,()=>QO(e,n,i))}function ob(t,e,n,i,s){for(;n;)n=JO(t,e,n,i,s);return n}function QO(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Et(s)&&ut(n)?n:s}function e3(t,e,n,i){let s;for(const r of e)if(s=lv(KO(r,t),n),Qt(s))return $f(t,s)?Kf(n,i,t,s):s}function lv(t,e){for(const n of e){if(!n)continue;const i=n[t];if(Qt(i))return i}}function ab(t){let e=t._keys;return e||(e=t._keys=t3(t._scopes)),e}function t3(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function cv(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(qs(u,r),c)};return o}const n3=Number.EPSILON||1e-14,Bo=(t,e)=>e<t.length&&!t[e].skip&&t[e],uv=t=>t==="x"?"y":"x";function i3(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=nl(r,s),l=nl(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function s3(t,e,n){const i=t.length;let s,r,o,a,l,c=Bo(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Bo(t,u+1),!(!l||!c)){if(Oa(e[u],0,n3)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function r3(t,e,n="x"){const i=uv(n),s=t.length;let r,o,a,l=Bo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Bo(t,c+1),!a)continue;const u=a[n],d=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=d-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=d+r*e[c])}}function o3(t,e="x"){const n=uv(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Bo(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Bo(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?fi(s[o-1])!==fi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}s3(t,s,r),r3(t,r,e)}function lc(t,e,n){return Math.max(Math.min(t,n),e)}function a3(t,e){let n,i,s,r,o,a=rl(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&rl(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=lc(s.cp1x,e.left,e.right),s.cp1y=lc(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=lc(s.cp2x,e.left,e.right),s.cp2y=lc(s.cp2y,e.top,e.bottom)))}function l3(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")o3(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=i3(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&a3(t,n)}function dv(){return typeof window!="undefined"&&typeof document!="undefined"}function Xf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const _u=t=>window.getComputedStyle(t,null);function c3(t,e){return _u(t).getPropertyValue(e)}const u3=["top","right","bottom","left"];function Ar(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=u3[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const d3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function h3(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(d3(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function br(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=_u(n),r=s.boxSizing==="border-box",o=Ar(s,"padding"),a=Ar(s,"border","width"),{x:l,y:c,box:u}=h3(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:p,height:g}=e;return r&&(p-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/p*n.width/i),y:Math.round((c-h)/g*n.height/i)}}function f3(t,e,n){let i,s;if(e===void 0||n===void 0){const r=Xf(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=_u(r),l=Ar(a,"border","width"),c=Ar(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Wc(a.maxWidth,r,"clientWidth"),s=Wc(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||Vc,maxHeight:s||Vc}}const Vd=t=>Math.round(t*10)/10;function p3(t,e,n,i){const s=_u(t),r=Ar(s,"margin"),o=Wc(s.maxWidth,t,"clientWidth")||Vc,a=Wc(s.maxHeight,t,"clientHeight")||Vc,l=f3(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Ar(s,"border","width"),h=Ar(s,"padding");c-=h.width+d.width,u-=h.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=Vd(Math.min(c,o,l.maxWidth)),u=Vd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Vd(c/2)),{width:c,height:u}}function lb(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=s/i,t.width=r/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const m3=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function cb(t,e){const n=c3(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function yr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function g3(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function b3(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=yr(t,s,n),a=yr(s,r,n),l=yr(r,e,n),c=yr(o,a,n),u=yr(a,l,n);return yr(c,u,n)}const ub=new Map;function y3(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ub.get(n);return i||(i=new Intl.NumberFormat(t,e),ub.set(n,i)),i}function gl(t,e,n){return y3(e,n).format(t)}const x3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},v3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Co(t,e,n){return t?x3(e,n):v3()}function hv(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function fv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function pv(t){return t==="angle"?{between:il,compare:lO,normalize:Xn}:{between:ls,compare:(e,n)=>e-n,normalize:e=>e}}function db({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function _3(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=pv(i),l=e.length;let{start:c,end:u,loop:d}=t,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(e[c%l][i]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function mv(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=pv(i),{start:u,end:d,loop:h,style:p}=_3(t,e,n),g=[];let m=!1,f=null,b,x,_;const y=()=>l(s,_,b)&&a(s,_)!==0,v=()=>a(r,b)===0||l(r,_,b),C=()=>m||y(),R=()=>!m||v();for(let w=u,D=u;w<=d;++w)x=e[w%o],!x.skip&&(b=c(x[i]),b!==_&&(m=l(b,s,r),f===null&&C()&&(f=a(b,s)===0?w:D),f!==null&&R()&&(g.push(db({start:f,end:w,loop:h,count:o,style:p})),f=null),D=w,_=b));return f!==null&&g.push(db({start:f,end:d,loop:h,count:o,style:p})),g}function gv(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=mv(i[s],t.points,e);r.length&&n.push(...r)}return n}function w3(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function S3(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function M3(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=w3(n,s,r,i);if(i===!0)return hb(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return hb(t,S3(n,o,l,c),n,e)}function hb(t,e,n,i){return!i||!i.setContext||!n?e:C3(t,e,n,i)}function C3(t,e,n,i){const s=t._chart.getContext(),r=fb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,d=e[0].start,h=d;function p(g,m,f,b){const x=a?-1:1;if(g!==m){for(g+=l;n[g%l].skip;)g-=x;for(;n[m%l].skip;)m+=x;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:f,style:b}),u=b,d=m%l)}}for(const g of e){d=a?d:g.start;let m=n[d%l],f;for(h=d+1;h<=g.end;h++){const b=n[h%l];f=fb(i.setContext(tr(s,{type:"segment",p0:m,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),T3(f,u)&&p(d,h-1,g.loop,u),m=b,u=f}d<h-1&&p(d,h-1,g.loop,u)}return c}function fb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function T3(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v3.8.0
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class E3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Gx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var es=new E3;const pb="transparent",D3={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=ib(t||pb),s=i.valid&&ib(e||pb);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class P3{constructor(e,n,i,s){const r=n[i];s=wa([e.to,s,r,e.from]);const o=wa([e.from,r,s]);this._active=!0,this._fn=e.fn||D3[e.type||typeof o],this._easing=Fa[e.easing]||Fa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=wa([e.to,n,s,e.from]),this._from=wa([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}const L3=["x","y","borderWidth","radius","tension"],R3=["color","borderColor","backgroundColor"];yt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const A3=Object.keys(yt.animation);yt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"});yt.set("animations",{colors:{type:"color",properties:R3},numbers:{type:"number",properties:L3}});yt.describe("animations",{_fallback:"animation"});yt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}});class Yf{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ut(e))return;const n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ut(s))return;const r={};for(const o of A3)r[o]=s[o];(Et(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,r)})})}_animateOptions(e,n){const i=n.options,s=k3(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&I3(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let d=r[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}r[c]=d=new P3(h,e,c,u),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return es.add(this._chart,i),!0}}function I3(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function k3(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function mb(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function O3(t,e,n){if(n===!1)return!1;const i=mb(t,n),s=mb(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function F3(t){let e,n,i,s;return ut(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function bv(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function gb(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=t.values[l],Ut(c)&&(r||e===0||fi(e)===fi(c))&&(e+=c)}return e}}function N3(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function bb(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function B3(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function z3(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function V3(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function yb(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function xb(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=B3(r,o,i),d=e.length;let h;for(let p=0;p<d;++p){const g=e[p],{[l]:m,[c]:f}=g,b=g._stacks||(g._stacks={});h=b[c]=V3(s,u,m),h[a]=f,h._top=yb(h,o,!0,i.type),h._bottom=yb(h,o,!1,i.type)}}function Ud(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function U3(t,e){return tr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function H3(t,e,n){return tr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ua(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(!!i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n]}}}const Hd=t=>t==="reset"||t==="none",vb=(t,e)=>e?t:Object.assign({},t),W3=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:bv(n,!0),values:null};class Gi{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=bb(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&ua(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(d,h,p,g)=>d==="x"?h:d==="r"?g:p,r=n.xAxisID=qe(i.xAxisID,Ud(e,"x")),o=n.yAxisID=qe(i.yAxisID,Ud(e,"y")),a=n.rAxisID=qe(i.rAxisID,Ud(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&rb(this._data,this),e._stacked&&ua(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ut(n))this._data=N3(n);else if(i!==n){if(i){rb(i,this);const s=this._cachedMeta;ua(s),s._parsed=[]}n&&Object.isExtensible(n)&&$O(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=bb(n.vScale,n),n.stack!==i.stack&&(s=!0,ua(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&xb(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{Et(s[e])?h=this.parseArrayData(i,s,e,n):ut(s[e])?h=this.parseObjectData(i,s,e,n):h=this.parsePrimitiveData(i,s,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);i._sorted=l}o&&xb(this,h)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(s);let h,p,g;for(h=0,p=s;h<p;++h)g=h+i,d[h]={[a]:u||r.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+i,d=n[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,h,p;for(u=0,d=s;u<d;++u)h=u+i,p=n[h],c[u]={x:r.parse(qs(p,a),h),y:o.parse(qs(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:bv(s,!0),values:n._stacks[e.axis]};return gb(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=gb(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=W3(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=z3(a);let h,p;function g(){p=s[h];const m=p[a.axis];return!Ut(p[e.axis])||u>m||d<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,e,p,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],Ut(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=F3(qe(this.options.clip,O3(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=H3(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=U3(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&Qt(i);if(a)return vb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(yt.elements[e]),g=()=>this.getContext(i,s),m=c.resolveNamedOptions(h,p,g,d);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(vb(m,l))),m}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,n))}const c=new Yf(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Hd(e)||this.chart._animationsDisabled}updateElement(e,n,i,s){Hd(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!Hd(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&ua(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Gi.defaults={};Gi.prototype.datasetElementType=null;Gi.prototype.dataElementType=null;function G3(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=sv(i.sort((s,r)=>s-r))}return t._cache.$bar}function j3(t){const e=t.iScale,n=G3(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Qt(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function $3(t,e,n,i){const s=n.barThickness;let r,o;return Ct(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function K3(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function X3(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function yv(t,e,n,i){return Et(t)?X3(t,e,n,i):e[n.axis]=n.parse(t,i),e}function _b(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(yv(h,d,r,c));return l}function Wd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Y3(t,e,n){return t!==0?fi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function q3(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function Z3(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}const{start:o,end:a,reverse:l,top:c,bottom:u}=q3(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[wb(u,o,a,l)]=!0,s=c)),r[wb(s,o,a,l)]=!0,t.borderSkipped=r}function wb(t,e,n,i){return i?(t=J3(t,e,n),t=Sb(t,n,e)):t=Sb(t,e,n),t}function J3(t,e,n){return t===e?n:t===n?e:t}function Sb(t,e,n){return t==="start"?e:t==="end"?n:t}function Q3(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class wu extends Gi{parsePrimitiveData(e,n,i,s){return _b(e,n,i,s)}parseArrayData(e,n,i,s){return _b(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,p,g,m;for(h=i,p=i+s;h<p;++h)m=n[h],g={},g[r.axis]=r.parse(qs(m,c),h),d.push(yv(qs(m,u),g,o,h));return d}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=Wd(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),d=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(d),p=this.includeOptions(s,h);this.updateSharedOptions(h,s,d);for(let g=n;g<n+i;g++){const m=this.getParsed(g),f=r||Ct(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,u),x=(m._stacks||{})[a.axis],_={horizontal:c,base:f.base,enableBorderRadius:!x||Wd(m._custom)||o===x._top||o===x._bottom,x:c?f.head:b.center,y:c?b.center:f.head,height:c?b.size:Math.abs(f.size),width:c?Math.abs(f.size):b.size};p&&(_.options=h||this.resolveDataElementOptions(g,e[g].active?"active":s));const y=_.options||e[g].options;Z3(_,y,x,o),Q3(_,y,u.ratio),this.updateElement(e[g],g,_,s)}}_getStacks(e,n){const s=this._cachedMeta.iScale,r=s.getMatchingVisibleMetas(this._type),o=s.options.stacked,a=r.length,l=[];let c,u;for(c=0;c<a;++c)if(u=r[c],!!u.controller.options.grouped){if(typeof n!="undefined"){const d=u.controller.getParsed(n)[u.controller._cachedMeta.vScale.axis];if(Ct(d)||isNaN(d))continue}if((o===!1||l.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===e)break}return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||j3(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i},options:{base:s,minBarLength:r}}=this,o=s||0,a=this.getParsed(e),l=a._custom,c=Wd(l);let u=a[n.axis],d=0,h=i?this.applyStack(n,a,i):u,p,g;h!==u&&(d=h-u,h=u),c&&(u=l.barStart,h=l.barEnd-l.barStart,u!==0&&fi(u)!==fi(l.barEnd)&&(d=0),d+=u);const m=!Ct(s)&&!c?s:d;let f=n.getPixelForValue(m);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+h):p=f,g=p-f,Math.abs(g)<r){g=Y3(g,n,o)*r,u===o&&(f-=g/2);const b=n.getPixelForDecimal(0),x=n.getPixelForDecimal(1),_=Math.min(b,x),y=Math.max(b,x);f=Math.max(Math.min(f,y),_),p=f+g}if(f===n.getPixelForValue(o)){const b=fi(g)*n.getLineWidthForValue(o)/2;f+=b,g-=b}return{size:g,base:f,head:p,center:p+g/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=qe(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?K3(e,n,s,c):$3(e,n,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}wu.id="bar";wu.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};wu.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Su extends Gi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,s){const r=super.parsePrimitiveData(e,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,n,i,s){const r=super.parseArrayData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=qe(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,n,i,s){const r=super.parseObjectData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=qe(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:i,yScale:s}=n,r=this.getParsed(e),o=i.getLabelForValue(r.x),a=s.getLabelForValue(r.y),l=r._custom;return{label:n.label,value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,l=this.resolveDataElementOptions(n,s),c=this.getSharedOptions(l),u=this.includeOptions(s,c),d=o.axis,h=a.axis;for(let p=n;p<n+i;p++){const g=e[p],m=!r&&this.getParsed(p),f={},b=f[d]=r?o.getPixelForDecimal(.5):o.getPixelForValue(m[d]),x=f[h]=r?a.getBasePixel():a.getPixelForValue(m[h]);f.skip=isNaN(b)||isNaN(x),u&&(f.options=this.resolveDataElementOptions(p,g.active?"active":s),r&&(f.options.radius=0)),this.updateElement(g,p,f,s)}this.updateSharedOptions(c,s,l)}resolveDataElementOptions(e,n){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=qe(i&&i._custom,r),s}}Su.id="bubble";Su.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};Su.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function eF(t,e,n){let i=1,s=1,r=0,o=0;if(e<It){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),p=(_,y,v)=>il(_,a,l,!0)?1:Math.max(y,y*n,v,v*n),g=(_,y,v)=>il(_,a,l,!0)?-1:Math.min(y,y*n,v,v*n),m=p(0,c,d),f=p(Wt,u,h),b=g(Tt,c,d),x=g(Tt+Wt,u,h);i=(m-b)/2,s=(f-x)/2,r=-(m+b)/2,o=-(f+x)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class Yo extends Gi{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(ut(i[e])){const{key:l="value"}=this._parsing;r=c=>+qs(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return pn(this.options.rotation-90)}_getCircumference(){return pn(this.options.circumference)}_getRotationExtents(){let e=It,n=-It;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Qk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:g,offsetY:m}=eF(d,u,l),f=(i.width-o)/h,b=(i.height-o)/p,x=Math.max(Math.min(f,b)/2,0),_=$x(this.options.radius,x),y=Math.max(_*l,0),v=(_-y)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,s.total=this.calculateTotal(),this.outerRadius=_-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/It)}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=r&&c.animateScale,p=h?0:this.innerRadius,g=h?0:this.outerRadius,m=this.resolveDataElementOptions(n,s),f=this.getSharedOptions(m),b=this.includeOptions(s,f);let x=this._getRotation(),_;for(_=0;_<n;++_)x+=this._circumference(_,r);for(_=n;_<n+i;++_){const y=this._circumference(_,r),v=e[_],C={x:u+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+y,circumference:y,outerRadius:g,innerRadius:p};b&&(C.options=f||this.resolveDataElementOptions(_,v.active?"active":s)),x+=y,this.updateElement(v,_,C,s)}this.updateSharedOptions(f,s,m)}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,s;for(s=0;s<n.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?It*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=gl(n._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Yo.id="doughnut";Yo.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};Yo.descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"};Yo.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((i,s)=>{const o=t.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){let e=t.label;const n=": "+t.formattedValue;return Et(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class bl extends Gi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=tF(n,s,o);this._drawStart=a,this._drawCount=l,nF(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),d=this.getSharedOptions(u),h=this.includeOptions(s,d),p=o.axis,g=a.axis,{spanGaps:m,segment:f}=this.options,b=tl(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||s==="none";let _=n>0&&this.getParsed(n-1);for(let y=n;y<n+i;++y){const v=e[y],C=this.getParsed(y),R=x?v:{},w=Ct(C[g]),D=R[p]=o.getPixelForValue(C[p],y),N=R[g]=r||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[g],y);R.skip=isNaN(D)||isNaN(N)||w,R.stop=y>0&&Math.abs(C[p]-_[p])>b,f&&(R.parsed=C,R.raw=c.data[y]),h&&(R.options=d||this.resolveDataElementOptions(y,v.active?"active":s)),x||this.updateElement(v,y,R,s),_=C}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}bl.id="line";bl.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};bl.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function tF(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(s=mn(Math.min(cs(a,o.axis,c).lo,n?i:cs(e,l,o.getPixelForValue(c)).lo),0,i-1)),h?r=mn(Math.max(cs(a,o.axis,u).hi+1,n?0:cs(e,l,o.getPixelForValue(u)).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function nF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}class Mu extends Gi{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=gl(n._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,n,i,s){return cv.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*Tt;let p=h,g;const m=360/this.countVisibleElements();for(g=0;g<n;++g)p+=this._computeAngle(g,s,m);for(g=n;g<n+i;g++){const f=e[g];let b=p,x=p+this._computeAngle(g,s,m),_=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=x,r&&(l.animateScale&&(_=0),l.animateRotate&&(b=x=h));const y={x:u,y:d,innerRadius:0,outerRadius:_,startAngle:b,endAngle:x,options:this.resolveDataElementOptions(g,f.active?"active":s)};this.updateElement(f,g,y,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?pn(this.resolveDataElementOptions(e,n).angle||i):0}}Mu.id="polarArea";Mu.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};Mu.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((i,s)=>{const o=t.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(t){return t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class qf extends Yo{}qf.id="pie";qf.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Cu extends Gi{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,s){return cv.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,h=o?r.yCenter:u.y,p={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,a,p,s)}}}Cu.id="radar";Cu.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};Cu.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Tu extends bl{}Tu.id="scatter";Tu.defaults={showLine:!1,fill:!1};Tu.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(t){return"("+t.label+", "+t.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var iF=Object.freeze({__proto__:null,BarController:wu,BubbleController:Su,DoughnutController:Yo,LineController:bl,PolarAreaController:Mu,PieController:qf,RadarController:Cu,ScatterController:Tu});function dr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Oh{constructor(e){this.options=e||{}}formats(){return dr()}parse(e,n){return dr()}format(e,n){return dr()}add(e,n,i){return dr()}diff(e,n,i){return dr()}startOf(e,n,i){return dr()}endOf(e,n){return dr()}}Oh.override=function(t){Object.assign(Oh.prototype,t)};var sF={_date:Oh};function rF(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?GO:cs;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(r,e,n-u),h=l(r,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function yl(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:h}=rF(r[a],e,o,s);for(let p=d;p<=h;++p){const g=u[p];g.skip||i(g,c,p)}}}function oF(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Gd(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||yl(t,n,e,function(a,l,c){!s&&!rl(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function aF(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=qx(o,{x:e.x,y:e.y});il(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return yl(t,n,e,r),s}function lF(t,e,n,i,s,r){let o=[];const a=oF(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,s);if(i&&!p)return;const g=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(g))&&!p)return;const f=a(e,g);f<l?(o=[{element:u,datasetIndex:d,index:h}],l=f):f===l&&o.push({element:u,datasetIndex:d,index:h})}return yl(t,n,e,c),o}function jd(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?aF(t,e,n,s):lF(t,e,n,i,s,r)}function Mb(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return yl(t,n,e,(l,c,u)=>{l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var cF={evaluateInteractionItems:yl,modes:{index(t,e,n,i){const s=br(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Gd(t,s,r,i,o):jd(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Gd(t,s,r,i,o):jd(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Gd(t,s,r,i,o)},nearest(t,e,n,i){const s=br(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return jd(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=br(e,t);return Mb(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=br(e,t);return Mb(t,s,"y",n.intersect,i)}}};const xv=["left","top","right","bottom"];function da(t,e){return t.filter(n=>n.pos===e)}function Cb(t,e){return t.filter(n=>xv.indexOf(n.pos)===-1&&n.box.axis===e)}function ha(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function uF(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function dF(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!xv.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function hF(t,e){const n=dF(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function fF(t){const e=uF(t),n=ha(e.filter(c=>c.box.fullSize),!0),i=ha(da(e,"left"),!0),s=ha(da(e,"right")),r=ha(da(e,"top"),!0),o=ha(da(e,"bottom")),a=Cb(e,"x"),l=Cb(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:da(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function Tb(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function vv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function pF(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!ut(s)){n.size&&(t[s]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,t[s]+=n.size}r.getPadding&&vv(o,r.getPadding());const a=Math.max(0,e.outerWidth-Tb(o,t,"left","right")),l=Math.max(0,e.outerHeight-Tb(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function mF(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function gF(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Sa(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,gF(a.horizontal,e));const{same:d,other:h}=pF(e,n,a,i);c|=d&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&Sa(s,e,n,i)||u}function cc(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function Eb(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Qt(c.start)&&(o=c.start),l.fullSize?cc(l,s.left,o,n.outerWidth-s.right-s.left,h):cc(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Qt(c.start)&&(r=c.start),l.fullSize?cc(l,r,s.top,h,n.outerHeight-s.bottom-s.top):cc(l,r,e.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=o}yt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=rn(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=fF(t.boxes),l=a.vertical,c=a.horizontal;mt(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,f)=>f.box.options&&f.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);vv(h,rn(i));const p=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),g=hF(l.concat(c),d);Sa(a.fullSize,p,d,g),Sa(l,p,d,g),Sa(c,p,d,g)&&Sa(l,p,d,g),mF(p),Eb(a.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,Eb(a.rightAndBottom,p,d,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},mt(a.chartArea,m=>{const f=m.box;Object.assign(f,t.chartArea),f.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class _v{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class bF extends _v{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mc="$chartjs",yF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Db=t=>t===null||t==="";function xF(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Mc]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Db(s)){const r=cb(t,"width");r!==void 0&&(t.width=r)}if(Db(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=cb(t,"height");r!==void 0&&(t.height=r)}return t}const wv=m3?{passive:!0}:!1;function vF(t,e,n){t.addEventListener(e,n,wv)}function _F(t,e,n){t.canvas.removeEventListener(e,n,wv)}function wF(t,e){const n=yF[t.type]||t.type,{x:i,y:s}=br(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Gc(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function SF(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gc(a.addedNodes,i),o=o&&!Gc(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function MF(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Gc(a.removedNodes,i),o=o&&!Gc(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const ol=new Map;let Pb=0;function Sv(){const t=window.devicePixelRatio;t!==Pb&&(Pb=t,ol.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function CF(t,e){ol.size||window.addEventListener("resize",Sv),ol.set(t,e)}function TF(t){ol.delete(t),ol.size||window.removeEventListener("resize",Sv)}function EF(t,e,n){const i=t.canvas,s=i&&Xf(i);if(!s)return;const r=jx((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),CF(t,r),o}function $d(t,e,n){n&&n.disconnect(),e==="resize"&&TF(t)}function DF(t,e,n){const i=t.canvas,s=jx(r=>{t.ctx!==null&&n(wF(r,t))},t,r=>{const o=r[0];return[o,o.offsetX,o.offsetY]});return vF(i,e,s),s}class PF extends _v{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(xF(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Mc])return!1;const i=n[Mc].initial;["height","width"].forEach(r=>{const o=i[r];Ct(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Mc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:SF,detach:MF,resize:EF}[n]||DF;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:$d,detach:$d,resize:$d}[n]||_F)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return p3(e,n,i,s)}isAttached(e){const n=Xf(e);return!!(n&&n.isConnected)}}function LF(t){return!dv()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?bF:PF}class Sn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return tl(this.x)&&tl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}Sn.defaults={};Sn.defaultRoutes=void 0;const Mv={values(t){return Et(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=RF(t,n)}const o=ci(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),gl(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=t/Math.pow(10,Math.floor(ci(t)));return i===1||i===2||i===5?Mv.numeric.call(this,t,e,n):""}};function RF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Eu={formatters:Mv};yt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Eu.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});yt.route("scale.ticks","color","","color");yt.route("scale.grid","color","","borderColor");yt.route("scale.grid","borderColor","","borderColor");yt.route("scale.title","color","","color");yt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"});yt.describe("scales",{_fallback:"scale"});yt.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"});function AF(t,e){const n=t.options.ticks,i=n.maxTicksLimit||IF(t),s=n.major.enabled?OF(e):[],r=s.length,o=s[0],a=s[r-1],l=[];if(r>i)return FF(e,l,s,r/i),l;const c=kF(s,e,i);if(r>0){let u,d;const h=r>1?Math.round((a-o)/(r-1)):null;for(uc(e,l,c,Ct(h)?0:o-h,o),u=0,d=r-1;u<d;u++)uc(e,l,c,s[u],s[u+1]);return uc(e,l,c,a,Ct(h)?e.length:a+h),l}return uc(e,l,c),l}function IF(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function kF(t,e,n){const i=NF(t),s=e.length/n;if(!i)return Math.max(s,1);const r=oO(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function OF(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function FF(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function uc(t,e,n,i,s){const r=qe(i,0),o=Math.min(qe(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function NF(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const BF=t=>t==="left"?"right":t==="right"?"left":t,Lb=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n;function Rb(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function zF(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function VF(t,e){mt(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function fa(t){return t.drawTicks?t.tickLength:0}function Ab(t,e){if(!t.display)return 0;const n=$t(t.font,e),i=rn(t.padding);return(Et(t.text)?t.text.length:1)*n.lineHeight+i.height}function UF(t,e){return tr(t,{scale:e,type:"scale"})}function HF(t,e,n){return tr(t,{tick:n,index:e,type:"tick"})}function WF(t,e,n){let i=Nf(t);return(n&&e!=="right"||!n&&e==="right")&&(i=BF(i)),i}function GF(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,p,g;const m=o-s,f=a-r;if(t.isHorizontal()){if(p=Tn(i,r,a),ut(n)){const b=Object.keys(n)[0],x=n[b];g=u[b].getPixelForValue(x)+m-e}else n==="center"?g=(c.bottom+c.top)/2+m-e:g=Lb(t,n,e);h=a-r}else{if(ut(n)){const b=Object.keys(n)[0],x=n[b];p=u[b].getPixelForValue(x)-f+e}else n==="center"?p=(c.left+c.right)/2-f+e:p=Lb(t,n,e);g=Tn(i,o,s),d=n==="left"?-Wt:Wt}return{titleX:p,titleY:g,maxWidth:h,rotation:d}}class jr extends Sn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=ai(e,Number.POSITIVE_INFINITY),n=ai(n,Number.NEGATIVE_INFINITY),i=ai(i,Number.POSITIVE_INFINITY),s=ai(s,Number.NEGATIVE_INFINITY),{min:ai(e,i),max:ai(n,s),minDefined:Ut(e),maxDefined:Ut(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:ai(n,ai(i,n)),max:ai(i,ai(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){nt(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=WO(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Rb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=AF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){nt(this.options.afterUpdate,[this])}beforeSetDimensions(){nt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){nt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),nt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){nt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=nt(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){nt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){nt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=mn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-fa(e.grid)-n.padding-Ab(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=zf(Math.min(Math.asin(mn((u.highest.height+6)/a,-1,1)),Math.asin(mn(l/c,-1,1))-Math.asin(mn(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){nt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){nt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ab(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=fa(r)+l):(e.height=this.maxHeight,e.width=fa(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,g=pn(this.labelRotation),m=Math.cos(g),f=Math.sin(g);if(a){const b=i.mirror?0:f*d.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{const b=i.mirror?0:m*d.width+f*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(c,u,f,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=s*e.width,p=i*n.height):(h=i*e.height,p=s*n.width):r==="start"?p=n.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,p=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){nt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ct(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Rb(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let a=0,l=0,c,u,d,h,p,g,m,f,b,x,_;for(c=0;c<n;++c){if(h=e[c].label,p=this._resolveTickFontOptions(c),i.font=g=p.string,m=s[g]=s[g]||{data:{},gc:[]},f=p.lineHeight,b=x=0,!Ct(h)&&!Et(h))b=Hc(i,m.data,m.gc,b,h),x=f;else if(Et(h))for(u=0,d=h.length;u<d;++u)_=h[u],!Ct(_)&&!Et(_)&&(b=Hc(i,m.data,m.gc,b,_),x+=f);r.push(b),o.push(x),a=Math.max(b,a),l=Math.max(x,l)}VF(s,n);const y=r.indexOf(a),v=o.indexOf(l),C=R=>({width:r[R]||0,height:o[R]||0});return{first:C(0),last:C(n-1),widest:C(y),highest:C(v),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return cO(this._alignToPixels?ur(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=HF(this.getContext(),e,i))}return this.$context||(this.$context=UF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=pn(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o}=s,a=r.offset,l=this.isHorizontal(),u=this.ticks.length+(a?1:0),d=fa(r),h=[],p=r.setContext(this.getContext()),g=p.drawBorder?p.borderWidth:0,m=g/2,f=function(q){return ur(i,q,g)};let b,x,_,y,v,C,R,w,D,N,V,j;if(o==="top")b=f(this.bottom),C=this.bottom-d,w=b-m,N=f(e.top)+m,j=e.bottom;else if(o==="bottom")b=f(this.top),N=e.top,j=f(e.bottom)-m,C=b+m,w=this.top+d;else if(o==="left")b=f(this.right),v=this.right-d,R=b-m,D=f(e.left)+m,V=e.right;else if(o==="right")b=f(this.left),D=e.left,V=f(e.right)-m,v=b+m,R=this.left+d;else if(n==="x"){if(o==="center")b=f((e.top+e.bottom)/2+.5);else if(ut(o)){const q=Object.keys(o)[0],K=o[q];b=f(this.chart.scales[q].getPixelForValue(K))}N=e.top,j=e.bottom,C=b+m,w=C+d}else if(n==="y"){if(o==="center")b=f((e.left+e.right)/2);else if(ut(o)){const q=Object.keys(o)[0],K=o[q];b=f(this.chart.scales[q].getPixelForValue(K))}v=b-m,R=v-d,D=e.left,V=e.right}const se=qe(s.ticks.maxTicksLimit,u),$=Math.max(1,Math.ceil(u/se));for(x=0;x<u;x+=$){const q=r.setContext(this.getContext(x)),K=q.lineWidth,ne=q.color,te=r.borderDash||[],J=q.borderDashOffset,de=q.tickWidth,ve=q.tickColor,me=q.tickBorderDash||[],ye=q.tickBorderDashOffset;_=zF(this,x,a),_!==void 0&&(y=ur(i,_,K),l?v=R=D=V=y:C=w=N=j=y,h.push({tx1:v,ty1:C,tx2:R,ty2:w,x1:D,y1:N,x2:V,y2:j,width:K,color:ne,borderDash:te,borderDashOffset:J,tickWidth:de,tickColor:ve,tickBorderDash:me,tickBorderDashOffset:ye}))}return this._ticksLength=u,this._borderValue=b,h}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=fa(i.grid),p=h+u,g=d?-u:p,m=-pn(this.labelRotation),f=[];let b,x,_,y,v,C,R,w,D,N,V,j,se="middle";if(s==="top")C=this.bottom-g,R=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+g,R=this._getXAxisLabelAlignment();else if(s==="left"){const q=this._getYAxisLabelAlignment(h);R=q.textAlign,v=q.x}else if(s==="right"){const q=this._getYAxisLabelAlignment(h);R=q.textAlign,v=q.x}else if(n==="x"){if(s==="center")C=(e.top+e.bottom)/2+p;else if(ut(s)){const q=Object.keys(s)[0],K=s[q];C=this.chart.scales[q].getPixelForValue(K)+p}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")v=(e.left+e.right)/2-p;else if(ut(s)){const q=Object.keys(s)[0],K=s[q];v=this.chart.scales[q].getPixelForValue(K)}R=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?se="top":l==="end"&&(se="bottom"));const $=this._getLabelSizes();for(b=0,x=a.length;b<x;++b){_=a[b],y=_.label;const q=r.setContext(this.getContext(b));w=this.getPixelForTick(b)+r.labelOffset,D=this._resolveTickFontOptions(b),N=D.lineHeight,V=Et(y)?y.length:1;const K=V/2,ne=q.color,te=q.textStrokeColor,J=q.textStrokeWidth;let de=R;o?(v=w,R==="inner"&&(b===x-1?de=this.options.reverse?"left":"right":b===0?de=this.options.reverse?"right":"left":de="center"),s==="top"?c==="near"||m!==0?j=-V*N+N/2:c==="center"?j=-$.highest.height/2-K*N+N:j=-$.highest.height+N/2:c==="near"||m!==0?j=N/2:c==="center"?j=$.highest.height/2-K*N:j=$.highest.height-V*N,d&&(j*=-1)):(C=w,j=(1-V)*N/2);let ve;if(q.showLabelBackdrop){const me=rn(q.backdropPadding),ye=$.heights[b],ke=$.widths[b];let Ue=C+j-me.top,le=v-me.left;switch(se){case"middle":Ue-=ye/2;break;case"bottom":Ue-=ye;break}switch(R){case"center":le-=ke/2;break;case"right":le-=ke;break}ve={left:le,top:Ue,width:ke+me.width,height:ye+me.height,color:q.backdropColor}}f.push({rotation:m,label:y,font:D,color:ne,strokeColor:te,strokeWidth:J,textOffset:j,textAlign:de,textBaseline:se,translation:[v,C],backdrop:ve})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-pn(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{grid:i}}=this,s=i.setContext(this.getContext()),r=i.drawBorder?s.borderWidth:0;if(!r)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=ur(e,this.left,r)-r/2,c=ur(e,this.right,o)+o/2,u=d=a):(u=ur(e,this.top,r)-r/2,d=ur(e,this.bottom,o)+o/2,l=c=a),n.save(),n.lineWidth=s.borderWidth,n.strokeStyle=s.borderColor,n.beginPath(),n.moveTo(l,u),n.lineTo(c,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&pl(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,u=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;Br(i,u,0,d,c,l)}s&&ml(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=$t(i.font),o=rn(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ut(n)?(l+=o.bottom,Et(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=GF(this,l,n,a);Br(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:h,textAlign:WF(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=qe(e.grid&&e.grid.z,-1);return!this._isVisible()||this.draw!==jr.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return $t(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;KF(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,jF(e,o,i),this.override&&yt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in yt[s]&&(delete yt[s][i],this.override&&delete Nr[i])}}function jF(t,e,n){const i=el(Object.create(null),[n?yt.get(n):{},yt.get(e),t.defaults]);yt.set(e,i),t.defaultRoutes&&$F(e,t.defaultRoutes),t.descriptors&&yt.describe(e,t.descriptors)}function $F(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");yt.route(r,s,l,a)})}function KF(t){return"id"in t&&"defaults"in t}class XF{constructor(){this.controllers=new dc(Gi,"datasets",!0),this.elements=new dc(Sn,"elements"),this.plugins=new dc(Object,"plugins"),this.scales=new dc(jr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):mt(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=Bf(e);nt(i["before"+s],[],i),n[e](i),nt(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var us=new XF;class YF{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(nt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=qe(i.options&&i.options.plugins,{}),r=qF(i);return s===!1&&!n?[]:JF(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function qF(t){const e=[],n=Object.keys(us.plugins.items);for(let s=0;s<n.length;s++)e.push(us.getPlugin(n[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const r=i[s];e.indexOf(r)===-1&&e.push(r)}return e}function ZF(t,e){return!e&&t===!1?null:t===!0?{}:t}function JF(t,e,n,i){const s=[],r=t.getContext();for(let o=0;o<e.length;o++){const a=e[o],l=a.id,c=ZF(n[l],i);c!==null&&s.push({plugin:a,options:QF(t.config,a,c,r)})}return s}function QF(t,e,n,i){const s=t.pluginScopeKeys(e),r=t.getOptionScopes(n,s);return t.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fh(t,e){const n=yt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function eN(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function tN(t,e){return t===e?"_index_":"_value_"}function nN(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Nh(t,e){return t==="x"||t==="y"?t:e.axis||nN(e.position)||t.charAt(0).toLowerCase()}function iN(t,e){const n=Nr[t.type]||{scales:{}},i=e.scales||{},s=Fh(t.type,e),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!ut(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Nh(a,l),u=tN(c,s),d=n.scales||{};r[c]=r[c]||a,o[a]=ka(Object.create(null),[{axis:c},l,d[c],d[u]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||Fh(l,e),d=(Nr[l]||{}).scales||{};Object.keys(d).forEach(h=>{const p=eN(h,c),g=a[p+"AxisID"]||r[p]||p;o[g]=o[g]||Object.create(null),ka(o[g],[{axis:p},i[g],d[h]])})}),Object.keys(o).forEach(a=>{const l=o[a];ka(l,[yt.scales[l.type],yt.scale])}),o}function Cv(t){const e=t.options||(t.options={});e.plugins=qe(e.plugins,{}),e.scales=iN(t,e)}function Tv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function sN(t){return t=t||{},t.data=Tv(t.data),Cv(t),t}const Ib=new Map,Ev=new Set;function hc(t,e){let n=Ib.get(t);return n||(n=e(),Ib.set(t,n),Ev.add(n)),n}const pa=(t,e,n)=>{const i=qs(e,n);i!==void 0&&t.add(i)};class rN{constructor(e){this._config=sN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Tv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Cv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return hc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return hc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return hc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return hc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>pa(l,e,d))),u.forEach(d=>pa(l,s,d)),u.forEach(d=>pa(l,Nr[r]||{},d)),u.forEach(d=>pa(l,yt,d)),u.forEach(d=>pa(l,kh,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ev.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Nr[n]||{},yt.datasets[n]||{},{type:n},yt,kh]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=kb(this._resolverCache,e,s);let l=o;if(aN(o,n)){r.$shared=!1,i=Zs(i)?i():i;const c=this.createResolver(e,i,a);l=No(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=kb(this._resolverCache,e,i);return ut(n)?No(r,n,void 0,s):r}}function kb(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:jf(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const oN=t=>ut(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Zs(t[n]),!1);function aN(t,e){const{isScriptable:n,isIndexable:i}=rv(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Zs(a)||oN(a))||o&&Et(a))return!0}return!1}var lN="3.8.0";const cN=["top","bottom","left","right","chartArea"];function Ob(t,e){return t==="top"||t==="bottom"||cN.indexOf(t)===-1&&e==="x"}function Fb(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Nb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),nt(n&&n.onComplete,[t],e)}function uN(t){const e=t.chart,n=e.options.animation;nt(n&&n.onProgress,[t],e)}function Dv(t){return dv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const jc={},Pv=t=>{const e=Dv(t);return Object.values(jc).filter(n=>n.canvas===e).pop()};function dN(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function hN(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}class ds{constructor(e,n){const i=this.config=new rN(n),s=Dv(e),r=Pv(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||LF(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Jk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=qk(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],jc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}es.listen(this,"complete",Nb),es.listen(this,"progress",uN),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Ct(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sb(this.canvas,this.ctx),this}stop(){return es.stop(this),this}resize(e,n){es.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,lb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),nt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};mt(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Nh(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),mt(r,o=>{const a=o.options,l=a.id,c=Nh(l,a),u=qe(a.type,o.dtype);(a.position===void 0||Ob(a.position,c)!==Ob(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=us.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),mt(s,(o,a)=>{o||delete i[a]}),mt(i,o=>{Ln.configure(this,o,o.options),Ln.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Fb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Fh(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=us.getController(a),{datasetElementType:c,dataElementType:u}=yt.datasets[a];Object.assign(l.prototype,{dataElementType:us.getElement(u),datasetElementType:c&&us.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){mt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||mt(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Fb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){mt(this.scales,e=>{Ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Kg(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;dN(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Kg(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ln.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],mt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Zs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(es.has(this)?this.attached&&!es.running(this)&&es.start(this):(this.draw(),Nb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=this.chartArea,o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&pl(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&ml(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return rl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=cF.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=tr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Qt(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),es.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete jc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};mt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){mt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},mt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Bc(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=sO(e),c=hN(e,this._lastEvent,i,l);i&&(this._lastEvent=null,nt(r.onHover,[e,a,this],this),l&&nt(r.onClick,[e,a,this],this));const u=!Bc(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}const Bb=()=>mt(ds.instances,t=>t._plugins.invalidate()),Ds=!0;Object.defineProperties(ds,{defaults:{enumerable:Ds,value:yt},instances:{enumerable:Ds,value:jc},overrides:{enumerable:Ds,value:Nr},registry:{enumerable:Ds,value:us},version:{enumerable:Ds,value:lN},getChart:{enumerable:Ds,value:Pv},register:{enumerable:Ds,value:(...t)=>{us.add(...t),Bb()}},unregister:{enumerable:Ds,value:(...t)=>{us.remove(...t),Bb()}}});function Lv(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(r,o,a,i-c,n+c),l>s?(c=s/l,t.arc(r,o,l,n+c,i-c,!0)):t.arc(r,o,s,n+Wt,i-Wt),t.closePath(),t.clip()}function fN(t){return Wf(t,["outerStart","outerEnd","innerStart","innerEnd"])}function pN(t,e,n,i){const s=fN(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return mn(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:mn(s.innerStart,0,o),innerEnd:mn(s.innerEnd,0,o)}}function fo(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Bh(t,e,n,i,s){const{x:r,y:o,startAngle:a,pixelMargin:l,innerRadius:c}=e,u=Math.max(e.outerRadius+i+n-l,0),d=c>0?c+i+n+l:0;let h=0;const p=s-a;if(i){const K=c>0?c-i:0,ne=u>0?u-i:0,te=(K+ne)/2,J=te!==0?p*te/(te+i):p;h=(p-J)/2}const g=Math.max(.001,p*u-n/Tt)/u,m=(p-g)/2,f=a+m+h,b=s-m-h,{outerStart:x,outerEnd:_,innerStart:y,innerEnd:v}=pN(e,d,u,b-f),C=u-x,R=u-_,w=f+x/C,D=b-_/R,N=d+y,V=d+v,j=f+y/N,se=b-v/V;if(t.beginPath(),t.arc(r,o,u,w,D),_>0){const K=fo(R,D,r,o);t.arc(K.x,K.y,_,D,b+Wt)}const $=fo(V,b,r,o);if(t.lineTo($.x,$.y),v>0){const K=fo(V,se,r,o);t.arc(K.x,K.y,v,b+Wt,se+Math.PI)}if(t.arc(r,o,d,b-v/d,f+y/d,!0),y>0){const K=fo(N,j,r,o);t.arc(K.x,K.y,y,j+Math.PI,f-Wt)}const q=fo(C,f,r,o);if(t.lineTo(q.x,q.y),x>0){const K=fo(C,w,r,o);t.arc(K.x,K.y,x,f-Wt,w)}t.closePath()}function mN(t,e,n,i){const{fullCircles:s,startAngle:r,circumference:o}=e;let a=e.endAngle;if(s){Bh(t,e,n,i,r+It);for(let l=0;l<s;++l)t.fill();isNaN(o)||(a=r+o%It,o%It===0&&(a+=It))}return Bh(t,e,n,i,a),t.fill(),a}function gN(t,e,n){const{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=e,l=Math.max(e.outerRadius-o,0),c=e.innerRadius+o;let u;for(n&&Lv(t,e,r+It),t.beginPath(),t.arc(i,s,c,r+It,r,!0),u=0;u<a;++u)t.stroke();for(t.beginPath(),t.arc(i,s,l,r,r+It),u=0;u<a;++u)t.stroke()}function bN(t,e,n,i,s){const{options:r}=e,{borderWidth:o,borderJoinStyle:a}=r,l=r.borderAlign==="inner";!o||(l?(t.lineWidth=o*2,t.lineJoin=a||"round"):(t.lineWidth=o,t.lineJoin=a||"bevel"),e.fullCircles&&gN(t,e,l),l&&Lv(t,e,s),Bh(t,e,n,i,s),t.stroke())}class Du extends Sn{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=qx(s,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,g=qe(d,l-a)>=It||il(r,a,l),m=ls(o,c+h,u+h);return g&&m}getCenterPoint(e){const{x:n,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+r)/2,d=(o+a+c+l)/2;return{x:n+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,s=(n.offset||0)/2,r=(n.spacing||0)/2;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>It?Math.floor(i/It):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let o=0;if(s){o=s/2;const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o),this.circumference>=Tt&&(o=s)}e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor;const a=mN(e,this,o,r);bN(e,this,o,r,a),e.restore()}}Du.id="arc";Du.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};Du.defaultRoutes={backgroundColor:"backgroundColor"};function Rv(t,e,n=e){t.lineCap=qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(qe(n.borderDash,e.borderDash)),t.lineDashOffset=qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=qe(n.borderWidth,e.borderWidth),t.strokeStyle=qe(n.borderColor,e.borderColor)}function yN(t,e,n){t.lineTo(n.x,n.y)}function xN(t){return t.stepped?OO:t.tension||t.cubicInterpolationMode==="monotone"?FO:yN}function Av(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function vN(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=Av(s,n,i),u=xN(r);let{move:d=!0,reverse:h}=i||{},p,g,m;for(p=0;p<=c;++p)g=s[(a+(h?c-p:p))%o],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,m,g,h,r.stepped),m=g);return l&&(g=s[(a+(h?c:0))%o],u(t,m,g,h,r.stepped)),!!l}function _N(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=Av(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,h,p,g,m,f,b;const x=y=>(o+(c?a-y:y))%r,_=()=>{m!==f&&(t.lineTo(u,f),t.lineTo(u,m),t.lineTo(u,b))};for(l&&(p=s[x(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=s[x(h)],p.skip)continue;const y=p.x,v=p.y,C=y|0;C===g?(v<m?m=v:v>f&&(f=v),u=(d*u+y)/++d):(_(),t.lineTo(y,v),g=C,d=0,m=f=v),b=v}_()}function zh(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?_N:vN}function wN(t){return t.stepped?g3:t.tension||t.cubicInterpolationMode==="monotone"?b3:yr}function SN(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),Rv(t,e.options),t.stroke(s)}function MN(t,e,n,i){const{segments:s,options:r}=e,o=zh(e);for(const a of s)Rv(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const CN=typeof Path2D=="function";function TN(t,e,n,i){CN&&!e.options.segment?SN(t,e,n,i):MN(t,e,n,i)}class nr extends Sn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;l3(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=M3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=gv(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=wN(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],p=r[d],g=r[h];if(p===g){a.push(p);continue}const m=Math.abs((s-p[n])/(g[n]-p[n])),f=l(p,g,m,i.stepped);f[n]=e[n],a.push(f)}return a.length===1?a[0]:a}pathSegment(e,n,i){return zh(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=zh(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),TN(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}nr.id="line";nr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};nr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};nr.descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};function zb(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Pu extends Sn{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return zb(this,e,"x",n)}inYRange(e,n){return zb(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!rl(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,sl(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Pu.id="point";Pu.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};Pu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function Iv(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-d,u=i+d):(d=r/2,a=n-d,l=n+d,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function Fs(t,e,n,i){return t?0:mn(e,n,i)}function EN(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=nv(i);return{t:Fs(s.top,r.top,0,n),r:Fs(s.right,r.right,0,e),b:Fs(s.bottom,r.bottom,0,n),l:Fs(s.left,r.left,0,e)}}function DN(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=Ws(s),o=Math.min(e,n),a=t.borderSkipped,l=i||ut(s);return{topLeft:Fs(!l||a.top||a.left,r.topLeft,0,o),topRight:Fs(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fs(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fs(!l||a.bottom||a.right,r.bottomRight,0,o)}}function PN(t){const e=Iv(t),n=e.right-e.left,i=e.bottom-e.top,s=EN(t,n/2,i/2),r=DN(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Kd(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&Iv(t,i);return a&&(s||ls(e,a.left,a.right))&&(r||ls(n,a.top,a.bottom))}function LN(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function RN(t,e){t.rect(e.x,e.y,e.w,e.h)}function Xd(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class Lu extends Sn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=PN(this),a=LN(o.radius)?Fo:RN;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,Xd(o,n,r)),e.clip(),a(e,Xd(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Xd(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return Kd(this,e,n,i)}inXRange(e,n){return Kd(this,e,null,n)}inYRange(e,n){return Kd(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Lu.id="bar";Lu.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Lu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var AN=Object.freeze({__proto__:null,ArcElement:Du,LineElement:nr,PointElement:Pu,BarElement:Lu});function IN(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u=e,d,h,p,g,m;for(o[l++]=t[u],d=0;d<r-2;d++){let f=0,b=0,x;const _=Math.floor((d+1)*a)+1+e,y=Math.min(Math.floor((d+2)*a)+1,n)+e,v=y-_;for(x=_;x<y;x++)f+=t[x].x,b+=t[x].y;f/=v,b/=v;const C=Math.floor(d*a)+1+e,R=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:w,y:D}=t[u];for(p=g=-1,x=C;x<R;x++)g=.5*Math.abs((w-f)*(t[x].y-D)-(w-t[x].x)*(b-D)),g>p&&(p=g,h=t[x],m=x);o[l++]=h,u=m}return o[l++]=t[c],o}function kN(t,e,n,i){let s=0,r=0,o,a,l,c,u,d,h,p,g,m;const f=[],b=e+n-1,x=t[e].x,y=t[b].x-x;for(o=e;o<e+n;++o){a=t[o],l=(a.x-x)/y*i,c=a.y;const v=l|0;if(v===u)c<g?(g=c,d=o):c>m&&(m=c,h=o),s=(r*s+a.x)/++r;else{const C=o-1;if(!Ct(d)&&!Ct(h)){const R=Math.min(d,h),w=Math.max(d,h);R!==p&&R!==C&&f.push({...t[R],x:s}),w!==p&&w!==C&&f.push({...t[w],x:s})}o>0&&C!==p&&f.push(t[C]),f.push(a),u=v,r=0,g=m=c,d=h=p=o}}return f}function kv(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function Vb(t){t.data.datasets.forEach(e=>{kv(e)})}function ON(t,e){const n=e.length;let i=0,s;const{iScale:r}=t,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=mn(cs(e,r.axis,o).lo,0,n-1)),c?s=mn(cs(e,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var FN={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Vb(t);return}const i=t.width;t.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(r),c=o||s.data;if(wa([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=ON(l,c);const p=n.threshold||4*i;if(h<=p){kv(s);return}Ct(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(n.algorithm){case"lttb":g=IN(c,d,h,i,n);break;case"min-max":g=kN(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=g})},destroy(t){Vb(t)}};function NN(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Zf(l,c,s);const u=Vh(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const d=gv(e,u);for(const h of d){const p=Vh(n,r[h.start],r[h.end],h.loop),g=mv(a,s,p);for(const m of g)o.push({source:m,target:h,start:{[n]:Ub(u,p,"start",Math.max)},end:{[n]:Ub(u,p,"end",Math.min)}})}}return o}function Vh(t,e,n,i){if(i)return;let s=e[t],r=n[t];return t==="angle"&&(s=Xn(s),r=Xn(r)),{property:t,start:s,end:r}}function BN(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=Zf(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function Zf(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Ub(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Ov(t,e){let n=[],i=!1;return Et(t)?(i=!0,n=t):n=BN(t,e),n.length?new nr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function zN(t,e,n){let s=t[e].fill;const r=[e];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Ut(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function VN(t,e,n){const i=GN(t);if(ut(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return Ut(s)&&Math.floor(s)===s?UN(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function UN(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function HN(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ut(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function WN(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ut(t)?i=t.value:i=e.getBaseValue(),i}function GN(t){const e=t.options,n=e.fill;let i=qe(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function jN(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=$N(e,n);a.push(Ov({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)KN(s,o[u],a)}return new nr({points:s,options:{}})}function $N(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function KN(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=XN(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function XN(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][n],h=o[u.end][n];if(ls(s,d,h)){a=s===d,l=s===h;break}}return{first:a,last:l,point:i}}class Fv{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:It},e.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:s}=this,r=e.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function YN(t){const{chart:e,fill:n,line:i}=t;if(Ut(n))return qN(e,n);if(n==="stack")return jN(t);if(n==="shape")return!0;const s=ZN(t);return s instanceof Fv?s:Ov(s,i)}function qN(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function ZN(t){return(t.scale||{}).getPointPositionForValue?QN(t):JN(t)}function JN(t){const{scale:e={},fill:n}=t,i=HN(n,e);if(Ut(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function QN(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=WN(n,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new Fv({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Yd(t,e,n){const i=YN(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&s.points.length&&(pl(t,n),eB(t,{line:s,target:i,above:u,below:d,area:n,scale:r,axis:o}),ml(t))}function eB(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&r!==s&&(Hb(t,i,o.top),Wb(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore(),t.save(),Hb(t,i,o.bottom)),Wb(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore()}function Hb(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],d=s[Zf(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Wb(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=NN(n,i,s);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:h=r}={}}=l,p=i!==!0;t.save(),t.fillStyle=h,tB(t,o,p&&Vh(s,u,d)),t.beginPath();const g=!!n.pathSegment(t,l);let m;if(p){g?t.closePath():Gb(t,i,d,s);const f=!!i.pathSegment(t,c,{move:g,reverse:!0});m=g&&f,m||Gb(t,i,u,s)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function tB(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function Gb(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var nB={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof nr&&(l={visible:t.isDatasetVisible(o),index:o,fill:VN(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=zN(s,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),i&&Yd(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;r&&Yd(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!i||i.fill===!1||n.drawTime!=="beforeDatasetDraw"||Yd(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const jb=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},iB=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $b extends Sn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=nt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=$t(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=jb(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;r.textAlign="left",r.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((g,m)=>{const f=i+n/2+r.measureText(g.text).width;(m===0||c[c.length-1]+f+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,p+=u,h++),l[m]={left:0,top:p,row:h,width:f,height:s},c[c.length-1]+=f+a}),d}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,p=0,g=0,m=0;return this.legendItems.forEach((f,b)=>{const x=i+n/2+r.measureText(f.text).width;b>0&&p+s+2*a>u&&(d+=h+a,c.push({width:h,height:p}),g+=h+a,m++,h=p=0),l[b]={left:g,top:p,col:m,width:x,height:s},h=Math.max(h,x),p+=s+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Co(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Tn(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Tn(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Tn(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Tn(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;pl(e,this),this._draw(),ml(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=yt.color,l=Co(e.rtl,this.left,this.width),c=$t(o.font),{color:u,padding:d}=o,h=c.size,p=h/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:f,itemHeight:b}=jb(o,h),x=function(R,w,D){if(isNaN(m)||m<=0||isNaN(f)||f<0)return;s.save();const N=qe(D.lineWidth,1);if(s.fillStyle=qe(D.fillStyle,a),s.lineCap=qe(D.lineCap,"butt"),s.lineDashOffset=qe(D.lineDashOffset,0),s.lineJoin=qe(D.lineJoin,"miter"),s.lineWidth=N,s.strokeStyle=qe(D.strokeStyle,a),s.setLineDash(qe(D.lineDash,[])),o.usePointStyle){const V={radius:m*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},j=l.xPlus(R,m/2),se=w+p;sl(s,V,j,se)}else{const V=w+Math.max((h-f)/2,0),j=l.leftForLtr(R,m),se=Ws(D.borderRadius);s.beginPath(),Object.values(se).some($=>$!==0)?Fo(s,{x:j,y:V,w:m,h:f,radius:se}):s.rect(j,V,m,f),s.fill(),N!==0&&s.stroke()}s.restore()},_=function(R,w,D){Br(s,D.text,R,w+b/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},y=this.isHorizontal(),v=this._computeTitleHeight();y?g={x:Tn(r,this.left+d,this.right-i[0]),y:this.top+d+v,line:0}:g={x:this.left+d,y:Tn(r,this.top+v+d,this.bottom-n[0].height),line:0},hv(this.ctx,e.textDirection);const C=b+d;this.legendItems.forEach((R,w)=>{s.strokeStyle=R.fontColor||u,s.fillStyle=R.fontColor||u;const D=s.measureText(R.text).width,N=l.textAlign(R.textAlign||(R.textAlign=o.textAlign)),V=m+p+D;let j=g.x,se=g.y;l.setWidth(this.width),y?w>0&&j+V+d>this.right&&(se=g.y+=C,g.line++,j=g.x=Tn(r,this.left+d,this.right-i[g.line])):w>0&&se+C>this.bottom&&(j=g.x=j+n[g.line].width+d,g.line++,se=g.y=Tn(r,this.top+v+d,this.bottom-n[g.line].height));const $=l.x(j);x($,se,R),j=Zk(N,j+m+p,y?j+V:this.right,e.rtl),_(l.x(j),se,R),y?g.x+=V+d:g.y+=C}),fv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=$t(n.font),s=rn(n.padding);if(!n.display)return;const r=Co(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Tn(e.align,d,this.right-h);else{const g=this.columnSizes.reduce((m,f)=>Math.max(m,f.height),0);u=c+Tn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=Tn(a,d,d+h);o.textAlign=r.textAlign(Nf(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Br(o,n.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,n=$t(e.font),i=rn(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(ls(e,this.left,this.right)&&ls(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],ls(e,s.left,s.left+s.width)&&ls(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!sB(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=iB(s,i);s&&!r&&nt(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&nt(n.onHover,[e,i,this],this)}else i&&nt(n.onClick,[e,i,this],this)}}function sB(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rB={id:"legend",_element:$b,start(t,e,n){const i=t.legend=new $b({ctx:t.ctx,options:n,chart:t});Ln.configure(t,i,n),Ln.addBox(t,i)},stop(t){Ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ln.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r}}=t.legend.options;return t._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(n?0:void 0),l=rn(a.borderWidth);return{text:e[o.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:s||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Jf extends Sn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Et(i.text)?i.text.length:1;this._padding=rn(i.padding);const r=s*$t(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Tn(a,i,r),d=n+e,c=r-i):(o.position==="left"?(u=i+e,d=Tn(a,s,n),l=Tt*-.5):(u=r-e,d=Tn(a,n,s),l=Tt*.5),c=s-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=$t(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Br(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Nf(n.align),textBaseline:"middle",translation:[o,a]})}}function oB(t,e){const n=new Jf({ctx:t.ctx,options:e,chart:t});Ln.configure(t,n,e),Ln.addBox(t,n),t.titleBlock=n}var aB={id:"title",_element:Jf,start(t,e,n){oB(t,n)},stop(t){const e=t.titleBlock;Ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Ln.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fc=new WeakMap;var lB={id:"subtitle",start(t,e,n){const i=new Jf({ctx:t.ctx,options:n,chart:t});Ln.configure(t,i,n),Ln.addBox(t,i),fc.set(t,i)},stop(t){Ln.removeBox(t,fc.get(t)),fc.delete(t)},beforeUpdate(t,e,n){const i=fc.get(t);Ln.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ba={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=nl(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Oi(t,e){return e&&(Et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ts(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cB(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function Kb(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=$t(e.bodyFont),c=$t(e.titleFont),u=$t(e.footerFont),d=r.length,h=s.length,p=i.length,g=rn(e.padding);let m=g.height,f=0,b=i.reduce((y,v)=>y+v.before.length+v.lines.length+v.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=p*y+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let x=0;const _=function(y){f=Math.max(f,n.measureText(y).width+x)};return n.save(),n.font=c.string,mt(t.title,_),n.font=l.string,mt(t.beforeBody.concat(t.afterBody),_),x=e.displayColors?o+2+e.boxPadding:0,mt(i,y=>{mt(y.before,_),mt(y.lines,_),mt(y.after,_)}),x=0,n.font=u.string,mt(t.footer,_),n.restore(),f+=g.width,{width:f,height:m}}function uB(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function dB(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function hB(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),dB(c,t,e,n)&&(c="center"),c}function Xb(t,e,n){const i=n.yAlign||e.yAlign||uB(t,n);return{xAlign:n.xAlign||e.xAlign||hB(t,e,n,i),yAlign:i}}function fB(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function pB(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function Yb(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Ws(o);let g=fB(e,a);const m=pB(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+s:a==="right"&&(g+=Math.max(d,p)+s),{x:mn(g,0,i.width-e.width),y:mn(m,0,i.height-e.height)}}function pc(t,e,n){const i=rn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function qb(t){return Oi([],ts(t))}function mB(t,e,n){return tr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Zb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class Uh extends Sn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new Yf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=mB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=i.beforeTitle.apply(this,[e]),r=i.title.apply(this,[e]),o=i.afterTitle.apply(this,[e]);let a=[];return a=Oi(a,ts(s)),a=Oi(a,ts(r)),a=Oi(a,ts(o)),a}getBeforeBody(e,n){return qb(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:i}=n,s=[];return mt(e,r=>{const o={before:[],lines:[],after:[]},a=Zb(i,r);Oi(o.before,ts(a.beforeLabel.call(this,r))),Oi(o.lines,a.label.call(this,r)),Oi(o.after,ts(a.afterLabel.call(this,r))),s.push(o)}),s}getAfterBody(e,n){return qb(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:i}=n,s=i.beforeFooter.apply(this,[e]),r=i.footer.apply(this,[e]),o=i.afterFooter.apply(this,[e]);let a=[];return a=Oi(a,ts(s)),a=Oi(a,ts(r)),a=Oi(a,ts(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(cB(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),mt(a,u=>{const d=Zb(e.callbacks,u);s.push(d.labelColor.call(this,u)),r.push(d.labelPointStyle.call(this,u)),o.push(d.labelTextColor.call(this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ba[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Kb(this,i),c=Object.assign({},a,l),u=Xb(this.chart,i,c),d=Yb(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Ws(a),{x:h,y:p}=e,{width:g,height:m}=n;let f,b,x,_,y,v;return r==="center"?(y=p+m/2,s==="left"?(f=h,b=f-o,_=y+o,v=y-o):(f=h+g,b=f+o,_=y-o,v=y+o),x=f):(s==="left"?b=h+Math.max(l,u)+o:s==="right"?b=h+g-Math.max(c,d)-o:b=this.caretX,r==="top"?(_=p,y=_-o,f=b-o,x=b+o):(_=p+m,y=_+o,f=b+o,x=b-o),v=_),{x1:f,x2:b,x3:x,y1:_,y2:y,y3:v}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Co(i.rtl,this.x,this.width);for(e.x=pc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=$t(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:u}=r,d=$t(r.bodyFont),h=pc(this,"left",r),p=s.x(h),g=l<d.lineHeight?(d.lineHeight-l)/2:0,m=n.y+g;if(r.usePointStyle){const f={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(p,c)+c/2,x=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,sl(e,f,b,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,sl(e,f,b,x)}else{e.lineWidth=o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const f=s.leftForLtr(p,c-u),b=s.leftForLtr(s.xPlus(p,1),c-u-2),x=Ws(o.borderRadius);Object.values(x).some(_=>_!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Fo(e,{x:f,y:m,w:c,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fo(e,{x:b,y:m+1,w:c-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(f,m,c,l),e.strokeRect(f,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=$t(i.bodyFont);let h=d.lineHeight,p=0;const g=Co(i.rtl,this.x,this.width),m=function(w){n.fillText(w,g.x(e.x+p),e.y+h/2),e.y+=h+r},f=g.textAlign(o);let b,x,_,y,v,C,R;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=pc(this,f,i),n.fillStyle=i.bodyColor,mt(this.beforeBody,m),p=a&&f!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,C=s.length;y<C;++y){for(b=s[y],x=this.labelTextColors[y],n.fillStyle=x,mt(b.before,m),_=b.lines,a&&_.length&&(this._drawColorBox(n,e,y,g,i),h=Math.max(d.lineHeight,l)),v=0,R=_.length;v<R;++v)m(_[v]),h=d.lineHeight;mt(b.after,m)}p=0,h=d.lineHeight,mt(this.afterBody,m),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Co(i.rtl,this.x,this.width);for(e.x=pc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=$t(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:g}=Ws(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ba[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Kb(this,e),l=Object.assign({},o,this._size),c=Xb(n,e,l),u=Yb(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=rn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),hv(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),fv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Bc(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!Bc(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n;const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=Ba[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}Uh.positioners=Ba;var gB={id:"tooltip",_element:Uh,positioners:Ba,afterInit(t,e,n){n&&(t.tooltip=new Uh({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",n)===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ji,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Ji,beforeBody:Ji,beforeLabel:Ji,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ct(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ji,afterBody:Ji,beforeFooter:Ji,footer:Ji,afterFooter:Ji}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},bB=Object.freeze({__proto__:null,Decimation:FN,Filler:nB,Legend:rB,SubTitle:lB,Title:aB,Tooltip:gB});const yB=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function xB(t,e,n,i){const s=t.indexOf(e);if(s===-1)return yB(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const vB=(t,e)=>t===null?null:mn(Math.round(t),0,e);class $c extends jr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ct(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:xB(i,e,qe(n,e),this._addedLabels),vB(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){const n=this.getLabels();return e>=0&&e<n.length?n[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$c.id="category";$c.defaults={ticks:{callback:$c.prototype.getLabelForValue}};function _B(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,p=r||1,g=u-1,{min:m,max:f}=e,b=!Ct(o),x=!Ct(a),_=!Ct(c),y=(f-m)/(d+1);let v=Yg((f-m)/g/p)*p,C,R,w,D;if(v<1e-14&&!b&&!x)return[{value:m},{value:f}];D=Math.ceil(f/v)-Math.floor(m/v),D>g&&(v=Yg(D*v/g/p)*p),Ct(l)||(C=Math.pow(10,l),v=Math.ceil(v*C)/C),s==="ticks"?(R=Math.floor(m/v)*v,w=Math.ceil(f/v)*v):(R=m,w=f),b&&x&&r&&aO((a-o)/r,v/1e3)?(D=Math.round(Math.min((a-o)/v,u)),v=(a-o)/D,R=o,w=a):_?(R=b?o:R,w=x?a:w,D=c-1,v=(w-R)/D):(D=(w-R)/v,Oa(D,Math.round(D),v/1e3)?D=Math.round(D):D=Math.ceil(D));const N=Math.max(qg(v),qg(R));C=Math.pow(10,Ct(l)?N:l),R=Math.round(R*C)/C,w=Math.round(w*C)/C;let V=0;for(b&&(h&&R!==o?(n.push({value:o}),R<o&&V++,Oa(Math.round((R+V*v)*C)/C,o,Jb(o,y,t))&&V++):R<o&&V++);V<D;++V)n.push({value:Math.round((R+V*v)*C)/C});return x&&h&&w!==a?n.length&&Oa(n[n.length-1].value,a,Jb(a,y,t))?n[n.length-1].value=a:n.push({value:a}):(!x||w===a)&&n.push({value:w}),n}function Jb(t,e,{horizontal:n,minRotation:i}){const s=pn(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Kc extends jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ct(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=fi(s),c=fi(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(r*.05)),a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=_B(s,r);return e.bounds==="ticks"&&Yx(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return gl(e,this.chart.options.locale,this.options.ticks.format)}}class Qf extends Kc{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ut(e)?e:0,this.max=Ut(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=pn(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Qf.id="linear";Qf.defaults={ticks:{callback:Eu.formatters.numeric}};function Qb(t){return t/Math.pow(10,Math.floor(ci(t)))===1}function wB(t,e){const n=Math.floor(ci(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),s=[];let r=ai(t.min,Math.pow(10,Math.floor(ci(e.min)))),o=Math.floor(ci(r)),a=Math.floor(r/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do s.push({value:r,major:Qb(r)}),++a,a===10&&(a=1,++o,l=o>=0?1:l),r=Math.round(a*Math.pow(10,o)*l)/l;while(o<n||o===n&&a<i);const c=ai(t.max,r);return s.push({value:c,major:Qb(r)}),s}class ep extends jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Kc.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ut(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ut(e)?Math.max(0,e):null,this.max=Ut(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=l=>i=e?i:l,o=l=>s=n?s:l,a=(l,c)=>Math.pow(10,Math.floor(ci(l))+c);i===s&&(i<=0?(r(1),o(10)):(r(a(i,-1)),o(a(s,1)))),i<=0&&r(a(s,-1)),s<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&r(a(i,-1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=wB(n,this);return e.bounds==="ticks"&&Yx(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":gl(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ci(e),this._valueRange=ci(this.max)-ci(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ci(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ep.id="logarithmic";ep.defaults={ticks:{callback:Eu.formatters.logarithmic,major:{enabled:!0}}};function Hh(t){const e=t.ticks;if(e.display&&t.display){const n=rn(e.backdropPadding);return qe(e.font&&e.font.size,yt.font.size)+n.height}return 0}function SB(t,e,n){return n=Et(n)?n:[n],{w:kO(t,e.string,n),h:n.length*e.lineHeight}}function ey(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function MB(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Tt/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),d=$t(c.font),h=SB(t.ctx,d,t._pointLabels[l]);i[l]=h;const p=Xn(t.getIndexAngle(l)+a),g=Math.round(zf(p)),m=ey(g,u.x,h.w,0,180),f=ey(g,u.y,h.h,90,270);CB(n,e,p,m,f)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=TB(t,i,s)}function CB(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function TB(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=Hh(r)/2,a=t.drawingArea,l=r.pointLabels.centerPointLabels?Tt/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+o+n[c],l),d=Math.round(zf(Xn(u.angle+Wt))),h=e[c],p=PB(u.y,h.h,d),g=EB(d),m=DB(u.x,h.w,g);i.push({x:u.x,y:p,textAlign:g,left:m,top:p,right:m+h.w,bottom:p+h.h})}return i}function EB(t){return t===0||t===180?"center":t<180?"left":"right"}function DB(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function PB(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function LB(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=i.setContext(t.getPointLabelContext(s)),o=$t(r.font),{x:a,y:l,textAlign:c,left:u,top:d,right:h,bottom:p}=t._pointLabelItems[s],{backdropColor:g}=r;if(!Ct(g)){const m=Ws(r.borderRadius),f=rn(r.backdropPadding);n.fillStyle=g;const b=u-f.left,x=d-f.top,_=h-u+f.width,y=p-d+f.height;Object.values(m).some(v=>v!==0)?(n.beginPath(),Fo(n,{x:b,y:x,w:_,h:y,radius:m}),n.fill()):n.fillRect(b,x,_,y)}Br(n,t._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}function Nv(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,It);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function RB(t,e,n,i){const s=t.ctx,r=e.circular,{color:o,lineWidth:a}=e;!r&&!i||!o||!a||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(e.borderDash),s.lineDashOffset=e.borderDashOffset,s.beginPath(),Nv(t,n,r,i),s.closePath(),s.stroke(),s.restore())}function AB(t,e,n){return tr(t,{label:n,index:e,type:"pointLabel"})}class xl extends Kc{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=rn(Hh(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ut(e)&&!isNaN(e)?e:0,this.max=Ut(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Hh(this.options))}generateTickLabels(e){Kc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=nt(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?MB(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=It/(this._pointLabels.length||1),i=this.options.startAngle||0;return Xn(e*n+pn(i))}getDistanceFromCenterForValue(e){if(Ct(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Ct(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return AB(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-Wt+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Nv(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s}=n,r=this._pointLabels.length;let o,a,l;if(n.pointLabels.display&&LB(this,r),s.display&&this.ticks.forEach((c,u)=>{if(u!==0){a=this.getDistanceFromCenterForValue(c.value);const d=s.setContext(this.getContext(u-1));RB(this,d,a,r)}}),i.display){for(e.save(),o=r-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:u,lineWidth:d}=c;!d||!u||(e.lineWidth=d,e.strokeStyle=u,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=$t(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=rn(c.backdropPadding);e.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}Br(e,a.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}xl.id="radialLinear";xl.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Eu.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};xl.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};xl.descriptors={angleLines:{_fallback:"grid"}};const Ru={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hn=Object.keys(Ru);function IB(t,e){return t-e}function ty(t,e){if(Ct(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ut(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(tl(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function ny(t,e,n,i){const s=Hn.length;for(let r=Hn.indexOf(t);r<s-1;++r){const o=Ru[Hn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Hn[r]}return Hn[s-1]}function kB(t,e,n,i,s){for(let r=Hn.length-1;r>=Hn.indexOf(n);r--){const o=Hn[r];if(Ru[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return Hn[n?Hn.indexOf(n):0]}function OB(t){for(let e=Hn.indexOf(t)+1,n=Hn.length;e<n;++e)if(Ru[Hn[e]].common)return Hn[e]}function iy(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=Gf(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function FB(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function sy(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:FB(t,i,s,n)}class vl extends jr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const i=e.time||(e.time={}),s=this._adapter=new sF._date(e.adapters.date);ka(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:ty(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ut(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=Ut(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=jO(s,r,o);return this._unit=n.unit||(i.autoSkip?ny(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):kB(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:OB(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),sy(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=mn(n,0,o),i=mn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||ny(r.minUnit,n,i,this._getLabelCapacity(n)),a=qe(r.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=tl(l)||l===!0,u={};let d=n,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<i;h=+e.add(h,a,o),p++)iy(u,h,g);return(h===i||s.bounds==="ticks"||p===1)&&iy(u,h,g),Object.keys(u).sort((m,f)=>m-f).map(m=>+m)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=i[n],h=l&&u&&d&&d.major,p=this._adapter.format(e,s||(h?u:c)),g=r.ticks.callback;return g?nt(g,[p,n,i],this):p}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=pn(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,sy(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(ty(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sv(e.sort(IB))}}vl.id="time";vl.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function mc(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=cs(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=cs(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class tp extends vl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=mc(n,this.min),this._tableRange=mc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(mc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return mc(this._table,i*this._tableRange+this._minPos,!0)}}tp.id="timeseries";tp.defaults=vl.defaults;var NB=Object.freeze({__proto__:null,CategoryScale:$c,LinearScale:Qf,LogarithmicScale:ep,RadialLinearScale:xl,TimeScale:vl,TimeSeriesScale:tp});const ry=[iF,AN,bB,NB];var BB=Object.defineProperty,oy=Object.getOwnPropertySymbols,zB=Object.prototype.hasOwnProperty,VB=Object.prototype.propertyIsEnumerable,ay=(t,e,n)=>e in t?BB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hr=(t,e)=>{for(var n in e||(e={}))zB.call(e,n)&&ay(t,n,e[n]);if(oy)for(var n of oy(e))VB.call(e,n)&&ay(t,n,e[n]);return t};const ly=["install","start","stop","beforeInit","afterInit","beforeUpdate","afterUpdate","beforeElementsUpdate","reset","beforeDatasetsUpdate","afterDatasetsUpdate","beforeDatasetUpdate","afterDatasetUpdate","beforeLayout","afterLayout","afterLayout","beforeRender","afterRender","resize","destroy","uninstall","afterTooltipDraw","beforeTooltipDraw"];function UB(t,e=null){return{type:t,chartRef:e,preventDefault(){this._defaultPrevented=!0},isDefaultPrevented(){return!this._defaultPrevented},_defaultPrevented:!1}}function HB(t,e){return{[e.type]:()=>(t(e.type,e),e.isDefaultPrevented())}}ry!==void 0&&ds.register(...ry);const WB=c0({name:"Vue3ChartJs",props:{type:{type:String,required:!0},height:{type:Number,required:!1,default:null},width:{type:Number,required:!1,default:null},data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]}},emits:ly,setup(t,{emit:e}){const n=st(null),i=ly.reduce((c,u)=>{const d=UB(u,n);return hr(hr({},c),HB(e,d))},{id:"Vue3ChartJsEventHookPlugin"}),s={chart:null,plugins:[i,...t.plugins],props:hr({},t)},r=()=>{s.chart&&(s.chart.destroy(),s.chart=null)},o=(c=750)=>{s.chart.data=hr(hr({},s.chart.data),s.props.data),s.chart.options=hr(hr({},s.chart.options),s.props.options),s.chart.update(c)},a=()=>s.chart&&s.chart.resize(),l=()=>s.chart?s.chart.update():s.chart=new ds(n.value.getContext("2d"),{type:s.props.type,data:s.props.data,options:s.props.options,plugins:s.plugins});return Wo(()=>l()),{chartJSState:s,chartRef:n,render:l,resize:a,update:o,destroy:r}},render(t){return zs("canvas",{ref:"chartRef",height:t.height,width:t.width})}}),xo=WB;xo.registerGlobalPlugins=t=>{ds.register(...t)};xo.install=(t,e={})=>{var n;t.component(xo.name,xo),(n=e==null?void 0:e.plugins)!=null&&n.length&&xo.registerGlobalPlugins(e.plugins)};/*!
* chartjs-plugin-annotation v1.4.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2022 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Bv=["click","dblclick"],Wh=["enter","leave"],np=Bv.concat(Wh);function GB(t,e,n){e.listened=!1,e.moveListened=!1,np.forEach(i=>{typeof n[i]=="function"?(e.listened=!0,e.listeners[i]=n[i]):Qt(e.listeners[i])&&delete e.listeners[i]}),Wh.forEach(i=>{typeof n[i]=="function"&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(i=>{e.listened||Bv.forEach(s=>{typeof i[s]=="function"&&(e.listened=!0)}),e.moveListened||Wh.forEach(s=>{typeof i[s]=="function"&&(e.listened=!0,e.moveListened=!0)})})}function jB(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":$B(t,e);break;case"click":XB(t,e,n);break}}function $B(t,e){if(!t.moveListened)return;let n;e.type==="mousemove"&&(n=zv(t.elements,e));const i=t.hovered;t.hovered=n,KB(t,{previous:i,element:n},e)}function KB(t,e,n){const{previous:i,element:s}=e;i&&i!==s&&za(i.options.leave||t.listeners.leave,i,n),s&&s!==i&&za(s.options.enter||t.listeners.enter,s,n)}function XB(t,e,n){const i=t.listeners,s=zv(t.elements,e);if(s){const r=s.options,o=r.dblclick||i.dblclick,a=r.click||i.click;s.clickTimeout?(clearTimeout(s.clickTimeout),delete s.clickTimeout,za(o,s,e)):o?s.clickTimeout=setTimeout(()=>{delete s.clickTimeout,za(a,s,e)},n.dblClickSpeed):za(a,s,e)}}function za(t,e,n){nt(t,[e.$context,n])}function zv(t,e){let n=Number.POSITIVE_INFINITY;return t.filter(i=>i.options.display&&i.inRange(e.x,e.y)).reduce((i,s)=>{const r=s.getCenterPoint(),o=nl(e,r);return o<n?(i=[s],n=o):o===n&&i.push(s),i},[]).sort((i,s)=>i._index-s._index).slice(0,1)[0]}function YB(t,e,n){const i=ez(e,n);let s=cy(e,i,"min","suggestedMin");s=cy(e,i,"max","suggestedMax")||s,s&&typeof e.handleTickRangeOptions=="function"&&e.handleTickRangeOptions()}function qB(t,e){for(const n of t)JB(n,e)}function cy(t,e,n,i){if(Ut(e[n])&&!ZB(t.options,n,i)){const s=t[n]!==e[n];return t[n]=e[n],s}}function ZB(t,e,n){return Qt(t[e])||Qt(t[n])}function JB(t,e){for(const n of["scaleID","xScaleID","yScaleID"])t[n]&&!e[t[n]]&&QB(t,n)&&console.warn(`No scale found with id '${t[n]}' for annotation '${t.id}'`)}function QB(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const i of["Min","Max","Value"])if(Qt(t[n+i]))return!0;return!1}function ez(t,e){const n=t.axis,i=t.id,s=n+"ScaleID",r={min:qe(t.min,Number.NEGATIVE_INFINITY),max:qe(t.max,Number.POSITIVE_INFINITY)};for(const o of e)o.scaleID===i?uy(o,t,["value","endValue"],r):o[s]===i&&uy(o,t,[n+"Min",n+"Max",n+"Value"],r);return r}function uy(t,e,n,i){for(const s of n){const r=t[s];if(Qt(r)){const o=e.parse(r);i.min=Math.min(i.min,o),i.max=Math.max(i.max,o)}}}const gc=.001,ip=(t,e,n)=>Math.min(n,Math.max(e,t));function tz(t,e,n){for(const i of Object.keys(t))t[i]=ip(t[i],e,n);return t}function nz(t,e,n,i){if(!t||!e||n<=0)return!1;const s=i/2||0;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function Vv(t,e,{x:n,y:i,width:s,height:r},o){const a=o/2;return t>=n-a-gc&&t<=n+s+a+gc&&e>=i-a-gc&&e<=i+r+a+gc}function Uv(t,e){const{x:n,y:i}=t.getProps(["x","y"],e);return{x:n,y:i}}const iz=(t,e)=>e>t||t.length>e.length&&t.substr(0,e.length)===e;function sz(t,e,n,i=!0){const s=n.split(".");let r=0;for(const o of e.split(".")){const a=s[r++];if(parseInt(o,10)<parseInt(a,10))break;if(iz(a,o)){if(i)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const Hv=t=>typeof t=="string"&&t.endsWith("%"),Wv=t=>ip(parseFloat(t)/100,0,1);function sp(t,e){return e==="start"?0:e==="end"?t:Hv(e)?Wv(e)*t:t/2}function zo(t,e){return typeof e=="number"?e:Hv(e)?Wv(e)*t:t}function rz(t,e){const{x:n,width:i}=t,s=e.textAlign;return s==="center"?n+i/2:s==="end"||s==="right"?n+i:n}function Gv(t){return ut(t)?{x:qe(t.x,"center"),y:qe(t.y,"center")}:(t=qe(t,"center"),{x:t,y:t})}function jv(t){return t&&(Qt(t.xValue)||Qt(t.yValue))}const qd=new Map;function rp(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Xc(t,e,n){if(n){const i=e.getCenterPoint();t.translate(i.x,i.y),t.rotate(pn(n)),t.translate(-i.x,-i.y)}}function $r(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function qo(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function op(t,e){const n=e.content;if(rp(n))return{width:zo(n.width,e.width),height:zo(n.height,e.height)};const i=$t(e.font),s=e.textStrokeWidth,r=Et(n)?n:[n],o=r.join()+i.string+s+(t._measureText?"-spriting":"");if(!qd.has(o)){t.save(),t.font=i.string;const a=r.length;let l=0;for(let u=0;u<a;u++){const d=r[u];l=Math.max(l,t.measureText(d).width+s)}t.restore();const c=a*i.lineHeight+s;qd.set(o,{width:l,height:c})}return qd.get(o)}function ap(t,e,n){const{x:i,y:s,width:r,height:o}=e;t.save(),qo(t,n);const a=$r(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Fo(t,{x:i,y:s,w:r,h:o,radius:tz(Ws(qe(n.cornerRadius,n.borderRadius)),0,Math.min(r,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function lp(t,e,n){const i=n.content;if(rp(i)){t.drawImage(i,e.x,e.y,e.width,e.height);return}const s=Et(i)?i:[i],r=$t(n.font),o=r.lineHeight,a=rz(e,n),l=e.y+o/2+n.textStrokeWidth/2;t.save(),t.font=r.string,t.textBaseline="middle",t.textAlign=n.textAlign,oz(t,n)&&s.forEach((c,u)=>t.strokeText(c,a,l+u*o)),t.fillStyle=n.color,s.forEach((c,u)=>t.fillText(c,a,l+u*o)),t.restore()}function oz(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function al(t){const{x:e,y:n,width:i,height:s}=t;return{x:e+i/2,y:n+s/2}}function _l(t,e,n){const i=Math.cos(n),s=Math.sin(n),r=e.x,o=e.y;return{x:r+i*(t.x-r)-s*(t.y-o),y:o+s*(t.x-r)+i*(t.y-o)}}function zi(t,e,n){return e=typeof e=="number"?e:t.parse(e),Ut(e)?t.getPixelForValue(e):n}function dy(t,e){if(t){const n=zi(t,e.min,e.start),i=zi(t,e.max,e.end);return{start:Math.min(n,i),end:Math.max(n,i)}}return{start:e.start,end:e.end}}function $v(t,e){const{chartArea:n,scales:i}=t,s=i[e.xScaleID],r=i[e.yScaleID];let o=n.width/2,a=n.height/2;return s&&(o=zi(s,e.xValue,o)),r&&(a=zi(r,e.yValue,a)),{x:o,y:a}}function Au(t,e){const n=t.scales[e.xScaleID],i=t.scales[e.yScaleID];let{top:s,left:r,bottom:o,right:a}=t.chartArea;if(!n&&!i)return{};const l=dy(n,{min:e.xMin,max:e.xMax,start:r,end:a});r=l.start,a=l.end;const c=dy(i,{min:e.yMin,max:e.yMax,start:s,end:o});return s=c.start,o=c.end,{x:r,y:s,x2:a,y2:o,width:a-r,height:o-s}}function az(t,e){const n=$v(t,e);return{x:n.x+e.xAdjust,y:n.y+e.yAdjust,width:e.radius*2,height:e.radius*2}}function Kv(t,e){if(!jv(e)){const n=Au(t,e),i=al(n);let s=e.radius;return(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s),{x:i.x+e.xAdjust,y:i.y+e.yAdjust,width:s*2,height:s*2}}return az(t,e)}class wl extends Sn{inRange(e,n,i){const{x:s,y:r}=_l({x:e,y:n},this.getCenterPoint(i),pn(-this.options.rotation));return Vv(s,r,this.getProps(["x","y","width","height"],i),this.options.borderWidth)}getCenterPoint(e){return al(this.getProps(["x","y","width","height"],e))}draw(e){e.save(),Xc(e,this,this.options.rotation),ap(e,this,this.options),e.restore()}drawLabel(e){const{x:n,y:i,width:s,height:r,options:o}=this,{label:a,borderWidth:l}=o,c=l/2,u=Gv(a.position),d=rn(a.padding),h=op(e,a),p={x:lz(this,h,u,d),y:cz(this,h,u,d),width:h.width,height:h.height};e.save(),Xc(e,this,a.rotation),e.beginPath(),e.rect(n+c+d.left,i+c+d.top,s-l-d.width,r-l-d.height),e.clip(),lp(e,p,a),e.restore()}resolveElementProperties(e,n){return Au(e,n)}}wl.id="boxAnnotation";wl.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};wl.defaultRoutes={borderColor:"color",backgroundColor:"color"};wl.descriptors={label:{_fallback:!0}};function lz(t,e,n,i){const{x:s,x2:r,width:o,options:a}=t,{xAdjust:l,borderWidth:c}=a.label;return Xv({start:s,end:r,size:o},{position:n.x,padding:{start:i.left,end:i.right},adjust:l,borderWidth:c,size:e.width})}function cz(t,e,n,i){const{y:s,y2:r,height:o,options:a}=t,{yAdjust:l,borderWidth:c}=a.label;return Xv({start:s,end:r,size:o},{position:n.y,padding:{start:i.top,end:i.bottom},adjust:l,borderWidth:c,size:e.height})}function Xv(t,e){const{start:n,end:i}=t,{position:s,padding:{start:r,end:o},adjust:a,borderWidth:l}=e,c=i-l-n-r-o-e.size;return n+l/2+a+r+sp(c,s)}const cp=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Gh=(t,e,n)=>cp(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,hy=(t,e,n)=>cp(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,ma=t=>t*t,ga=.001;function fy({x:t,y:e,x2:n,y2:i},{top:s,right:r,bottom:o,left:a}){return!(t<a&&n<a||t>r&&n>r||e<s&&i<s||e>o&&i>o)}function py({x:t,y:e},n,{top:i,right:s,bottom:r,left:o}){return t<o&&(e=hy(o,{x:t,y:e},n),t=o),t>s&&(e=hy(s,{x:t,y:e},n),t=s),e<i&&(t=Gh(i,{x:t,y:e},n),e=i),e>r&&(t=Gh(r,{x:t,y:e},n),e=r),{x:t,y:e}}function uz(t,e,n){const{x:i,y:s}=py(t,e,n),{x:r,y:o}=py(e,t,n);return{x:i,y:s,x2:r,y2:o,width:Math.abs(r-i),height:Math.abs(o-s)}}class Sl extends Sn{intersects(e,n,i=ga,s){const{x:r,y:o,x2:a,y2:l}=this.getProps(["x","y","x2","y2"],s),c=a-r,u=l-o,d=ma(c)+ma(u),h=d===0?-1:((e-r)*c+(n-o)*u)/d;let p,g;return h<0?(p=r,g=o):h>1?(p=a,g=l):(p=r+h*c,g=o+h*u),ma(e-p)+ma(n-g)<=i}labelIsVisible(e,n){const i=this.options.label;return!i||!i.enabled?!1:!n||fy(this.getProps(["x","y","x2","y2"],e),n)}isOnLabel(e,n,i){if(!this.labelIsVisible(i))return!1;const{labelX:s,labelY:r,labelWidth:o,labelHeight:a,labelRotation:l}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],i),{x:c,y:u}=_l({x:e,y:n},{x:s,y:r},-l),d=this.options.label.borderWidth/2||0,h=o/2+d,p=a/2+d;return c>=s-h-ga&&c<=s+h+ga&&u>=r-p-ga&&u<=r+p+ga}inRange(e,n,i){const s=ma(this.options.borderWidth/2);return this.intersects(e,n,s,i)||this.isOnLabel(e,n,i)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(e){const{x:n,y:i,x2:s,y2:r,options:o}=this;if(e.save(),!$r(e,o))return e.restore();qo(e,o);const a=Math.atan2(r-i,s-n),l=Math.sqrt(Math.pow(s-n,2)+Math.pow(r-i,2)),{startOpts:c,endOpts:u,startAdjust:d,endAdjust:h}=yz(this);e.translate(n,i),e.rotate(a),e.beginPath(),e.moveTo(0+d,0),e.lineTo(l-h,0),e.shadowColor=o.borderShadowColor,e.stroke(),xy(e,0,d,c),xy(e,l,-h,u),e.restore()}drawLabel(e,n){if(!this.labelIsVisible(!1,n))return;const{labelX:i,labelY:s,labelWidth:r,labelHeight:o,labelRotation:a,labelPadding:l,labelTextSize:c,options:{label:u}}=this;e.save(),e.translate(i,s),e.rotate(a);const d={x:-(r/2),y:-(o/2),width:r,height:o};ap(e,d,u);const h={x:-(r/2)+l.left+u.borderWidth/2,y:-(o/2)+l.top+u.borderWidth/2,width:c.width,height:c.height};lp(e,h,u),e.restore()}resolveElementProperties(e,n){const i=e.scales[n.scaleID];let{top:s,left:r,bottom:o,right:a}=e.chartArea,l,c;if(i)l=zi(i,n.value,NaN),c=zi(i,n.endValue,l),i.isHorizontal()?(r=l,a=c):(s=l,o=c);else{const p=e.scales[n.xScaleID],g=e.scales[n.yScaleID];p&&(r=zi(p,n.xMin,r),a=zi(p,n.xMax,a)),g&&(s=zi(g,n.yMin,s),o=zi(g,n.yMax,o))}const d=fy({x:r,y:s,x2:a,y2:o},e.chartArea)?uz({x:r,y:s},{x:a,y:o},e.chartArea):{x:r,y:s,x2:a,y2:o,width:Math.abs(a-r),height:Math.abs(o-s)},h=n.label;return h&&h.content?dz(d,e,h):d}}Sl.id="lineAnnotation";const my={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Sl.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},my),fill:!1,length:12,start:Object.assign({},my),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};Sl.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Sl.defaultRoutes={borderColor:"color"};function dz(t,e,n){const{padding:i,xPadding:s,yPadding:r,borderWidth:o}=n,a=fz(i,s,r),l=op(e.ctx,n),c=l.width+a.width+o,u=l.height+a.height+o,d=pz(t,n,{width:c,height:u,padding:a},e.chartArea);return t.labelX=d.x,t.labelY=d.y,t.labelWidth=d.width,t.labelHeight=d.height,t.labelRotation=d.rotation,t.labelPadding=a,t.labelTextSize=l,t}function hz(t){const{x:e,y:n,x2:i,y2:s}=t,r=Math.atan2(s-n,i-e);return r>Tt/2?r-Tt:r<Tt/-2?r+Tt:r}function fz(t,e,n){let i=t;return(e||n)&&(i={x:e||6,y:n||6}),rn(i)}function pz(t,e,n,i){const{width:s,height:r,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?hz(t):pn(e.rotation),h=mz(s,r,d),p=gz(t,e,{labelSize:h,padding:o},i),g=cp(c,u,p),m={size:h.w,min:i.left,max:i.right,padding:o.left},f={size:h.h,min:i.top,max:i.bottom,padding:o.top};return{x:by(g.x,m)+a,y:by(g.y,f)+l,width:s,height:r,rotation:d}}function mz(t,e,n){const i=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*i)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*i)}}function gz(t,e,n,i){let s;const r=bz(t,i);return e.position==="start"?s=gy({w:t.x2-t.x,h:t.y2-t.y},n,e,r):e.position==="end"?s=1-gy({w:t.x-t.x2,h:t.y-t.y2},n,e,r):s=sp(1,e.position),s}function gy(t,e,n,i){const{labelSize:s,padding:r}=e,o=t.w*i.dx,a=t.h*i.dy,l=o>0&&(s.w/2+r.left-i.x)/o,c=a>0&&(s.h/2+r.top-i.y)/a;return ip(Math.max(l,c),0,.25)}function bz(t,e){const{x:n,x2:i,y:s,y2:r}=t,o=Math.min(s,r)-e.top,a=Math.min(n,i)-e.left,l=e.bottom-Math.max(s,r),c=e.right-Math.max(n,i);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function by(t,e){const{size:n,min:i,max:s,padding:r}=e,o=n/2;return n>s-i?(s+i)/2:(i>=t-r-o&&(t=i+r+o),s<=t+r+o&&(t=s-r-o),t)}function yz(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,i=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:i,startAdjust:yy(t,n),endAdjust:yy(t,i)}}function yy(t,e){if(!e||!e.enabled)return 0;const{length:n,width:i}=e,s=t.options.borderWidth/2,r={x:n,y:i+s};return Math.abs(Gh(0,r,{x:0,y:s}))}function xy(t,e,n,i){if(!i||!i.enabled)return;const{length:s,width:r,fill:o,backgroundColor:a,borderColor:l}=i,c=Math.abs(e-s)+n;t.beginPath(),qo(t,i),$r(t,i),t.moveTo(c,-r),t.lineTo(e+n,0),t.lineTo(c,r),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=i.borderShadowColor,t.stroke()}class Iu extends Sn{inRange(e,n,i){return xz({x:e,y:n},this.getProps(["width","height"],i),this.options.rotation,this.options.borderWidth)}getCenterPoint(e){return al(this.getProps(["x","y","width","height"],e))}draw(e){const{width:n,height:i,options:s}=this,r=this.getCenterPoint();e.save(),Xc(e,this,s.rotation),qo(e,this.options),e.beginPath(),e.fillStyle=s.backgroundColor;const o=$r(e,s);e.ellipse(r.x,r.y,i/2,n/2,Tt/2,0,2*Tt),e.fill(),o&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){return Au(e,n)}}Iu.id="ellipseAnnotation";Iu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};Iu.defaultRoutes={borderColor:"color",backgroundColor:"color"};function xz(t,e,n,i){const{width:s,height:r}=e,o=e.getCenterPoint(!0),a=s/2,l=r/2;if(a<=0||l<=0)return!1;const c=pn(n||0),u=i/2||0,d=Math.cos(c),h=Math.sin(c),p=Math.pow(d*(t.x-o.x)+h*(t.y-o.y),2),g=Math.pow(h*(t.x-o.x)-d*(t.y-o.y),2);return p/Math.pow(a+u,2)+g/Math.pow(l+u,2)<=1.0001}class ku extends Sn{inRange(e,n,i){const{x:s,y:r}=_l({x:e,y:n},this.getCenterPoint(i),pn(-this.options.rotation));return Vv(s,r,this.getProps(["x","y","width","height"],i),this.options.borderWidth)}getCenterPoint(e){return al(this.getProps(["x","y","width","height"],e))}draw(e){if(!this.options.content)return;const{labelX:n,labelY:i,labelWidth:s,labelHeight:r,options:o}=this;e.save(),Xc(e,this,o.rotation),_z(e,this),ap(e,this,o),lp(e,{x:n,y:i,width:s,height:r},o),e.restore()}resolveElementProperties(e,n){const i=jv(n)?$v(e,n):al(Au(e,n)),s=rn(n.padding),r=op(e.ctx,n),o=vz(i,r,n,s),a=n.borderWidth/2,l={pointX:i.x,pointY:i.y,...o,labelX:o.x+s.left+a,labelY:o.y+s.top+a,labelWidth:r.width,labelHeight:r.height};return l.calloutPosition=n.callout.enabled&&Tz(l,n.callout,n.rotation),l}}ku.id="labelAnnotation";ku.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};ku.defaultRoutes={borderColor:"color"};function vz(t,e,n,i){const s=e.width+i.width+n.borderWidth,r=e.height+i.height+n.borderWidth,o=Gv(n.position);return{x:vy(t.x,s,n.xAdjust,o.x),y:vy(t.y,r,n.yAdjust,o.y),width:s,height:r}}function vy(t,e,n=0,i){return t-sp(e,i)+n}function _z(t,e){const{pointX:n,pointY:i,calloutPosition:s,options:r}=e;if(!s||e.inRange(n,i))return;const o=r.callout;if(t.save(),t.beginPath(),!$r(t,o))return t.restore();const{separatorStart:l,separatorEnd:c}=wz(e,s),{sideStart:u,sideEnd:d}=Mz(e,s,l);(o.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const h=_l({x:n,y:i},e.getCenterPoint(),pn(-r.rotation));t.lineTo(h.x,h.y),t.stroke(),t.restore()}function wz(t,e){const{x:n,y:i,width:s,height:r}=t,o=Sz(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:i},l={x:a.x,y:a.y+r}):(a={x:n,y:i+o},l={x:a.x+s,y:a.y}),{separatorStart:a,separatorEnd:l}}function Sz(t,e){const{width:n,height:i,options:s}=t,r=s.callout.margin+s.borderWidth/2;return e==="right"?n+r:e==="bottom"?i+r:-r}function Mz(t,e,n){const{y:i,width:s,height:r,options:o}=t,a=o.callout.start,l=Cz(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:i+zo(r,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+zo(s,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function Cz(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Tz(t,e,n){const i=e.position;return i==="left"||i==="right"||i==="top"||i==="bottom"?i:Dz(t,e,n)}const Ez=["left","bottom","top","right"];function Dz(t,e,n){const{x:i,y:s,width:r,height:o,pointX:a,pointY:l}=t,c={x:i+r/2,y:s+o/2},u=e.start,d=zo(r,u),h=zo(o,u),p=[i,i+d,i+d,i+r],g=[s+h,s+o,s,s+h],m=[];for(let f=0;f<4;f++){const b=_l({x:p[f],y:g[f]},c,pn(n));m.push({position:Ez[f],distance:nl(b,{x:a,y:l})})}return m.sort((f,b)=>f.distance-b.distance)[0].position}class Ou extends Sn{inRange(e,n,i){const{width:s}=this.getProps(["width"],i);return nz({x:e,y:n},this.getCenterPoint(i),s/2,this.options.borderWidth)}getCenterPoint(e){return Uv(this,e)}draw(e){const n=this.options,i=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,qo(e,n);const s=$r(e,n);n.borderWidth=0,sl(e,n,this.x,this.y),s&&!rp(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=i}resolveElementProperties(e,n){return Kv(e,n)}}Ou.id="pointAnnotation";Ou.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};Ou.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Fu extends Sn{inRange(e,n,i){return this.options.radius>=.1&&this.elements.length>1&&Pz(this.elements,e,n,i)}getCenterPoint(e){return Uv(this,e)}draw(e){const{elements:n,options:i}=this;e.save(),e.beginPath(),e.fillStyle=i.backgroundColor,qo(e,i);const s=$r(e,i);let r=!0;for(const o of n)r?(e.moveTo(o.x,o.y),r=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),s&&(e.shadowColor=i.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const{x:i,y:s,width:r,height:o}=Kv(e,n),{sides:a,radius:l,rotation:c,borderWidth:u}=n,d=u/2,h=[],p=2*Tt/a;let g=c*Xx;for(let m=0;m<a;m++,g+=p){const f=Math.sin(g),b=Math.cos(g);h.push({type:"point",optionScope:"point",properties:{x:i+f*l,y:s-b*l,bX:i+f*(l+d),bY:s-b*(l+d)}})}return{x:i,y:s,width:r,height:o,elements:h,initProperties:{x:i,y:s}}}}Fu.id="polygonAnnotation";Fu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};Fu.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Pz(t,e,n,i){let s=!1,r=t[t.length-1].getProps(["bX","bY"],i);for(const o of t){const a=o.getProps(["bX","bY"],i);a.bY>n!=r.bY>n&&e<(r.bX-a.bX)*(n-a.bY)/(r.bY-a.bY)+a.bX&&(s=!s),r=a}return s}const Gs={box:wl,ellipse:Iu,label:ku,line:Sl,point:Ou,polygon:Fu};Object.keys(Gs).forEach(t=>{yt.describe(`elements.${Gs[t].id}`,{_fallback:"plugins.annotation"})});const Lz={update:Object.assign};function up(t="line"){return Gs[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Rz(t,e,n,i){const s=Iz(t,n.animations,i),r=e.annotations,o=Fz(e.elements,r);for(let a=0;a<r.length;a++){const l=r[a],c=Yv(o,a,l.type),u=l.setContext(Oz(t,c,l)),d=c.resolveElementProperties(t,u);d.skip=Az(d),"elements"in d&&(kz(c,d,u,s),delete d.elements),Qt(c.x)||Object.assign(c,d),d.options=qv(u),s.update(c,d)}}function Az(t){return isNaN(t.x)||isNaN(t.y)}function Iz(t,e,n){return n==="reset"||n==="none"||n==="resize"?Lz:new Yf(t,e)}function kz(t,{elements:e,initProperties:n},i,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let o=0;o<e.length;o++){const a=e[o],l=a.properties,c=Yv(r,o,a.type,n),u=i[a.optionScope].override(a);l.options=qv(u),s.update(c,l)}}function Yv(t,e,n,i){const s=Gs[up(n)];let r=t[e];return(!r||!(r instanceof s))&&(r=t[e]=new s,ut(i)&&Object.assign(r,i)),r}function qv(t){const e=Gs[up(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,jh(t,e.defaults),jh(t,e.defaultRoutes));for(const i of np)n[i]=t[i];return n}function jh(t,e){const n={};for(const i of Object.keys(e)){const s=e[i],r=t[i];n[i]=ut(s)?jh(r,s):r}return n}function Oz(t,e,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:n.id,type:"annotation"}))}function Fz(t,e){const n=e.length,i=t.length;if(i<n){const s=n-i;t.splice(i,0,...new Array(s))}else i>n&&t.splice(n,i-n);return t}var Nz="chartjs-plugin-annotation",Bz="1.4.0";const Rs=new Map;var zz={id:"annotation",version:Bz,afterRegister(){ds.register(Gs),sz("chart.js","3.7",ds.version,!1)||(console.warn(`${Nz} has known issues with chart.js versions prior to 3.7, please consider upgrading.`),ds.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){ds.unregister(Gs)},beforeInit(t){Rs.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(t,e,n){const i=Rs.get(t),s=i.annotations=[];let r=n.annotations;ut(r)?Object.keys(r).forEach(o=>{const a=r[o];ut(a)&&(a.id=o,s.push(a))}):Et(r)&&s.push(...r),qB(s,t.scales)},afterDataLimits(t,e){const n=Rs.get(t);YB(t,e.scale,n.annotations.filter(i=>i.display&&i.adjustScaleRange))},afterUpdate(t,e,n){const i=Rs.get(t);GB(t,i,n),Rz(t,i,n,e.mode),i.visibleElements=i.elements.filter(s=>!s.skip&&s.options.display)},beforeDatasetsDraw(t,e,n){bc(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){bc(t,"afterDatasetsDraw",n.clip)},beforeDraw(t,e,n){bc(t,"beforeDraw",n.clip)},afterDraw(t,e,n){bc(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const i=Rs.get(t);jB(i,e.event,n)},destroy(t){Rs.delete(t)},_getState(t){return Rs.get(t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:t=>!np.includes(t),annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Gs[up(e.type)].id}`}},additionalOptionScopes:[""]};function bc(t,e,n){const{ctx:i,chartArea:s}=t,{visibleElements:r}=Rs.get(t);n&&pl(i,s),Zv(i,r,e),Vz(i,r,e),n&&ml(i),r.forEach(o=>{if(!("drawLabel"in o))return;const a=o.options.label;a&&a.enabled&&a.content&&(a.drawTime||o.options.drawTime)===e&&o.drawLabel(i,s)})}function Zv(t,e,n){for(const i of e)i.options.drawTime===n&&i.draw(t)}function Vz(t,e,n){for(const i of e)Et(i.elements)&&Zv(t,i.elements,n)}var Jv={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,i,s){var r=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function d(E,P,F){return setTimeout(_(E,F),P)}function h(E,P,F){return Array.isArray(E)?(p(E,F[P],F),!0):!1}function p(E,P,F){var ee;if(!!E)if(E.forEach)E.forEach(P,F);else if(E.length!==s)for(ee=0;ee<E.length;)P.call(F,E[ee],ee,E),ee++;else for(ee in E)E.hasOwnProperty(ee)&&P.call(F,E[ee],ee,E)}function g(E,P,F){var ee="DEPRECATED METHOD: "+P+`
`+F+` AT 
`;return function(){var Se=new Error("get-stack-trace"),ze=Se&&Se.stack?Se.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ft=e.console&&(e.console.warn||e.console.log);return ft&&ft.call(e.console,ee,ze),E.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(P){if(P===s||P===null)throw new TypeError("Cannot convert undefined or null to object");for(var F=Object(P),ee=1;ee<arguments.length;ee++){var Se=arguments[ee];if(Se!==s&&Se!==null)for(var ze in Se)Se.hasOwnProperty(ze)&&(F[ze]=Se[ze])}return F}:m=Object.assign;var f=g(function(P,F,ee){for(var Se=Object.keys(F),ze=0;ze<Se.length;)(!ee||ee&&P[Se[ze]]===s)&&(P[Se[ze]]=F[Se[ze]]),ze++;return P},"extend","Use `assign`."),b=g(function(P,F){return f(P,F,!0)},"merge","Use `assign`.");function x(E,P,F){var ee=P.prototype,Se;Se=E.prototype=Object.create(ee),Se.constructor=E,Se._super=ee,F&&m(Se,F)}function _(E,P){return function(){return E.apply(P,arguments)}}function y(E,P){return typeof E==a?E.apply(P&&P[0]||s,P):E}function v(E,P){return E===s?P:E}function C(E,P,F){p(N(P),function(ee){E.addEventListener(ee,F,!1)})}function R(E,P,F){p(N(P),function(ee){E.removeEventListener(ee,F,!1)})}function w(E,P){for(;E;){if(E==P)return!0;E=E.parentNode}return!1}function D(E,P){return E.indexOf(P)>-1}function N(E){return E.trim().split(/\s+/g)}function V(E,P,F){if(E.indexOf&&!F)return E.indexOf(P);for(var ee=0;ee<E.length;){if(F&&E[ee][F]==P||!F&&E[ee]===P)return ee;ee++}return-1}function j(E){return Array.prototype.slice.call(E,0)}function se(E,P,F){for(var ee=[],Se=[],ze=0;ze<E.length;){var ft=P?E[ze][P]:E[ze];V(Se,ft)<0&&ee.push(E[ze]),Se[ze]=ft,ze++}return F&&(P?ee=ee.sort(function(xn,In){return xn[P]>In[P]}):ee=ee.sort()),ee}function $(E,P){for(var F,ee,Se=P[0].toUpperCase()+P.slice(1),ze=0;ze<r.length;){if(F=r[ze],ee=F?F+Se:P,ee in E)return ee;ze++}return s}var q=1;function K(){return q++}function ne(E){var P=E.ownerDocument||E;return P.defaultView||P.parentWindow||e}var te=/mobile|tablet|ip(ad|hone|od)|android/i,J="ontouchstart"in e,de=$(e,"PointerEvent")!==s,ve=J&&te.test(navigator.userAgent),me="touch",ye="pen",ke="mouse",Ue="kinect",le=25,Ye=1,$e=2,Ne=4,Te=8,O=1,z=2,M=4,A=8,G=16,Y=z|M,re=A|G,fe=Y|re,xe=["x","y"],_e=["clientX","clientY"];function U(E,P){var F=this;this.manager=E,this.callback=P,this.element=E.element,this.target=E.options.inputTarget,this.domHandler=function(ee){y(E.options.enable,[E])&&F.handler(ee)},this.init()}U.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(ne(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(ne(this.element),this.evWin,this.domHandler)}};function S(E){var P,F=E.options.inputClass;return F?P=F:de?P=en:ve?P=Kr:J?P=Z:P=Ge,new P(E,T)}function T(E,P,F){var ee=F.pointers.length,Se=F.changedPointers.length,ze=P&Ye&&ee-Se===0,ft=P&(Ne|Te)&&ee-Se===0;F.isFirst=!!ze,F.isFinal=!!ft,ze&&(E.session={}),F.eventType=P,W(E,F),E.emit("hammer.input",F),E.recognize(F),E.session.prevInput=F}function W(E,P){var F=E.session,ee=P.pointers,Se=ee.length;F.firstInput||(F.firstInput=pe(P)),Se>1&&!F.firstMultiple?F.firstMultiple=pe(P):Se===1&&(F.firstMultiple=!1);var ze=F.firstInput,ft=F.firstMultiple,ln=ft?ft.center:ze.center,xn=P.center=Ae(ee);P.timeStamp=u(),P.deltaTime=P.timeStamp-ze.timeStamp,P.angle=Ee(ln,xn),P.distance=Me(ln,xn),Q(F,P),P.offsetDirection=ce(P.deltaX,P.deltaY);var In=L(P.deltaTime,P.deltaX,P.deltaY);P.overallVelocityX=In.x,P.overallVelocityY=In.y,P.overallVelocity=c(In.x)>c(In.y)?In.x:In.y,P.scale=ft?De(ft.pointers,ee):1,P.rotation=ft?B(ft.pointers,ee):0,P.maxPointers=F.prevInput?P.pointers.length>F.prevInput.maxPointers?P.pointers.length:F.prevInput.maxPointers:P.pointers.length,ae(F,P);var Ri=E.element;w(P.srcEvent.target,Ri)&&(Ri=P.srcEvent.target),P.target=Ri}function Q(E,P){var F=P.center,ee=E.offsetDelta||{},Se=E.prevDelta||{},ze=E.prevInput||{};(P.eventType===Ye||ze.eventType===Ne)&&(Se=E.prevDelta={x:ze.deltaX||0,y:ze.deltaY||0},ee=E.offsetDelta={x:F.x,y:F.y}),P.deltaX=Se.x+(F.x-ee.x),P.deltaY=Se.y+(F.y-ee.y)}function ae(E,P){var F=E.lastInterval||P,ee=P.timeStamp-F.timeStamp,Se,ze,ft,ln;if(P.eventType!=Te&&(ee>le||F.velocity===s)){var xn=P.deltaX-F.deltaX,In=P.deltaY-F.deltaY,Ri=L(ee,xn,In);ze=Ri.x,ft=Ri.y,Se=c(Ri.x)>c(Ri.y)?Ri.x:Ri.y,ln=ce(xn,In),E.lastInterval=P}else Se=F.velocity,ze=F.velocityX,ft=F.velocityY,ln=F.direction;P.velocity=Se,P.velocityX=ze,P.velocityY=ft,P.direction=ln}function pe(E){for(var P=[],F=0;F<E.pointers.length;)P[F]={clientX:l(E.pointers[F].clientX),clientY:l(E.pointers[F].clientY)},F++;return{timeStamp:u(),pointers:P,center:Ae(P),deltaX:E.deltaX,deltaY:E.deltaY}}function Ae(E){var P=E.length;if(P===1)return{x:l(E[0].clientX),y:l(E[0].clientY)};for(var F=0,ee=0,Se=0;Se<P;)F+=E[Se].clientX,ee+=E[Se].clientY,Se++;return{x:l(F/P),y:l(ee/P)}}function L(E,P,F){return{x:P/E||0,y:F/E||0}}function ce(E,P){return E===P?O:c(E)>=c(P)?E<0?z:M:P<0?A:G}function Me(E,P,F){F||(F=xe);var ee=P[F[0]]-E[F[0]],Se=P[F[1]]-E[F[1]];return Math.sqrt(ee*ee+Se*Se)}function Ee(E,P,F){F||(F=xe);var ee=P[F[0]]-E[F[0]],Se=P[F[1]]-E[F[1]];return Math.atan2(Se,ee)*180/Math.PI}function B(E,P){return Ee(P[1],P[0],_e)+Ee(E[1],E[0],_e)}function De(E,P){return Me(P[0],P[1],_e)/Me(E[0],E[1],_e)}var Pe={mousedown:Ye,mousemove:$e,mouseup:Ne},He="mousedown",Le="mousemove mouseup";function Ge(){this.evEl=He,this.evWin=Le,this.pressed=!1,U.apply(this,arguments)}x(Ge,U,{handler:function(P){var F=Pe[P.type];F&Ye&&P.button===0&&(this.pressed=!0),F&$e&&P.which!==1&&(F=Ne),this.pressed&&(F&Ne&&(this.pressed=!1),this.callback(this.manager,F,{pointers:[P],changedPointers:[P],pointerType:ke,srcEvent:P}))}});var Re={pointerdown:Ye,pointermove:$e,pointerup:Ne,pointercancel:Te,pointerout:Te},Je={2:me,3:ye,4:ke,5:Ue},St="pointerdown",Mt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(St="MSPointerDown",Mt="MSPointerMove MSPointerUp MSPointerCancel");function en(){this.evEl=St,this.evWin=Mt,U.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x(en,U,{handler:function(P){var F=this.store,ee=!1,Se=P.type.toLowerCase().replace("ms",""),ze=Re[Se],ft=Je[P.pointerType]||P.pointerType,ln=ft==me,xn=V(F,P.pointerId,"pointerId");ze&Ye&&(P.button===0||ln)?xn<0&&(F.push(P),xn=F.length-1):ze&(Ne|Te)&&(ee=!0),!(xn<0)&&(F[xn]=P,this.callback(this.manager,ze,{pointers:F,changedPointers:[P],pointerType:ft,srcEvent:P}),ee&&F.splice(xn,1))}});var ei={touchstart:Ye,touchmove:$e,touchend:Ne,touchcancel:Te},Cl="touchstart",Nu="touchstart touchmove touchend touchcancel";function ir(){this.evTarget=Cl,this.evWin=Nu,this.started=!1,U.apply(this,arguments)}x(ir,U,{handler:function(P){var F=ei[P.type];if(F===Ye&&(this.started=!0),!!this.started){var ee=Bu.call(this,P,F);F&(Ne|Te)&&ee[0].length-ee[1].length===0&&(this.started=!1),this.callback(this.manager,F,{pointers:ee[0],changedPointers:ee[1],pointerType:me,srcEvent:P})}}});function Bu(E,P){var F=j(E.touches),ee=j(E.changedTouches);return P&(Ne|Te)&&(F=se(F.concat(ee),"identifier",!0)),[F,ee]}var Jo={touchstart:Ye,touchmove:$e,touchend:Ne,touchcancel:Te},Tl="touchstart touchmove touchend touchcancel";function Kr(){this.evTarget=Tl,this.targetIds={},U.apply(this,arguments)}x(Kr,U,{handler:function(P){var F=Jo[P.type],ee=zu.call(this,P,F);!ee||this.callback(this.manager,F,{pointers:ee[0],changedPointers:ee[1],pointerType:me,srcEvent:P})}});function zu(E,P){var F=j(E.touches),ee=this.targetIds;if(P&(Ye|$e)&&F.length===1)return ee[F[0].identifier]=!0,[F,F];var Se,ze,ft=j(E.changedTouches),ln=[],xn=this.target;if(ze=F.filter(function(In){return w(In.target,xn)}),P===Ye)for(Se=0;Se<ze.length;)ee[ze[Se].identifier]=!0,Se++;for(Se=0;Se<ft.length;)ee[ft[Se].identifier]&&ln.push(ft[Se]),P&(Ne|Te)&&delete ee[ft[Se].identifier],Se++;if(!!ln.length)return[se(ze.concat(ln),"identifier",!0),ln]}var Vu=2500,I=25;function Z(){U.apply(this,arguments);var E=_(this.handler,this);this.touch=new Kr(this.manager,E),this.mouse=new Ge(this.manager,E),this.primaryTouch=null,this.lastTouches=[]}x(Z,U,{handler:function(P,F,ee){var Se=ee.pointerType==me,ze=ee.pointerType==ke;if(!(ze&&ee.sourceCapabilities&&ee.sourceCapabilities.firesTouchEvents)){if(Se)ue.call(this,F,ee);else if(ze&&be.call(this,ee))return;this.callback(P,F,ee)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function ue(E,P){E&Ye?(this.primaryTouch=P.changedPointers[0].identifier,ie.call(this,P)):E&(Ne|Te)&&ie.call(this,P)}function ie(E){var P=E.changedPointers[0];if(P.identifier===this.primaryTouch){var F={x:P.clientX,y:P.clientY};this.lastTouches.push(F);var ee=this.lastTouches,Se=function(){var ze=ee.indexOf(F);ze>-1&&ee.splice(ze,1)};setTimeout(Se,Vu)}}function be(E){for(var P=E.srcEvent.clientX,F=E.srcEvent.clientY,ee=0;ee<this.lastTouches.length;ee++){var Se=this.lastTouches[ee],ze=Math.abs(P-Se.x),ft=Math.abs(F-Se.y);if(ze<=I&&ft<=I)return!0}return!1}var Ze=$(o.style,"touchAction"),tt=Ze!==s,ot="compute",rt="auto",wt="manipulation",at="none",dt="pan-x",Pt="pan-y",ti=ni();function Li(E,P){this.manager=E,this.set(P)}Li.prototype={set:function(E){E==ot&&(E=this.compute()),tt&&this.manager.element.style&&ti[E]&&(this.manager.element.style[Ze]=E),this.actions=E.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var E=[];return p(this.manager.recognizers,function(P){y(P.options.enable,[P])&&(E=E.concat(P.getTouchAction()))}),gs(E.join(" "))},preventDefaults:function(E){var P=E.srcEvent,F=E.offsetDirection;if(this.manager.session.prevented){P.preventDefault();return}var ee=this.actions,Se=D(ee,at)&&!ti[at],ze=D(ee,Pt)&&!ti[Pt],ft=D(ee,dt)&&!ti[dt];if(Se){var ln=E.pointers.length===1,xn=E.distance<2,In=E.deltaTime<250;if(ln&&xn&&In)return}if(!(ft&&ze)&&(Se||ze&&F&Y||ft&&F&re))return this.preventSrc(P)},preventSrc:function(E){this.manager.session.prevented=!0,E.preventDefault()}};function gs(E){if(D(E,at))return at;var P=D(E,dt),F=D(E,Pt);return P&&F?at:P||F?P?dt:Pt:D(E,wt)?wt:rt}function ni(){if(!tt)return!1;var E={},P=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(F){E[F]=P?e.CSS.supports("touch-action",F):!0}),E}var xt=1,tn=2,Rt=4,nn=8,an=nn,gi=16,zn=32;function Nt(E){this.options=m({},this.defaults,E||{}),this.id=K(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=xt,this.simultaneous={},this.requireFail=[]}Nt.prototype={defaults:{},set:function(E){return m(this.options,E),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(E){if(h(E,"recognizeWith",this))return this;var P=this.simultaneous;return E=An(E,this),P[E.id]||(P[E.id]=E,E.recognizeWith(this)),this},dropRecognizeWith:function(E){return h(E,"dropRecognizeWith",this)?this:(E=An(E,this),delete this.simultaneous[E.id],this)},requireFailure:function(E){if(h(E,"requireFailure",this))return this;var P=this.requireFail;return E=An(E,this),V(P,E)===-1&&(P.push(E),E.requireFailure(this)),this},dropRequireFailure:function(E){if(h(E,"dropRequireFailure",this))return this;E=An(E,this);var P=V(this.requireFail,E);return P>-1&&this.requireFail.splice(P,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(E){return!!this.simultaneous[E.id]},emit:function(E){var P=this,F=this.state;function ee(Se){P.manager.emit(Se,E)}F<nn&&ee(P.options.event+bs(F)),ee(P.options.event),E.additionalEvent&&ee(E.additionalEvent),F>=nn&&ee(P.options.event+bs(F))},tryEmit:function(E){if(this.canEmit())return this.emit(E);this.state=zn},canEmit:function(){for(var E=0;E<this.requireFail.length;){if(!(this.requireFail[E].state&(zn|xt)))return!1;E++}return!0},recognize:function(E){var P=m({},E);if(!y(this.options.enable,[this,P])){this.reset(),this.state=zn;return}this.state&(an|gi|zn)&&(this.state=xt),this.state=this.process(P),this.state&(tn|Rt|nn|gi)&&this.tryEmit(P)},process:function(E){},getTouchAction:function(){},reset:function(){}};function bs(E){return E&gi?"cancel":E&nn?"end":E&Rt?"move":E&tn?"start":""}function Xr(E){return E==G?"down":E==A?"up":E==z?"left":E==M?"right":""}function An(E,P){var F=P.manager;return F?F.get(E):E}function bi(){Nt.apply(this,arguments)}x(bi,Nt,{defaults:{pointers:1},attrTest:function(E){var P=this.options.pointers;return P===0||E.pointers.length===P},process:function(E){var P=this.state,F=E.eventType,ee=P&(tn|Rt),Se=this.attrTest(E);return ee&&(F&Te||!Se)?P|gi:ee||Se?F&Ne?P|nn:P&tn?P|Rt:tn:zn}});function El(){bi.apply(this,arguments),this.pX=null,this.pY=null}x(El,bi,{defaults:{event:"pan",threshold:10,pointers:1,direction:fe},getTouchAction:function(){var E=this.options.direction,P=[];return E&Y&&P.push(Pt),E&re&&P.push(dt),P},directionTest:function(E){var P=this.options,F=!0,ee=E.distance,Se=E.direction,ze=E.deltaX,ft=E.deltaY;return Se&P.direction||(P.direction&Y?(Se=ze===0?O:ze<0?z:M,F=ze!=this.pX,ee=Math.abs(E.deltaX)):(Se=ft===0?O:ft<0?A:G,F=ft!=this.pY,ee=Math.abs(E.deltaY))),E.direction=Se,F&&ee>P.threshold&&Se&P.direction},attrTest:function(E){return bi.prototype.attrTest.call(this,E)&&(this.state&tn||!(this.state&tn)&&this.directionTest(E))},emit:function(E){this.pX=E.deltaX,this.pY=E.deltaY;var P=Xr(E.direction);P&&(E.additionalEvent=this.options.event+P),this._super.emit.call(this,E)}});function Uu(){bi.apply(this,arguments)}x(Uu,bi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(E){return this._super.attrTest.call(this,E)&&(Math.abs(E.scale-1)>this.options.threshold||this.state&tn)},emit:function(E){if(E.scale!==1){var P=E.scale<1?"in":"out";E.additionalEvent=this.options.event+P}this._super.emit.call(this,E)}});function Hu(){Nt.apply(this,arguments),this._timer=null,this._input=null}x(Hu,Nt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[rt]},process:function(E){var P=this.options,F=E.pointers.length===P.pointers,ee=E.distance<P.threshold,Se=E.deltaTime>P.time;if(this._input=E,!ee||!F||E.eventType&(Ne|Te)&&!Se)this.reset();else if(E.eventType&Ye)this.reset(),this._timer=d(function(){this.state=an,this.tryEmit()},P.time,this);else if(E.eventType&Ne)return an;return zn},reset:function(){clearTimeout(this._timer)},emit:function(E){this.state===an&&(E&&E.eventType&Ne?this.manager.emit(this.options.event+"up",E):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Wu(){bi.apply(this,arguments)}x(Wu,bi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[at]},attrTest:function(E){return this._super.attrTest.call(this,E)&&(Math.abs(E.rotation)>this.options.threshold||this.state&tn)}});function Gu(){bi.apply(this,arguments)}x(Gu,bi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|re,pointers:1},getTouchAction:function(){return El.prototype.getTouchAction.call(this)},attrTest:function(E){var P=this.options.direction,F;return P&(Y|re)?F=E.overallVelocity:P&Y?F=E.overallVelocityX:P&re&&(F=E.overallVelocityY),this._super.attrTest.call(this,E)&&P&E.offsetDirection&&E.distance>this.options.threshold&&E.maxPointers==this.options.pointers&&c(F)>this.options.velocity&&E.eventType&Ne},emit:function(E){var P=Xr(E.offsetDirection);P&&this.manager.emit(this.options.event+P,E),this.manager.emit(this.options.event,E)}});function Dl(){Nt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}x(Dl,Nt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(E){var P=this.options,F=E.pointers.length===P.pointers,ee=E.distance<P.threshold,Se=E.deltaTime<P.time;if(this.reset(),E.eventType&Ye&&this.count===0)return this.failTimeout();if(ee&&Se&&F){if(E.eventType!=Ne)return this.failTimeout();var ze=this.pTime?E.timeStamp-this.pTime<P.interval:!0,ft=!this.pCenter||Me(this.pCenter,E.center)<P.posThreshold;this.pTime=E.timeStamp,this.pCenter=E.center,!ft||!ze?this.count=1:this.count+=1,this._input=E;var ln=this.count%P.taps;if(ln===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=an,this.tryEmit()},P.interval,this),tn):an}return zn},failTimeout:function(){return this._timer=d(function(){this.state=zn},this.options.interval,this),zn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==an&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ji(E,P){return P=P||{},P.recognizers=v(P.recognizers,ji.defaults.preset),new ju(E,P)}ji.VERSION="2.0.7",ji.defaults={domEvents:!1,touchAction:ot,enable:!0,inputTarget:null,inputClass:null,preset:[[Wu,{enable:!1}],[Uu,{enable:!1},["rotate"]],[Gu,{direction:Y}],[El,{direction:Y},["swipe"]],[Dl],[Dl,{event:"doubletap",taps:2},["tap"]],[Hu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var c_=1,fp=2;function ju(E,P){this.options=m({},ji.defaults,P||{}),this.options.inputTarget=this.options.inputTarget||E,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=E,this.input=S(this),this.touchAction=new Li(this,this.options.touchAction),pp(this,!0),p(this.options.recognizers,function(F){var ee=this.add(new F[0](F[1]));F[2]&&ee.recognizeWith(F[2]),F[3]&&ee.requireFailure(F[3])},this)}ju.prototype={set:function(E){return m(this.options,E),E.touchAction&&this.touchAction.update(),E.inputTarget&&(this.input.destroy(),this.input.target=E.inputTarget,this.input.init()),this},stop:function(E){this.session.stopped=E?fp:c_},recognize:function(E){var P=this.session;if(!P.stopped){this.touchAction.preventDefaults(E);var F,ee=this.recognizers,Se=P.curRecognizer;(!Se||Se&&Se.state&an)&&(Se=P.curRecognizer=null);for(var ze=0;ze<ee.length;)F=ee[ze],P.stopped!==fp&&(!Se||F==Se||F.canRecognizeWith(Se))?F.recognize(E):F.reset(),!Se&&F.state&(tn|Rt|nn)&&(Se=P.curRecognizer=F),ze++}},get:function(E){if(E instanceof Nt)return E;for(var P=this.recognizers,F=0;F<P.length;F++)if(P[F].options.event==E)return P[F];return null},add:function(E){if(h(E,"add",this))return this;var P=this.get(E.options.event);return P&&this.remove(P),this.recognizers.push(E),E.manager=this,this.touchAction.update(),E},remove:function(E){if(h(E,"remove",this))return this;if(E=this.get(E),E){var P=this.recognizers,F=V(P,E);F!==-1&&(P.splice(F,1),this.touchAction.update())}return this},on:function(E,P){if(E!==s&&P!==s){var F=this.handlers;return p(N(E),function(ee){F[ee]=F[ee]||[],F[ee].push(P)}),this}},off:function(E,P){if(E!==s){var F=this.handlers;return p(N(E),function(ee){P?F[ee]&&F[ee].splice(V(F[ee],P),1):delete F[ee]}),this}},emit:function(E,P){this.options.domEvents&&u_(E,P);var F=this.handlers[E]&&this.handlers[E].slice();if(!(!F||!F.length)){P.type=E,P.preventDefault=function(){P.srcEvent.preventDefault()};for(var ee=0;ee<F.length;)F[ee](P),ee++}},destroy:function(){this.element&&pp(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function pp(E,P){var F=E.element;if(!!F.style){var ee;p(E.options.cssProps,function(Se,ze){ee=$(F.style,ze),P?(E.oldCssProps[ee]=F.style[ee],F.style[ee]=Se):F.style[ee]=E.oldCssProps[ee]||""}),P||(E.oldCssProps={})}}function u_(E,P){var F=n.createEvent("Event");F.initEvent(E,!0,!0),F.gesture=P,P.target.dispatchEvent(F)}m(ji,{INPUT_START:Ye,INPUT_MOVE:$e,INPUT_END:Ne,INPUT_CANCEL:Te,STATE_POSSIBLE:xt,STATE_BEGAN:tn,STATE_CHANGED:Rt,STATE_ENDED:nn,STATE_RECOGNIZED:an,STATE_CANCELLED:gi,STATE_FAILED:zn,DIRECTION_NONE:O,DIRECTION_LEFT:z,DIRECTION_RIGHT:M,DIRECTION_UP:A,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:re,DIRECTION_ALL:fe,Manager:ju,Input:U,TouchAction:Li,TouchInput:Kr,MouseInput:Ge,PointerEventInput:en,TouchMouseInput:Z,SingleTouchInput:ir,Recognizer:Nt,AttrRecognizer:bi,Tap:Dl,Pan:El,Swipe:Gu,Pinch:Uu,Rotate:Wu,Press:Hu,on:C,off:R,each:p,merge:b,extend:f,assign:m,inherit:x,bindFn:_,prefixed:$});var d_=typeof e!="undefined"?e:typeof self!="undefined"?self:{};d_.Hammer=ji,typeof s=="function"&&s.amd?s(function(){return ji}):t.exports?t.exports=ji:e[i]=ji})(window,document,"Hammer")})(Jv);var Va=Jv.exports;/*!
* chartjs-plugin-zoom v1.2.1
* undefined
 * (c) 2016-2022 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const ll=t=>t&&t.enabled&&t.modifierKey,Qv=(t,e)=>t&&e[t+"Key"],dp=(t,e)=>t&&!e[t+"Key"];function jn(t,e,n){return t===void 0?!0:typeof t=="string"?t.indexOf(e)!==-1:typeof t=="function"?t({chart:n}).indexOf(e)!==-1:!1}function Uz(t,e){let n;return function(){return clearTimeout(n),n=setTimeout(t,e),e}}function Hz({x:t,y:e},n){const i=n.scales,s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]];if(e>=o.top&&e<=o.bottom&&t>=o.left&&t<=o.right)return o}return null}function e_(t,e,n){const i=Hz(e,n);if(i&&jn(t,i.axis,n))return[i];const s=[];return mt(n.scales,function(r){jn(t,r.axis,n)||s.push(r)}),s}const $h=new WeakMap;function qt(t){let e=$h.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},$h.set(t,e)),e}function Wz(t){$h.delete(t)}function t_(t,e,n){const i=t.max-t.min,s=i*(e-1),r=t.isHorizontal()?n.x:n.y,o=Math.max(0,Math.min(1,(t.getValueForPixel(r)-t.min)/i||0)),a=1-o;return{min:s*o,max:s*a}}function _y(t,e,n,i,s){let r=n[i];if(r==="original"){const o=t.originalScaleLimits[e.id][i];r=qe(o.options,o.scale)}return qe(r,s)}function zr(t,{min:e,max:n},i,s=!1){const r=qt(t.chart),{id:o,axis:a,options:l}=t,c=i&&(i[o]||i[a])||{},{minRange:u=0}=c,d=_y(r,t,c,"min",-1/0),h=_y(r,t,c,"max",1/0),p=Math.max(e,d),g=Math.min(n,h),m=s?Math.max(g-p,u):t.max-t.min;if(g-p!==m)if(d>g-m)e=p,n=p+m;else if(h<p+m)n=g,e=g-m;else{const f=(m-g+p)/2;e=p-f,n=g+f}else e=p,n=g;return l.min=e,l.max=n,r.updatedScaleLimits[t.id]={min:e,max:n},t.parse(e)!==t.min||t.parse(n)!==t.max}function Gz(t,e,n,i){const s=t_(t,e,n),r={min:t.min+s.min,max:t.max-s.max};return zr(t,r,i,!0)}const wy=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function jz(t){const n=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<n&&(t.max+=1)}function $z(t,e,n,i){const s=t_(t,e,n);t.min===t.max&&e<1&&jz(t);const r={min:t.min+wy(s.min),max:t.max-wy(s.max)};return zr(t,r,i,!0)}function Kz(t){return t.isHorizontal()?t.width:t.height}function Xz(t,e,n){const s=t.getLabels().length-1;let{min:r,max:o}=t;const a=Math.max(o-r,1),l=Math.round(Kz(t)/Math.max(a,10)),c=Math.round(Math.abs(e/l));let u;return e<-l?(o=Math.min(o+c,s),r=a===1?o:o-a,u=o===s):e>l&&(r=Math.max(0,r-c),o=a===1?r:r+a,u=r===0),zr(t,{min:r,max:o},n)||u}const Yz={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function n_(t,e,n,i=!1){const{min:s,max:r,options:o}=t,a=o.time&&o.time.round,l=Yz[a]||0,c=t.getValueForPixel(t.getPixelForValue(s+l)-e),u=t.getValueForPixel(t.getPixelForValue(r+l)-e),{min:d=-1/0,max:h=1/0}=i&&n&&n[t.axis]||{};return isNaN(c)||isNaN(u)||c<d||u>h?!0:zr(t,{min:c,max:u},n,i)}function Sy(t,e,n){return n_(t,e,n,!0)}const Kh={category:$z,default:Gz},Xh={category:Xz,default:n_,logarithmic:Sy,timeseries:Sy};function qz(t,e,n){const{id:i,options:{min:s,max:r}}=t;if(!e[i]||!n[i])return!0;const o=n[i];return o.min!==s||o.max!==r}function My(t,e){mt(t,(n,i)=>{e[i]||delete t[i]})}function Ml(t,e){const{scales:n}=t,{originalScaleLimits:i,updatedScaleLimits:s}=e;return mt(n,function(r){qz(r,i,s)&&(i[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),My(i,n),My(s,n),i}function Cy(t,e,n,i){const s=Kh[t.type]||Kh.default;nt(s,[t,e,n,i])}function Zz(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function hp(t,e,n="none"){const{x:i=1,y:s=1,focalPoint:r=Zz(t)}=typeof e=="number"?{x:e,y:e}:e,o=qt(t),{options:{limits:a,zoom:l}}=o,{mode:c="xy",overScaleMode:u}=l||{};Ml(t,o);const d=i!==1&&jn(c,"x",t),h=s!==1&&jn(c,"y",t),p=u&&e_(u,r,t);mt(p||t.scales,function(g){g.isHorizontal()&&d?Cy(g,i,r,a):!g.isHorizontal()&&h&&Cy(g,s,r,a)}),t.update(n),nt(l.onZoom,[{chart:t}])}function Ty(t,e,n){const i=t.getValueForPixel(e),s=t.getValueForPixel(n);return{min:Math.min(i,s),max:Math.max(i,s)}}function Jz(t,e,n,i="none"){const s=qt(t),{options:{limits:r,zoom:o}}=s,{mode:a="xy"}=o;Ml(t,s);const l=jn(a,"x",t),c=jn(a,"y",t);mt(t.scales,function(u){u.isHorizontal()&&l?zr(u,Ty(u,e.x,n.x),r,!0):!u.isHorizontal()&&c&&zr(u,Ty(u,e.y,n.y),r,!0)}),t.update(i),nt(o.onZoom,[{chart:t}])}function Qz(t,e,n,i="none"){Ml(t,qt(t));const s=t.scales[e];zr(s,n,void 0,!0),t.update(i)}function eV(t,e="default"){const n=qt(t),i=Ml(t,n);mt(t.scales,function(s){const r=s.options;i[s.id]?(r.min=i[s.id].min.options,r.max=i[s.id].max.options):(delete r.min,delete r.max)}),t.update(e),nt(n.options.zoom.onZoomComplete,[{chart:t}])}function tV(t,e){const n=t.originalScaleLimits[e];if(!n)return;const{min:i,max:s}=n;return qe(s.options,s.scale)-qe(i.options,i.scale)}function nV(t){const e=qt(t);let n=1,i=1;return mt(t.scales,function(s){const r=tV(e,s.id);if(r){const o=Math.round(r/(s.max-s.min)*100)/100;n=Math.min(n,o),i=Math.max(i,o)}}),n<1?n:i}function Ey(t,e,n,i){const{panDelta:s}=i,r=s[t.id]||0;fi(r)===fi(e)&&(e+=r);const o=Xh[t.type]||Xh.default;nt(o,[t,e,n])?s[t.id]=0:s[t.id]=e}function i_(t,e,n,i="none"){const{x:s=0,y:r=0}=typeof e=="number"?{x:e,y:e}:e,o=qt(t),{options:{pan:a,limits:l}}=o,{mode:c="xy",onPan:u}=a||{};Ml(t,o);const d=s!==0&&jn(c,"x",t),h=r!==0&&jn(c,"y",t);mt(n||t.scales,function(p){p.isHorizontal()&&d?Ey(p,s,l,o):!p.isHorizontal()&&h&&Ey(p,r,l,o)}),t.update(i),nt(u,[{chart:t}])}function s_(t){const e=qt(t),n={};for(const i of Object.keys(t.scales)){const{min:s,max:r}=e.originalScaleLimits[i]||{min:{},max:{}};n[i]={min:s.scale,max:r.scale}}return n}function iV(t){const e=s_(t);for(const n of Object.keys(t.scales)){const{min:i,max:s}=e[n];if(i!==void 0&&t.scales[n].min!==i||s!==void 0&&t.scales[n].max!==s)return!0}return!1}function Ci(t,e){const{handlers:n}=qt(t),i=n[e];i&&i.target&&(i.target.removeEventListener(e,i),delete n[e])}function Cc(t,e,n,i){const{handlers:s,options:r}=qt(t),o=s[n];o&&o.target===e||(Ci(t,n),s[n]=a=>i(t,a,r),s[n].target=e,e.addEventListener(n,s[n]))}function sV(t,e){const n=qt(t);n.dragStart&&(n.dragging=!0,n.dragEnd=e,t.update("none"))}function r_(t,e,n){const{onZoomStart:i,onZoomRejected:s}=n;if(i){const{left:r,top:o}=e.target.getBoundingClientRect(),a={x:e.clientX-r,y:e.clientY-o};if(nt(i,[{chart:t,event:e,point:a}])===!1)return nt(s,[{chart:t,event:e}]),!1}}function rV(t,e){const n=qt(t),{pan:i,zoom:s={}}=n.options;if(Qv(ll(i),e)||dp(ll(s.drag),e))return nt(s.onZoomRejected,[{chart:t,event:e}]);r_(t,e,s)!==!1&&(n.dragStart=e,Cc(t,t.canvas,"mousemove",sV))}function o_(t,e,n,i){const{left:s,top:r}=n.target.getBoundingClientRect(),o=jn(e,"x",t),a=jn(e,"y",t);let{top:l,left:c,right:u,bottom:d,width:h,height:p}=t.chartArea;o&&(c=Math.min(n.clientX,i.clientX)-s,u=Math.max(n.clientX,i.clientX)-s),a&&(l=Math.min(n.clientY,i.clientY)-r,d=Math.max(n.clientY,i.clientY)-r);const g=u-c,m=d-l;return{left:c,top:l,right:u,bottom:d,width:g,height:m,zoomX:o&&g?1+(h-g)/h:1,zoomY:a&&m?1+(p-m)/p:1}}function oV(t,e){const n=qt(t);if(!n.dragStart)return;Ci(t,"mousemove");const{mode:i,onZoomComplete:s,drag:{threshold:r=0}}=n.options.zoom,o=o_(t,i,n.dragStart,e),a=jn(i,"x",t)?o.width:0,l=jn(i,"y",t)?o.height:0,c=Math.sqrt(a*a+l*l);if(n.dragStart=n.dragEnd=null,c<=r){n.dragging=!1,t.update("none");return}Jz(t,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom"),setTimeout(()=>n.dragging=!1,500),nt(s,[{chart:t}])}function aV(t,e,n){if(dp(ll(n.wheel),e)){nt(n.onZoomRejected,[{chart:t,event:e}]);return}if(r_(t,e,n)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function lV(t,e){const{handlers:{onZoomComplete:n},options:{zoom:i}}=qt(t);if(!aV(t,e,i))return;const s=e.target.getBoundingClientRect(),r=1+(e.deltaY>=0?-i.wheel.speed:i.wheel.speed),o={x:r,y:r,focalPoint:{x:e.clientX-s.left,y:e.clientY-s.top}};hp(t,o),n&&n()}function cV(t,e,n,i){n&&(qt(t).handlers[e]=Uz(()=>nt(n,[{chart:t}]),i))}function uV(t,e){const n=t.canvas,{wheel:i,drag:s,onZoomComplete:r}=e.zoom;i.enabled?(Cc(t,n,"wheel",lV),cV(t,"onZoomComplete",r,250)):Ci(t,"wheel"),s.enabled?(Cc(t,n,"mousedown",rV),Cc(t,n.ownerDocument,"mouseup",oV)):(Ci(t,"mousedown"),Ci(t,"mousemove"),Ci(t,"mouseup"))}function dV(t){Ci(t,"mousedown"),Ci(t,"mousemove"),Ci(t,"mouseup"),Ci(t,"wheel"),Ci(t,"click")}function hV(t,e){return function(n,i){const{pan:s,zoom:r={}}=e.options;if(!s||!s.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(dp(ll(s),o)||Qv(ll(r.drag),o))?(nt(s.onPanRejected,[{chart:t,event:i}]),!1):!0}}function fV(t,e){const n=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY),s=n/i;let r,o;return s>.3&&s<1.7?r=o=!0:n>i?r=!0:o=!0,{x:r,y:o}}function a_(t,e,n){if(e.scale){const{center:i,pointers:s}=n,r=1/e.scale*n.scale,o=n.target.getBoundingClientRect(),a=fV(s[0],s[1]),l=e.options.zoom.mode,c={x:a.x&&jn(l,"x",t)?r:1,y:a.y&&jn(l,"y",t)?r:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};hp(t,c),e.scale=n.scale}}function pV(t,e){e.options.zoom.pinch.enabled&&(e.scale=1)}function mV(t,e,n){e.scale&&(a_(t,e,n),e.scale=null,nt(e.options.zoom.onZoomComplete,[{chart:t}]))}function l_(t,e,n){const i=e.delta;i&&(e.panning=!0,i_(t,{x:n.deltaX-i.x,y:n.deltaY-i.y},e.panScales),e.delta={x:n.deltaX,y:n.deltaY})}function gV(t,e,n){const{enabled:i,overScaleMode:s,onPanStart:r,onPanRejected:o}=e.options.pan;if(!i)return;const a=n.target.getBoundingClientRect(),l={x:n.center.x-a.left,y:n.center.y-a.top};if(nt(r,[{chart:t,event:n,point:l}])===!1)return nt(o,[{chart:t,event:n}]);e.panScales=s&&e_(s,l,t),e.delta={x:0,y:0},clearTimeout(e.panEndTimeout),l_(t,e,n)}function bV(t,e){e.delta=null,e.panning&&(e.panEndTimeout=setTimeout(()=>e.panning=!1,500),nt(e.options.pan.onPanComplete,[{chart:t}]))}const Yh=new WeakMap;function yV(t,e){const n=qt(t),i=t.canvas,{pan:s,zoom:r}=e,o=new Va.Manager(i);r&&r.pinch.enabled&&(o.add(new Va.Pinch),o.on("pinchstart",()=>pV(t,n)),o.on("pinch",a=>a_(t,n,a)),o.on("pinchend",a=>mV(t,n,a))),s&&s.enabled&&(o.add(new Va.Pan({threshold:s.threshold,enable:hV(t,n)})),o.on("panstart",a=>gV(t,n,a)),o.on("panmove",a=>l_(t,n,a)),o.on("panend",()=>bV(t,n))),Yh.set(t,o)}function xV(t){const e=Yh.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),Yh.delete(t))}var vV="1.2.1",_V={id:"zoom",version:vV,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,n){const i=qt(t);i.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),Va&&yV(t,n),t.pan=(s,r,o)=>i_(t,s,r,o),t.zoom=(s,r)=>hp(t,s,r),t.zoomScale=(s,r,o)=>Qz(t,s,r,o),t.resetZoom=s=>eV(t,s),t.getZoomLevel=()=>nV(t),t.getInitialScaleBounds=()=>s_(t),t.isZoomedOrPanned=()=>iV(t)},beforeEvent(t){const e=qt(t);if(e.panning||e.dragging)return!1},beforeUpdate:function(t,e,n){const i=qt(t);i.options=n,uV(t,n)},beforeDatasetsDraw:function(t,e,n){const{dragStart:i,dragEnd:s}=qt(t);if(s){const{left:r,top:o,width:a,height:l}=o_(t,n.zoom.mode,i,s),c=n.zoom.drag,u=t.ctx;u.save(),u.beginPath(),u.fillStyle=c.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(r,o,a,l),c.borderWidth>0&&(u.lineWidth=c.borderWidth,u.strokeStyle=c.borderColor||"rgba(225,225,225)",u.strokeRect(r,o,a,l)),u.restore()}},stop:function(t){dV(t),Va&&xV(t),Wz(t)},panFunctions:Xh,zoomFunctions:Kh};const wV="Configura\xE7\xF5es",SV="Pr\xE9-definido",MV="Aleat\xF3rio",CV="Semente",TV="Personalizado",EV="Branco",DV="Amarelo",PV="Azul",LV="Laranja",RV="Vermelho",AV="Sucesso",IV="Planeta",kV="ou",OV="Escalas",FV="Tamanho",NV="Estrela",BV="Planetas",zV="Sat\xE9lites",VV="Dist\xE2ncia",UV="Visibilidade",HV="\xD3rbitas",WV="Rota\xE7\xE3o",GV="ID",jV="Come\xE7o",$V="Pontos",KV="Brilho";var XV={"Pause / Play":"Parar / Iniciar.","Close Brightness Detector":"Fechar Detector de Brilho","Open Brightness Detector":"Abrir Detector de Brilho","Start brightness measurements":"Iniciar medidas de brilho.","Enable interface hints":"Ativar dicas da interface","Disable interface hints":"Desativar dicas da interface",Settings:wV,"Advanced Mode":"Modo Avan\xE7ado","Additional settings options":"Op\xE7\xF5es adicionais para as configura\xE7\xF5es","Star Systems":"Sistemas Estelares",Defaults:SV,"Inner Solar":"Solar Interno",Random:MV,"Remember this number to rebuild the same star system":"Guarde este n\xFAmero para reconstruir o mesmo sistema estelar",Seed:CV,"Generate a random seed":"Gera aleatoriamente uma semente","Create Star System":"Criar Sistema Estelar","Use a seed to create a new star system":"Utiliza a semente para criar um novo sistema estelar",Custom:TV,White:EV,Yellow:DV,Blue:PV,Orange:LV,Red:RV,Success:AV,"Code copied to clipboard":"C\xF3digo copiado para a \xE1rea de transfer\xEAncia","Select a star color":"Selecione uma cor para a estrela","Star Color":"Cor da Estrela","Star Radius":"Raio da Estrela","Define a star radius":"Defina o raio da estrela","Number of planets":"N\xFAmero de Planetas","Define how many planets compose the star system":"Defina quantos planetas comp\xF5e o sistema estelar",Planet:IV,"Planet Radius":"Raio do Planeta","Define planet radius":"Defina o raio do planeta","Advanced Parameters":"Par\xE2metros Avan\xE7ados","Orbit semi-major axis":"Semieixo Maior da \xD3rbita","Define the planet orbit radius":"Defina o raio da \xF3rbita do planeta","Orbit Eccentricity":"Excentricidade da \xD3rbita","Define the planet orbit eccentricity":"Defina a excentricidade da \xF3rbita do planeta","Orbit Perihelion Longitude":"Longitude do Peri\xE9lio da \xD3rbita","Define the perihelion longitude of the planet orbit. It changes the relative orientation between planet orbits":"Defina a longitude do peri\xE9lio da \xF3rbita do planeta. Altera a orienta\xE7\xE3o relativa entre \xF3rbitas el\xEDpticas","Orbit Inclination":"Inclina\xE7\xE3o da \xD3rbita","Define the planet orbit inclination relative to plane of reference of the star system":"Defina a inclina\xE7\xE3o da \xF3rbita do planeta em rela\xE7\xE3o ao plano referencial do sistema estelar.","Use the code below":"Utilize o c\xF3digo abaixo",or:kV,"insert another code to recover previous configurations":"insira outro para recuperar configura\xE7\xF5es anteriores","This code represent the customized star system. Save this code to reproduce this star system later":"Este c\xF3digo representa o sistema estelar personalizado. Guarde este c\xF3digo para reproduzir este sistema posteriormente.","JSON Code":"C\xF3digo JSON","Copy the current code to clipboard":"Copia para a \xE1rea de transfer\xEAncia o c\xF3digo-chave atual","Use the JSON code to create a star system":"Utiliza o c\xF3digo JSON para criar um sistema estelar","Visual Representation":"Representa\xE7\xE3o Visual",Scales:OV,Size:FV,Star:NV,"Scale apparent size of the star":"Escala o tamanho aparente da estrela",Planets:BV,"Scale apparent size of planets":"Escala o tamanho aparente dos planetas",Satellites:zV,"Scale apparent size of satellites":"Escala o tamanho aparente dos sat\xE9lites",Distance:VV,"Scale apparent orbit radius of planets":"Escala o raio orbital dos planetas","Scale apparent orbit radius of satellites":"Escala o raio orbital dos sat\xE9lites",Visibility:UV,Orbits:HV,"Hide / Show orbit lines":"Esconde / Mostra as linhas das \xF3rbitas.","Celestial Bodies":"Corpos Celestes","Hide / Show star":"Esconde / Mostra a estrela.","Hide / Show planets":"Esconde / Mostra os planetas.","Hide / Show satellites":"Esconde / Mostra os sat\xE9lites.","Simulation Parameters":"Par\xE2metros da Simula\xE7\xE3o","Simulation Speed":"Velocidade da Simula\xE7\xE3o","Define how many simulations steps are performed for each new frame. Larger numbers speed up the simulation, but may degrade computational performance":"Defina quantos passos de simula\xE7\xE3o s\xE3o realizados para cada novo quadro. N\xFAmeros maiores aceleram a simula\xE7\xE3o, mas podem piorar a performance computacional","Simulation Step (earth days)":"Passo de Simula\xE7\xE3o (dias terrestres)","Define the size of simulation (integration) steps used by the motion equations integrator. Larger numbers speed up the simulation without degrading computational performance, but also end up accumulating more errors at every new simulation step":"Defina o tamanho do passo de simula\xE7\xE3o (integra\xE7\xE3o) utilizado no integrador das equa\xE7\xF5es de movimento. Passos maiores aceleram a simula\xE7\xE3o sem degradar a performance computacional, mas tamb\xE9m acabam acumulando mais erros a cada passo de simula\xE7\xE3o","Orbital Inclination":"Inclina\xE7\xE3o Orbital","Define if orbital inclination of planets and satellites is applied":"Defina se a inclina\xE7\xE3o das \xF3rbitas de planetas e sat\xE9lites ser\xE1 aplicada",Rotation:WV,"Define if celestial bodies rotate around their own axis of rotation. This simulation ignores rotation obliquity":"Defina se corpos celestes rodam em torno do pr\xF3prio eixo de rota\xE7\xE3o. Esta simula\xE7\xE3o ignora obliquidade nas rota\xE7\xF5es","Brightness Detection":"Detec\xE7\xE3o do Brilho","Max number of points per plot":"N\xFAmero m\xE1ximo de pontos por gr\xE1fico","Define the maximum number of points which plots for real-time measurements or collected data may hold. Larger numbers produce more informative plots, but may degrade computational performance":"Defina o n\xFAmero m\xE1ximo de pontos que os gr\xE1ficos de medida em tempo real e coleta podem conter. N\xFAmeros maiores constroem gr\xE1ficos mais informativos, mas podem piorar a performance computacional","Measured points per second":"Pontos medidos por segundo","Define how many brightness points are measured per second. Larger number increase the temporal resolution of light curves, but may degrade computational performance":"Defina quantos pontos de brilho ser\xE3o medidos por segundo. N\xFAmeros maiores aumentam a resolu\xE7\xE3o temporal das curvas de brilho, mas podem piorar a performance computacional","Brightness Detector":"Detector de Brilho","Reset Measurements":"Reiniciar Medidas","Reset all measured brightness data on the real-time plot. Data stored in collections are preserved":"Reinicia todos dados de brilho detectados no gr\xE1fico em tempo em real. Dados salvos em cole\xE7\xF5es s\xE3o preservados","Stop Collecting Data":"Parar Coleta de Dados","Start Collecting Data":"Iniciar Coleta de Dados","Store new measurements in collections for further analysis. Collections can be accessed in the menu below.":"Guarda novas medidas em cole\xE7\xF5es para an\xE1lise futura. Cole\xE7\xF5es podem ser acessadas no menu abaixo","Data Collections":"Cole\xE7\xF5es de Dados",ID:GV,"Star System":"Sistema Estelar",Start:jV,Points:$V,"Visualize data collection":"Visualiza cole\xE7\xE3o de dados.","Delete data collection":"Deleta cole\xE7\xE3o de dados.","Light Curve - Collection":"Curva de Brilho - Cole\xE7\xE3o","Export Plot":"Exportar Gr\xE1fico","Export plot to a new window tab":"Exporta gr\xE1fico para uma nova aba da janela","Time (earth days)":"Tempo (dias terrestres)",Brightness:KV,"Light Curve":"Curva de Brilho"};const YV=s1({legacy:!1,globalInjection:!0,locale:navigator.language||navigator.userLanguage,fallbackLocale:"en",missingWarn:!1,fallbackWarn:!1,messages:{en:{},"pt-BR":XV}}),Zo=jS(zk);Zo.use(YV);Zo.use(Uk,{ripple:!0});Zo.use(Hk);Zo.use(xo,{plugins:[_V,zz]});Zo.directive("tooltip",Yk);Zo.mount("#app");
